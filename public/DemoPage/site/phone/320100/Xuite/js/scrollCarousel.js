/*
	base on js file : iScroll v5.1.3
	ref : http://www.zhangyunling.com/?p=378
*/
function ScrollCarousel(i,t,e){var l={circle:!0,automatic:!0,autoTime:2e3};t=t||{},e=$.isPlainObject(e)?e:{},e=$.extend(l,e),this.timer=null;var s=null,o=e.circle;return o===!0&&this.addCustomInit(i,o),this.initWidth(i),this.initIndicator(i,o),s=new IScroll(i,t),o===!0&&s.goToPage(1,0,0),e.automatic===!0&&this.cicleEvent(s,e),this.initResize(s,i),s}$.fn.extend({scrollCarousel:function(i,t){$.each($(this),function(){var e=$.extend({},i),l=e.indicators||{};l.el=$(this).next(".indicator:eq(0)")[0],e.indicators=l,new ScrollCarousel(this,e,t)})}}),ScrollCarousel.prototype.initResize=function(i,t){this.initResize=null;var e=this;$(window).on("resize",function(){e.initWidth(t),i.refresh()})},ScrollCarousel.prototype.initWidth=function(i){var i=$(i),t=(i.nextAll(".indicator"),i.width()),e=i.find(".carousel-slide");e.width(t),i.find(".carousel-containter").width(t*e.size())},ScrollCarousel.prototype.addCustomInit=function(i,t){if(this.addCustomInit=null,t===!0){var e=$(i),l=e.find(".carousel-slide"),s=l.eq(0),o=l.filter(":last"),n=$('<div class="carousel-slide">'+o.html()+"</div>"),r=$('<div class="carousel-slide">'+s.html()+"</div>"),a=l.size();a&&(s=l.eq(0),o=l.filter(":last"),n=$('<div class="carousel-slide">'+o.html()+"</div>"),r=$('<div class="carousel-slide">'+s.html()+"</div>"),s.before(n),o.after(r))}},ScrollCarousel.prototype.cicleEvent=function(i,t){function e(){var t=this.currentPage,e=t.pageX,l=t.pageY,o=e+1;clearTimeout(r.timer),0==e?(i.goToPage(s-2,l,0),o=s-1):e==s-1&&(i.goToPage(1,l,0),o=2),r.timer=setTimeout(function(){i.goToPage(o,l)},n)}function l(){var t=this.currentPage,e=t.pageX,l=t.pageY,o=0;clearTimeout(r.timer),o=e==s-1?0:e+1,r.timer=setTimeout(function(){i.goToPage(o,l)},n)}this.cicleEvent=null;var s=$(i.scroller).find(".carousel-slide").size(),o=t.circle,n=(t.automatic,t.autoTime),r=this,a=o?e:l;i.on("scrollStart",function(){clearTimeout(r.timer),r.timer=setTimeout(function(){a.call(i)},n)}),i.on("scrollEnd",a),a.call(i)},ScrollCarousel.prototype.initIndicator=function(i,t){function e(){var i=parseInt(l.css("right"))||0;d=n.attr("class"),n.eq(0).before('<div class = "'+d+'" style = "visibility: hidden;"></div>'),n.filter(":last").after('<div class = "'+d+'" style = "visibility: hidden;"></div>'),l.find(".left-overlay").css("width",o+c),l.find(".right-overlay").css("width",o+c),a+=2,n=l.css("right",i-o-c).find(".dotty-target")}this.initIndicator=null;var l=$(i).nextAll(".indicator:eq(0)"),s=l.find(".indicator-dotty"),o=0,n=null,r=0,a=0,c=0,d="";s.height()||(o=l.height()||10,n=l.find(".dotty-target"),a=n.size(),c=parseInt(n.css("margin-right")),t&&e(),s.css({width:o,height:o}),n.css({width:o,height:o}),r=(o+c)*a-c,l.css("width",r))};