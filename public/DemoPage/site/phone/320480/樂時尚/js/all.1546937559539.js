/*! jQuery v1.11.1 | (c) 2005, 2014 jQuery Foundation, Inc. | jquery.org/license */
!function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){var c=[],d=c.slice,e=c.concat,f=c.push,g=c.indexOf,h={},i=h.toString,j=h.hasOwnProperty,k={},l="1.11.1",m=function(a,b){return new m.fn.init(a,b)},n=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,o=/^-ms-/,p=/-([\da-z])/gi,q=function(a,b){return b.toUpperCase()};m.fn=m.prototype={jquery:l,constructor:m,selector:"",length:0,toArray:function(){return d.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:d.call(this)},pushStack:function(a){var b=m.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return m.each(this,a,b)},map:function(a){return this.pushStack(m.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(d.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:f,sort:c.sort,splice:c.splice},m.extend=m.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||m.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(e=arguments[h]))for(d in e)a=g[d],c=e[d],g!==c&&(j&&c&&(m.isPlainObject(c)||(b=m.isArray(c)))?(b?(b=!1,f=a&&m.isArray(a)?a:[]):f=a&&m.isPlainObject(a)?a:{},g[d]=m.extend(j,f,c)):void 0!==c&&(g[d]=c));return g},m.extend({expando:"jQuery"+(l+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===m.type(a)},isArray:Array.isArray||function(a){return"array"===m.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){return!m.isArray(a)&&a-parseFloat(a)>=0},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},isPlainObject:function(a){var b;if(!a||"object"!==m.type(a)||a.nodeType||m.isWindow(a))return!1;try{if(a.constructor&&!j.call(a,"constructor")&&!j.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}if(k.ownLast)for(b in a)return j.call(a,b);for(b in a);return void 0===b||j.call(a,b)},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?h[i.call(a)]||"object":typeof a},globalEval:function(b){b&&m.trim(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(o,"ms-").replace(p,q)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,c){var d,e=0,f=a.length,g=r(a);if(c){if(g){for(;f>e;e++)if(d=b.apply(a[e],c),d===!1)break}else for(e in a)if(d=b.apply(a[e],c),d===!1)break}else if(g){for(;f>e;e++)if(d=b.call(a[e],e,a[e]),d===!1)break}else for(e in a)if(d=b.call(a[e],e,a[e]),d===!1)break;return a},trim:function(a){return null==a?"":(a+"").replace(n,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(r(Object(a))?m.merge(c,"string"==typeof a?[a]:a):f.call(c,a)),c},inArray:function(a,b,c){var d;if(b){if(g)return g.call(b,a,c);for(d=b.length,c=c?0>c?Math.max(0,d+c):c:0;d>c;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,b){var c=+b.length,d=0,e=a.length;while(c>d)a[e++]=b[d++];if(c!==c)while(void 0!==b[d])a[e++]=b[d++];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;g>f;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,c){var d,f=0,g=a.length,h=r(a),i=[];if(h)for(;g>f;f++)d=b(a[f],f,c),null!=d&&i.push(d);else for(f in a)d=b(a[f],f,c),null!=d&&i.push(d);return e.apply([],i)},guid:1,proxy:function(a,b){var c,e,f;return"string"==typeof b&&(f=a[b],b=a,a=f),m.isFunction(a)?(c=d.call(arguments,2),e=function(){return a.apply(b||this,c.concat(d.call(arguments)))},e.guid=a.guid=a.guid||m.guid++,e):void 0},now:function(){return+new Date},support:k}),m.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){h["[object "+b+"]"]=b.toLowerCase()});function r(a){var b=a.length,c=m.type(a);return"function"===c||m.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a}var s=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u="sizzle"+-new Date,v=a.document,w=0,x=0,y=gb(),z=gb(),A=gb(),B=function(a,b){return a===b&&(l=!0),0},C="undefined",D=1<<31,E={}.hasOwnProperty,F=[],G=F.pop,H=F.push,I=F.push,J=F.slice,K=F.indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(this[b]===a)return b;return-1},L="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",M="[\\x20\\t\\r\\n\\f]",N="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",O=N.replace("w","w#"),P="\\["+M+"*("+N+")(?:"+M+"*([*^$|!~]?=)"+M+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+O+"))|)"+M+"*\\]",Q=":("+N+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+P+")*)|.*)\\)|)",R=new RegExp("^"+M+"+|((?:^|[^\\\\])(?:\\\\.)*)"+M+"+$","g"),S=new RegExp("^"+M+"*,"+M+"*"),T=new RegExp("^"+M+"*([>+~]|"+M+")"+M+"*"),U=new RegExp("="+M+"*([^\\]'\"]*?)"+M+"*\\]","g"),V=new RegExp(Q),W=new RegExp("^"+O+"$"),X={ID:new RegExp("^#("+N+")"),CLASS:new RegExp("^\\.("+N+")"),TAG:new RegExp("^("+N.replace("w","w*")+")"),ATTR:new RegExp("^"+P),PSEUDO:new RegExp("^"+Q),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+M+"*(even|odd|(([+-]|)(\\d*)n|)"+M+"*(?:([+-]|)"+M+"*(\\d+)|))"+M+"*\\)|)","i"),bool:new RegExp("^(?:"+L+")$","i"),needsContext:new RegExp("^"+M+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+M+"*((?:-\\d)?\\d*)"+M+"*\\)|)(?=[^-]|$)","i")},Y=/^(?:input|select|textarea|button)$/i,Z=/^h\d$/i,$=/^[^{]+\{\s*\[native \w/,_=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ab=/[+~]/,bb=/'|\\/g,cb=new RegExp("\\\\([\\da-f]{1,6}"+M+"?|("+M+")|.)","ig"),db=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)};try{I.apply(F=J.call(v.childNodes),v.childNodes),F[v.childNodes.length].nodeType}catch(eb){I={apply:F.length?function(a,b){H.apply(a,J.call(b))}:function(a,b){var c=a.length,d=0;while(a[c++]=b[d++]);a.length=c-1}}}function fb(a,b,d,e){var f,h,j,k,l,o,r,s,w,x;if((b?b.ownerDocument||b:v)!==n&&m(b),b=b||n,d=d||[],!a||"string"!=typeof a)return d;if(1!==(k=b.nodeType)&&9!==k)return[];if(p&&!e){if(f=_.exec(a))if(j=f[1]){if(9===k){if(h=b.getElementById(j),!h||!h.parentNode)return d;if(h.id===j)return d.push(h),d}else if(b.ownerDocument&&(h=b.ownerDocument.getElementById(j))&&t(b,h)&&h.id===j)return d.push(h),d}else{if(f[2])return I.apply(d,b.getElementsByTagName(a)),d;if((j=f[3])&&c.getElementsByClassName&&b.getElementsByClassName)return I.apply(d,b.getElementsByClassName(j)),d}if(c.qsa&&(!q||!q.test(a))){if(s=r=u,w=b,x=9===k&&a,1===k&&"object"!==b.nodeName.toLowerCase()){o=g(a),(r=b.getAttribute("id"))?s=r.replace(bb,"\\$&"):b.setAttribute("id",s),s="[id='"+s+"'] ",l=o.length;while(l--)o[l]=s+qb(o[l]);w=ab.test(a)&&ob(b.parentNode)||b,x=o.join(",")}if(x)try{return I.apply(d,w.querySelectorAll(x)),d}catch(y){}finally{r||b.removeAttribute("id")}}}return i(a.replace(R,"$1"),b,d,e)}function gb(){var a=[];function b(c,e){return a.push(c+" ")>d.cacheLength&&delete b[a.shift()],b[c+" "]=e}return b}function hb(a){return a[u]=!0,a}function ib(a){var b=n.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function jb(a,b){var c=a.split("|"),e=a.length;while(e--)d.attrHandle[c[e]]=b}function kb(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||D)-(~a.sourceIndex||D);if(d)return d;if(c)while(c=c.nextSibling)if(c===b)return-1;return a?1:-1}function lb(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function mb(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function nb(a){return hb(function(b){return b=+b,hb(function(c,d){var e,f=a([],c.length,b),g=f.length;while(g--)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function ob(a){return a&&typeof a.getElementsByTagName!==C&&a}c=fb.support={},f=fb.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},m=fb.setDocument=function(a){var b,e=a?a.ownerDocument||a:v,g=e.defaultView;return e!==n&&9===e.nodeType&&e.documentElement?(n=e,o=e.documentElement,p=!f(e),g&&g!==g.top&&(g.addEventListener?g.addEventListener("unload",function(){m()},!1):g.attachEvent&&g.attachEvent("onunload",function(){m()})),c.attributes=ib(function(a){return a.className="i",!a.getAttribute("className")}),c.getElementsByTagName=ib(function(a){return a.appendChild(e.createComment("")),!a.getElementsByTagName("*").length}),c.getElementsByClassName=$.test(e.getElementsByClassName)&&ib(function(a){return a.innerHTML="<div class='a'></div><div class='a i'></div>",a.firstChild.className="i",2===a.getElementsByClassName("i").length}),c.getById=ib(function(a){return o.appendChild(a).id=u,!e.getElementsByName||!e.getElementsByName(u).length}),c.getById?(d.find.ID=function(a,b){if(typeof b.getElementById!==C&&p){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},d.filter.ID=function(a){var b=a.replace(cb,db);return function(a){return a.getAttribute("id")===b}}):(delete d.find.ID,d.filter.ID=function(a){var b=a.replace(cb,db);return function(a){var c=typeof a.getAttributeNode!==C&&a.getAttributeNode("id");return c&&c.value===b}}),d.find.TAG=c.getElementsByTagName?function(a,b){return typeof b.getElementsByTagName!==C?b.getElementsByTagName(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){while(c=f[e++])1===c.nodeType&&d.push(c);return d}return f},d.find.CLASS=c.getElementsByClassName&&function(a,b){return typeof b.getElementsByClassName!==C&&p?b.getElementsByClassName(a):void 0},r=[],q=[],(c.qsa=$.test(e.querySelectorAll))&&(ib(function(a){a.innerHTML="<select msallowclip=''><option selected=''></option></select>",a.querySelectorAll("[msallowclip^='']").length&&q.push("[*^$]="+M+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||q.push("\\["+M+"*(?:value|"+L+")"),a.querySelectorAll(":checked").length||q.push(":checked")}),ib(function(a){var b=e.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&q.push("name"+M+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||q.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),q.push(",.*:")})),(c.matchesSelector=$.test(s=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector))&&ib(function(a){c.disconnectedMatch=s.call(a,"div"),s.call(a,"[s!='']:x"),r.push("!=",Q)}),q=q.length&&new RegExp(q.join("|")),r=r.length&&new RegExp(r.join("|")),b=$.test(o.compareDocumentPosition),t=b||$.test(o.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)while(b=b.parentNode)if(b===a)return!0;return!1},B=b?function(a,b){if(a===b)return l=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!c.sortDetached&&b.compareDocumentPosition(a)===d?a===e||a.ownerDocument===v&&t(v,a)?-1:b===e||b.ownerDocument===v&&t(v,b)?1:k?K.call(k,a)-K.call(k,b):0:4&d?-1:1)}:function(a,b){if(a===b)return l=!0,0;var c,d=0,f=a.parentNode,g=b.parentNode,h=[a],i=[b];if(!f||!g)return a===e?-1:b===e?1:f?-1:g?1:k?K.call(k,a)-K.call(k,b):0;if(f===g)return kb(a,b);c=a;while(c=c.parentNode)h.unshift(c);c=b;while(c=c.parentNode)i.unshift(c);while(h[d]===i[d])d++;return d?kb(h[d],i[d]):h[d]===v?-1:i[d]===v?1:0},e):n},fb.matches=function(a,b){return fb(a,null,null,b)},fb.matchesSelector=function(a,b){if((a.ownerDocument||a)!==n&&m(a),b=b.replace(U,"='$1']"),!(!c.matchesSelector||!p||r&&r.test(b)||q&&q.test(b)))try{var d=s.call(a,b);if(d||c.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return fb(b,n,null,[a]).length>0},fb.contains=function(a,b){return(a.ownerDocument||a)!==n&&m(a),t(a,b)},fb.attr=function(a,b){(a.ownerDocument||a)!==n&&m(a);var e=d.attrHandle[b.toLowerCase()],f=e&&E.call(d.attrHandle,b.toLowerCase())?e(a,b,!p):void 0;return void 0!==f?f:c.attributes||!p?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null},fb.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},fb.uniqueSort=function(a){var b,d=[],e=0,f=0;if(l=!c.detectDuplicates,k=!c.sortStable&&a.slice(0),a.sort(B),l){while(b=a[f++])b===a[f]&&(e=d.push(f));while(e--)a.splice(d[e],1)}return k=null,a},e=fb.getText=function(a){var b,c="",d=0,f=a.nodeType;if(f){if(1===f||9===f||11===f){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=e(a)}else if(3===f||4===f)return a.nodeValue}else while(b=a[d++])c+=e(b);return c},d=fb.selectors={cacheLength:50,createPseudo:hb,match:X,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(cb,db),a[3]=(a[3]||a[4]||a[5]||"").replace(cb,db),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||fb.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&fb.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return X.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&V.test(c)&&(b=g(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(cb,db).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=y[a+" "];return b||(b=new RegExp("(^|"+M+")"+a+"("+M+"|$)"))&&y(a,function(a){return b.test("string"==typeof a.className&&a.className||typeof a.getAttribute!==C&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=fb.attr(d,a);return null==e?"!="===b:b?(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e+" ").indexOf(c)>-1:"|="===b?e===c||e.slice(0,c.length+1)===c+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h;if(q){if(f){while(p){l=b;while(l=l[p])if(h?l.nodeName.toLowerCase()===r:1===l.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){k=q[u]||(q[u]={}),j=k[a]||[],n=j[0]===w&&j[1],m=j[0]===w&&j[2],l=n&&q.childNodes[n];while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if(1===l.nodeType&&++m&&l===b){k[a]=[w,n,m];break}}else if(s&&(j=(b[u]||(b[u]={}))[a])&&j[0]===w)m=j[1];else while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if((h?l.nodeName.toLowerCase()===r:1===l.nodeType)&&++m&&(s&&((l[u]||(l[u]={}))[a]=[w,m]),l===b))break;return m-=e,m===d||m%d===0&&m/d>=0}}},PSEUDO:function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||fb.error("unsupported pseudo: "+a);return e[u]?e(b):e.length>1?(c=[a,a,"",b],d.setFilters.hasOwnProperty(a.toLowerCase())?hb(function(a,c){var d,f=e(a,b),g=f.length;while(g--)d=K.call(a,f[g]),a[d]=!(c[d]=f[g])}):function(a){return e(a,0,c)}):e}},pseudos:{not:hb(function(a){var b=[],c=[],d=h(a.replace(R,"$1"));return d[u]?hb(function(a,b,c,e){var f,g=d(a,null,e,[]),h=a.length;while(h--)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),!c.pop()}}),has:hb(function(a){return function(b){return fb(a,b).length>0}}),contains:hb(function(a){return function(b){return(b.textContent||b.innerText||e(b)).indexOf(a)>-1}}),lang:hb(function(a){return W.test(a||"")||fb.error("unsupported lang: "+a),a=a.replace(cb,db).toLowerCase(),function(b){var c;do if(c=p?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===o},focus:function(a){return a===n.activeElement&&(!n.hasFocus||n.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!d.pseudos.empty(a)},header:function(a){return Z.test(a.nodeName)},input:function(a){return Y.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:nb(function(){return[0]}),last:nb(function(a,b){return[b-1]}),eq:nb(function(a,b,c){return[0>c?c+b:c]}),even:nb(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:nb(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:nb(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:nb(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}},d.pseudos.nth=d.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})d.pseudos[b]=lb(b);for(b in{submit:!0,reset:!0})d.pseudos[b]=mb(b);function pb(){}pb.prototype=d.filters=d.pseudos,d.setFilters=new pb,g=fb.tokenize=function(a,b){var c,e,f,g,h,i,j,k=z[a+" "];if(k)return b?0:k.slice(0);h=a,i=[],j=d.preFilter;while(h){(!c||(e=S.exec(h)))&&(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),c=!1,(e=T.exec(h))&&(c=e.shift(),f.push({value:c,type:e[0].replace(R," ")}),h=h.slice(c.length));for(g in d.filter)!(e=X[g].exec(h))||j[g]&&!(e=j[g](e))||(c=e.shift(),f.push({value:c,type:g,matches:e}),h=h.slice(c.length));if(!c)break}return b?h.length:h?fb.error(a):z(a,i).slice(0)};function qb(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function rb(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=x++;return b.first?function(b,c,f){while(b=b[d])if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j=[w,f];if(g){while(b=b[d])if((1===b.nodeType||e)&&a(b,c,g))return!0}else while(b=b[d])if(1===b.nodeType||e){if(i=b[u]||(b[u]={}),(h=i[d])&&h[0]===w&&h[1]===f)return j[2]=h[2];if(i[d]=j,j[2]=a(b,c,g))return!0}}}function sb(a){return a.length>1?function(b,c,d){var e=a.length;while(e--)if(!a[e](b,c,d))return!1;return!0}:a[0]}function tb(a,b,c){for(var d=0,e=b.length;e>d;d++)fb(a,b[d],c);return c}function ub(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h));return g}function vb(a,b,c,d,e,f){return d&&!d[u]&&(d=vb(d)),e&&!e[u]&&(e=vb(e,f)),hb(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||tb(b||"*",h.nodeType?[h]:h,[]),q=!a||!f&&b?p:ub(p,m,a,h,i),r=c?e||(f?a:o||d)?[]:g:q;if(c&&c(q,r,h,i),d){j=ub(r,n),d(j,[],h,i),k=j.length;while(k--)(l=j[k])&&(r[n[k]]=!(q[n[k]]=l))}if(f){if(e||a){if(e){j=[],k=r.length;while(k--)(l=r[k])&&j.push(q[k]=l);e(null,r=[],j,i)}k=r.length;while(k--)(l=r[k])&&(j=e?K.call(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}else r=ub(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):I.apply(g,r)})}function wb(a){for(var b,c,e,f=a.length,g=d.relative[a[0].type],h=g||d.relative[" "],i=g?1:0,k=rb(function(a){return a===b},h,!0),l=rb(function(a){return K.call(b,a)>-1},h,!0),m=[function(a,c,d){return!g&&(d||c!==j)||((b=c).nodeType?k(a,c,d):l(a,c,d))}];f>i;i++)if(c=d.relative[a[i].type])m=[rb(sb(m),c)];else{if(c=d.filter[a[i].type].apply(null,a[i].matches),c[u]){for(e=++i;f>e;e++)if(d.relative[a[e].type])break;return vb(i>1&&sb(m),i>1&&qb(a.slice(0,i-1).concat({value:" "===a[i-2].type?"*":""})).replace(R,"$1"),c,e>i&&wb(a.slice(i,e)),f>e&&wb(a=a.slice(e)),f>e&&qb(a))}m.push(c)}return sb(m)}function xb(a,b){var c=b.length>0,e=a.length>0,f=function(f,g,h,i,k){var l,m,o,p=0,q="0",r=f&&[],s=[],t=j,u=f||e&&d.find.TAG("*",k),v=w+=null==t?1:Math.random()||.1,x=u.length;for(k&&(j=g!==n&&g);q!==x&&null!=(l=u[q]);q++){if(e&&l){m=0;while(o=a[m++])if(o(l,g,h)){i.push(l);break}k&&(w=v)}c&&((l=!o&&l)&&p--,f&&r.push(l))}if(p+=q,c&&q!==p){m=0;while(o=b[m++])o(r,s,g,h);if(f){if(p>0)while(q--)r[q]||s[q]||(s[q]=G.call(i));s=ub(s)}I.apply(i,s),k&&!f&&s.length>0&&p+b.length>1&&fb.uniqueSort(i)}return k&&(w=v,j=t),r};return c?hb(f):f}return h=fb.compile=function(a,b){var c,d=[],e=[],f=A[a+" "];if(!f){b||(b=g(a)),c=b.length;while(c--)f=wb(b[c]),f[u]?d.push(f):e.push(f);f=A(a,xb(e,d)),f.selector=a}return f},i=fb.select=function(a,b,e,f){var i,j,k,l,m,n="function"==typeof a&&a,o=!f&&g(a=n.selector||a);if(e=e||[],1===o.length){if(j=o[0]=o[0].slice(0),j.length>2&&"ID"===(k=j[0]).type&&c.getById&&9===b.nodeType&&p&&d.relative[j[1].type]){if(b=(d.find.ID(k.matches[0].replace(cb,db),b)||[])[0],!b)return e;n&&(b=b.parentNode),a=a.slice(j.shift().value.length)}i=X.needsContext.test(a)?0:j.length;while(i--){if(k=j[i],d.relative[l=k.type])break;if((m=d.find[l])&&(f=m(k.matches[0].replace(cb,db),ab.test(j[0].type)&&ob(b.parentNode)||b))){if(j.splice(i,1),a=f.length&&qb(j),!a)return I.apply(e,f),e;break}}}return(n||h(a,o))(f,b,!p,e,ab.test(a)&&ob(b.parentNode)||b),e},c.sortStable=u.split("").sort(B).join("")===u,c.detectDuplicates=!!l,m(),c.sortDetached=ib(function(a){return 1&a.compareDocumentPosition(n.createElement("div"))}),ib(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||jb("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),c.attributes&&ib(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||jb("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),ib(function(a){return null==a.getAttribute("disabled")})||jb(L,function(a,b,c){var d;return c?void 0:a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),fb}(a);m.find=s,m.expr=s.selectors,m.expr[":"]=m.expr.pseudos,m.unique=s.uniqueSort,m.text=s.getText,m.isXMLDoc=s.isXML,m.contains=s.contains;var t=m.expr.match.needsContext,u=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,v=/^.[^:#\[\.,]*$/;function w(a,b,c){if(m.isFunction(b))return m.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return m.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(v.test(b))return m.filter(b,a,c);b=m.filter(b,a)}return m.grep(a,function(a){return m.inArray(a,b)>=0!==c})}m.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?m.find.matchesSelector(d,a)?[d]:[]:m.find.matches(a,m.grep(b,function(a){return 1===a.nodeType}))},m.fn.extend({find:function(a){var b,c=[],d=this,e=d.length;if("string"!=typeof a)return this.pushStack(m(a).filter(function(){for(b=0;e>b;b++)if(m.contains(d[b],this))return!0}));for(b=0;e>b;b++)m.find(a,d[b],c);return c=this.pushStack(e>1?m.unique(c):c),c.selector=this.selector?this.selector+" "+a:a,c},filter:function(a){return this.pushStack(w(this,a||[],!1))},not:function(a){return this.pushStack(w(this,a||[],!0))},is:function(a){return!!w(this,"string"==typeof a&&t.test(a)?m(a):a||[],!1).length}});var x,y=a.document,z=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,A=m.fn.init=function(a,b){var c,d;if(!a)return this;if("string"==typeof a){if(c="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&a.length>=3?[null,a,null]:z.exec(a),!c||!c[1]&&b)return!b||b.jquery?(b||x).find(a):this.constructor(b).find(a);if(c[1]){if(b=b instanceof m?b[0]:b,m.merge(this,m.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:y,!0)),u.test(c[1])&&m.isPlainObject(b))for(c in b)m.isFunction(this[c])?this[c](b[c]):this.attr(c,b[c]);return this}if(d=y.getElementById(c[2]),d&&d.parentNode){if(d.id!==c[2])return x.find(a);this.length=1,this[0]=d}return this.context=y,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):m.isFunction(a)?"undefined"!=typeof x.ready?x.ready(a):a(m):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),m.makeArray(a,this))};A.prototype=m.fn,x=m(y);var B=/^(?:parents|prev(?:Until|All))/,C={children:!0,contents:!0,next:!0,prev:!0};m.extend({dir:function(a,b,c){var d=[],e=a[b];while(e&&9!==e.nodeType&&(void 0===c||1!==e.nodeType||!m(e).is(c)))1===e.nodeType&&d.push(e),e=e[b];return d},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}}),m.fn.extend({has:function(a){var b,c=m(a,this),d=c.length;return this.filter(function(){for(b=0;d>b;b++)if(m.contains(this,c[b]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=t.test(a)||"string"!=typeof a?m(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&m.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?m.unique(f):f)},index:function(a){return a?"string"==typeof a?m.inArray(this[0],m(a)):m.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(m.unique(m.merge(this.get(),m(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});function D(a,b){do a=a[b];while(a&&1!==a.nodeType);return a}m.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return m.dir(a,"parentNode")},parentsUntil:function(a,b,c){return m.dir(a,"parentNode",c)},next:function(a){return D(a,"nextSibling")},prev:function(a){return D(a,"previousSibling")},nextAll:function(a){return m.dir(a,"nextSibling")},prevAll:function(a){return m.dir(a,"previousSibling")},nextUntil:function(a,b,c){return m.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return m.dir(a,"previousSibling",c)},siblings:function(a){return m.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return m.sibling(a.firstChild)},contents:function(a){return m.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:m.merge([],a.childNodes)}},function(a,b){m.fn[a]=function(c,d){var e=m.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=m.filter(d,e)),this.length>1&&(C[a]||(e=m.unique(e)),B.test(a)&&(e=e.reverse())),this.pushStack(e)}});var E=/\S+/g,F={};function G(a){var b=F[a]={};return m.each(a.match(E)||[],function(a,c){b[c]=!0}),b}m.Callbacks=function(a){a="string"==typeof a?F[a]||G(a):m.extend({},a);var b,c,d,e,f,g,h=[],i=!a.once&&[],j=function(l){for(c=a.memory&&l,d=!0,f=g||0,g=0,e=h.length,b=!0;h&&e>f;f++)if(h[f].apply(l[0],l[1])===!1&&a.stopOnFalse){c=!1;break}b=!1,h&&(i?i.length&&j(i.shift()):c?h=[]:k.disable())},k={add:function(){if(h){var d=h.length;!function f(b){m.each(b,function(b,c){var d=m.type(c);"function"===d?a.unique&&k.has(c)||h.push(c):c&&c.length&&"string"!==d&&f(c)})}(arguments),b?e=h.length:c&&(g=d,j(c))}return this},remove:function(){return h&&m.each(arguments,function(a,c){var d;while((d=m.inArray(c,h,d))>-1)h.splice(d,1),b&&(e>=d&&e--,f>=d&&f--)}),this},has:function(a){return a?m.inArray(a,h)>-1:!(!h||!h.length)},empty:function(){return h=[],e=0,this},disable:function(){return h=i=c=void 0,this},disabled:function(){return!h},lock:function(){return i=void 0,c||k.disable(),this},locked:function(){return!i},fireWith:function(a,c){return!h||d&&!i||(c=c||[],c=[a,c.slice?c.slice():c],b?i.push(c):j(c)),this},fire:function(){return k.fireWith(this,arguments),this},fired:function(){return!!d}};return k},m.extend({Deferred:function(a){var b=[["resolve","done",m.Callbacks("once memory"),"resolved"],["reject","fail",m.Callbacks("once memory"),"rejected"],["notify","progress",m.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return m.Deferred(function(c){m.each(b,function(b,f){var g=m.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&m.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?m.extend(a,d):d}},e={};return d.pipe=d.then,m.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b=0,c=d.call(arguments),e=c.length,f=1!==e||a&&m.isFunction(a.promise)?e:0,g=1===f?a:m.Deferred(),h=function(a,b,c){return function(e){b[a]=this,c[a]=arguments.length>1?d.call(arguments):e,c===i?g.notifyWith(b,c):--f||g.resolveWith(b,c)}},i,j,k;if(e>1)for(i=new Array(e),j=new Array(e),k=new Array(e);e>b;b++)c[b]&&m.isFunction(c[b].promise)?c[b].promise().done(h(b,k,c)).fail(g.reject).progress(h(b,j,i)):--f;return f||g.resolveWith(k,c),g.promise()}});var H;m.fn.ready=function(a){return m.ready.promise().done(a),this},m.extend({isReady:!1,readyWait:1,holdReady:function(a){a?m.readyWait++:m.ready(!0)},ready:function(a){if(a===!0?!--m.readyWait:!m.isReady){if(!y.body)return setTimeout(m.ready);m.isReady=!0,a!==!0&&--m.readyWait>0||(H.resolveWith(y,[m]),m.fn.triggerHandler&&(m(y).triggerHandler("ready"),m(y).off("ready")))}}});function I(){y.addEventListener?(y.removeEventListener("DOMContentLoaded",J,!1),a.removeEventListener("load",J,!1)):(y.detachEvent("onreadystatechange",J),a.detachEvent("onload",J))}function J(){(y.addEventListener||"load"===event.type||"complete"===y.readyState)&&(I(),m.ready())}m.ready.promise=function(b){if(!H)if(H=m.Deferred(),"complete"===y.readyState)setTimeout(m.ready);else if(y.addEventListener)y.addEventListener("DOMContentLoaded",J,!1),a.addEventListener("load",J,!1);else{y.attachEvent("onreadystatechange",J),a.attachEvent("onload",J);var c=!1;try{c=null==a.frameElement&&y.documentElement}catch(d){}c&&c.doScroll&&!function e(){if(!m.isReady){try{c.doScroll("left")}catch(a){return setTimeout(e,50)}I(),m.ready()}}()}return H.promise(b)};var K="undefined",L;for(L in m(k))break;k.ownLast="0"!==L,k.inlineBlockNeedsLayout=!1,m(function(){var a,b,c,d;c=y.getElementsByTagName("body")[0],c&&c.style&&(b=y.createElement("div"),d=y.createElement("div"),d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(d).appendChild(b),typeof b.style.zoom!==K&&(b.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",k.inlineBlockNeedsLayout=a=3===b.offsetWidth,a&&(c.style.zoom=1)),c.removeChild(d))}),function(){var a=y.createElement("div");if(null==k.deleteExpando){k.deleteExpando=!0;try{delete a.test}catch(b){k.deleteExpando=!1}}a=null}(),m.acceptData=function(a){var b=m.noData[(a.nodeName+" ").toLowerCase()],c=+a.nodeType||1;return 1!==c&&9!==c?!1:!b||b!==!0&&a.getAttribute("classid")===b};var M=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,N=/([A-Z])/g;function O(a,b,c){if(void 0===c&&1===a.nodeType){var d="data-"+b.replace(N,"-$1").toLowerCase();if(c=a.getAttribute(d),"string"==typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:M.test(c)?m.parseJSON(c):c}catch(e){}m.data(a,b,c)}else c=void 0}return c}function P(a){var b;for(b in a)if(("data"!==b||!m.isEmptyObject(a[b]))&&"toJSON"!==b)return!1;return!0}function Q(a,b,d,e){if(m.acceptData(a)){var f,g,h=m.expando,i=a.nodeType,j=i?m.cache:a,k=i?a[h]:a[h]&&h;
if(k&&j[k]&&(e||j[k].data)||void 0!==d||"string"!=typeof b)return k||(k=i?a[h]=c.pop()||m.guid++:h),j[k]||(j[k]=i?{}:{toJSON:m.noop}),("object"==typeof b||"function"==typeof b)&&(e?j[k]=m.extend(j[k],b):j[k].data=m.extend(j[k].data,b)),g=j[k],e||(g.data||(g.data={}),g=g.data),void 0!==d&&(g[m.camelCase(b)]=d),"string"==typeof b?(f=g[b],null==f&&(f=g[m.camelCase(b)])):f=g,f}}function R(a,b,c){if(m.acceptData(a)){var d,e,f=a.nodeType,g=f?m.cache:a,h=f?a[m.expando]:m.expando;if(g[h]){if(b&&(d=c?g[h]:g[h].data)){m.isArray(b)?b=b.concat(m.map(b,m.camelCase)):b in d?b=[b]:(b=m.camelCase(b),b=b in d?[b]:b.split(" ")),e=b.length;while(e--)delete d[b[e]];if(c?!P(d):!m.isEmptyObject(d))return}(c||(delete g[h].data,P(g[h])))&&(f?m.cleanData([a],!0):k.deleteExpando||g!=g.window?delete g[h]:g[h]=null)}}}m.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(a){return a=a.nodeType?m.cache[a[m.expando]]:a[m.expando],!!a&&!P(a)},data:function(a,b,c){return Q(a,b,c)},removeData:function(a,b){return R(a,b)},_data:function(a,b,c){return Q(a,b,c,!0)},_removeData:function(a,b){return R(a,b,!0)}}),m.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=m.data(f),1===f.nodeType&&!m._data(f,"parsedAttrs"))){c=g.length;while(c--)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=m.camelCase(d.slice(5)),O(f,d,e[d])));m._data(f,"parsedAttrs",!0)}return e}return"object"==typeof a?this.each(function(){m.data(this,a)}):arguments.length>1?this.each(function(){m.data(this,a,b)}):f?O(f,a,m.data(f,a)):void 0},removeData:function(a){return this.each(function(){m.removeData(this,a)})}}),m.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=m._data(a,b),c&&(!d||m.isArray(c)?d=m._data(a,b,m.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=m.queue(a,b),d=c.length,e=c.shift(),f=m._queueHooks(a,b),g=function(){m.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return m._data(a,c)||m._data(a,c,{empty:m.Callbacks("once memory").add(function(){m._removeData(a,b+"queue"),m._removeData(a,c)})})}}),m.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?m.queue(this[0],a):void 0===b?this:this.each(function(){var c=m.queue(this,a,b);m._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&m.dequeue(this,a)})},dequeue:function(a){return this.each(function(){m.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=m.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};"string"!=typeof a&&(b=a,a=void 0),a=a||"fx";while(g--)c=m._data(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var S=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,T=["Top","Right","Bottom","Left"],U=function(a,b){return a=b||a,"none"===m.css(a,"display")||!m.contains(a.ownerDocument,a)},V=m.access=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===m.type(c)){e=!0;for(h in c)m.access(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,m.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(m(a),c)})),b))for(;i>h;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f},W=/^(?:checkbox|radio)$/i;!function(){var a=y.createElement("input"),b=y.createElement("div"),c=y.createDocumentFragment();if(b.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",k.leadingWhitespace=3===b.firstChild.nodeType,k.tbody=!b.getElementsByTagName("tbody").length,k.htmlSerialize=!!b.getElementsByTagName("link").length,k.html5Clone="<:nav></:nav>"!==y.createElement("nav").cloneNode(!0).outerHTML,a.type="checkbox",a.checked=!0,c.appendChild(a),k.appendChecked=a.checked,b.innerHTML="<textarea>x</textarea>",k.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue,c.appendChild(b),b.innerHTML="<input type='radio' checked='checked' name='t'/>",k.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,k.noCloneEvent=!0,b.attachEvent&&(b.attachEvent("onclick",function(){k.noCloneEvent=!1}),b.cloneNode(!0).click()),null==k.deleteExpando){k.deleteExpando=!0;try{delete b.test}catch(d){k.deleteExpando=!1}}}(),function(){var b,c,d=y.createElement("div");for(b in{submit:!0,change:!0,focusin:!0})c="on"+b,(k[b+"Bubbles"]=c in a)||(d.setAttribute(c,"t"),k[b+"Bubbles"]=d.attributes[c].expando===!1);d=null}();var X=/^(?:input|select|textarea)$/i,Y=/^key/,Z=/^(?:mouse|pointer|contextmenu)|click/,$=/^(?:focusinfocus|focusoutblur)$/,_=/^([^.]*)(?:\.(.+)|)$/;function ab(){return!0}function bb(){return!1}function cb(){try{return y.activeElement}catch(a){}}m.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,n,o,p,q,r=m._data(a);if(r){c.handler&&(i=c,c=i.handler,e=i.selector),c.guid||(c.guid=m.guid++),(g=r.events)||(g=r.events={}),(k=r.handle)||(k=r.handle=function(a){return typeof m===K||a&&m.event.triggered===a.type?void 0:m.event.dispatch.apply(k.elem,arguments)},k.elem=a),b=(b||"").match(E)||[""],h=b.length;while(h--)f=_.exec(b[h])||[],o=q=f[1],p=(f[2]||"").split(".").sort(),o&&(j=m.event.special[o]||{},o=(e?j.delegateType:j.bindType)||o,j=m.event.special[o]||{},l=m.extend({type:o,origType:q,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&m.expr.match.needsContext.test(e),namespace:p.join(".")},i),(n=g[o])||(n=g[o]=[],n.delegateCount=0,j.setup&&j.setup.call(a,d,p,k)!==!1||(a.addEventListener?a.addEventListener(o,k,!1):a.attachEvent&&a.attachEvent("on"+o,k))),j.add&&(j.add.call(a,l),l.handler.guid||(l.handler.guid=c.guid)),e?n.splice(n.delegateCount++,0,l):n.push(l),m.event.global[o]=!0);a=null}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,n,o,p,q,r=m.hasData(a)&&m._data(a);if(r&&(k=r.events)){b=(b||"").match(E)||[""],j=b.length;while(j--)if(h=_.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o){l=m.event.special[o]||{},o=(d?l.delegateType:l.bindType)||o,n=k[o]||[],h=h[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),i=f=n.length;while(f--)g=n[f],!e&&q!==g.origType||c&&c.guid!==g.guid||h&&!h.test(g.namespace)||d&&d!==g.selector&&("**"!==d||!g.selector)||(n.splice(f,1),g.selector&&n.delegateCount--,l.remove&&l.remove.call(a,g));i&&!n.length&&(l.teardown&&l.teardown.call(a,p,r.handle)!==!1||m.removeEvent(a,o,r.handle),delete k[o])}else for(o in k)m.event.remove(a,o+b[j],c,d,!0);m.isEmptyObject(k)&&(delete r.handle,m._removeData(a,"events"))}},trigger:function(b,c,d,e){var f,g,h,i,k,l,n,o=[d||y],p=j.call(b,"type")?b.type:b,q=j.call(b,"namespace")?b.namespace.split("."):[];if(h=l=d=d||y,3!==d.nodeType&&8!==d.nodeType&&!$.test(p+m.event.triggered)&&(p.indexOf(".")>=0&&(q=p.split("."),p=q.shift(),q.sort()),g=p.indexOf(":")<0&&"on"+p,b=b[m.expando]?b:new m.Event(p,"object"==typeof b&&b),b.isTrigger=e?2:3,b.namespace=q.join("."),b.namespace_re=b.namespace?new RegExp("(^|\\.)"+q.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:m.makeArray(c,[b]),k=m.event.special[p]||{},e||!k.trigger||k.trigger.apply(d,c)!==!1)){if(!e&&!k.noBubble&&!m.isWindow(d)){for(i=k.delegateType||p,$.test(i+p)||(h=h.parentNode);h;h=h.parentNode)o.push(h),l=h;l===(d.ownerDocument||y)&&o.push(l.defaultView||l.parentWindow||a)}n=0;while((h=o[n++])&&!b.isPropagationStopped())b.type=n>1?i:k.bindType||p,f=(m._data(h,"events")||{})[b.type]&&m._data(h,"handle"),f&&f.apply(h,c),f=g&&h[g],f&&f.apply&&m.acceptData(h)&&(b.result=f.apply(h,c),b.result===!1&&b.preventDefault());if(b.type=p,!e&&!b.isDefaultPrevented()&&(!k._default||k._default.apply(o.pop(),c)===!1)&&m.acceptData(d)&&g&&d[p]&&!m.isWindow(d)){l=d[g],l&&(d[g]=null),m.event.triggered=p;try{d[p]()}catch(r){}m.event.triggered=void 0,l&&(d[g]=l)}return b.result}},dispatch:function(a){a=m.event.fix(a);var b,c,e,f,g,h=[],i=d.call(arguments),j=(m._data(this,"events")||{})[a.type]||[],k=m.event.special[a.type]||{};if(i[0]=a,a.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,a)!==!1){h=m.event.handlers.call(this,a,j),b=0;while((f=h[b++])&&!a.isPropagationStopped()){a.currentTarget=f.elem,g=0;while((e=f.handlers[g++])&&!a.isImmediatePropagationStopped())(!a.namespace_re||a.namespace_re.test(e.namespace))&&(a.handleObj=e,a.data=e.data,c=((m.event.special[e.origType]||{}).handle||e.handler).apply(f.elem,i),void 0!==c&&(a.result=c)===!1&&(a.preventDefault(),a.stopPropagation()))}return k.postDispatch&&k.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&(!a.button||"click"!==a.type))for(;i!=this;i=i.parentNode||this)if(1===i.nodeType&&(i.disabled!==!0||"click"!==a.type)){for(e=[],f=0;h>f;f++)d=b[f],c=d.selector+" ",void 0===e[c]&&(e[c]=d.needsContext?m(c,this).index(i)>=0:m.find(c,this,null,[i]).length),e[c]&&e.push(d);e.length&&g.push({elem:i,handlers:e})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},fix:function(a){if(a[m.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];g||(this.fixHooks[e]=g=Z.test(e)?this.mouseHooks:Y.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new m.Event(f),b=d.length;while(b--)c=d[b],a[c]=f[c];return a.target||(a.target=f.srcElement||y),3===a.target.nodeType&&(a.target=a.target.parentNode),a.metaKey=!!a.metaKey,g.filter?g.filter(a,f):a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,e,f=b.button,g=b.fromElement;return null==a.pageX&&null!=b.clientX&&(d=a.target.ownerDocument||y,e=d.documentElement,c=d.body,a.pageX=b.clientX+(e&&e.scrollLeft||c&&c.scrollLeft||0)-(e&&e.clientLeft||c&&c.clientLeft||0),a.pageY=b.clientY+(e&&e.scrollTop||c&&c.scrollTop||0)-(e&&e.clientTop||c&&c.clientTop||0)),!a.relatedTarget&&g&&(a.relatedTarget=g===a.target?b.toElement:g),a.which||void 0===f||(a.which=1&f?1:2&f?3:4&f?2:0),a}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==cb()&&this.focus)try{return this.focus(),!1}catch(a){}},delegateType:"focusin"},blur:{trigger:function(){return this===cb()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return m.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(a){return m.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=m.extend(new m.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?m.event.trigger(e,null,b):m.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},m.removeEvent=y.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){var d="on"+b;a.detachEvent&&(typeof a[d]===K&&(a[d]=null),a.detachEvent(d,c))},m.Event=function(a,b){return this instanceof m.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.returnValue===!1?ab:bb):this.type=a,b&&m.extend(this,b),this.timeStamp=a&&a.timeStamp||m.now(),void(this[m.expando]=!0)):new m.Event(a,b)},m.Event.prototype={isDefaultPrevented:bb,isPropagationStopped:bb,isImmediatePropagationStopped:bb,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=ab,a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=ab,a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=ab,a&&a.stopImmediatePropagation&&a.stopImmediatePropagation(),this.stopPropagation()}},m.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){m.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return(!e||e!==d&&!m.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),k.submitBubbles||(m.event.special.submit={setup:function(){return m.nodeName(this,"form")?!1:void m.event.add(this,"click._submit keypress._submit",function(a){var b=a.target,c=m.nodeName(b,"input")||m.nodeName(b,"button")?b.form:void 0;c&&!m._data(c,"submitBubbles")&&(m.event.add(c,"submit._submit",function(a){a._submit_bubble=!0}),m._data(c,"submitBubbles",!0))})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&m.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){return m.nodeName(this,"form")?!1:void m.event.remove(this,"._submit")}}),k.changeBubbles||(m.event.special.change={setup:function(){return X.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(m.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._just_changed=!0)}),m.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1),m.event.simulate("change",this,a,!0)})),!1):void m.event.add(this,"beforeactivate._change",function(a){var b=a.target;X.test(b.nodeName)&&!m._data(b,"changeBubbles")&&(m.event.add(b,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||m.event.simulate("change",this.parentNode,a,!0)}),m._data(b,"changeBubbles",!0))})},handle:function(a){var b=a.target;return this!==b||a.isSimulated||a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type?a.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return m.event.remove(this,"._change"),!X.test(this.nodeName)}}),k.focusinBubbles||m.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){m.event.simulate(b,a.target,m.event.fix(a),!0)};m.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=m._data(d,b);e||d.addEventListener(a,c,!0),m._data(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=m._data(d,b)-1;e?m._data(d,b,e):(d.removeEventListener(a,c,!0),m._removeData(d,b))}}}),m.fn.extend({on:function(a,b,c,d,e){var f,g;if("object"==typeof a){"string"!=typeof b&&(c=c||b,b=void 0);for(f in a)this.on(f,b,c,a[f],e);return this}if(null==c&&null==d?(d=b,c=b=void 0):null==d&&("string"==typeof b?(d=c,c=void 0):(d=c,c=b,b=void 0)),d===!1)d=bb;else if(!d)return this;return 1===e&&(g=d,d=function(a){return m().off(a),g.apply(this,arguments)},d.guid=g.guid||(g.guid=m.guid++)),this.each(function(){m.event.add(this,a,d,c,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,m(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return(b===!1||"function"==typeof b)&&(c=b,b=void 0),c===!1&&(c=bb),this.each(function(){m.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){m.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?m.event.trigger(a,b,c,!0):void 0}});function db(a){var b=eb.split("|"),c=a.createDocumentFragment();if(c.createElement)while(b.length)c.createElement(b.pop());return c}var eb="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",fb=/ jQuery\d+="(?:null|\d+)"/g,gb=new RegExp("<(?:"+eb+")[\\s/>]","i"),hb=/^\s+/,ib=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,jb=/<([\w:]+)/,kb=/<tbody/i,lb=/<|&#?\w+;/,mb=/<(?:script|style|link)/i,nb=/checked\s*(?:[^=]|=\s*.checked.)/i,ob=/^$|\/(?:java|ecma)script/i,pb=/^true\/(.*)/,qb=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,rb={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:k.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},sb=db(y),tb=sb.appendChild(y.createElement("div"));rb.optgroup=rb.option,rb.tbody=rb.tfoot=rb.colgroup=rb.caption=rb.thead,rb.th=rb.td;function ub(a,b){var c,d,e=0,f=typeof a.getElementsByTagName!==K?a.getElementsByTagName(b||"*"):typeof a.querySelectorAll!==K?a.querySelectorAll(b||"*"):void 0;if(!f)for(f=[],c=a.childNodes||a;null!=(d=c[e]);e++)!b||m.nodeName(d,b)?f.push(d):m.merge(f,ub(d,b));return void 0===b||b&&m.nodeName(a,b)?m.merge([a],f):f}function vb(a){W.test(a.type)&&(a.defaultChecked=a.checked)}function wb(a,b){return m.nodeName(a,"table")&&m.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function xb(a){return a.type=(null!==m.find.attr(a,"type"))+"/"+a.type,a}function yb(a){var b=pb.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function zb(a,b){for(var c,d=0;null!=(c=a[d]);d++)m._data(c,"globalEval",!b||m._data(b[d],"globalEval"))}function Ab(a,b){if(1===b.nodeType&&m.hasData(a)){var c,d,e,f=m._data(a),g=m._data(b,f),h=f.events;if(h){delete g.handle,g.events={};for(c in h)for(d=0,e=h[c].length;e>d;d++)m.event.add(b,c,h[c][d])}g.data&&(g.data=m.extend({},g.data))}}function Bb(a,b){var c,d,e;if(1===b.nodeType){if(c=b.nodeName.toLowerCase(),!k.noCloneEvent&&b[m.expando]){e=m._data(b);for(d in e.events)m.removeEvent(b,d,e.handle);b.removeAttribute(m.expando)}"script"===c&&b.text!==a.text?(xb(b).text=a.text,yb(b)):"object"===c?(b.parentNode&&(b.outerHTML=a.outerHTML),k.html5Clone&&a.innerHTML&&!m.trim(b.innerHTML)&&(b.innerHTML=a.innerHTML)):"input"===c&&W.test(a.type)?(b.defaultChecked=b.checked=a.checked,b.value!==a.value&&(b.value=a.value)):"option"===c?b.defaultSelected=b.selected=a.defaultSelected:("input"===c||"textarea"===c)&&(b.defaultValue=a.defaultValue)}}m.extend({clone:function(a,b,c){var d,e,f,g,h,i=m.contains(a.ownerDocument,a);if(k.html5Clone||m.isXMLDoc(a)||!gb.test("<"+a.nodeName+">")?f=a.cloneNode(!0):(tb.innerHTML=a.outerHTML,tb.removeChild(f=tb.firstChild)),!(k.noCloneEvent&&k.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||m.isXMLDoc(a)))for(d=ub(f),h=ub(a),g=0;null!=(e=h[g]);++g)d[g]&&Bb(e,d[g]);if(b)if(c)for(h=h||ub(a),d=d||ub(f),g=0;null!=(e=h[g]);g++)Ab(e,d[g]);else Ab(a,f);return d=ub(f,"script"),d.length>0&&zb(d,!i&&ub(a,"script")),d=h=e=null,f},buildFragment:function(a,b,c,d){for(var e,f,g,h,i,j,l,n=a.length,o=db(b),p=[],q=0;n>q;q++)if(f=a[q],f||0===f)if("object"===m.type(f))m.merge(p,f.nodeType?[f]:f);else if(lb.test(f)){h=h||o.appendChild(b.createElement("div")),i=(jb.exec(f)||["",""])[1].toLowerCase(),l=rb[i]||rb._default,h.innerHTML=l[1]+f.replace(ib,"<$1></$2>")+l[2],e=l[0];while(e--)h=h.lastChild;if(!k.leadingWhitespace&&hb.test(f)&&p.push(b.createTextNode(hb.exec(f)[0])),!k.tbody){f="table"!==i||kb.test(f)?"<table>"!==l[1]||kb.test(f)?0:h:h.firstChild,e=f&&f.childNodes.length;while(e--)m.nodeName(j=f.childNodes[e],"tbody")&&!j.childNodes.length&&f.removeChild(j)}m.merge(p,h.childNodes),h.textContent="";while(h.firstChild)h.removeChild(h.firstChild);h=o.lastChild}else p.push(b.createTextNode(f));h&&o.removeChild(h),k.appendChecked||m.grep(ub(p,"input"),vb),q=0;while(f=p[q++])if((!d||-1===m.inArray(f,d))&&(g=m.contains(f.ownerDocument,f),h=ub(o.appendChild(f),"script"),g&&zb(h),c)){e=0;while(f=h[e++])ob.test(f.type||"")&&c.push(f)}return h=null,o},cleanData:function(a,b){for(var d,e,f,g,h=0,i=m.expando,j=m.cache,l=k.deleteExpando,n=m.event.special;null!=(d=a[h]);h++)if((b||m.acceptData(d))&&(f=d[i],g=f&&j[f])){if(g.events)for(e in g.events)n[e]?m.event.remove(d,e):m.removeEvent(d,e,g.handle);j[f]&&(delete j[f],l?delete d[i]:typeof d.removeAttribute!==K?d.removeAttribute(i):d[i]=null,c.push(f))}}}),m.fn.extend({text:function(a){return V(this,function(a){return void 0===a?m.text(this):this.empty().append((this[0]&&this[0].ownerDocument||y).createTextNode(a))},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=wb(this,a);b.appendChild(a)}})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=wb(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?m.filter(a,this):this,e=0;null!=(c=d[e]);e++)b||1!==c.nodeType||m.cleanData(ub(c)),c.parentNode&&(b&&m.contains(c.ownerDocument,c)&&zb(ub(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++){1===a.nodeType&&m.cleanData(ub(a,!1));while(a.firstChild)a.removeChild(a.firstChild);a.options&&m.nodeName(a,"select")&&(a.options.length=0)}return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return m.clone(this,a,b)})},html:function(a){return V(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a)return 1===b.nodeType?b.innerHTML.replace(fb,""):void 0;if(!("string"!=typeof a||mb.test(a)||!k.htmlSerialize&&gb.test(a)||!k.leadingWhitespace&&hb.test(a)||rb[(jb.exec(a)||["",""])[1].toLowerCase()])){a=a.replace(ib,"<$1></$2>");try{for(;d>c;c++)b=this[c]||{},1===b.nodeType&&(m.cleanData(ub(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=arguments[0];return this.domManip(arguments,function(b){a=this.parentNode,m.cleanData(ub(this)),a&&a.replaceChild(b,this)}),a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b){a=e.apply([],a);var c,d,f,g,h,i,j=0,l=this.length,n=this,o=l-1,p=a[0],q=m.isFunction(p);if(q||l>1&&"string"==typeof p&&!k.checkClone&&nb.test(p))return this.each(function(c){var d=n.eq(c);q&&(a[0]=p.call(this,c,d.html())),d.domManip(a,b)});if(l&&(i=m.buildFragment(a,this[0].ownerDocument,!1,this),c=i.firstChild,1===i.childNodes.length&&(i=c),c)){for(g=m.map(ub(i,"script"),xb),f=g.length;l>j;j++)d=i,j!==o&&(d=m.clone(d,!0,!0),f&&m.merge(g,ub(d,"script"))),b.call(this[j],d,j);if(f)for(h=g[g.length-1].ownerDocument,m.map(g,yb),j=0;f>j;j++)d=g[j],ob.test(d.type||"")&&!m._data(d,"globalEval")&&m.contains(h,d)&&(d.src?m._evalUrl&&m._evalUrl(d.src):m.globalEval((d.text||d.textContent||d.innerHTML||"").replace(qb,"")));i=c=null}return this}}),m.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){m.fn[a]=function(a){for(var c,d=0,e=[],g=m(a),h=g.length-1;h>=d;d++)c=d===h?this:this.clone(!0),m(g[d])[b](c),f.apply(e,c.get());return this.pushStack(e)}});var Cb,Db={};function Eb(b,c){var d,e=m(c.createElement(b)).appendTo(c.body),f=a.getDefaultComputedStyle&&(d=a.getDefaultComputedStyle(e[0]))?d.display:m.css(e[0],"display");return e.detach(),f}function Fb(a){var b=y,c=Db[a];return c||(c=Eb(a,b),"none"!==c&&c||(Cb=(Cb||m("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=(Cb[0].contentWindow||Cb[0].contentDocument).document,b.write(),b.close(),c=Eb(a,b),Cb.detach()),Db[a]=c),c}!function(){var a;k.shrinkWrapBlocks=function(){if(null!=a)return a;a=!1;var b,c,d;return c=y.getElementsByTagName("body")[0],c&&c.style?(b=y.createElement("div"),d=y.createElement("div"),d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(d).appendChild(b),typeof b.style.zoom!==K&&(b.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",b.appendChild(y.createElement("div")).style.width="5px",a=3!==b.offsetWidth),c.removeChild(d),a):void 0}}();var Gb=/^margin/,Hb=new RegExp("^("+S+")(?!px)[a-z%]+$","i"),Ib,Jb,Kb=/^(top|right|bottom|left)$/;a.getComputedStyle?(Ib=function(a){return a.ownerDocument.defaultView.getComputedStyle(a,null)},Jb=function(a,b,c){var d,e,f,g,h=a.style;return c=c||Ib(a),g=c?c.getPropertyValue(b)||c[b]:void 0,c&&(""!==g||m.contains(a.ownerDocument,a)||(g=m.style(a,b)),Hb.test(g)&&Gb.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0===g?g:g+""}):y.documentElement.currentStyle&&(Ib=function(a){return a.currentStyle},Jb=function(a,b,c){var d,e,f,g,h=a.style;return c=c||Ib(a),g=c?c[b]:void 0,null==g&&h&&h[b]&&(g=h[b]),Hb.test(g)&&!Kb.test(b)&&(d=h.left,e=a.runtimeStyle,f=e&&e.left,f&&(e.left=a.currentStyle.left),h.left="fontSize"===b?"1em":g,g=h.pixelLeft+"px",h.left=d,f&&(e.left=f)),void 0===g?g:g+""||"auto"});function Lb(a,b){return{get:function(){var c=a();if(null!=c)return c?void delete this.get:(this.get=b).apply(this,arguments)}}}!function(){var b,c,d,e,f,g,h;if(b=y.createElement("div"),b.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",d=b.getElementsByTagName("a")[0],c=d&&d.style){c.cssText="float:left;opacity:.5",k.opacity="0.5"===c.opacity,k.cssFloat=!!c.cssFloat,b.style.backgroundClip="content-box",b.cloneNode(!0).style.backgroundClip="",k.clearCloneStyle="content-box"===b.style.backgroundClip,k.boxSizing=""===c.boxSizing||""===c.MozBoxSizing||""===c.WebkitBoxSizing,m.extend(k,{reliableHiddenOffsets:function(){return null==g&&i(),g},boxSizingReliable:function(){return null==f&&i(),f},pixelPosition:function(){return null==e&&i(),e},reliableMarginRight:function(){return null==h&&i(),h}});function i(){var b,c,d,i;c=y.getElementsByTagName("body")[0],c&&c.style&&(b=y.createElement("div"),d=y.createElement("div"),d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(d).appendChild(b),b.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",e=f=!1,h=!0,a.getComputedStyle&&(e="1%"!==(a.getComputedStyle(b,null)||{}).top,f="4px"===(a.getComputedStyle(b,null)||{width:"4px"}).width,i=b.appendChild(y.createElement("div")),i.style.cssText=b.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",i.style.marginRight=i.style.width="0",b.style.width="1px",h=!parseFloat((a.getComputedStyle(i,null)||{}).marginRight)),b.innerHTML="<table><tr><td></td><td>t</td></tr></table>",i=b.getElementsByTagName("td"),i[0].style.cssText="margin:0;border:0;padding:0;display:none",g=0===i[0].offsetHeight,g&&(i[0].style.display="",i[1].style.display="none",g=0===i[0].offsetHeight),c.removeChild(d))}}}(),m.swap=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e};var Mb=/alpha\([^)]*\)/i,Nb=/opacity\s*=\s*([^)]*)/,Ob=/^(none|table(?!-c[ea]).+)/,Pb=new RegExp("^("+S+")(.*)$","i"),Qb=new RegExp("^([+-])=("+S+")","i"),Rb={position:"absolute",visibility:"hidden",display:"block"},Sb={letterSpacing:"0",fontWeight:"400"},Tb=["Webkit","O","Moz","ms"];function Ub(a,b){if(b in a)return b;var c=b.charAt(0).toUpperCase()+b.slice(1),d=b,e=Tb.length;while(e--)if(b=Tb[e]+c,b in a)return b;return d}function Vb(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=m._data(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&U(d)&&(f[g]=m._data(d,"olddisplay",Fb(d.nodeName)))):(e=U(d),(c&&"none"!==c||!e)&&m._data(d,"olddisplay",e?c:m.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}function Wb(a,b,c){var d=Pb.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function Xb(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=m.css(a,c+T[f],!0,e)),d?("content"===c&&(g-=m.css(a,"padding"+T[f],!0,e)),"margin"!==c&&(g-=m.css(a,"border"+T[f]+"Width",!0,e))):(g+=m.css(a,"padding"+T[f],!0,e),"padding"!==c&&(g+=m.css(a,"border"+T[f]+"Width",!0,e)));return g}function Yb(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=Ib(a),g=k.boxSizing&&"border-box"===m.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=Jb(a,b,f),(0>e||null==e)&&(e=a.style[b]),Hb.test(e))return e;d=g&&(k.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+Xb(a,b,c||(g?"border":"content"),d,f)+"px"}m.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=Jb(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":k.cssFloat?"cssFloat":"styleFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=m.camelCase(b),i=a.style;if(b=m.cssProps[h]||(m.cssProps[h]=Ub(i,h)),g=m.cssHooks[b]||m.cssHooks[h],void 0===c)return g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b];if(f=typeof c,"string"===f&&(e=Qb.exec(c))&&(c=(e[1]+1)*e[2]+parseFloat(m.css(a,b)),f="number"),null!=c&&c===c&&("number"!==f||m.cssNumber[h]||(c+="px"),k.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),!(g&&"set"in g&&void 0===(c=g.set(a,c,d)))))try{i[b]=c}catch(j){}}},css:function(a,b,c,d){var e,f,g,h=m.camelCase(b);return b=m.cssProps[h]||(m.cssProps[h]=Ub(a.style,h)),g=m.cssHooks[b]||m.cssHooks[h],g&&"get"in g&&(f=g.get(a,!0,c)),void 0===f&&(f=Jb(a,b,d)),"normal"===f&&b in Sb&&(f=Sb[b]),""===c||c?(e=parseFloat(f),c===!0||m.isNumeric(e)?e||0:f):f}}),m.each(["height","width"],function(a,b){m.cssHooks[b]={get:function(a,c,d){return c?Ob.test(m.css(a,"display"))&&0===a.offsetWidth?m.swap(a,Rb,function(){return Yb(a,b,d)}):Yb(a,b,d):void 0},set:function(a,c,d){var e=d&&Ib(a);return Wb(a,c,d?Xb(a,b,d,k.boxSizing&&"border-box"===m.css(a,"boxSizing",!1,e),e):0)}}}),k.opacity||(m.cssHooks.opacity={get:function(a,b){return Nb.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=m.isNumeric(b)?"alpha(opacity="+100*b+")":"",f=d&&d.filter||c.filter||"";c.zoom=1,(b>=1||""===b)&&""===m.trim(f.replace(Mb,""))&&c.removeAttribute&&(c.removeAttribute("filter"),""===b||d&&!d.filter)||(c.filter=Mb.test(f)?f.replace(Mb,e):f+" "+e)}}),m.cssHooks.marginRight=Lb(k.reliableMarginRight,function(a,b){return b?m.swap(a,{display:"inline-block"},Jb,[a,"marginRight"]):void 0}),m.each({margin:"",padding:"",border:"Width"},function(a,b){m.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+T[d]+b]=f[d]||f[d-2]||f[0];return e}},Gb.test(a)||(m.cssHooks[a+b].set=Wb)}),m.fn.extend({css:function(a,b){return V(this,function(a,b,c){var d,e,f={},g=0;if(m.isArray(b)){for(d=Ib(a),e=b.length;e>g;g++)f[b[g]]=m.css(a,b[g],!1,d);return f}return void 0!==c?m.style(a,b,c):m.css(a,b)},a,b,arguments.length>1)},show:function(){return Vb(this,!0)},hide:function(){return Vb(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){U(this)?m(this).show():m(this).hide()})}});function Zb(a,b,c,d,e){return new Zb.prototype.init(a,b,c,d,e)}m.Tween=Zb,Zb.prototype={constructor:Zb,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(m.cssNumber[c]?"":"px")
},cur:function(){var a=Zb.propHooks[this.prop];return a&&a.get?a.get(this):Zb.propHooks._default.get(this)},run:function(a){var b,c=Zb.propHooks[this.prop];return this.pos=b=this.options.duration?m.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):Zb.propHooks._default.set(this),this}},Zb.prototype.init.prototype=Zb.prototype,Zb.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=m.css(a.elem,a.prop,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){m.fx.step[a.prop]?m.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[m.cssProps[a.prop]]||m.cssHooks[a.prop])?m.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},Zb.propHooks.scrollTop=Zb.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},m.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},m.fx=Zb.prototype.init,m.fx.step={};var $b,_b,ac=/^(?:toggle|show|hide)$/,bc=new RegExp("^(?:([+-])=|)("+S+")([a-z%]*)$","i"),cc=/queueHooks$/,dc=[ic],ec={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=bc.exec(b),f=e&&e[3]||(m.cssNumber[a]?"":"px"),g=(m.cssNumber[a]||"px"!==f&&+d)&&bc.exec(m.css(c.elem,a)),h=1,i=20;if(g&&g[3]!==f){f=f||g[3],e=e||[],g=+d||1;do h=h||".5",g/=h,m.style(c.elem,a,g+f);while(h!==(h=c.cur()/d)&&1!==h&&--i)}return e&&(g=c.start=+g||+d||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};function fc(){return setTimeout(function(){$b=void 0}),$b=m.now()}function gc(a,b){var c,d={height:a},e=0;for(b=b?1:0;4>e;e+=2-b)c=T[e],d["margin"+c]=d["padding"+c]=a;return b&&(d.opacity=d.width=a),d}function hc(a,b,c){for(var d,e=(ec[b]||[]).concat(ec["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function ic(a,b,c){var d,e,f,g,h,i,j,l,n=this,o={},p=a.style,q=a.nodeType&&U(a),r=m._data(a,"fxshow");c.queue||(h=m._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,n.always(function(){n.always(function(){h.unqueued--,m.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[p.overflow,p.overflowX,p.overflowY],j=m.css(a,"display"),l="none"===j?m._data(a,"olddisplay")||Fb(a.nodeName):j,"inline"===l&&"none"===m.css(a,"float")&&(k.inlineBlockNeedsLayout&&"inline"!==Fb(a.nodeName)?p.zoom=1:p.display="inline-block")),c.overflow&&(p.overflow="hidden",k.shrinkWrapBlocks()||n.always(function(){p.overflow=c.overflow[0],p.overflowX=c.overflow[1],p.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],ac.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(q?"hide":"show")){if("show"!==e||!r||void 0===r[d])continue;q=!0}o[d]=r&&r[d]||m.style(a,d)}else j=void 0;if(m.isEmptyObject(o))"inline"===("none"===j?Fb(a.nodeName):j)&&(p.display=j);else{r?"hidden"in r&&(q=r.hidden):r=m._data(a,"fxshow",{}),f&&(r.hidden=!q),q?m(a).show():n.done(function(){m(a).hide()}),n.done(function(){var b;m._removeData(a,"fxshow");for(b in o)m.style(a,b,o[b])});for(d in o)g=hc(q?r[d]:0,d,n),d in r||(r[d]=g.start,q&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}function jc(a,b){var c,d,e,f,g;for(c in a)if(d=m.camelCase(c),e=b[d],f=a[c],m.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=m.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function kc(a,b,c){var d,e,f=0,g=dc.length,h=m.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=$b||fc(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:m.extend({},b),opts:m.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:$b||fc(),duration:c.duration,tweens:[],createTween:function(b,c){var d=m.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;for(jc(k,j.opts.specialEasing);g>f;f++)if(d=dc[f].call(j,a,k,j.opts))return d;return m.map(k,hc,j),m.isFunction(j.opts.start)&&j.opts.start.call(a,j),m.fx.timer(m.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}m.Animation=m.extend(kc,{tweener:function(a,b){m.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;e>d;d++)c=a[d],ec[c]=ec[c]||[],ec[c].unshift(b)},prefilter:function(a,b){b?dc.unshift(a):dc.push(a)}}),m.speed=function(a,b,c){var d=a&&"object"==typeof a?m.extend({},a):{complete:c||!c&&b||m.isFunction(a)&&a,duration:a,easing:c&&b||b&&!m.isFunction(b)&&b};return d.duration=m.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in m.fx.speeds?m.fx.speeds[d.duration]:m.fx.speeds._default,(null==d.queue||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){m.isFunction(d.old)&&d.old.call(this),d.queue&&m.dequeue(this,d.queue)},d},m.fn.extend({fadeTo:function(a,b,c,d){return this.filter(U).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=m.isEmptyObject(a),f=m.speed(b,c,d),g=function(){var b=kc(this,m.extend({},a),f);(e||m._data(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=m.timers,g=m._data(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&cc.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));(b||!c)&&m.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=m._data(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=m.timers,g=d?d.length:0;for(c.finish=!0,m.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),m.each(["toggle","show","hide"],function(a,b){var c=m.fn[b];m.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(gc(b,!0),a,d,e)}}),m.each({slideDown:gc("show"),slideUp:gc("hide"),slideToggle:gc("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){m.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),m.timers=[],m.fx.tick=function(){var a,b=m.timers,c=0;for($b=m.now();c<b.length;c++)a=b[c],a()||b[c]!==a||b.splice(c--,1);b.length||m.fx.stop(),$b=void 0},m.fx.timer=function(a){m.timers.push(a),a()?m.fx.start():m.timers.pop()},m.fx.interval=13,m.fx.start=function(){_b||(_b=setInterval(m.fx.tick,m.fx.interval))},m.fx.stop=function(){clearInterval(_b),_b=null},m.fx.speeds={slow:600,fast:200,_default:400},m.fn.delay=function(a,b){return a=m.fx?m.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},function(){var a,b,c,d,e;b=y.createElement("div"),b.setAttribute("className","t"),b.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",d=b.getElementsByTagName("a")[0],c=y.createElement("select"),e=c.appendChild(y.createElement("option")),a=b.getElementsByTagName("input")[0],d.style.cssText="top:1px",k.getSetAttribute="t"!==b.className,k.style=/top/.test(d.getAttribute("style")),k.hrefNormalized="/a"===d.getAttribute("href"),k.checkOn=!!a.value,k.optSelected=e.selected,k.enctype=!!y.createElement("form").enctype,c.disabled=!0,k.optDisabled=!e.disabled,a=y.createElement("input"),a.setAttribute("value",""),k.input=""===a.getAttribute("value"),a.value="t",a.setAttribute("type","radio"),k.radioValue="t"===a.value}();var lc=/\r/g;m.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=m.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,m(this).val()):a,null==e?e="":"number"==typeof e?e+="":m.isArray(e)&&(e=m.map(e,function(a){return null==a?"":a+""})),b=m.valHooks[this.type]||m.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=m.valHooks[e.type]||m.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(lc,""):null==c?"":c)}}}),m.extend({valHooks:{option:{get:function(a){var b=m.find.attr(a,"value");return null!=b?b:m.trim(m.text(a))}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],!(!c.selected&&i!==e||(k.optDisabled?c.disabled:null!==c.getAttribute("disabled"))||c.parentNode.disabled&&m.nodeName(c.parentNode,"optgroup"))){if(b=m(c).val(),f)return b;g.push(b)}return g},set:function(a,b){var c,d,e=a.options,f=m.makeArray(b),g=e.length;while(g--)if(d=e[g],m.inArray(m.valHooks.option.get(d),f)>=0)try{d.selected=c=!0}catch(h){d.scrollHeight}else d.selected=!1;return c||(a.selectedIndex=-1),e}}}}),m.each(["radio","checkbox"],function(){m.valHooks[this]={set:function(a,b){return m.isArray(b)?a.checked=m.inArray(m(a).val(),b)>=0:void 0}},k.checkOn||(m.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var mc,nc,oc=m.expr.attrHandle,pc=/^(?:checked|selected)$/i,qc=k.getSetAttribute,rc=k.input;m.fn.extend({attr:function(a,b){return V(this,m.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){m.removeAttr(this,a)})}}),m.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(a&&3!==f&&8!==f&&2!==f)return typeof a.getAttribute===K?m.prop(a,b,c):(1===f&&m.isXMLDoc(a)||(b=b.toLowerCase(),d=m.attrHooks[b]||(m.expr.match.bool.test(b)?nc:mc)),void 0===c?d&&"get"in d&&null!==(e=d.get(a,b))?e:(e=m.find.attr(a,b),null==e?void 0:e):null!==c?d&&"set"in d&&void 0!==(e=d.set(a,c,b))?e:(a.setAttribute(b,c+""),c):void m.removeAttr(a,b))},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(E);if(f&&1===a.nodeType)while(c=f[e++])d=m.propFix[c]||c,m.expr.match.bool.test(c)?rc&&qc||!pc.test(c)?a[d]=!1:a[m.camelCase("default-"+c)]=a[d]=!1:m.attr(a,c,""),a.removeAttribute(qc?c:d)},attrHooks:{type:{set:function(a,b){if(!k.radioValue&&"radio"===b&&m.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}}}),nc={set:function(a,b,c){return b===!1?m.removeAttr(a,c):rc&&qc||!pc.test(c)?a.setAttribute(!qc&&m.propFix[c]||c,c):a[m.camelCase("default-"+c)]=a[c]=!0,c}},m.each(m.expr.match.bool.source.match(/\w+/g),function(a,b){var c=oc[b]||m.find.attr;oc[b]=rc&&qc||!pc.test(b)?function(a,b,d){var e,f;return d||(f=oc[b],oc[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,oc[b]=f),e}:function(a,b,c){return c?void 0:a[m.camelCase("default-"+b)]?b.toLowerCase():null}}),rc&&qc||(m.attrHooks.value={set:function(a,b,c){return m.nodeName(a,"input")?void(a.defaultValue=b):mc&&mc.set(a,b,c)}}),qc||(mc={set:function(a,b,c){var d=a.getAttributeNode(c);return d||a.setAttributeNode(d=a.ownerDocument.createAttribute(c)),d.value=b+="","value"===c||b===a.getAttribute(c)?b:void 0}},oc.id=oc.name=oc.coords=function(a,b,c){var d;return c?void 0:(d=a.getAttributeNode(b))&&""!==d.value?d.value:null},m.valHooks.button={get:function(a,b){var c=a.getAttributeNode(b);return c&&c.specified?c.value:void 0},set:mc.set},m.attrHooks.contenteditable={set:function(a,b,c){mc.set(a,""===b?!1:b,c)}},m.each(["width","height"],function(a,b){m.attrHooks[b]={set:function(a,c){return""===c?(a.setAttribute(b,"auto"),c):void 0}}})),k.style||(m.attrHooks.style={get:function(a){return a.style.cssText||void 0},set:function(a,b){return a.style.cssText=b+""}});var sc=/^(?:input|select|textarea|button|object)$/i,tc=/^(?:a|area)$/i;m.fn.extend({prop:function(a,b){return V(this,m.prop,a,b,arguments.length>1)},removeProp:function(a){return a=m.propFix[a]||a,this.each(function(){try{this[a]=void 0,delete this[a]}catch(b){}})}}),m.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(a,b,c){var d,e,f,g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g)return f=1!==g||!m.isXMLDoc(a),f&&(b=m.propFix[b]||b,e=m.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){var b=m.find.attr(a,"tabindex");return b?parseInt(b,10):sc.test(a.nodeName)||tc.test(a.nodeName)&&a.href?0:-1}}}}),k.hrefNormalized||m.each(["href","src"],function(a,b){m.propHooks[b]={get:function(a){return a.getAttribute(b,4)}}}),k.optSelected||(m.propHooks.selected={get:function(a){var b=a.parentNode;return b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex),null}}),m.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){m.propFix[this.toLowerCase()]=this}),k.enctype||(m.propFix.enctype="encoding");var uc=/[\t\r\n\f]/g;m.fn.extend({addClass:function(a){var b,c,d,e,f,g,h=0,i=this.length,j="string"==typeof a&&a;if(m.isFunction(a))return this.each(function(b){m(this).addClass(a.call(this,b,this.className))});if(j)for(b=(a||"").match(E)||[];i>h;h++)if(c=this[h],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(uc," "):" ")){f=0;while(e=b[f++])d.indexOf(" "+e+" ")<0&&(d+=e+" ");g=m.trim(d),c.className!==g&&(c.className=g)}return this},removeClass:function(a){var b,c,d,e,f,g,h=0,i=this.length,j=0===arguments.length||"string"==typeof a&&a;if(m.isFunction(a))return this.each(function(b){m(this).removeClass(a.call(this,b,this.className))});if(j)for(b=(a||"").match(E)||[];i>h;h++)if(c=this[h],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(uc," "):"")){f=0;while(e=b[f++])while(d.indexOf(" "+e+" ")>=0)d=d.replace(" "+e+" "," ");g=a?m.trim(d):"",c.className!==g&&(c.className=g)}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):this.each(m.isFunction(a)?function(c){m(this).toggleClass(a.call(this,c,this.className,b),b)}:function(){if("string"===c){var b,d=0,e=m(this),f=a.match(E)||[];while(b=f[d++])e.hasClass(b)?e.removeClass(b):e.addClass(b)}else(c===K||"boolean"===c)&&(this.className&&m._data(this,"__className__",this.className),this.className=this.className||a===!1?"":m._data(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;d>c;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(uc," ").indexOf(b)>=0)return!0;return!1}}),m.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){m.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),m.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var vc=m.now(),wc=/\?/,xc=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;m.parseJSON=function(b){if(a.JSON&&a.JSON.parse)return a.JSON.parse(b+"");var c,d=null,e=m.trim(b+"");return e&&!m.trim(e.replace(xc,function(a,b,e,f){return c&&b&&(d=0),0===d?a:(c=e||b,d+=!f-!e,"")}))?Function("return "+e)():m.error("Invalid JSON: "+b)},m.parseXML=function(b){var c,d;if(!b||"string"!=typeof b)return null;try{a.DOMParser?(d=new DOMParser,c=d.parseFromString(b,"text/xml")):(c=new ActiveXObject("Microsoft.XMLDOM"),c.async="false",c.loadXML(b))}catch(e){c=void 0}return c&&c.documentElement&&!c.getElementsByTagName("parsererror").length||m.error("Invalid XML: "+b),c};var yc,zc,Ac=/#.*$/,Bc=/([?&])_=[^&]*/,Cc=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Dc=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Ec=/^(?:GET|HEAD)$/,Fc=/^\/\//,Gc=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Hc={},Ic={},Jc="*/".concat("*");try{zc=location.href}catch(Kc){zc=y.createElement("a"),zc.href="",zc=zc.href}yc=Gc.exec(zc.toLowerCase())||[];function Lc(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(E)||[];if(m.isFunction(c))while(d=f[e++])"+"===d.charAt(0)?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function Mc(a,b,c,d){var e={},f=a===Ic;function g(h){var i;return e[h]=!0,m.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||f||e[j]?f?!(i=j):void 0:(b.dataTypes.unshift(j),g(j),!1)}),i}return g(b.dataTypes[0])||!e["*"]&&g("*")}function Nc(a,b){var c,d,e=m.ajaxSettings.flatOptions||{};for(d in b)void 0!==b[d]&&((e[d]?a:c||(c={}))[d]=b[d]);return c&&m.extend(!0,a,c),a}function Oc(a,b,c){var d,e,f,g,h=a.contents,i=a.dataTypes;while("*"===i[0])i.shift(),void 0===e&&(e=a.mimeType||b.getResponseHeader("Content-Type"));if(e)for(g in h)if(h[g]&&h[g].test(e)){i.unshift(g);break}if(i[0]in c)f=i[0];else{for(g in c){if(!i[0]||a.converters[g+" "+i[0]]){f=g;break}d||(d=g)}f=f||d}return f?(f!==i[0]&&i.unshift(f),c[f]):void 0}function Pc(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];f=k.shift();while(f)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}m.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:zc,type:"GET",isLocal:Dc.test(yc[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Jc,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":m.parseJSON,"text xml":m.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?Nc(Nc(a,m.ajaxSettings),b):Nc(m.ajaxSettings,a)},ajaxPrefilter:Lc(Hc),ajaxTransport:Lc(Ic),ajax:function(a,b){"object"==typeof a&&(b=a,a=void 0),b=b||{};var c,d,e,f,g,h,i,j,k=m.ajaxSetup({},b),l=k.context||k,n=k.context&&(l.nodeType||l.jquery)?m(l):m.event,o=m.Deferred(),p=m.Callbacks("once memory"),q=k.statusCode||{},r={},s={},t=0,u="canceled",v={readyState:0,getResponseHeader:function(a){var b;if(2===t){if(!j){j={};while(b=Cc.exec(f))j[b[1].toLowerCase()]=b[2]}b=j[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===t?f:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return t||(a=s[c]=s[c]||a,r[a]=b),this},overrideMimeType:function(a){return t||(k.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>t)for(b in a)q[b]=[q[b],a[b]];else v.always(a[v.status]);return this},abort:function(a){var b=a||u;return i&&i.abort(b),x(0,b),this}};if(o.promise(v).complete=p.add,v.success=v.done,v.error=v.fail,k.url=((a||k.url||zc)+"").replace(Ac,"").replace(Fc,yc[1]+"//"),k.type=b.method||b.type||k.method||k.type,k.dataTypes=m.trim(k.dataType||"*").toLowerCase().match(E)||[""],null==k.crossDomain&&(c=Gc.exec(k.url.toLowerCase()),k.crossDomain=!(!c||c[1]===yc[1]&&c[2]===yc[2]&&(c[3]||("http:"===c[1]?"80":"443"))===(yc[3]||("http:"===yc[1]?"80":"443")))),k.data&&k.processData&&"string"!=typeof k.data&&(k.data=m.param(k.data,k.traditional)),Mc(Hc,k,b,v),2===t)return v;h=k.global,h&&0===m.active++&&m.event.trigger("ajaxStart"),k.type=k.type.toUpperCase(),k.hasContent=!Ec.test(k.type),e=k.url,k.hasContent||(k.data&&(e=k.url+=(wc.test(e)?"&":"?")+k.data,delete k.data),k.cache===!1&&(k.url=Bc.test(e)?e.replace(Bc,"$1_="+vc++):e+(wc.test(e)?"&":"?")+"_="+vc++)),k.ifModified&&(m.lastModified[e]&&v.setRequestHeader("If-Modified-Since",m.lastModified[e]),m.etag[e]&&v.setRequestHeader("If-None-Match",m.etag[e])),(k.data&&k.hasContent&&k.contentType!==!1||b.contentType)&&v.setRequestHeader("Content-Type",k.contentType),v.setRequestHeader("Accept",k.dataTypes[0]&&k.accepts[k.dataTypes[0]]?k.accepts[k.dataTypes[0]]+("*"!==k.dataTypes[0]?", "+Jc+"; q=0.01":""):k.accepts["*"]);for(d in k.headers)v.setRequestHeader(d,k.headers[d]);if(k.beforeSend&&(k.beforeSend.call(l,v,k)===!1||2===t))return v.abort();u="abort";for(d in{success:1,error:1,complete:1})v[d](k[d]);if(i=Mc(Ic,k,b,v)){v.readyState=1,h&&n.trigger("ajaxSend",[v,k]),k.async&&k.timeout>0&&(g=setTimeout(function(){v.abort("timeout")},k.timeout));try{t=1,i.send(r,x)}catch(w){if(!(2>t))throw w;x(-1,w)}}else x(-1,"No Transport");function x(a,b,c,d){var j,r,s,u,w,x=b;2!==t&&(t=2,g&&clearTimeout(g),i=void 0,f=d||"",v.readyState=a>0?4:0,j=a>=200&&300>a||304===a,c&&(u=Oc(k,v,c)),u=Pc(k,u,v,j),j?(k.ifModified&&(w=v.getResponseHeader("Last-Modified"),w&&(m.lastModified[e]=w),w=v.getResponseHeader("etag"),w&&(m.etag[e]=w)),204===a||"HEAD"===k.type?x="nocontent":304===a?x="notmodified":(x=u.state,r=u.data,s=u.error,j=!s)):(s=x,(a||!x)&&(x="error",0>a&&(a=0))),v.status=a,v.statusText=(b||x)+"",j?o.resolveWith(l,[r,x,v]):o.rejectWith(l,[v,x,s]),v.statusCode(q),q=void 0,h&&n.trigger(j?"ajaxSuccess":"ajaxError",[v,k,j?r:s]),p.fireWith(l,[v,x]),h&&(n.trigger("ajaxComplete",[v,k]),--m.active||m.event.trigger("ajaxStop")))}return v},getJSON:function(a,b,c){return m.get(a,b,c,"json")},getScript:function(a,b){return m.get(a,void 0,b,"script")}}),m.each(["get","post"],function(a,b){m[b]=function(a,c,d,e){return m.isFunction(c)&&(e=e||d,d=c,c=void 0),m.ajax({url:a,type:b,dataType:e,data:c,success:d})}}),m.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){m.fn[b]=function(a){return this.on(b,a)}}),m._evalUrl=function(a){return m.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},m.fn.extend({wrapAll:function(a){if(m.isFunction(a))return this.each(function(b){m(this).wrapAll(a.call(this,b))});if(this[0]){var b=m(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstChild&&1===a.firstChild.nodeType)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return this.each(m.isFunction(a)?function(b){m(this).wrapInner(a.call(this,b))}:function(){var b=m(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=m.isFunction(a);return this.each(function(c){m(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){m.nodeName(this,"body")||m(this).replaceWith(this.childNodes)}).end()}}),m.expr.filters.hidden=function(a){return a.offsetWidth<=0&&a.offsetHeight<=0||!k.reliableHiddenOffsets()&&"none"===(a.style&&a.style.display||m.css(a,"display"))},m.expr.filters.visible=function(a){return!m.expr.filters.hidden(a)};var Qc=/%20/g,Rc=/\[\]$/,Sc=/\r?\n/g,Tc=/^(?:submit|button|image|reset|file)$/i,Uc=/^(?:input|select|textarea|keygen)/i;function Vc(a,b,c,d){var e;if(m.isArray(b))m.each(b,function(b,e){c||Rc.test(a)?d(a,e):Vc(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==m.type(b))d(a,b);else for(e in b)Vc(a+"["+e+"]",b[e],c,d)}m.param=function(a,b){var c,d=[],e=function(a,b){b=m.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=m.ajaxSettings&&m.ajaxSettings.traditional),m.isArray(a)||a.jquery&&!m.isPlainObject(a))m.each(a,function(){e(this.name,this.value)});else for(c in a)Vc(c,a[c],b,e);return d.join("&").replace(Qc,"+")},m.fn.extend({serialize:function(){return m.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=m.prop(this,"elements");return a?m.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!m(this).is(":disabled")&&Uc.test(this.nodeName)&&!Tc.test(a)&&(this.checked||!W.test(a))}).map(function(a,b){var c=m(this).val();return null==c?null:m.isArray(c)?m.map(c,function(a){return{name:b.name,value:a.replace(Sc,"\r\n")}}):{name:b.name,value:c.replace(Sc,"\r\n")}}).get()}}),m.ajaxSettings.xhr=void 0!==a.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&Zc()||$c()}:Zc;var Wc=0,Xc={},Yc=m.ajaxSettings.xhr();a.ActiveXObject&&m(a).on("unload",function(){for(var a in Xc)Xc[a](void 0,!0)}),k.cors=!!Yc&&"withCredentials"in Yc,Yc=k.ajax=!!Yc,Yc&&m.ajaxTransport(function(a){if(!a.crossDomain||k.cors){var b;return{send:function(c,d){var e,f=a.xhr(),g=++Wc;if(f.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields)for(e in a.xhrFields)f[e]=a.xhrFields[e];a.mimeType&&f.overrideMimeType&&f.overrideMimeType(a.mimeType),a.crossDomain||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest");for(e in c)void 0!==c[e]&&f.setRequestHeader(e,c[e]+"");f.send(a.hasContent&&a.data||null),b=function(c,e){var h,i,j;if(b&&(e||4===f.readyState))if(delete Xc[g],b=void 0,f.onreadystatechange=m.noop,e)4!==f.readyState&&f.abort();else{j={},h=f.status,"string"==typeof f.responseText&&(j.text=f.responseText);try{i=f.statusText}catch(k){i=""}h||!a.isLocal||a.crossDomain?1223===h&&(h=204):h=j.text?200:404}j&&d(h,i,j,f.getAllResponseHeaders())},a.async?4===f.readyState?setTimeout(b):f.onreadystatechange=Xc[g]=b:b()},abort:function(){b&&b(void 0,!0)}}}});function Zc(){try{return new a.XMLHttpRequest}catch(b){}}function $c(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}m.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return m.globalEval(a),a}}}),m.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),m.ajaxTransport("script",function(a){if(a.crossDomain){var b,c=y.head||m("head")[0]||y.documentElement;return{send:function(d,e){b=y.createElement("script"),b.async=!0,a.scriptCharset&&(b.charset=a.scriptCharset),b.src=a.url,b.onload=b.onreadystatechange=function(a,c){(c||!b.readyState||/loaded|complete/.test(b.readyState))&&(b.onload=b.onreadystatechange=null,b.parentNode&&b.parentNode.removeChild(b),b=null,c||e(200,"success"))},c.insertBefore(b,c.firstChild)},abort:function(){b&&b.onload(void 0,!0)}}}});var _c=[],ad=/(=)\?(?=&|$)|\?\?/;m.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=_c.pop()||m.expando+"_"+vc++;return this[a]=!0,a}}),m.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(ad.test(b.url)?"url":"string"==typeof b.data&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&ad.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=m.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(ad,"$1"+e):b.jsonp!==!1&&(b.url+=(wc.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||m.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,_c.push(e)),g&&m.isFunction(f)&&f(g[0]),g=f=void 0}),"script"):void 0}),m.parseHTML=function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||y;var d=u.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=m.buildFragment([a],b,e),e&&e.length&&m(e).remove(),m.merge([],d.childNodes))};var bd=m.fn.load;m.fn.load=function(a,b,c){if("string"!=typeof a&&bd)return bd.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(" ");return h>=0&&(d=m.trim(a.slice(h,a.length)),a=a.slice(0,h)),m.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(f="POST"),g.length>0&&m.ajax({url:a,type:f,dataType:"html",data:b}).done(function(a){e=arguments,g.html(d?m("<div>").append(m.parseHTML(a)).find(d):a)}).complete(c&&function(a,b){g.each(c,e||[a.responseText,b,a])}),this},m.expr.filters.animated=function(a){return m.grep(m.timers,function(b){return a===b.elem}).length};var cd=a.document.documentElement;function dd(a){return m.isWindow(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1}m.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=m.css(a,"position"),l=m(a),n={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=m.css(a,"top"),i=m.css(a,"left"),j=("absolute"===k||"fixed"===k)&&m.inArray("auto",[f,i])>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),m.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(n.top=b.top-h.top+g),null!=b.left&&(n.left=b.left-h.left+e),"using"in b?b.using.call(a,n):l.css(n)}},m.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){m.offset.setOffset(this,a,b)});var b,c,d={top:0,left:0},e=this[0],f=e&&e.ownerDocument;if(f)return b=f.documentElement,m.contains(b,e)?(typeof e.getBoundingClientRect!==K&&(d=e.getBoundingClientRect()),c=dd(f),{top:d.top+(c.pageYOffset||b.scrollTop)-(b.clientTop||0),left:d.left+(c.pageXOffset||b.scrollLeft)-(b.clientLeft||0)}):d},position:function(){if(this[0]){var a,b,c={top:0,left:0},d=this[0];return"fixed"===m.css(d,"position")?b=d.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),m.nodeName(a[0],"html")||(c=a.offset()),c.top+=m.css(a[0],"borderTopWidth",!0),c.left+=m.css(a[0],"borderLeftWidth",!0)),{top:b.top-c.top-m.css(d,"marginTop",!0),left:b.left-c.left-m.css(d,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||cd;while(a&&!m.nodeName(a,"html")&&"static"===m.css(a,"position"))a=a.offsetParent;return a||cd})}}),m.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c=/Y/.test(b);m.fn[a]=function(d){return V(this,function(a,d,e){var f=dd(a);return void 0===e?f?b in f?f[b]:f.document.documentElement[d]:a[d]:void(f?f.scrollTo(c?m(f).scrollLeft():e,c?e:m(f).scrollTop()):a[d]=e)},a,d,arguments.length,null)}}),m.each(["top","left"],function(a,b){m.cssHooks[b]=Lb(k.pixelPosition,function(a,c){return c?(c=Jb(a,b),Hb.test(c)?m(a).position()[b]+"px":c):void 0})}),m.each({Height:"height",Width:"width"},function(a,b){m.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){m.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(d===!0||e===!0?"margin":"border");return V(this,function(b,c,d){var e;return m.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?m.css(b,c,g):m.style(b,c,d,g)},b,f?d:void 0,f,null)}})}),m.fn.size=function(){return this.length},m.fn.andSelf=m.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return m});var ed=a.jQuery,fd=a.$;return m.noConflict=function(b){return a.$===m&&(a.$=fd),b&&a.jQuery===m&&(a.jQuery=ed),m},typeof b===K&&(a.jQuery=a.$=m),m});

(function(d){d.Observe={}})(jQuery);
(function(d,q){var r=function(e,f){f||(f=e,e=window.document);var m=[];d(f).each(function(){for(var l=[],g=d(this),h=g.parent();h.length&&!g.is(e);h=h.parent()){var f=g.get(0).tagName.toLowerCase();l.push(f+":eq("+h.children(f).index(g)+")");g=h}(h.length||g.is(e))&&m.push("> "+l.reverse().join(" > "))});return m.join(", ")};q.path={get:r,capture:function(e,f){f||(f=e,e=window.document);var m=[];d(f).each(function(){var l=-1,g=this;if(this instanceof Text)for(var g=this.parentNode,h=g.childNodes,
f=0;f<h.length;f++)if(h[f]===this){l=f;break}var k=r(e,g),n=d(e).is(g);m.push(function(e){e=n?e:d(e).find(k);return-1===l?e:e.contents()[l]})});return function(e){e=e||window.document;return m.reduce(function(d,f){return d.add(f(e))},d([]))}}}})(jQuery,jQuery.Observe);(function(d,q){var r=function(e){this.original=d(e);this.root=this.original.clone(!1,!0)};r.prototype.find=function(d){return q.path.capture(this.original,d)(this.root)};q.Branch=r})(jQuery,jQuery.Observe);
(function(d,q){var r=function(a,b){var c={};a.forEach(function(a){(a=b(a))&&(c[a[0]]=a[1])});return c},e=r("childList attributes characterData subtree attributeOldValue characterDataOldValue attributeFilter".split(" "),function(a){return[a.toLowerCase(),a]}),f=r(Object.keys(e),function(a){if("attributefilter"!==a)return[e[a],!0]}),m=r(["added","removed"],function(a){return[a.toLowerCase(),a]}),l=d([]),g=function(a){if("object"===typeof a)return a;a=a.split(/\s+/);var b={};a.forEach(function(a){a=
a.toLowerCase();if(!e[a]&&!m[a])throw Error("Unknown option "+a);b[e[a]||m[a]]=!0});return b},h=function(a){return"["+Object.keys(a).sort().reduce(function(b,c){var d=a[c]&&"object"===typeof a[c]?h(a[c]):a[c];return b+"["+JSON.stringify(c)+":"+d+"]"},"")+"]"},t=window.MutationObserver||window.WebKitMutationObserver,k=function(a,b,c,s){this._originalOptions=d.extend({},b);b=d.extend({},b);this.attributeFilter=b.attributeFilter;delete b.attributeFilter;c&&(b.subtree=!0);b.childList&&(b.added=!0,b.removed=
!0);if(b.added||b.removed)b.childList=!0;this.target=d(a);this.options=b;this.selector=c;this.handler=s};k.prototype.is=function(a,b,c){return h(this._originalOptions)===h(a)&&this.selector===b&&this.handler===c};k.prototype.match=function(a){var b=this.options,c=a.type;if(!this.options[c])return l;if(this.selector)switch(c){case "attributes":if(!this._matchAttributeFilter(a))break;case "characterData":return this._matchAttributesAndCharacterData(a);case "childList":if(a.addedNodes&&a.addedNodes.length&&
b.added&&(c=this._matchAddedNodes(a),c.length))return c;if(a.removedNodes&&a.removedNodes.length&&b.removed)return this._matchRemovedNodes(a)}else{var s=a.target instanceof Text?d(a.target).parent():d(a.target);if(!b.subtree&&s.get(0)!==this.target.get(0))return l;switch(c){case "attributes":if(!this._matchAttributeFilter(a))break;case "characterData":return this.target;case "childList":if(a.addedNodes&&a.addedNodes.length&&b.added||a.removedNodes&&a.removedNodes.length&&b.removed)return this.target}}return l};
k.prototype._matchAttributesAndCharacterData=function(a){return this._matchSelector(this.target,[a.target])};k.prototype._matchAddedNodes=function(a){return this._matchSelector(this.target,a.addedNodes)};k.prototype._matchRemovedNodes=function(a){var b=new q.Branch(this.target),c=Array.prototype.slice.call(a.removedNodes).map(function(a){return a.cloneNode(!0)});a.previousSibling?b.find(a.previousSibling).after(c):a.nextSibling?b.find(a.nextSibling).before(c):(this.target===a.target?b.root:b.find(a.target)).empty().append(c);
return this._matchSelector(b.root,c).length?d(a.target):l};k.prototype._matchSelector=function(a,b){var c=a.find(this.selector);b=Array.prototype.slice.call(b);return c=c.filter(function(){var a=this;return b.some(function(b){return b instanceof Text?b.parentNode===a:b===a||d(b).has(a).length})})};k.prototype._matchAttributeFilter=function(a){return this.attributeFilter&&this.attributeFilter.length?0<=this.attributeFilter.indexOf(a.attributeName):!0};var n=function(a){this.patterns=[];this._target=
a;this._observer=null};n.prototype.observe=function(a,b,c){var d=this;this._observer?this._observer.disconnect():this._observer=new t(function(a){a.forEach(function(a){d.patterns.forEach(function(b){var c=b.match(a);c.length&&c.each(function(){b.handler.call(this,a)})})})});this.patterns.push(new k(this._target,a,b,c));this._observer.observe(this._target,this._collapseOptions())};n.prototype.disconnect=function(a,b,c){var d=this;this._observer&&(this.patterns.filter(function(d){return d.is(a,b,c)}).forEach(function(a){a=
d.patterns.indexOf(a);d.patterns.splice(a,1)}),this.patterns.length||this._observer.disconnect())};n.prototype.disconnectAll=function(){this._observer&&(this.patterns=[],this._observer.disconnect())};n.prototype.pause=function(){this._observer&&this._observer.disconnect()};n.prototype.resume=function(){this._observer&&this._observer.observe(this._target,this._collapseOptions())};n.prototype._collapseOptions=function(){var a={};this.patterns.forEach(function(b){var c=a.attributes&&a.attributeFilter;
if(!c&&a.attributes||!b.attributeFilter)c&&b.options.attributes&&!b.attributeFilter&&delete a.attributeFilter;else{var e={},f=[];(a.attributeFilter||[]).concat(b.attributeFilter).forEach(function(a){e[a]||(f.push(a),e[a]=1)});a.attributeFilter=f}d.extend(a,b.options)});Object.keys(m).forEach(function(b){delete a[m[b]]});return a};var p=function(a){this.patterns=[];this._paused=!1;this._target=a;this._events={};this._handler=this._handler.bind(this)};p.prototype.NS=".jQueryObserve";p.prototype.observe=
function(a,b,c){a=new k(this._target,a,b,c);d(this._target);a.options.childList&&(this._addEvent("DOMNodeInserted"),this._addEvent("DOMNodeRemoved"));a.options.attributes&&this._addEvent("DOMAttrModified");a.options.characterData&&this._addEvent("DOMCharacerDataModified");this.patterns.push(a)};p.prototype.disconnect=function(a,b,c){var e=d(this._target),f=this;this.patterns.filter(function(d){return d.is(a,b,c)}).forEach(function(a){a=f.patterns.indexOf(a);f.patterns.splice(a,1)});var g=this.patterns.reduce(function(a,
b){b.options.childList&&(a.DOMNodeInserted=!0,a.DOMNodeRemoved=!0);b.options.attributes&&(a.DOMAttrModified=!0);b.options.characterData&&(a.DOMCharacerDataModified=!0);return a},{});Object.keys(this._events).forEach(function(a){g[a]||(delete f._events[a],e.off(a+f.NS,f._handler))})};p.prototype.disconnectAll=function(){var a=d(this._target),b;for(b in this._events)a.off(b+this.NS,this._handler);this._events={};this.patterns=[]};p.prototype.pause=function(){this._paused=!0};p.prototype.resume=function(){this._paused=
!1};p.prototype._handler=function(a){if(!this._paused){var b={type:null,target:null,addedNodes:null,removedNodes:null,previousSibling:null,nextSibling:null,attributeName:null,attributeNamespace:null,oldValue:null};switch(a.type){case "DOMAttrModified":b.type="attributes";b.target=a.target;b.attributeName=a.attrName;b.oldValue=a.prevValue;break;case "DOMCharacerDataModified":b.type="characterData";b.target=d(a.target).parent().get(0);b.attributeName=a.attrName;b.oldValue=a.prevValue;break;case "DOMNodeInserted":b.type=
"childList";b.target=a.relatedNode;b.addedNodes=[a.target];b.removedNodes=[];break;case "DOMNodeRemoved":b.type="childList",b.target=a.relatedNode,b.addedNodes=[],b.removedNodes=[a.target]}for(a=0;a<this.patterns.length;a++){var c=this.patterns[a],e=c.match(b);e.length&&e.each(function(){c.handler.call(this,b)})}}};p.prototype._addEvent=function(a){this._events[a]||(d(this._target).on(a+this.NS,this._handler),this._events[a]=!0)};q.Pattern=k;q.MutationObserver=n;q.DOMEventObserver=p;d.fn.observe=
function(a,b,c){b?c||(c=b,b=null):(c=a,a=f);return this.each(function(){var e=d(this),f=e.data("observer");f||(f=t?new n(this):new p(this),e.data("observer",f));a=g(a);f.observe(a,b,c)})};d.fn.disconnect=function(a,b,c){a&&(b?c||(c=b,b=null):(c=a,a=f));return this.each(function(){var e=d(this),f=e.data("observer");f&&(a?(a=g(a),f.disconnect(a,b,c)):(f.disconnectAll(),e.removeData("observer")))})}})(jQuery,jQuery.Observe);

function deepClone(e){if(null==e)return null;if("number boolean string undefined".indexOf((typeof e).toLowerCase())>=0)return e;if(e instanceof Array){for(var n=[],t=0;t<e.length;t++)n.push(arguments.callee(e[t]));return n}var o=new Object;for(var r in e)o[r]=arguments.callee(e[r]);return o}function transferAdObj(e){var n={};return n.clickThrough=e.click_through,n.data=e.data,n.duration=e.duration,n.forcePlayAd=e.force_play_ad,n.mediaType=e.media_type,n.permilX=e.permil_x,n.permilY=e.permil_y,n.position=e.position,n.schema=e.schema,n.skipAdUrl=e.skip_ad_url,n.skipCount=e.skip_count,n.skipable=e.skipable,n.spaceId=e.space_id,n.title=e.title,n}function transferAdArray(e){var n=[];for(var t in e)n.push(transferAdObj(e[t]));return n}function PlayingCounter(){function e(e){i+=parseInt(e)}function n(){return i}function t(){i=0}function o(e){var n=Math.round(e-s);n<0||(i+=parseInt(n),c+=parseInt(n))}function r(e){s=Math.round(e)}function l(){c=0}function a(){return c}var i=0,s=0,c=0;return{add:e,get:n,reset:t,cal:o,setBegin:r,resetPlayedTime:l,getPlayedTime:a}}function Timer(e,n){function t(e,n){e!=h&&e!=y||A.push(new E(e,n))}function o(e,n){if(e==h||e==y)if(C)b.push(new E(e,n));else for(var t in A)A[t].name==e&&A[t].callback==n&&A.splice(t,1)}function r(){_=1==n?setTimeout(g,1e3*T):setInterval(g,1e3*T)}function l(){1==n?clearTimeout(_):clearInterval(_)}function a(){l(),r()}function i(){return T}function s(e){T=e}function c(){return n}function d(e){n=e}function u(){return O}function p(){return _}function f(){return k}function m(){O=0,k=0}function v(e){N=e}function g(){if(!N){1==n?clearTimeout(_):(O++,k+=T),C=!0;for(var e in A)A[e].name==h&&A[e].callback(),O==n&&A[e].name==y&&A[e].callback();C=!1;for(var t in b)for(var o in A)A[o].name==b[t].name&&A[o].callback==b[t].callback&&A.splice(o,1);b=[]}}function E(e,n){this.name=e,this.callback=n}var _,h="timer.on_timer_completed",y="timer.on_timer_all_completed",A=[],C=!1,b=[],O=0,T=e,n=n,k=0,N=!1;return{ON_TIMER_COMPLETED:h,ON_TIMER_ALL_COMPLETED:y,addEventListener:t,removeEventListener:o,start:r,stop:l,restart:a,getDuration:i,setDuration:s,getRepeat:c,setRepeat:d,getCounter:u,getId:p,currentTime:f,reset:m,setSkip:v}}function LiTVPlayerEvent(){this.name,this.callback}function LiTVPlayerEventPool(){function e(e,n){var t=new LiTVPlayerEvent;t.name=e,t.callback=n,l.push(t)}function n(e,n){if(s)i.push({n:e,c:n});else for(var t in l)l[t].name==e&&l[t].callback==n&&l.splice(t,1)}function t(){return l.length}function o(){l=[],i=[]}function r(e,n){s=!0;for(var t in l){if(void 0===l[t]||void 0===l[t].name)break;l[t].name==e&&l[t].callback(n)}s=!1;for(var o in i)for(var r in l)l[r].name==i[o].n&&l[r].callback==i[o].c&&l.splice(r,1);i=[]}var l=[],a={onLogoStartEvent:"Ads.onLogoStartEvent",onLogoCloseEvent:"Ads.onLogoCloseEvent",onLogoClickEvent:"Ads.onLogoClickEvent",onPrerollAdRequest:"Ads.onPrerollAdRequest",onPrerollAdReady:"Ads.onPrerollAdReady",onPrerollAdImpression:"Ads.onPrerollAdImpression",onPrerollAdStartEvent:"Ads.onPrerollAdStartEvent",onPrerollAdCompleteEvent:"Ads.onPrerollAdCompleteEvent",onPrerollAdCloseEvent:"Ads.onPrerollAdCloseEvent",onPrerollAdClickEvent:"Ads.onPrerollAdClickEvent",onPrerollAdCurrentTimeChangeEvent:"Ads.onPrerollAdCurrentTimeChangeEvent",onPrerollAdErrorEvent:"Ads.onPrerollAdErrorEvent",onPrerollNoAdEvent:"Ads.onPrerollNoAdEvent",onPrerollAdAllCompleteEvent:"Ads.onPrerollAdAllCompleteEvent",onPrerollBannerStartEvent:"Ads.onPrerollBannerStartEvent",onPrerollBannerCloseEvent:"Ads.onPrerollBannerCloseEvent",onPrerollBannerClickEvent:"Ads.onPrerollBannerClickEvent",onMidrollAdRequest:"ad.onMidrollAdRequest",onMidrollAdReady:"ad.onMidrollAdReady",onMidrollAdImpression:"ad.onMidrollAdImpression",onMidrollAdErrorEvent:"ad.onMidrollAdErrorEvent",onMidrollAdBlockEvent:"ad.onMidrollAdBlockEvent",onMidrollNoAdEvent:"ad.onMidrollNoAdEvent",onMidrollAdStartEvent:"ad.onMidrollAdStartEvent",onMidrollAdCompleteEvent:"ad.onMidrollAdCompleteEvent",onMidrollAdCloseEvent:"ad.onMidrollAdCloseEvent",onMidrollAdClickEvent:"ad.onMidrollAdClickEvent",onMidrollAdCurrentTimeChangeEvent:"ad.onMidrollAdCurrentTimeChangeEvent",onMidrollAdClickSkip:"ad.onMidrollAdClickSkip",onMidrollAdEmpty:"ad.onMidrollAdEmpty",onMidrollAdAllCompleteEvent:"ad.onMidrollAdAllCompleteEvent",onPostrollAdRequest:"ad.onPostrollAdRequest",onPostrollAdReady:"ad.onPostrollAdReady",onPostrollAdImpression:"ad.onPostrollAdImpression",onPostrollAdErrorEvent:"ad.onPostrollAdErrorEvent",onPostrollAdBlockEvent:"ad.onPostrollAdBlockEvent",onPostrollNoAdEvent:"ad.onPostrollNoAdEvent",onPostrollAdStartEvent:"ad.onPostrollAdStartEvent",onPostrollAdCompleteEvent:"ad.onPostrollAdCompleteEvent",onPostrollAdCloseEvent:"ad.onPostrollAdCloseEvent",onPostrollAdClickEvent:"ad.onPostrollAdClickEvent",onPostrollAdCurrentTimeChangeEvent:"ad.onPostrollAdCurrentTimeChangeEvent",onPostrollAdClickSkip:"ad.onPostrollAdClickSkip",onPostrollAdEmpty:"ad.onPostrollAdEmpty",onPostrollAdAllCompleteEvent:"ad.onPostrollAdAllCompleteEvent",onEndBannerStartEvent:"Ads.onEndBannerStartEvent",onEndBannerCloseEvent:"Ads.onEndBannerCloseEvent",onEndBannerClickEvent:"Ads.onEndBannerClickEvent",onPauseBannerAdsStartEvent:"Ads.onPauseBannerAdsStartEvent",onPauseBannerAdsCloseEvent:"Ads.onPauseBannerAdsCloseEvent",onPauseBannerAdsClickEvent:"Ads.onPauseBannerAdsClickEvent",onPrerollNoAdsStartEvent:"Ads.onPrerollNoAdsStartEvent",onPrerollNoAdsCompleteEvent:"Ads.onPrerollNoAdsCompleteEvent",onPrerollNoAdsCloseEvent:"Ads.onPrerollNoAdsCloseEvent",onPrerollNoAdsClickEvent:"Ads.onPrerollNoAdsClickEvent",onMidrollNoAdsStartEvent:"Ads.onMidrollNoAdsStartEvent",onMidrollNoAdsCompleteEvent:"Ads.onMidrollNoAdsCompleteEvent",onMidrollNoAdsCloseEvent:"Ads.onMidrollNoAdsCloseEvent",onMidrollNoAdsClickEvent:"Ads.onMidrollNoAdsClickEvent",onPostrollNoAdStartEvent:"ad.onPostrollNoAdStartEvent",onPostrollNoAdCompleteEvent:"ad.onPostrollNoAdCompleteEvent",onPostrollNoAdCloseEvent:"ad.onPostrollNoAdCloseEvent",onPostrollNoAdClickEvent:"ad.onPostrollNoAdClickEvent",onPrerollBlockedAdsStartEvent:"Ads.onPrerollBlockedAdsStartEvent",onPrerollBlockedAdsCompleteEvent:"Ads.onPrerollBlockedAdsCompleteEvent",onPrerollBlockedAdsCloseEvent:"Ads.onPrerollBlockedAdsCloseEvent",onPrerollBlockedAdsClickEvent:"Ads.onPrerollBlockedAdsClickEvent",onMidrollBlockedAdsStartEvent:"Ads.onMidrollBlockedAdsStartEvent",onMidrollBlockedAdsCompleteEvent:"Ads.onMidrollBlockedAdsCompleteEvent",onMidrollBlockedAdsCloseEvent:"Ads.onMidrollBlockedAdsCloseEvent",onMidrollBlockedAdsClickEvent:"Ads.onMidrollBlockedAdsClickEvent",onPostrollBlockAdStartEvent:"ad.onPostrollBlockAdStartEvent",onPostrollBlockAdCompleteEvent:"ad.onPostrollBlockAdCompleteEvent",onPostrollBlockAdCloseEvent:"ad.onPostrollBlockAdCloseEvent",onPostrollBlockAdClickEvent:"ad.onPostrollBlockAdClickEvent",onPlayerIdle:"player.onPlayerIdle",onPlayerLoaded:"player.onPlayerLoaded",onMediaCurrentTimeChange:"media.onMediaCurrentTimeChange",onMediaPlayedTimeChange:"media.onMediaPlayedTimeChange",onMediaImpression:"media.onMediaImpression",onCompleted:"player.onCompleted",onPlayerReady:"player.onPlayerReady",onRepeatPlay:"player.onRepeatPlay",onError:"player.onError",onFullscreenChange:"player.onFullscreenChange",onUserClickPlay:"player.onUserClickPlay",onGoToDownloadApp:"player.onGoToDownloadApp",onPlayed15Mins:"player.onPlayed15Mins",onPlayerPaused:"player.onPlayerPaused",onPlayerPlaying:"player.onPlayerPlaying",onRefreshToken:"player.onRefreshToken",onContinueStream:"media.onContinueStream",onStopStream:"media.onStopStream",onEcStartEvent:"ec.onEcStartEvent",onEcEndEvent:"ec.onEcEndEvent",onEcClickEvent:"ec.onEcClickEvent",onContentResumeRequestedEvent:"ad.onContentResumeRequestedEvent"},i=[],s=!1;return{add:e,del:n,length:t,delAll:o,callback:r,ON_LOGO_START_EVENT:a.onLogoStartEvent,ON_LOGO_CLOSE_EVENT:a.onLogoCloseEvent,ON_LOGO_CLICK_EVENT:a.onLogoClickEvent,ON_PREROLL_AD_REQUEST:a.onPrerollAdRequest,ON_PREROLL_AD_READY:a.onPrerollAdReady,ON_PREROLL_AD_IMPRESSION:a.onPrerollAdImpression,ON_PREROLL_AD_START_EVENT:a.onPrerollAdStartEvent,ON_PREROLL_AD_COMPLETE_EVENT:a.onPrerollAdCompleteEvent,ON_PREROLL_AD_CLOSE_EVENT:a.onPrerollAdCloseEvent,ON_PREROLL_AD_CLICK_EVENT:a.onPrerollAdClickEvent,ON_PREROLL_AD_CURRENT_TIME_CHANGE_EVENT:a.onPrerollAdCurrentTimeChangeEvent,ON_PREROLL_AD_ERROR_EVENT:a.onPrerollAdErrorEvent,ON_PREROLL_NO_AD_EVENT:a.onPrerollNoAdEvent,ON_PREROLL_AD_ALL_COMPLETE_EVENT:a.onPrerollAdAllCompleteEvent,ON_PREROLL_BANNER_START_EVENT:a.onPrerollBannerStartEvent,ON_PREROLL_BANNER_CLOSE_EVENT:a.onPrerollBannerCloseEvent,ON_PREROLL_BANNER_CLICK_EVENT:a.onPrerollBannerClickEvent,ON_MIDROLL_AD_REQUEST:a.onMidrollAdRequest,ON_MIDROLL_AD_READY:a.onMidrollAdReady,ON_MIDROLL_AD_IMPRESSION:a.onMidrollAdImpression,ON_MIDROLL_AD_ERROR_EVENT:a.onMidrollAdErrorEvent,ON_MIDROLL_AD_BLOCK_EVENT:a.onMidrollAdBlockEvent,ON_MIDROLL_NO_AD_EVENT:a.onMidrollNoAdEvent,ON_MIDROLL_AD_START_EVENT:a.onMidrollAdStartEvent,ON_MIDROLL_AD_COMPLETE_EVENT:a.onMidrollAdCompleteEvent,ON_MIDROLL_AD_CLOSE_EVENT:a.onMidrollAdCloseEvent,ON_MIDROLL_AD_CLICK_EVENT:a.onMidrollAdClickEvent,ON_MIDROLL_AD_CURRENT_TIME_CHANGE_EVENT:a.onMidrollAdCurrentTimeChangeEvent,ON_MIDROLL_AD_CLICK_SKIP:a.onMidrollAdClickSkip,ON_MIDROLL_AD_EMPTY:a.onMidrollAdEmpty,ON_MIDROLL_AD_ALL_COMPLETE_EVENT:a.onMidrollAdAllCompleteEvent,ON_POSTROLL_AD_REQUEST:a.onPostrollAdRequest,ON_POSTROLL_AD_READY:a.onPostrollAdReady,ON_POSTROLL_AD_IMPRESSION:a.onPostrollAdImpression,ON_POSTROLL_AD_ERROR_EVENT:a.onPostrollAdErrorEvent,ON_POSTROLL_AD_BLOCK_EVENT:a.onPostrollAdBlockEvent,ON_POSTROLL_NO_AD_EVENT:a.onPostrollNoAdEvent,ON_POSTROLL_AD_START_EVENT:a.onPostrollAdStartEvent,ON_POSTROLL_AD_COMPLETE_EVENT:a.onPostrollAdCompleteEvent,ON_POSTROLL_AD_CLOSE_EVENT:a.onPostrollAdCloseEvent,ON_POSTROLL_AD_CLICK_EVENT:a.onPostrollAdClickEvent,ON_POSTROLL_AD_CURRENT_TIME_CHANGE_EVENT:a.onPostrollAdCurrentTimeChangeEvent,ON_POSTROLL_AD_CLICK_SKIP:a.onPostrollAdClickSkip,ON_POSTROLL_AD_EMPTY:a.onPostrollAdEmpty,ON_POSTROLL_AD_ALL_COMPLETE_EVENT:a.onPostrollAdAllCompleteEvent,ON_END_BANNER_START_EVENT:a.onEndBannerStartEvent,ON_END_BANNER_CLOSE_EVENT:a.onEndBannerCloseEvent,ON_END_BANNER_CLICK_EVENT:a.onEndBannerClickEvent,ON_PAUSEBANNER_ADS_START_EVENT:a.onPauseBannerAdsStartEvent,ON_PAUSEBANNER_ADS_CLOSE_EVENT:a.onPauseBannerAdsCloseEvent,ON_PAUSEBANNER_ADS_CLICK_EVENT:a.onPauseBannerAdsClickEvent,ON_PREROLL_NO_ADS_START_EVENT:a.onPrerollNoAdsStartEvent,ON_PREROLL_NO_ADS_COMPLETE_EVENT:a.onPrerollNoAdsCompleteEvent,ON_PREROLL_NO_ADS_CLOSE_EVENT:a.onPrerollNoAdsCloseEvent,ON_PREROLL_NO_ADS_CLICK_EVENT:a.onPrerollNoAdsClickEvent,ON_MIDROLL_NO_ADS_START_EVENT:a.onMidrollNoAdsStartEvent,ON_MIDROLL_NO_ADS_COMPLETE_EVENT:a.onMidrollNoAdsCompleteEvent,ON_MIDROLL_NO_ADS_CLOSE_EVENT:a.onMidrollNoAdsCloseEvent,ON_MIDROLL_NO_ADS_CLICK_EVENT:a.onMidrollNoAdsClickEvent,ON_POSTROLL_NO_AD_START_EVENT:a.onPostrollNoAdStartEvent,ON_POSTROLL_NO_AD_COMPLETE_EVENT:a.onPostrollNoAdCompleteEvent,ON_POSTROLL_NO_AD_CLOSE_EVENT:a.onPostrollNoAdCloseEvent,ON_POSTROLL_NO_AD_CLICK_EVENT:a.onPostrollNoAdClickEvent,ON_PREROLL_BLOCKED_ADS_START_EVENT:a.onPrerollBlockedAdsStartEvent,ON_PREROLL_BLOCKED_ADS_COMPLETE_EVENT:a.onPrerollBlockedAdsCompleteEvent,ON_PREROLL_BLOCKED_ADS_CLOSE_EVENT:a.onPrerollBlockedAdsCloseEvent,ON_PREROLL_BLOCKED_ADS_CLICK_EVENT:a.onPrerollBlockedAdsClickEvent,ON_MIDROLL_BLOCKED_ADS_START_EVENT:a.onMidrollBlockedAdsStartEvent,ON_MIDROLL_BLOCKED_ADS_COMPLETE_EVENT:a.onMidrollBlockedAdsCompleteEvent,ON_MIDROLL_BLOCKED_ADS_CLOSE_EVENT:a.onMidrollBlockedAdsCloseEvent,ON_MIDROLL_BLOCKED_ADS_CLICK_EVENT:a.onMidrollBlockedAdsClickEvent,ON_POSTROLL_BLOCK_AD_START_EVENT:a.onPostrollBlockAdStartEvent,ON_POSTROLL_BLOCK_AD_COMPLETE_EVENT:a.onPostrollBlockAdCompleteEvent,ON_POSTROLL_BLOCK_AD_CLOSE_EVENT:a.onPostrollBlockAdCloseEvent,ON_POSTROLL_BLOCK_AD_CLICK_EVENT:a.onPostrollBlockAdClickEvent,ON_PLAYER_IDLE:a.onPlayerIdle,ON_PLAYER_LOADED:a.onPlayerLoaded,ON_MEDIA_CURRENT_TIME_CHANGE:a.onMediaCurrentTimeChange,ON_MEDIA_PLAYED_TIME_CHANGE:a.onMediaPlayedTimeChange,ON_MEDIA_IMPRESSION:a.onMediaImpression,ON_COMPLETED:a.onCompleted,ON_PLAYER_READY:a.onPlayerReady,ON_REPEAT_PLAY:a.onRepeatPlay,ON_ERROR:a.onError,ON_FULLSCREEN_CHANGE:a.onFullscreenChange,ON_USER_CLICK_PLAY:a.onUserClickPlay,ON_GO_TO_DOWNLOAD_APP:a.onGoToDownloadApp,ON_PLAYED_15MINS:a.onPlayed15Mins,ON_PLAYER_PAUSED:a.onPlayerPaused,ON_PLAYER_PLAYING:a.onPlayerPlaying,ON_REFRESH_TOKEN:a.onRefreshToken,ON_CONTINUE_STREAM:a.onContinueStream,ON_STOP_STREAM:a.onStopStream,ON_EC_START_EVENT:a.onEcStartEvent,ON_EC_END_EVENT:a.onEcEndEvent,ON_EC_CLICK_EVENT:a.onEcClickEvent,ON_CONTENT_RESUME_REQUESTED:a.onContentResumeRequestedEvent}}function LiTVPlayer(){function e(){bt=new Array,bt.push({time:0,trigger:Qn})}function n(e){switch(ut&&console.log("setPlayerType",e),Pt.player.type="dvr",e){case"live":_t?($(".flowplayer").hasClass("is-live")||$(".flowplayer").addClass("is-live"),$(".fp-play").addClass("fp-channel-live"),$(".fp-channel-live").removeClass("fp-play"),$(".fp-time").hide()):v(mt.ON_PLAYER_READY,function(){$(".flowplayer").hasClass("is-live")||$(".flowplayer").addClass("is-live"),$(".fp-play").addClass("fp-channel-live"),$(".fp-channel-live").removeClass("fp-play"),$(".fp-time").hide()});break;case"vchannel":_t?($(".flowplayer").hasClass("is-live")||$(".flowplayer").addClass("is-live"),$(".fp-play").addClass("fp-channel-live"),$(".fp-channel-live").removeClass("fp-play"),$(".fp-time").hide()):(v(mt.ON_PLAYER_READY,function(){$(".flowplayer").hasClass("is-live")||$(".flowplayer").addClass("is-live"),$(".fp-play").addClass("fp-channel-live"),$(".fp-channel-live").removeClass("fp-play"),$(".fp-time").hide()}),navigator.userAgent.indexOf("Windows")>-1&&(navigator.userAgent.indexOf("Edge")>-1||navigator.userAgent.indexOf("NET")>-1||navigator.userAgent.indexOf("MSIE")>-1||navigator.userAgent.indexOf("Trident")>-1)&&v(mt.ON_PLAYER_LOADED,function(){$.fplayer.one("ready",function(){console.warn("...ie11 ready"),$(".flowplayer").hasClass("is-live")||$(".flowplayer").addClass("is-live"),$(".fp-time").hide(),$(".fp-play").attr("class","fp-channel-live")})}));break;default:_t?($(".flowplayer").hasClass("is-live")&&$(".flowplayer").removeClass("is-live"),$(".fp-channel-live").addClass("fp-play"),$(".fp-play").removeClass("fp-channel-live"),$(".fp-time").show()):v(mt.ON_PLAYER_READY,function(){$(".flowplayer").hasClass("is-live")&&$(".flowplayer").removeClass("is-live"),$(".fp-channel-live").addClass("fp-play"),$(".fp-play").removeClass("fp-channel-live"),$(".fp-time").show()})}}function t(e,n){Pt.player.width=e,Pt.player.height=n,void 0!==pt.setSize&&pt.setSize(e,n)}function o(e){Pt.player.bufferTime=e}function r(e){switch(w(e/1e3),deviceType){case"pc":Pt.player.clipStartTime=e/1e3,v(mt.ON_PLAYER_READY,function(){pt.seek(e/1e3)});break;case"android":case"ios":Pt.player.clipStartTime=e/1e3}}function l(e){Pt.player.clipEndTime=e}function a(e,n){ut&&console.log("setUrl",e),uiRender.controlsBar.show(),Pt.media.url=e,void 0!==pt.setUrl&&pt.setUrl(e,n)}function i(e){Pt.media.assetId=e}function s(e){ut&&console.log("setAdsConfig",e),d(),c(e)}function c(e){if(void 0!==e.logo&&e.logo){var n={};for(var t in e.logo){var o=e.logo[t].position.toString();void 0===n[o]&&(n[o]=[]),n[o].push(e.logo[t])}Pt.ads.logo.meta=n}void 0!==e.prerolls&&e.prerolls&&(Pt.ads.preroll.meta=e.prerolls),void 0!==e.prerollCount&&e.prerollCount&&(Pt.ads.preroll.count=e.prerollCount),void 0!==e.prerollBanners&&e.prerollBanners&&(Pt.ads.prerollBanner.meta=e.prerollBanners),void 0!==e.midrolls&&e.midrolls&&(Pt.ads.midroll.meta=e.midrolls),void 0!==e.midrollCount&&e.midrollCount&&(Pt.ads.midroll.count=e.midrollCount),void 0!==e.timeCodes&&e.timeCodes&&(Pt.ads.midroll.timeCodes=e.timeCodes),void 0!==e.midrollBanners&&e.midrollBanners&&(Pt.ads.midrollBanner.meta=e.midrollBanners),void 0!==e.noAd&&e.noAd&&(Pt.ads.noAds.meta=e.noAd),void 0!==e.adBlock&&e.adBlock&&(Pt.ads.adBlocked.meta=e.adBlock),void 0!==e.postrolls&&e.postrolls&&(Pt.ads.postroll.meta=e.postrolls),void 0!==e.pauseBanners&&e.pauseBanners&&(Pt.ads.pauseBanner.meta=e.pauseBanners),void 0!==e.endBanners&&e.endBanners&&(Pt.ads.endBanner.meta=e.endBanners)}function d(){Ot.preroll=0,Ot.midroll=0,Ot.postroll=0}function u(e){Pt.player.id=e}function p(e){for(var n in e)e.hasOwnProperty(n)&&(Pt[n]=e[n])}function f(){ut&&console.log("init"),e(),Et=!1,yt.addEventListener(yt.ON_TIMER_COMPLETED,qn),yt.start(),mt.delAll(),ht=!1,_t=!1,Nt=!1,$(window).blur(function(){yt.restart()}),$(window).focus(function(){ht=!1,yt.restart()}),$(window).mousemove(function(){yt.restart()}),$(window).keydown(function(){yt.restart()}),$(window).click(function(){yt.restart()})}function m(){return ut&&console.log("loadPlayer"),vt=!1,P(),ft.resetPlayedTime(),lt(),At.removeEventListener(At.ON_TIMER_COMPLETED,lt),At.addEventListener(At.ON_TIMER_COMPLETED,lt),pt=$("#"+Pt.player.id).flow(Pt),pt.load(),!0}function v(e,n){mt.add(e,n)}function g(e,n){mt.del(e,n)}function E(){if(0==vt&&1==gt)return pt.play()}function _(){ut&&console.log("pause",vt),vt?ht=!0:pt.pause()}function h(){pt.pause(),vt&&pt.pauseAfterReady()}function y(){void 0!==pt.stop&&pt.stop()}function A(){ut&&console.log("close"),_t=!1,void 0!==pt.setUrl&&pt.setUrl(""),"ios"==deviceType&&(vjs.players={}),$("#LiTVPlayer").remove(),$("#player-block").append("<div id='LiTVPlayer'><p><a href='http://www.adobe.com/go/getflashplayer'><img src='/resources/image/get_flash_player.gif' data-no-retina /></a></p></div>"),At.stop(),at()}function C(e){pt.seek(e/1e3)}function b(){return Nt?1e3*Pt.player.clipStartTime:1e3*pt.getCurrentTime()}function O(e){return pt.canSeekTo(e)}function T(e){pt.setBufferTime(e)}function k(e){ut&&console.log("setMediaResourceURL",e,vt),vt?(v(mt.ON_PREROLL_ADS_ALL_COMPLETE_EVENT,function(){Ct=!0,pt.setMediaResourceURL(e)}),v(mt.ON_MIDROLL_ADS_ALL_COMPLETE_EVENT,function(){Ct=!0,pt.setMediaResourceURL(e)}),v(mt.ON_PREROLL_NO_ADS_EVENT,function(){Ct=!0,pt.setMediaResourceURL(e)}),v(mt.ON_MIDROLL_NO_ADS_EVENT,function(){Ct=!0,pt.setMediaResourceURL(e)}),v(mt.ON_PREROLL_BLOCKED_ADS_COMPLETE_EVENT,function(){Ct=!0,pt.setMediaResourceURL(e)}),v(mt.ON_PREROLL_BLOCKED_ADS_CLOSE_EVENT,function(){Ct=!0,pt.setMediaResourceURL(e)}),v(mt.ON_MIDROLL_BLOCKED_ADS_COMPLETE_EVENT,function(){Ct=!0,pt.setMediaResourceURL(e)}),v(mt.ON_MIDROLL_BLOCKED_ADS_CLOSE_EVENT,function(){Ct=!0,pt.setMediaResourceURL(e)})):(Ct=!1,pt.setMediaResourceURL(e))}function N(e){pt.setScaleMode(e)}function L(e){ft.add(e)}function P(){ft.reset()}function R(){return ft.get()}function S(e){ft.cal(e)}function w(e){ft.setBegin(e)}function I(){return ft.getPlayedTime()}function D(e){return"keep"==e?void(playedKeep={percentage:0==pt.getDuration()?0:Math.floor(pt.getCurrentTime()/pt.getDuration()*100),played:I()}):vt?playedKeep:(ut&&console.log(pt.getCurrentTime(),pt.getDuration()),{percentage:0==pt.getDuration()?0:Math.floor(pt.getCurrentTime()/pt.getDuration()*100),played:I()})}function M(){ft.resetPlayedTime()}function B(){return Pt}function x(e){pt.displayAd(e)}function V(e){pt.closeAd(e)}function F(){ut&&console.log("displayBranding")}function U(){if(ut&&console.log("displayPreroll",Ot.preroll),vt)return void(ut&&console.log("displayPreroll",vt));if(Tt.length>0)return void playPreroll();if(Pt.ads.preroll.meta.length<=0||Ot.preroll>Pt.ads.preroll.meta.length-1)return void Ie();switch(vt=!0,Pt.ads.preroll.meta[Ot.preroll].schema){case"litvBranding":Rt.setAdClip(Pt.ads.preroll.meta[Ot.preroll].spaceId),Rt.setAssetId(Pt.media.assetId),Ot.preroll++,onPrerollAdsParserComplete([{url:Pt.ads.preroll.meta[0].data,skipAdUrl:Pt.ads.preroll.meta[0].skipAdUrl,clickUrl:Pt.ads.preroll.meta[0].clickThrough,id:Pt.ads.preroll.id,mediaType:Pt.ads.preroll.meta[0].mediaType,closeable:Pt.ads.preroll.meta[0].closeable,type:"video/mp4",duration:Pt.ads.preroll.meta[0].duration}]);break;case"litv":break;default:var e=new adObject;e.meta=Pt.ads.preroll.meta[Ot.preroll],e.onRequest=Pt.ads.preroll.callback.onRequest,e.onImpression=Pt.ads.preroll.callback.onImpression,e.onError=Pt.ads.preroll.callback.onError,e.onNoAd=Pt.ads.preroll.callback.onNoAd,e.onAdReady=Pt.ads.preroll.callback.onAdReady,e.onStart=Pt.ads.preroll.callback.onStart,e.onComplete=Pt.ads.preroll.callback.onComplete,e.onClose=Pt.ads.preroll.callback.onClose,e.onClick=Pt.ads.preroll.callback.onClick,e.onCurrentTimeChange=Pt.ads.preroll.callback.onCurrentTimeChange,e.onClickSkip=Pt.ads.preroll.callback.onClickSkip,e.onEmpty=Pt.ads.preroll.callback.onEmpty,e.onContentResumeRequested=Pt.ads.preroll.callback.onContentResumeRequested,Rt.setAdId(Pt.ads.preroll.id),Rt.setAdClip(Pt.ads.preroll.meta[Ot.preroll].spaceId),Rt.setAssetId(Pt.media.assetId),Ot.preroll++,adHandler.requestAd(e)}}function j(){if(Pt.ads.prerollBanner.meta.length<=0)return vt=!1,Et||H(),void(ht&&(pt.isPaused()||pt.pause()));vt=!0;var e=Math.floor(Math.random()*Pt.ads.prerollBanner.meta.length);switch(Pt.ads.prerollBanner.meta[e].schema){case"litv":Rt.setAdClip(Pt.ads.prerollBanner.meta[e].spaceId),Rt.setAssetId(Pt.media.assetId),Rt.setAdId(Pt.ads.prerollBanner.id),pt.displayAd({url:Pt.ads.prerollBanner.meta[e].data,skipAdUrl:Pt.ads.prerollBanner.meta[e].skipAdUrl,clickUrl:Pt.ads.prerollBanner.meta[e].clickThrough,autoCloseAfter:Pt.ads.prerollBanner.meta[e].duration,enableImageAdCounter:Pt.ads.prerollBanner.enableImageAdCounter,mediaType:Pt.ads.prerollBanner.mediaType,id:Pt.ads.prerollBanner.id,closable:Pt.ads.prerollBanner.closable,onStart:Pt.ads.prerollBanner.callback.onStart,onClick:Pt.ads.prerollBanner.callback.onClick,onClose:Pt.ads.prerollBanner.callback.onClose,onStartFn:Pt.ads.prerollBanner.callback.onStartFn,onClickFn:Pt.ads.prerollBanner.callback.onClickFn,onCloseFn:Pt.ads.prerollBanner.callback.onCloseFn})}}function K(){if(ut&&console.log("displayMidroll",Ot.midroll),Pt.ads.midroll.meta.length<=0||Ot.midroll>Pt.ads.midroll.meta.length-1)return Ot.midroll=0,void Xe();switch(vt=!0,Pt.ads.midroll.meta[Ot.midroll].schema){case"empty":case"litv":Ot.midroll++,K();break;default:var e=new adObject;e.meta=Pt.ads.midroll.meta[Ot.midroll],e.onRequest=Pt.ads.midroll.callback.onRequest,e.onImpression=Pt.ads.midroll.callback.onImpression,e.onError=Pt.ads.midroll.callback.onError,e.onNoAd=Pt.ads.midroll.callback.onNoAd,e.onAdReady=Pt.ads.midroll.callback.onAdReady,e.onStart=Pt.ads.midroll.callback.onStart,e.onComplete=Pt.ads.midroll.callback.onComplete,e.onClose=Pt.ads.midroll.callback.onClose,e.onClick=Pt.ads.midroll.callback.onClick,e.onCurrentTimeChange=Pt.ads.midroll.callback.onCurrentTimeChange,e.onClickSkip=Pt.ads.midroll.callback.onClickSkip,e.onEmpty=Pt.ads.midroll.callback.onEmpty,e.onContentResumeRequested=Pt.ads.midroll.callback.onContentResumeRequested,Rt.setAdId(Pt.ads.midroll.id),Rt.setAdClip(Pt.ads.midroll.meta[Ot.midroll].spaceId),Rt.setAssetId(Pt.media.assetId),Ot.midroll++,adHandler.requestAd(e)}}function q(){return Pt.ads.pauseBanner.meta.length<=0?void(vt=!1):_t?(ut&&console.log("displayPauseBanner"),void pt.displayAd({id:Pt.ads.pauseBannerBg.id,url:Pt.ads.pauseBannerBg.url,clickUrl:Pt.ads.pauseBannerBg.clickUrl,mediaType:Pt.ads.pauseBannerBg.mediaType,isAdvertisement:Pt.ads.pauseBannerBg.isAdvertisement,hideScrubBarWhilePlayingAd:Pt.ads.pauseBannerBg.hideScrubBarWhilePlayingAd,resumePlaybackAfterAd:Pt.ads.pauseBannerBg.resumePlaybackAfterAd,pauseMainMediaWhilePlayingAd:Pt.ads.pauseBannerBg.resumePlaybackAfterAd,closable:Pt.ads.pauseBannerBg.closable,onStart:Pt.ads.pauseBannerBg.callback.onStart,onClick:Pt.ads.pauseBannerBg.callback.onClick,onStartFn:Pt.ads.pauseBannerBg.callback.onStartFn,onClickFn:Pt.ads.pauseBannerBg.callback.onClickFn})):void(ut&&console.log("displayPauseBanner notready"))}function H(){if(!(Pt.ads.logo.meta.length<=0)){ut&&console.log("displayLogo");for(var e in Pt.ads.logo.meta){var n=Math.floor(Math.random()*Pt.ads.logo.meta[e].length);switch(Pt.ads.logo.meta[e][n].schema){case"litv":pt.displayAd({id:Pt.ads.logo.id+Pt.ads.logo.meta[e][n].position,adClip:Pt.ads.logo.meta[e][n].spaceId,isAdvertisement:Pt.ads.logo.isAdvertisement,url:Pt.ads.logo.meta[e][n].data,clickUrl:Pt.ads.logo.meta[e][n].clickThrough,mediaType:Pt.ads.logo.mediaType,autoCloseAfter:Pt.ads.logo.meta[e][n].duration,closable:Pt.ads.logo.closable,hideScrubBarWhilePlayingAd:Pt.ads.logo.hideScrubBarWhilePlayingAd,pauseMainMediaWhilePlayingAd:Pt.ads.logo.pauseMainMediaWhilePlayingAd,resumePlaybackAfterAd:Pt.ads.logo.resumePlaybackAfterAd,onStart:Pt.ads.logo.callback.onStart,onClose:Pt.ads.logo.callback.onClose,onClick:Pt.ads.logo.callback.onClick,onStartFn:Pt.ads.logo.callback.onStartFn,onCloseFn:Pt.ads.logo.callback.onCloseFn,onClickFn:Pt.ads.logo.callback.onClickFn})}}}}function Y(){for(var e in Pt.ads.logo.meta)pt.closeAd(Pt.ads.logo.id+e)}function G(){pt.closeAd(Pt.ads.pauseBannerBg.id),pt.closeAd(Pt.ads.pauseBanner.id)}function Q(){return vt}function W(e){vt=e}function z(e){gt=e}function X(e){return"boolean"==typeof e&&(Et=e),Et}function J(e){if(ut&&console.log("displayNoAd go"),Pt.ads.noAds.meta.length<=0)switch(vt=!1,e){case"p":U();break;case"m":K();break;case"ps":ee()}else{ut&&console.log("displayNoAd go");var n=Math.floor(Math.random()*Pt.ads.noAds.meta.length);switch(Pt.ads.noAds.meta[n].schema){case"litv":Rt.setAdClip(Pt.ads.noAds.meta[n].spaceId),Rt.setAssetId(Pt.media.assetId),Rt.setAdId(Pt.ads.noAds.id);var t;switch(Pt.ads.noAds.meta[n].mediaType){case"image":switch(t={url:Pt.ads.noAds.meta[n].data,skipAdUrl:Pt.ads.noAds.meta[n].skipAdUrl,clickUrl:Pt.ads.noAds.meta[n].clickThrough,autoCloseAfter:Pt.ads.noAds.meta[n].duration,enableImageAdCounter:Pt.ads.noAds.enableImageAdCounter,id:Pt.ads.noAds.id,mediaType:Pt.ads.noAds.mediaType,closable:Pt.ads.noAds.closable},e){case"p":t.onStart=Pt.ads.noAds.callback.onStartForPreroll,t.onClick=Pt.ads.noAds.callback.onClickForPreroll,t.onClose=Pt.ads.noAds.callback.onCloseForPreroll,t.onStartFn=Pt.ads.noAds.callback.onStartForPrerollFn,t.onClickFn=Pt.ads.noAds.callback.onClickForPrerollFn,t.onCloseFn=Pt.ads.noAds.callback.onCloseForPrerollFn;break;case"m":t.onStart=Pt.ads.noAds.callback.onStartForMidroll,t.onClick=Pt.ads.noAds.callback.onClickForMidroll,t.onClose=Pt.ads.noAds.callback.onCloseForMidroll,t.onStartFn=Pt.ads.noAds.callback.onStartForMidrollFn,t.onClickFn=Pt.ads.noAds.callback.onClickForMidrollFn,t.onCloseFn=Pt.ads.noAds.callback.onCloseForMidrollFn;break;case"ps":t.onStart=Pt.ads.noAds.callback.onStartForPostroll,t.onClick=Pt.ads.noAds.callback.onClickForPostroll,t.onClose=Pt.ads.noAds.callback.onCloseForPostroll,t.onStartFn=Pt.ads.noAds.callback.onStartForPostrollFn,t.onClickFn=Pt.ads.noAds.callback.onClickForPostrollFn,t.onCloseFn=Pt.ads.noAds.callback.onCloseForPostrollFn}pt.displayAd(t);break;case"video":if(ut&&console.log("no ad video~~~"),""==Pt.ads.noAds.meta[n].data)switch(vt=!1,e){case"p":U();break;case"m":K();break;case"ps":ee()}else limeta.getAdUrl(Pt.ads.noAds.meta[n].data,function(o){switch(ut&&console.log("no ad video",o),t={id:Pt.ads.noAds.id,url:o,skipAdUrl:Pt.ads.noAds.meta[n].skipAdUrl,mediaType:Pt.ads.noAds.meta[n].mediaType,closable:Pt.ads.noAds.closable,clickUrl:Pt.ads.noAds.meta[n].clickThrough,duration:Pt.ads.noAds.meta[n].duration,type:"application/x-mpegurl"},e){case"p":t.onStart=Pt.ads.noAds.callback.onStartForPreroll,t.onComplete=Pt.ads.noAds.callback.onCompleteForPreroll,t.onClick=Pt.ads.noAds.callback.onClickForPreroll,t.onClose=Pt.ads.noAds.callback.onCloseForPreroll,t.onStartFn=Pt.ads.noAds.callback.onStartForPrerollFn,t.onCompleteFn=Pt.ads.noAds.callback.onCompleteForPrerollFn,t.onClickFn=Pt.ads.noAds.callback.onClickForPrerollFn,t.onCloseFn=Pt.ads.noAds.callback.onCloseForPrerollFn;break;case"m":t.onStart=Pt.ads.noAds.callback.onStartForMidroll,t.onComplete=Pt.ads.noAds.callback.onCompleteForMidroll,t.onClick=Pt.ads.noAds.callback.onClickForMidroll,t.onClose=Pt.ads.noAds.callback.onCloseForMidroll,t.onStartFn=Pt.ads.noAds.callback.onStartForMidrollFn,t.onCompleteFn=Pt.ads.noAds.callback.onCompleteForMidrollFn,t.onClickFn=Pt.ads.noAds.callback.onClickForMidrollFn,t.onCloseFn=Pt.ads.noAds.callback.onCloseForMidrollFn;break;case"ps":t.onStart=Pt.ads.noAds.callback.onStartForPostroll,t.onComplete=Pt.ads.noAds.callback.onCompleteForPostroll,t.onClick=Pt.ads.noAds.callback.onClickForPostroll,t.onClose=Pt.ads.noAds.callback.onCloseForPostroll,t.onStartFn=Pt.ads.noAds.callback.onStartForPostrollFn,t.onCompleteFn=Pt.ads.noAds.callback.onCompleteForPostrollFn,t.onClickFn=Pt.ads.noAds.callback.onClickForPostrollFn,t.onCloseFn=Pt.ads.noAds.callback.onCloseForPostrollFn}pt.displayAd(t)},function(){switch(ut&&console.log("no ad video error"),vt=!1,e){case"p":U();break;case"m":K();break;case"ps":ee()}})}break;default:switch(vt=!1,e){case"p":U();break;case"m":K();break;case"ps":ee()}}}}function Z(e){if(Pt.ads.adBlocked.meta.length<=0)switch(vt=!1,e){case"p":U();break;case"m":K();break;case"ps":ee()}else{var n=Math.floor(Math.random()*Pt.ads.adBlocked.meta.length);switch(Pt.ads.adBlocked.meta[n].schema){case"litv":Rt.setAdClip(Pt.ads.adBlocked.meta[n].spaceId),Rt.setAssetId(Pt.media.assetId),Rt.setAdId(Pt.ads.adBlocked.id);var t;switch(Pt.ads.adBlocked.meta[n].mediaType){case"image":switch(t={url:Pt.ads.adBlocked.meta[n].data,skipAdUrl:Pt.ads.adBlocked.meta[n].skipAdUrl,clickUrl:Pt.ads.adBlocked.meta[n].clickThrough,autoCloseAfter:Pt.ads.adBlocked.meta[n].duration,enableImageAdCounter:Pt.ads.adBlocked.enableImageAdCounter,id:Pt.ads.adBlocked.id,mediaType:Pt.ads.adBlocked.mediaType,closable:Pt.ads.adBlocked.closable},e){case"p":t.onStart=Pt.ads.adBlocked.callback.onStartForPreroll,t.onClick=Pt.ads.adBlocked.callback.onClickForPreroll,t.onClose=Pt.ads.adBlocked.callback.onCloseForPreroll,t.onStartFn=Pt.ads.adBlocked.callback.onStartForPrerollFn,t.onClickFn=Pt.ads.adBlocked.callback.onClickForPrerollFn,t.onCloseFn=Pt.ads.adBlocked.callback.onCloseForPrerollFn;break;case"m":t.onStart=Pt.ads.adBlocked.callback.onStartForMidroll,t.onClick=Pt.ads.adBlocked.callback.onClickForMidroll,t.onClose=Pt.ads.adBlocked.callback.onCloseForMidroll,t.onStartFn=Pt.ads.adBlocked.callback.onStartForMidrollFn,t.onClickFn=Pt.ads.adBlocked.callback.onClickForMidrollFn,t.onCloseFn=Pt.ads.adBlocked.callback.onCloseForMidrollFn;break;case"ps":t.onStart=Pt.ads.adBlocked.callback.onStartForPostroll,t.onClick=Pt.ads.adBlocked.callback.onClickForPostroll,t.onClose=Pt.ads.adBlocked.callback.onCloseForPostroll,t.onStartFn=Pt.ads.adBlocked.callback.onStartForPostrollFn,t.onClickFn=Pt.ads.adBlocked.callback.onClickForPostrollFn,t.onCloseFn=Pt.ads.adBlocked.callback.onCloseForPostrollFn}pt.displayAd(t);break;case"video":limeta.getAdUrl(Pt.ads.adBlocked.meta[n].data,function(o){switch(ut&&console.log("ad blocked video",o),t={id:Pt.ads.adBlocked.id,url:o,skipAdUrl:Pt.ads.adBlocked.meta[n].skipAdUrl,mediaType:Pt.ads.adBlocked.meta[n].mediaType,closable:Pt.ads.adBlocked.closable,clickUrl:Pt.ads.adBlocked.meta[n].clickThrough,duration:Pt.ads.adBlocked.meta[n].duration,type:"application/x-mpegurl"},e){case"p":t.onStart=Pt.ads.adBlocked.callback.onStartForPreroll,t.onClick=Pt.ads.adBlocked.callback.onClickForPreroll,t.onComplete=Pt.ads.adBlocked.callback.onCompleteForPreroll,t.onClose=Pt.ads.adBlocked.callback.onCloseForPreroll,t.onStartFn=Pt.ads.adBlocked.callback.onStartForPrerollFn,t.onCompleteFn=Pt.ads.adBlocked.callback.onCompleteForPrerollFn,t.onClickFn=Pt.ads.adBlocked.callback.onClickForPrerollFn,t.onCloseFn=Pt.ads.adBlocked.callback.onCloseForPrerollFn;break;case"m":t.onStart=Pt.ads.adBlocked.callback.onStartForMidroll,t.onClick=Pt.ads.adBlocked.callback.onClickForMidroll,t.onComplete=Pt.ads.adBlocked.callback.onCompleteForMidroll,t.onClose=Pt.ads.adBlocked.callback.onCloseForMidroll,t.onStartFn=Pt.ads.adBlocked.callback.onStartForMidrollFn,t.onCompleteFn=Pt.ads.adBlocked.callback.onCompleteForMidrollFn,t.onClickFn=Pt.ads.adBlocked.callback.onClickForMidrollFn,t.onCloseFn=Pt.ads.adBlocked.callback.onCloseForMidrollFn;break;case"ps":t.onStart=Pt.ads.adBlocked.callback.onStartForPostroll,
t.onClick=Pt.ads.adBlocked.callback.onClickForPostroll,t.onComplete=Pt.ads.adBlocked.callback.onCompleteForPostroll,t.onClose=Pt.ads.adBlocked.callback.onCloseForPostroll,t.onStartFn=Pt.ads.adBlocked.callback.onStartForPostrollFn,t.onCompleteFn=Pt.ads.adBlocked.callback.onCompleteForPostrollFn,t.onClickFn=Pt.ads.adBlocked.callback.onClickForPostrollFn,t.onCloseFn=Pt.ads.adBlocked.callback.onCloseForPostrollFn}pt.displayAd(t)},function(){ut&&console.log("ad blocked video error")})}break;default:switch(vt=!1,e){case"p":U();break;case"m":K();break;case"ps":ee()}}}}function ee(){if(ut&&console.log("displayPostroll",Ot.postroll),Pt.ads.postroll.meta.length<=0||Ot.postroll>Pt.ads.postroll.meta.length-1)return Ot.postroll=0,void un();switch(vt=!0,Pt.ads.postroll.meta[Ot.postroll].schema){case"empty":case"litv":Ot.postroll++,ee();break;default:var e=new adObject;e.meta=Pt.ads.postroll.meta[Ot.postroll],e.onRequest=Pt.ads.postroll.callback.onRequest,e.onImpression=Pt.ads.postroll.callback.onImpression,e.onError=Pt.ads.postroll.callback.onError,e.onNoAd=Pt.ads.postroll.callback.onNoAd,e.onAdReady=Pt.ads.postroll.callback.onAdReady,e.onStart=Pt.ads.postroll.callback.onStart,e.onComplete=Pt.ads.postroll.callback.onComplete,e.onClose=Pt.ads.postroll.callback.onClose,e.onClick=Pt.ads.postroll.callback.onClick,e.onCurrentTimeChange=Pt.ads.postroll.callback.onCurrentTimeChange,e.onClickSkip=Pt.ads.postroll.callback.onClickSkip,e.onEmpty=Pt.ads.postroll.callback.onEmpty,e.onContentResumeRequested=Pt.ads.postroll.callback.onContentResumeRequested,Rt.setAdId(Pt.ads.postroll.id),Rt.setAdClip(Pt.ads.postroll.meta[Ot.postroll].spaceId),Rt.setAssetId(Pt.media.assetId),Ot.postroll++,adHandler.requestAd(e)}}function ne(){if(Pt.ads.endBanner.meta.length<=0)return void(vt=!1);var e=Math.floor(Math.random()*Pt.ads.endBanner.meta.length);switch(Pt.ads.endBanner.meta[e].schema){case"litv":Rt.setAdClip(Pt.ads.endBanner.meta[e].spaceId),Rt.setAssetId(Pt.media.assetId),Rt.setAdId(Pt.ads.endBanner.id),pt.displayAd({url:Pt.ads.endBanner.meta[e].data,skipAdUrl:Pt.ads.endBanner.meta[e].skipAdUrl,clickUrl:Pt.ads.endBanner.meta[e].clickThrough,autoCloseAfter:Pt.ads.endBanner.meta[e].duration,enableImageAdCounter:Pt.ads.endBanner.enableImageAdCounter,mediaType:Pt.ads.endBanner.mediaType,id:Pt.ads.endBanner.id,closable:Pt.ads.endBanner.closable,hideScrubBarWhilePlayingAd:Pt.ads.endBanner.hideScrubBarWhilePlayingAd,resumePlaybackAfterAd:Pt.ads.endBanner.resumePlaybackAfterAd,pauseMainMediaWhilePlayingAd:Pt.ads.endBanner.pauseMainMediaWhilePlayingAd,onStart:Pt.ads.endBanner.callback.onStart,onClick:Pt.ads.endBanner.callback.onClick,onClose:Pt.ads.endBanner.callback.onClose,onStartFn:Pt.ads.endBanner.callback.onStartFn,onClickFn:Pt.ads.endBanner.callback.onClickFn,onCloseFn:Pt.ads.endBanner.callback.onCloseFn})}}function te(){pt.closeAd(Pt.ads.endBanner.id)}function oe(){return pt.isPaused()}function re(){return""!=typeof pt}function le(e){ut&&console.log("setRecheckTimer",e),At.stop(),At.setDuration(e),At.start()}function ae(e){ut=e,pt.d8guy(e)}function ie(e){if(ut&&console.log("displayEc",e),!kt)for(var n in Pt.ads.ec.meta)if(e==Pt.ads.ec.meta[n].time)switch(Pt.ads.ec.meta[n].schema){case"litv":kt=!0,pt.displayAd({url:Pt.ads.ec.meta[n].data,isAdvertisement:Pt.ads.ec.isAdvertisement,clickUrl:Pt.ads.ec.meta[n].clickThrough,id:Pt.ads.ec.id+Pt.ads.ec.meta[n].id,hideScrubBarWhilePlayingAd:Pt.ads.ec.hideScrubBarWhilePlayingAd,resumePlaybackAfterAd:Pt.ads.ec.hideScrubBarWhilePlayingAd,pauseMainMediaWhilePlayingAd:Pt.ads.ec.pauseMainMediaWhilePlayingAd,assetId:Pt.media.assetId,autoCloseAfter:Pt.ads.ec.meta[n].duration,closable:Pt.ads.ec.closable,mediaType:Pt.ads.ec.mediaType,onStart:Pt.ads.ec.callback.onStart,onClose:Pt.ads.ec.callback.onClose,onClick:Pt.ads.ec.callback.onClick,onStartFn:Pt.ads.ec.callback.onStartFn,onCloseFn:Pt.ads.ec.callback.onCloseFn,onClickFn:Pt.ads.ec.callback.onClickFn})}}function se(){return dt}function ce(){return _t}function de(){return pt}function ue(){return pt.getApi()}function pe(){return Lt}function fe(){Lt=!Lt,pt.toggleFullscreen(),ut&&console.log("toggleFullscreen",Lt)}function me(e){pt.setVolume(e)}function ve(){return pt.getVolume()}function ge(e){adHandler.setVolume(e)}function Ee(){return adHandler.getVolume()}function _e(e){pt.setMute(e)}function he(e,n){ut&&console.log("onLogoStartEvent",e,n),Rt.setAdId(e),Rt.setAdClip(n),Rt.setAssetId(Pt.media.assetId),Rt.onImgStartEvent(),mt.callback(mt.ON_LOGO_START_EVENT)}function ye(e,n){ut&&console.log("onLogoCloseEvent",e,n),Rt.setAdId(e),Rt.setAdClip(n),Rt.setAssetId(Pt.media.assetId),Rt.onImgCloseEvent(),mt.callback(mt.ON_LOGO_CLOSE_EVENT)}function Ae(e,n){ut&&console.log("onLogoClickEvent",e,n),Rt.setAdId(e),Rt.setAdClip(n),Rt.setAssetId(Pt.media.assetId),Rt.onImgClickEvent(),pt.isPaused()?pt.play():pt.pause(),mt.callback(mt.ON_LOGO_CLICK_EVENT)}function Ce(){mt.callback(mt.ON_CONTENT_RESUME_REQUESTED)}function be(){ut&&console.log("onPrerollAdRequest"),Rt.setAdId(Pt.ads.preroll.id),Rt.onRequest(),uiRender.requestIma(),mt.callback(mt.ON_PREROLL_AD_REQUEST)}function Oe(e){ut&&console.log("onPrerollAdReady",e),Rt.setAdId(Pt.ads.preroll.id),dt=e,Rt.onServeEvent(),uiRender.playIma(),pt.getApi().disable(!0),mt.callback(mt.ON_PREROLL_AD_READY)}function Te(){ut&&console.log("onPrerollAdImpression"),Rt.setAdId(Pt.ads.preroll.id),Rt.onImpressionEvent(),mt.callback(mt.ON_PREROLL_AD_IMPRESSION)}function ke(){ut&&console.log("onPrerollAdStartEvent"),Rt.setAdId(Pt.ads.preroll.id),Rt.onStartEvent(),mt.callback(mt.ON_PREROLL_AD_START_EVENT)}function Ne(){ut&&console.log("onPrerollAdCompleteEvent"),Rt.setAdId(Pt.ads.preroll.id),vt=!1,Rt.onCompleteEvent(),mt.callback(mt.ON_PREROLL_AD_COMPLETE_EVENT),Ie()}function Le(){ut&&console.log("onPrerollAdCloseEvent"),Rt.setAdId(Pt.ads.preroll.id),vt=!1,Rt.onCloseEvent(),mt.callback(mt.ON_PREROLL_AD_CLOSE_EVENT),Ie()}function Pe(){ut&&console.log("onPrerollAdClickEvent"),Rt.setAdId(Pt.ads.preroll.id),Rt.onClickEvent(),ht=!0,mt.callback(mt.ON_PREROLL_AD_CLICK_EVENT)}function Re(e){ut&&console.log("onPrerollAdsCurrentTimeChangeEvent",e),uiRender.updateImaCounter(Math.round(e)),mt.callback(mt.ON_PREROLL_AD_CURRENT_TIME_CHANGE_EVENT,e)}function Se(e,n){switch(ut&&console.log("onPrerollAdErrorEvent",e,n),vt=!1,uiRender.closeIma(),pt.getApi().disable(!1),Y(),e){case 1012:Rt.onError(e),Ot.preroll>Pt.ads.preroll.meta.length-1?J("p"):U();break;case google.ima.AdError.ErrorCode.VAST_LOAD_TIMEOUT:case google.ima.AdError.ErrorCode.VAST_MEDIA_LOAD_TIMEOUT:default:Rt.onError(e),Ot.preroll>Pt.ads.preroll.meta.length-1?J("p"):U()}}function we(){ut&&console.log("onPrerollNoAdEvent"),Rt.setAdId(Pt.ads.preroll.id),Rt.onNoAdError(),Y(),uiRender.closeIma(),pt.getApi().disable(!1),vt=!1,Ot.preroll>Pt.ads.preroll.meta.length-1?J("p"):U(),mt.callback(mt.ON_PREROLL_NO_AD_EVENT)}function Ie(){ut&&console.log("onPrerollAdAllCompleteEvent"),vt=!1,uiRender.closeIma(),Ot.preroll=0,pt.getApi().disable(!1),uiRender.idleBreak.forceBreak(),mt.callback(mt.ON_PREROLL_AD_ALL_COMPLETE_EVENT),j()}function De(){ut&&console.log("onPrerollAdClickSkip"),vt=!1,Rt.onClickSkipEvent(),mt.callback(mt.ON_PREROLL_AD_CLICK_SKIP)}function Me(){ut&&console.log("onPrerollAdEmpty"),vt=!1,mt.callback(mt.ON_PREROLL_AD_EMPTY),U()}function Be(e){ut&&console.log("onPrerollBannerStartEvent",e),Rt.onImgStartEvent(),mt.callback(mt.ON_PREROLL_BANNER_START_EVENT)}function xe(e){ut&&console.log("onPrerollBannerCloseEvent",e),vt=!1,Rt.onImgCloseEvent(),Et||H(),ht&&(pt.isPaused()||pt.pause()),mt.callback(mt.ON_PREROLL_BANNER_CLOSE_EVENT)}function Ve(e){ut&&console.log("onPrerollBannerClickEvent",e),Rt.onImgClickEvent(),ht=!0,mt.callback(mt.ON_PREROLL_BANNER_CLICK_EVENT)}function Fe(){ut&&console.log("onMidrollAdRequest"),Rt.setAdId(Pt.ads.midroll.id),Rt.onRequest(),uiRender.requestIma(),mt.callback(mt.ON_MIDROLL_AD_REQUEST)}function Ue(e){ut&&console.log("onMidrollAdReady",e),dt=e,Rt.onServeEvent(),uiRender.playIma(),pt.getApi().disable(!0),mt.callback(mt.ON_MIDROLL_AD_READY)}function $e(){ut&&console.log("onMidrollAdImpression"),Rt.onImpressionEvent(),mt.callback(mt.ON_MIDROLL_AD_IMPRESSION)}function je(e,n){switch(ut&&console.log("onMidrollAdErrorEvent",e,n),vt=!1,uiRender.closeIma(),pt.getApi().disable(!1),Y(),e){case 1012:Rt.onError(e),Ot.midroll>Pt.ads.midroll.meta.length-1?J("m"):K();break;case google.ima.AdError.ErrorCode.VAST_LOAD_TIMEOUT:case google.ima.AdError.ErrorCode.VAST_MEDIA_LOAD_TIMEOUT:default:Rt.onError(e),Ot.midroll>Pt.ads.midroll.meta.length-1?J("m"):K()}}function Ke(){ut&&console.log("onMidrollNoAdEvent"),Rt.setAdId(Pt.ads.midroll.id),Rt.onNoAdError(),Y(),uiRender.closeIma(),pt.getApi().disable(!1),vt=!1,Ot.midroll>Pt.ads.midroll.meta.length-1?J("m"):K(),mt.callback(mt.ON_MIDROLL_NO_AD_EVENT)}function qe(){ut&&console.log("onMidrollAdStartEvent"),Rt.onStartEvent(),Y(),mt.callback(mt.ON_MIDROLL_AD_START_EVENT)}function He(){ut&&console.log("onMidrollAdCompleteEvent"),vt=!1,Rt.onCompleteEvent(),mt.callback(mt.ON_MIDROLL_AD_COMPLETE_EVENT),Xe()}function Ye(){ut&&console.log("onMidrollAdCloseEvent"),vt=!1,Rt.onCloseEvent(),mt.callback(mt.ON_MIDROLL_AD_CLOSE_EVENT),Xe()}function Ge(){ut&&console.log("onMidrollAdClickEvent"),Rt.onClickEvent(),ht=!0,mt.callback(mt.ON_MIDROLL_AD_CLICK_EVENT)}function Qe(e){ut&&console.log("onMidrollAdCurrentTimeChangeEvent",e),uiRender.updateImaCounter(Math.round(e)),mt.callback(mt.ON_MIDROLL_AD_CURRENT_TIME_CHANGE_EVENT,e)}function We(){ut&&console.log("onMidrollAdClickSkip"),vt=!1,Rt.onClickSkipEvent(),mt.callback(mt.ON_MIDROLL_AD_CLICK_SKIP)}function ze(){ut&&console.log("onMidrollAdEmpty"),vt=!1,mt.callback(mt.ON_MIDROLL_AD_EMPTY),K()}function Xe(){ut&&console.log("onMidrollAdAllCompleteEvent"),vt=!1,uiRender.closeIma(),Ot.midroll=0,pt.getApi().disable(!1),H(),ht&&(pt.isPaused()||pt.pause()),uiRender.idleBreak.forceBreak(),mt.callback(mt.ON_MIDROLL_AD_ALL_COMPLETE_EVENT)}function Je(){ut&&console.log("onPostrollAdRequest"),Rt.setAdId(Pt.ads.postroll.id),Rt.onRequest(),uiRender.requestIma(),mt.callback(mt.ON_POSTROLL_AD_REQUEST)}function Ze(e){ut&&console.log("onPostrollAdReady",e),dt=e,Rt.onServeEvent(),uiRender.playIma(),pt.getApi().disable(!0),mt.callback(mt.ON_POSTROLL_AD_READY)}function en(){ut&&console.log("onPostrollAdImpression"),Rt.onImpressionEvent(),mt.callback(mt.ON_POSTROLL_AD_IMPRESSION)}function nn(e,n){switch(ut&&console.log("onPostrollAdErrorEvent",e,n),vt=!1,uiRender.closeIma(),pt.getApi().disable(!1),Y(),e){case 1012:Rt.onError(e),Ot.postroll>Pt.ads.postroll.meta.length-1?J("ps"):ee();break;case google.ima.AdError.ErrorCode.VAST_LOAD_TIMEOUT:case google.ima.AdError.ErrorCode.VAST_MEDIA_LOAD_TIMEOUT:default:Rt.onError(e),Ot.postroll>Pt.ads.postroll.meta.length-1?J("ps"):ee()}}function tn(){ut&&console.log("onPostrollNoAdEvent"),Rt.setAdId(Pt.ads.postroll.id),Rt.onNoAdError(),Y(),uiRender.closeIma(),pt.getApi().disable(!1),vt=!1,Ot.postroll>Pt.ads.postroll.meta.length-1?J("ps"):ee(),mt.callback(mt.ON_POSTROLL_NO_AD_EVENT)}function on(){ut&&console.log("onPostrollAdStartEvent"),Rt.onStartEvent(),Y(),mt.callback(mt.ON_POSTROLL_AD_START_EVENT)}function rn(){ut&&console.log("onPostrollAdCompleteEvent"),vt=!1,Rt.onCompleteEvent(),mt.callback(mt.ON_POSTROLL_AD_COMPLETE_EVENT),un()}function ln(){ut&&console.log("onPostrollAdCloseEvent"),vt=!1,Rt.onCloseEvent(),mt.callback(mt.ON_POSTROLL_AD_CLOSE_EVENT)}function an(){ut&&console.log("onPostrollAdClickEvent"),Rt.onClickEvent(),ht=!0,mt.callback(mt.ON_POSTROLL_AD_CLICK_EVENT)}function sn(e){ut&&console.log("onPostrollAdCurrentTimeChangeEvent",e),uiRender.updateImaCounter(Math.round(e)),mt.callback(mt.ON_POSTROLL_AD_CURRENT_TIME_CHANGE_EVENT,e)}function cn(){ut&&console.log("onPostrollAdClickSkip"),vt=!1,Rt.onClickSkipEvent(),mt.callback(mt.ON_POSTROLL_AD_CLICK_SKIP)}function dn(){ut&&console.log("onPostrollAdEmpty"),vt=!1,mt.callback(mt.ON_POSTROLL_AD_EMPTY),ee()}function un(){ut&&console.log("onPostrollAdAllCompleteEvent"),vt=!1,uiRender.closeIma(),Ot.postroll=0,pt.getApi().disable(!1),uiRender.idleBreak.forceBreak(),mt.callback(mt.ON_POSTROLL_AD_ALL_COMPLETE_EVENT)}function pn(e){ut&&console.log("onEndBannerStartEvent",e),Rt.onImgStartEvent(),vt=!0,Y(),mt.callback(mt.ON_END_BANNER_START_EVENT)}function fn(e){ut&&console.log("onEndBannerCloseEvent",e),vt=!1,Rt.onImgCloseEvent(),mt.callback(mt.ON_END_BANNER_CLOSE_EVENT)}function mn(e){ut&&console.log("onEndBannerClickEvent",e),Rt.onImgClickEvent(),ht=!0,mt.callback(mt.ON_END_BANNER_CLICK_EVENT)}function vn(e){ut&&console.log("onPauseBannerAdsStartEvent",e),Rt.onImgStartEvent(),mt.callback(mt.ON_PAUSEBANNER_ADS_START_EVENT),vt=!0}function gn(e){ut&&console.log("onPauseBannerAdsCloseEvent",e),vt=!1,Rt.onImgCloseEvent(),pt.closeAd(Pt.ads.pauseBannerBg.id),mt.callback(mt.ON_PAUSEBANNER_ADS_CLOSE_EVENT)}function En(e){ut&&console.log("onPauseBannerAdsClickEvent",e),Rt.onImgClickEvent(),mt.callback(mt.ON_PAUSEBANNER_ADS_CLICK_EVENT)}function _n(){var e=Math.floor(Math.random()*Pt.ads.pauseBanner.meta.length);switch(Pt.ads.pauseBanner.meta[e].schema){case"litv":Rt.setAdClip(Pt.ads.pauseBanner.meta[e].spaceId),Rt.setAssetId(Pt.media.assetId),Rt.setAdId(Pt.ads.pauseBanner.id),pt.displayAd({url:Pt.ads.pauseBanner.meta[e].data,skipAdUrl:Pt.ads.pauseBanner.meta[e].skipAdUrl,clickUrl:Pt.ads.pauseBanner.meta[e].clickThrough,mediaType:Pt.ads.pauseBanner.mediaType,id:Pt.ads.pauseBanner.id,hideScrubBarWhilePlayingAd:Pt.ads.pauseBanner.hideScrubBarWhilePlayingAd,resumePlaybackAfterAd:Pt.ads.pauseBanner.resumePlaybackAfterAd,isAdvertisement:Pt.ads.pauseBanner.isAdvertisement,pauseMainMediaWhilePlayingAd:Pt.ads.pauseBanner.pauseMainMediaWhilePlayingAd,onStart:Pt.ads.pauseBanner.callback.onStart,onClose:Pt.ads.pauseBanner.callback.onClose,onClick:Pt.ads.pauseBanner.callback.onClick,onStartFn:Pt.ads.pauseBanner.callback.onStartFn,onCloseFn:Pt.ads.pauseBanner.callback.onCloseFn,onClickFn:Pt.ads.pauseBanner.callback.onClickFn})}}function hn(){pt.play()}function yn(e){ut&&console.log("onPrerollNoAdsStartEvent",e),Rt.onImgStartEvent(),vt=!0,mt.callback(mt.ON_PREROLL_NO_ADS_START_EVENT)}function An(e){ut&&console.log("onPrerollNoAdsCompleteEvent"),vt=!1,Rt.onImgCompleteEvent(),mt.callback(mt.ON_PREROLL_NO_ADS_COMPLETE_EVENT),U()}function Cn(e){ut&&console.log("onPrerollNoAdsCloseEvent"),vt=!1,Rt.onImgCloseEvent(),mt.callback(mt.ON_PREROLL_NO_ADS_CLOSE_EVENT),U()}function bn(e){ut&&console.log("onPrerollNoAdsClickEvent"),Rt.onImgClickEvent(),ht=!0,mt.callback(mt.ON_PREROLL_NO_ADS_CLICK_EVENT)}function On(e){ut&&console.log("onMidrollNoAdsStartEvent",e),Rt.onImgStartEvent(),vt=!0,mt.callback(mt.ON_MIDROLL_NO_ADS_START_EVENT)}function Tn(e){ut&&console.log("onMidrollNoAdsCompleteEvent"),vt=!1,Rt.onImgCompleteEvent(),mt.callback(mt.ON_MIDROLL_NO_ADS_COMPLETE_EVENT),K()}function kn(e){ut&&console.log("onMidrollNoAdsCloseEvent"),vt=!1,Rt.onImgCloseEvent(),mt.callback(mt.ON_MIDROLL_NO_ADS_CLOSE_EVENT),K()}function Nn(e){ut&&console.log("onMidrollNoAdsClickEvent"),Rt.onImgClickEvent(),ht=!0,mt.callback(mt.ON_MIDROLL_NO_ADS_CLICK_EVENT)}function Ln(e){ut&&console.log("onPostrollNoAdStartEvent",e),pt.pause(),Rt.onImgStartEvent(),vt=!0,mt.callback(mt.ON_POSTROLL_NO_AD_START_EVENT)}function Pn(e){ut&&console.log("onPostrollNoAdCompleteEvent"),vt=!1,Rt.onImgCompleteEvent(),mt.callback(mt.ON_POSTROLL_NO_AD_COMPLETE_EVENT),ee()}function Rn(e){ut&&console.log("onPostrollNoAdCloseEvent"),pt.resume(),vt=!1,Rt.onImgCloseEvent(),mt.callback(mt.ON_POSTROLL_NO_AD_CLOSE_EVENT),ee()}function Sn(e){ut&&console.log("onPostrollNoAdClickEvent"),Rt.onImgClickEvent(),ht=!0,mt.callback(mt.ON_POSTROLL_NO_AD_CLICK_EVENT)}function wn(e){ut&&console.log("onPrerollBlockedAdsStartEvent",e),Rt.onImgStartEvent(),vt=!0,mt.callback(mt.ON_PREROLL_BLOCKED_ADS_START_EVENT)}function In(e){ut&&console.log("onPrerollBlockedAdsCompleteEvent"),vt=!1,Rt.onImgCompleteEvent(),mt.callback(mt.ON_PREROLL_BLOCKED_ADS_COMPLETE_EVENT),U()}function Dn(e){ut&&console.log("onPrerollBlockedAdsCloseEvent"),vt=!1,Rt.onImgCloseEvent(),mt.callback(mt.ON_PREROLL_BLOCKED_ADS_CLOSE_EVENT),U()}function Mn(e){ut&&console.log("onPrerollBlockedAdsClickEvent"),Rt.onImgClickEvent(),ht=!0,mt.callback(mt.ON_PREROLL_BLOCKED_ADS_CLICK_EVENT)}function Bn(e){ut&&console.log("onMidrollBlockedAdsStartEvent",e),Rt.onImgStartEvent(),vt=!0,mt.callback(mt.ON_MIDROLL_BLOCKED_ADS_START_EVENT)}function xn(e){ut&&console.log("onMidrollBlockedAdsCompleteEvent"),vt=!1,Rt.onImgCompleteEvent(),mt.callback(mt.ON_MIDROLL_BLOCKED_ADS_COMPLETE_EVENT),K()}function Vn(e){ut&&console.log("onMidrollBlockedAdsCloseEvent"),vt=!1,Rt.onImgCloseEvent(),mt.callback(mt.ON_MIDROLL_BLOCKED_ADS_CLOSE_EVENT),K()}function Fn(e){ut&&console.log("onMidrollBlockedAdsClickEvent"),Rt.onImgClickEvent(),ht=!0,mt.callback(mt.ON_MIDROLL_BLOCKED_ADS_CLICK_EVENT)}function Un(e){ut&&console.log("onPostrollBlockAdStartEvent",e),pt.pause(),Rt.onImgStartEvent(),vt=!0,mt.callback(mt.ON_POSTROLL_BLOCK_AD_START_EVENT)}function $n(e){ut&&console.log("onPostrollBlockAdCompleteEvent"),vt=!1,Rt.onImgCompleteEvent(),mt.callback(mt.ON_POSTROLL_BLOCK_AD_COMPLETE_EVENT),ee()}function jn(e){ut&&console.log("onPostrollBlockAdCloseEvent"),vt=!1,Rt.onImgCloseEvent(),mt.callback(mt.ON_POSTROLL_BLOCK_AD_CLOSE_EVENT),ee()}function Kn(e){ut&&console.log("onPostrollBlockAdClickEvent"),Rt.onImgClickEvent(),ht=!0,mt.callback(mt.ON_POSTROLL_BLOCK_AD_CLICK_EVENT)}function qn(){ut&&console.log("onPlayerIdle"),pt.isPaused()||pt.pause(),yt.removeEventListener(yt.ON_TIMER_COMPLETED,qn),mt.callback(mt.ON_PLAYER_IDLE)}function Hn(){mt.callback(mt.ON_PLAYER_LOADED)}function Yn(e){Pt.ads.ec.meta.length>0&&ie(Math.floor(e)),mt.callback(mt.ON_MEDIA_CURRENT_TIME_CHANGE,e)}function Gn(){if(bt.length>0)for(var e in bt)bt[e].time<=I()&&(bt[e].trigger(),bt.shift())}function Qn(){ut&&console.log("onMediaImpression"),mt.callback(mt.ON_MEDIA_IMPRESSION)}function Wn(){ut&&console.log("onCompleted"),Et=!0,d(),P(),mt.callback(mt.ON_COMPLETED),At.stop(),at()}function zn(){if(ut&&console.log("onPlayerReady",Ct),Ct)return void(Ct=!1);_t=!0,mt.callback(mt.ON_PLAYER_READY),U()}function Xn(){w(pt.getCurrentTime()),mt.callback(mt.ON_REPEAT_PLAY)}function Jn(e){ut&&console.log("onError",e),mt.callback(mt.ON_ERROR,e)}function Zn(e){Lt=e,adHandler.fullscreen(Lt),mt.callback(mt.ON_FULLSCREEN_CHANGE,e)}function et(){mt.callback(mt.ON_GO_TO_DOWNLOAD_APP)}function nt(){ut&&console.log("onPlayed15Mins"),mt.callback(mt.ON_PLAYED_15MINS)}function tt(){ut&&console.log("onPlayerPaused"),mt.callback(mt.ON_PLAYER_PAUSED)}function ot(){ut&&console.log("onPlayerPlaying"),mt.callback(mt.ON_PLAYER_PLAYING)}function rt(){mt.callback(mt.ON_REFRESH_TOKEN)}function lt(){ut&&console.log("onContinueStream"),mt.callback(mt.ON_CONTINUE_STREAM)}function at(){ut&&console.log("onStopStream"),mt.callback(mt.ON_STOP_STREAM)}function it(e){ut&&console.log("onEcStartEvent",e),mt.callback(mt.ON_EC_START_EVENT,e)}function st(e){ut&&console.log("onEcEndEvent",e),kt=!1,mt.callback(mt.ON_EC_END_EVENT,e)}function ct(e){ut&&console.log("onEcEndEvent",e),pt.pause(),mt.callback(mt.ON_EC_CLICK_EVENT,e)}var dt,ut=!1,pt="",ft=new PlayingCounter,mt=new LiTVPlayerEventPool,vt=!1,gt=!1,Et=!1,_t=!1,ht=!1,yt=new Timer(86400,1),At=new Timer(0,1),Ct=!1,bt=[],Ot={preroll:0,midroll:0,postroll:0},Tt=[],kt=!1,Nt=!1,Lt=!1,Pt={media:{url:"",assetId:""},ads:{vol:1,logo:{id:"logo",mediaType:"image",meta:[],isAdvertisement:!1,closable:!1,hideScrubBarWhilePlayingAd:!1,pauseMainMediaWhilePlayingAd:!1,resumePlaybackAfterAd:!1,callback:{onStart:"litvplayer.onLogoStartEvent",onStartFn:he,onClose:"litvplayer.onLogoCloseEvent",onCloseFn:ye,onClick:"litvplayer.onLogoClickEvent",onClickFn:Ae}},preroll:{id:"pr",mediaType:"video",meta:[],count:0,closable:!1,callback:{onRequest:be,onAdReady:Oe,onImpression:Te,onError:Se,onNoAd:we,onStart:ke,onComplete:Ne,onClose:Le,onClick:Pe,onCurrentTimeChange:Re,onClickSkip:De,onEmpty:Me,onContentResumeRequested:Ce}},prerollBanner:{id:"ad_pre_b",mediaType:"image",meta:[],closable:!1,enableImageAdCounter:!0,callback:{onStart:"litvplayer.onPrerollBannerStartEvent",onStartFn:Be,onClose:"litvplayer.onPrerollBannerCloseEvent",onCloseFn:xe,onClick:"litvplayer.onPrerollBannerClickEvent",onClickFn:Ve}},midroll:{id:"mr",mediaType:"video",meta:[],closable:!1,count:0,timeCodes:[],callback:{onRequest:Fe,onAdReady:Ue,onImpression:$e,onError:je,onNoAd:Ke,onStart:qe,onComplete:He,onClose:Ye,onClick:Ge,onCurrentTimeChange:Qe,onClickSkip:We,onEmpty:ze,onContentResumeRequested:Ce}},postroll:{id:"ps",mediaType:"video",meta:[],closable:!1,count:0,callback:{onRequest:Je,onAdReady:Ze,onImpression:en,onError:nn,onNoAd:tn,onStart:on,onComplete:rn,onClose:ln,onClick:an,onCurrentTimeChange:sn,onClickSkip:cn,onEmpty:dn,onContentResumeRequested:Ce}},midrollBanner:{},noAds:{id:"ad_no",meta:[],closable:!1,enableImageAdCounter:!0,callback:{onStartForPreroll:"litvplayer.onPrerollNoAdsStartEvent",onStartForPrerollFn:yn,onCompleteForPreroll:"litvplayer.onPrerollNoAdsCompleteEvent",onCompleteForPrerollFn:An,onCloseForPreroll:"litvplayer.onPrerollNoAdsCloseEvent",onCloseForPrerollFn:Cn,onClickForPreroll:"litvplayer.onPrerollNoAdsClickEvent",onClickForPrerollFn:bn,onStartForMidroll:"litvplayer.onMidrollNoAdsStartEvent",onStartForMidrollFn:On,onCompleteForMidroll:"litvplayer.onMidrollNoAdsCompleteEvent",onCompleteForMidrollFn:Tn,onCloseForMidroll:"litvplayer.onMidrollNoAdsCloseEvent",onCloseForMidrollFn:kn,onClickForMidroll:"litvplayer.onMidrollNoAdsClickEvent",onClickForMidrollFn:Nn}},adBlocked:{id:"ad_bl_b",meta:[],closable:!1,enableImageAdCounter:!0,callback:{onStartForPreroll:"litvplayer.onPrerollBlockedAdsStartEvent",onStartForPrerollFn:wn,onCompleteForPreroll:"litvplayer.onPrerollBlockedAdsCompleteEvent",onCompleteForPrerollFn:In,onCloseForPreroll:"litvplayer.onPrerollBlockedAdsCloseEvent",onCloseForPrerollFn:Dn,onClickForPreroll:"litvplayer.onPrerollBlockedAdsClickEvent",onClickForPrerollFn:Mn,onStartForMidroll:"litvplayer.onMidrollBlockedAdsStartEvent",onStartForMidrollFn:Bn,onCompleteForMidroll:"litvplayer.onMidrollBlockedAdsCompleteEvent",onCompleteForMidrollFn:xn,onCloseForMidroll:"litvplayer.onMidrollBlockedAdsCloseEvent",onCloseForMidrollFn:Vn,onClickForMidroll:"litvplayer.onMidrollBlockedAdsClickEvent",onClickForMidrollFn:Fn}},pauseBanner:{id:"ad_p_b",mediaType:"image",meta:[],hideScrubBarWhilePlayingAd:!1,resumePlaybackAfterAd:!1,isAdvertisement:!1,pauseMainMediaWhilePlayingAd:!1,callback:{onStart:"litvplayer.onPauseBannerAdsStartEvent",onStartFn:vn,onClose:"litvplayer.onPauseBannerAdsCloseEvent",onCloseFn:gn,onClick:"litvplayer.onPauseBannerAdsClickEvent",onClickFn:En}},endBanner:{id:"ad_e_b",mediaType:"image",meta:[],closable:!1,hideScrubBarWhilePlayingAd:!1,resumePlaybackAfterAd:!1,pauseMainMediaWhilePlayingAd:!1,enableImageAdCounter:!0,callback:{onStart:"litvplayer.onEndBannerStartEvent",onStartFn:pn,onClose:"litvplayer.onEndBannerCloseEvent",onCloseFn:fn,onClick:"litvplayer.onEndBannerClickEvent",onClickFn:mn}},pauseBannerBg:{id:"ad_p_b_bg",mediaType:"image",url:"/resources/image/pausebannerbg.png",clickUrl:"#",isAdvertisement:!1,hideScrubBarWhilePlayingAd:!1,resumePlaybackAfterAd:!1,pauseMainMediaWhilePlayingAd:!1,closable:!1,callback:{onStart:"litvplayer.onPauseBannerBGLoaded",onStartFn:_n,onClick:"litvplayer.onPauseBannerBGClick",onClickFn:hn}},ec:{id:"ec",mediaType:"swf",closable:!1,hideScrubBarWhilePlayingAd:!1,resumePlaybackAfterAd:!1,pauseMainMediaWhilePlayingAd:!1,isAdvertisement:!1,meta:[],callback:{onStart:"litvplayer.onEcStartEvent",onStartFn:it,onClose:"litvplayer.onEcEndEvent",onCloseFn:st,onClick:"litvplayer.onEcClickEvent",onClickFn:ct}},clickplay:!1},currentDomain:document.location.hostname,player:{id:"LiTVPlayer",type:"dvr",color:"#711d97",bgColor:"#000000",width:680,height:385,allowFullScreen:"true",allowScriptAccess:"always",controlBarAutoHide:!1,controlBarFullScreenAutoHide:!0,controlBarAutoHideTimeout:3,clipStartTime:0,clipEndTime:"",wmode:"Opaque",menu:"false"}},Rt=function(){function e(e,n){$("#y-report").append('<img style="display:none" width="0" height="0" alt="'+n+'" src="'+e+'">')}function n(e){$.ajax({url:w,type:"POST",dataType:"json",cache:!1,contentType:"application/json; charset=utf-8",timeout:1500,data:JSON.stringify({id:S++,jsonrpc:"2.0",method:"YahooService.InsertYahooAdLog",params:e})})}function t(){ut&&console.log("onClickEvent");for(var t in dt.onClick)e(dt.onClick[t],"click");n({ad_id:T,cdata:"click",platform:R,ad_clip:k,asset_id:N})}function o(){config.debug&&console.log("onClickSkipEvent"),n({ad_id:T,cdata:"clickSkip",platform:R,ad_clip:k,asset_id:N})}function r(){ut&&console.log("onImpressionEvent");for(var t in dt.onImpression)e(dt.onImpression[t],"impression");n({ad_id:T,cdata:"impression",platform:R,ad_clip:k,asset_id:N})}function l(){ut&&console.log("onStartEvent");for(var n in dt.onStart)e(dt.onStart[n],"start")}function a(){ut&&console.log("onFirstQuartileEvent");for(var n in dt.onFirstQuartile.url)e(dt.onFirstQuartile.url[n],"firstQuartile")}function i(){ut&&console.log("onMidpointEvent");for(var n in dt.onMidpoint.url)e(dt.onMidpoint.url[n],"midpoint")}function s(){ut&&console.log("onThirdQuartileEvent");for(var n in dt.onThirdQuartile.url)e(dt.onThirdQuartile.url[n],"thirdQuartile")}function c(){if(ut&&console.log("onCompleteEvent"),dt&&void 0!==dt.onComplete)for(var t in dt.onComplete)e(dt.onComplete[t],"complete");n({ad_id:T,cdata:"complete",platform:R,ad_clip:k,asset_id:N})}function d(){ut&&console.log("onCloseEvent");for(var n in dt.onClose)e(dt.onClose[n],"close")}function u(){if(ut&&console.log("onNoAdError"),dt&&void 0!==dt.onNoAd)for(var t in dt.onNoAd)e(dt.onNoAd[t],"noAd");n({ad_id:T,cdata:"noAd",platform:R,ad_clip:k,asset_id:N})}function p(){ut&&console.log("onAdBlocked"),n({ad_id:T,cdata:"blocked",platform:R,ad_clip:k,asset_id:N})}function f(){ut&&console.log("onRequest"),n({ad_id:T,cdata:"request",platform:R,ad_clip:k,asset_id:N})}function m(){ut&&console.log("onServeEvent"),n({ad_id:T,cdata:"serve",platform:R,ad_clip:k,asset_id:N})}function v(e){ut&&console.log("onParserErrorEvent"),n({ad_id:T,cdata:"parseErr",platform:R,ad_clip:k||e,asset_id:N})}function g(e){ut&&console.log("onHttpException"),n({ad_id:T,cdata:"httpException",platform:R,ad_clip:e,asset_id:N})}function E(e){config.debug&&console.log("onError",e),n({ad_id:T,cdata:"error",platform:R,ad_clip:k+"|"+e,asset_id:N})}function _(){ut&&console.log("onImgClickEvent"),n({ad_id:T,cdata:"ads-click",platform:R,ad_clip:k,asset_id:N})}function h(){ut&&console.log("onImgStartEvent",k,N,T),n({ad_id:T,cdata:"ads-start",platform:R,ad_clip:k,asset_id:N})}function y(){ut&&console.log("onImgCompleteEvent"),n({ad_id:T,cdata:"ads-complete",platform:R,ad_clip:k,asset_id:N})}function A(){ut&&console.log("onImgCloseEvent"),n({ad_id:T,cdata:"ads-close",platform:R,ad_clip:k,asset_id:N})}function C(e){T=e}function b(e){k=e}function O(e){N=e}var T,k,N,L=["https://p-yonder.svc.litv.tv/cdi/v2/rpc"],P=["https://p-yonder.svc.litv.tv/cdi/v2/rpc"],R=function(){var e=navigator.userAgent.toUpperCase(),n=new RegExp("ANDROID"),t=new RegExp("IPHONE|IPAD|IPOD");return n.test(e)?"m-web":t.test(e)?"m-web":"web"}(),S=0,w=function(){var e=document.location.hostname;return ut||-1!=e.indexOf("staging")||-1!=e.indexOf("demo")||"127.0.0.1"==e||"localhost"==e||-1!=e.indexOf("172.21")||-1!=e.indexOf("aji")||-1!=e.indexOf("192.168")?P[Math.floor(Math.random()*P.length)]:L[Math.floor(Math.random()*L.length)]}();return{onClickEvent:t,onClickSkipEvent:o,onImpressionEvent:r,onStartEvent:l,onFirstQuartileEvent:a,onMidpointEvent:i,onThirdQuartileEvent:s,onCompleteEvent:c,onCloseEvent:d,onNoAdError:u,onAdBlocked:p,onRequest:f,onServeEvent:m,onParserErrorEvent:v,onHttpException:g,onError:E,onImgClickEvent:_,onImgStartEvent:h,onImgCompleteEvent:y,onImgCloseEvent:A,setAdId:C,setAdClip:b,setAssetId:O}}();return{setPlayerType:n,setSize:t,preBuffered:o,setBookmark:r,setClipEndTime:l,setUrl:a,setAssetId:i,setAdsConfig:s,updateAdsConfig:c,resetAdsState:d,setId:u,setProperties:p,init:f,loadPlayer:m,addEventListener:v,removeEventListener:g,play:E,pause:_,forcePause:h,stop:y,close:A,seek:C,getCurrentTime:b,canSeekTo:O,setBufferTime:T,setMediaResourceURL:k,setScaleMode:N,addCount:L,resetCount:P,getCount:R,calCount:S,setBeginCount:w,getPlayedTime:I,getPlayed:D,resetPlayedTime:M,getProp:B,displayAd:x,closeAd:V,displayBranding:F,displayPreroll:U,displayPrerollBanner:j,displayMidroll:K,displayPostroll:ee,displayPauseBanner:q,displayLogo:H,closeLogo:Y,closePauseBanner:G,isAdPlaying:Q,setAdPlaying:W,setViewportState:z,isCompleted:X,displayNoAd:J,displayAdBlocked:Z,displayEndBanner:ne,closeEndBanner:te,isPaused:oe,isExist:re,setRecheckTimer:le,d8guy:ae,displayEc:ie,getCurrentAdo:se,getPlayerReadyState:ce,getPlayer:de,getPlayerApi:ue,isFullscreen:pe,toggleFullscreen:fe,setVolume:me,getVolume:ve,setAdVolume:ge,getAdVolume:Ee,setMute:_e,onLogoStartEvent:he,onLogoCloseEvent:ye,onLogoClickEvent:Ae,onPrerollAdRequest:be,onPrerollAdReady:Oe,onPrerollAdImpression:Te,onPrerollAdStartEvent:ke,onPrerollAdCompleteEvent:Ne,onPrerollAdCloseEvent:Le,onPrerollAdClickEvent:Pe,onPrerollAdCurrentTimeChangeEvent:Re,onPrerollAdErrorEvent:Se,onPrerollNoAdEvent:we,onPrerollAdAllCompleteEvent:Ie,onPrerollAdClickSkip:De,onPrerollAdEmpty:Me,onPrerollBannerStartEvent:Be,onPrerollBannerCloseEvent:xe,onPrerollBannerClickEvent:Ve,onMidrollAdRequest:Fe,onMidrollAdReady:Ue,onMidrollAdImpression:$e,onMidrollAdErrorEvent:je,onMidrollNoAdEvent:Ke,onMidrollAdStartEvent:qe,onMidrollAdCompleteEvent:He,onMidrollAdCloseEvent:Ye,onMidrollAdClickEvent:Ge,onMidrollAdCurrentTimeChangeEvent:Qe,onMidrollAdClickSkip:We,onMidrollAdEmpty:ze,onMidrollAdAllCompleteEvent:Xe,onPostrollAdRequest:Je,onPostrollAdReady:Ze,onPostrollAdImpression:en,onPostrollAdErrorEvent:nn,onPostrollNoAdEvent:tn,onPostrollAdStartEvent:on,onPostrollAdCompleteEvent:rn,onPostrollAdCloseEvent:ln,onPostrollAdClickEvent:an,onPostrollAdCurrentTimeChangeEvent:sn,onPostrollAdClickSkip:cn,onPostrollAdEmpty:dn,onPostrollAdAllCompleteEvent:un,onEndBannerStartEvent:pn,onEndBannerCloseEvent:fn,onEndBannerClickEvent:mn,onPauseBannerAdsStartEvent:vn,onPauseBannerAdsCloseEvent:gn,onPauseBannerAdsClickEvent:En,onPauseBannerBGLoaded:_n,onPauseBannerBGClick:hn,onPrerollNoAdsStartEvent:yn,onPrerollNoAdsCompleteEvent:An,onPrerollNoAdsCloseEvent:Cn,onPrerollNoAdsClickEvent:bn,onMidrollNoAdsStartEvent:On,onMidrollNoAdsCompleteEvent:Tn,onMidrollNoAdsCloseEvent:kn,onMidrollNoAdsClickEvent:Nn,onPostrollNoAdStartEvent:Ln,onPostrollNoAdCompleteEvent:Pn,onPostrollNoAdCloseEvent:Rn,onPostrollNoAdClickEvent:Sn,onPrerollBlockedAdsStartEvent:wn,onPrerollBlockedAdsCompleteEvent:In,onPrerollBlockedAdsCloseEvent:Dn,onPrerollBlockedAdsClickEvent:Mn,onMidrollBlockedAdsStartEvent:Bn,onMidrollBlockedAdsCompleteEvent:xn,onMidrollBlockedAdsCloseEvent:Vn,onMidrollBlockedAdsClickEvent:Fn,onPostrollBlockAdStartEvent:Un,onPostrollBlockAdCompleteEvent:$n,onPostrollBlockAdCloseEvent:jn,onPostrollBlockAdClickEvent:Kn,onPlayerIdle:qn,onPlayerLoaded:Hn,onMediaCurrentTimeChange:Yn,onMediaPlayedTimeChange:Gn,onMediaImpression:Qn,onCompleted:Wn,onPlayerReady:zn,onRepeatPlay:Xn,onError:Jn,onFullscreenChange:Zn,onGoToDownloadApp:et,onPlayed15Mins:nt,onPlayerPaused:tt,onPlayerPlaying:ot,onRefreshToken:rt,onContinueStream:lt,onStopStream:at,onEcStartEvent:it,onEcEndEvent:st,onEcClickEvent:ct,ON_LOGO_START_EVENT:mt.ON_LOGO_START_EVENT,ON_LOGO_CLOSE_EVENT:mt.ON_LOGO_CLOSE_EVENT,ON_LOGO_CLICK_EVENT:mt.ON_LOGO_CLICK_EVENT,ON_PREROLL_AD_REQUEST:mt.ON_PREROLL_AD_REQUEST,ON_PREROLL_AD_READY:mt.ON_PREROLL_AD_READY,ON_PREROLL_AD_IMPRESSION:mt.ON_PREROLL_AD_IMPRESSION,ON_PREROLL_AD_START_EVENT:mt.ON_PREROLL_AD_START_EVENT,ON_PREROLL_AD_COMPLETE_EVENT:mt.ON_PREROLL_AD_COMPLETE_EVENT,ON_PREROLL_AD_CLOSE_EVENT:mt.ON_PREROLL_AD_CLOSE_EVENT,ON_PREROLL_AD_CLICK_EVENT:mt.ON_PREROLL_AD_CLICK_EVENT,ON_PREROLL_AD_CURRENT_TIME_CHANGE_EVENT:mt.ON_PREROLL_AD_CURRENT_TIME_CHANGE_EVENT,ON_PREROLL_AD_ERROR_EVENT:mt.ON_PREROLL_AD_ERROR_EVENT,ON_PREROLL_NO_AD_EVENT:mt.ON_PREROLL_NO_AD_EVENT,
ON_PREROLL_AD_MOUSE_OVER:mt.ON_PREROLL_AD_MOUSE_OVER,ON_PREROLL_AD_MOUSE_OUT:mt.ON_PREROLL_AD_MOUSE_OUT,ON_PREROLL_AD_ALL_COMPLETE_EVENT:mt.ON_PREROLL_AD_ALL_COMPLETE_EVENT,ON_PREROLL_BANNER_START_EVENT:mt.ON_PREROLL_BANNER_START_EVENT,ON_PREROLL_BANNER_CLOSE_EVENT:mt.ON_PREROLL_BANNER_CLOSE_EVENT,ON_PREROLL_BANNER_CLICK_EVENT:mt.ON_PREROLL_BANNER_CLICK_EVENT,ON_MIDROLL_AD_REQUEST:mt.ON_MIDROLL_AD_REQUEST,ON_MIDROLL_AD_READY:mt.ON_MIDROLL_AD_READY,ON_MIDROLL_AD_IMPRESSION:mt.ON_MIDROLL_AD_IMPRESSION,ON_MIDROLL_AD_ERROR_EVENT:mt.ON_MIDROLL_AD_ERROR_EVENT,ON_MIDROLL_AD_BLOCK_EVENT:mt.ON_MIDROLL_AD_BLOCK_EVENT,ON_MIDROLL_NO_AD_EVENT:mt.ON_MIDROLL_NO_AD_EVENT,ON_MIDROLL_AD_START_EVENT:mt.ON_MIDROLL_AD_START_EVENT,ON_MIDROLL_AD_COMPLETE_EVENT:mt.ON_MIDROLL_AD_COMPLETE_EVENT,ON_MIDROLL_AD_CLOSE_EVENT:mt.ON_MIDROLL_AD_CLOSE_EVENT,ON_MIDROLL_AD_CLICK_EVENT:mt.ON_MIDROLL_AD_CLICK_EVENT,ON_MIDROLL_AD_CURRENT_TIME_CHANGE_EVENT:mt.ON_MIDROLL_AD_CURRENT_TIME_CHANGE_EVENT,ON_MIDROLL_AD_CLICK_SKIP:mt.ON_MIDROLL_AD_CLICK_SKIP,ON_MIDROLL_AD_EMPTY:mt.ON_MIDROLL_AD_EMPTY,ON_MIDROLL_AD_ALL_COMPLETE_EVENT:mt.ON_MIDROLL_AD_ALL_COMPLETE_EVENT,ON_POSTROLL_AD_REQUEST:mt.ON_POSTROLL_AD_REQUEST,ON_POSTROLL_AD_READY:mt.ON_POSTROLL_AD_READY,ON_POSTROLL_AD_IMPRESSION:mt.ON_POSTROLL_AD_IMPRESSION,ON_POSTROLL_AD_ERROR_EVENT:mt.ON_POSTROLL_AD_ERROR_EVENT,ON_POSTROLL_AD_BLOCK_EVENT:mt.ON_POSTROLL_AD_BLOCK_EVENT,ON_POSTROLL_NO_AD_EVENT:mt.ON_POSTROLL_NO_AD_EVENT,ON_POSTROLL_AD_START_EVENT:mt.ON_POSTROLL_AD_START_EVENT,ON_POSTROLL_AD_COMPLETE_EVENT:mt.ON_POSTROLL_AD_COMPLETE_EVENT,ON_POSTROLL_AD_CLOSE_EVENT:mt.ON_POSTROLL_AD_CLOSE_EVENT,ON_POSTROLL_AD_CLICK_EVENT:mt.ON_POSTROLL_AD_CLICK_EVENT,ON_POSTROLL_AD_CURRENT_TIME_CHANGE_EVENT:mt.ON_POSTROLL_AD_CURRENT_TIME_CHANGE_EVENT,ON_POSTROLL_AD_CLICK_SKIP:mt.ON_POSTROLL_AD_CLICK_SKIP,ON_POSTROLL_AD_EMPTY:mt.ON_POSTROLL_AD_EMPTY,ON_POSTROLL_AD_ALL_COMPLETE_EVENT:mt.ON_POSTROLL_AD_ALL_COMPLETE_EVENT,ON_END_BANNER_START_EVENT:mt.ON_END_BANNER_START_EVENT,ON_END_BANNER_CLOSE_EVENT:mt.ON_END_BANNER_CLOSE_EVENT,ON_END_BANNER_CLICK_EVENT:mt.ON_END_BANNER_CLICK_EVENT,ON_PAUSEBANNER_ADS_START_EVENT:mt.ON_PAUSEBANNER_ADS_START_EVENT,ON_PAUSEBANNER_ADS_CLOSE_EVENT:mt.ON_PAUSEBANNER_ADS_CLOSE_EVENT,ON_PAUSEBANNER_ADS_CLICK_EVENT:mt.ON_PAUSEBANNER_ADS_CLICK_EVENT,ON_PAUSEBANNER_ADS_MOUSE_OVER:mt.ON_PAUSEBANNER_ADS_MOUSE_OVER,ON_PAUSEBANNER_ADS_MOUSE_OUT:mt.ON_PAUSEBANNER_ADS_MOUSE_OUT,ON_PREROLL_NO_ADS_START_EVENT:mt.ON_PREROLL_NO_ADS_START_EVENT,ON_PREROLL_NO_ADS_COMPLETE_EVENT:mt.ON_PREROLL_NO_ADS_COMPLETE_EVENT,ON_PREROLL_NO_ADS_CLOSE_EVENT:mt.ON_PREROLL_NO_ADS_CLOSE_EVENT,ON_PREROLL_NO_ADS_CLICK_EVENT:mt.ON_PREROLL_NO_ADS_CLICK_EVENT,ON_MIDROLL_NO_ADS_START_EVENT:mt.ON_MIDROLL_NO_ADS_START_EVENT,ON_MIDROLL_NO_ADS_COMPLETE_EVENT:mt.ON_MIDROLL_NO_ADS_COMPLETE_EVENT,ON_MIDROLL_NO_ADS_CLOSE_EVENT:mt.ON_MIDROLL_NO_ADS_CLOSE_EVENT,ON_MIDROLL_NO_ADS_CLICK_EVENT:mt.ON_MIDROLL_NO_ADS_CLICK_EVENT,ON_POSTROLL_NO_AD_START_EVENT:mt.ON_POSTROLL_NO_AD_START_EVENT,ON_POSTROLL_NO_AD_COMPLETE_EVENT:mt.ON_POSTROLL_NO_AD_COMPLETE_EVENT,ON_POSTROLL_NO_AD_CLOSE_EVENT:mt.ON_POSTROLL_NO_AD_CLOSE_EVENT,ON_POSTROLL_NO_AD_CLICK_EVENT:mt.ON_POSTROLL_NO_AD_CLICK_EVENT,ON_POSTROLL_NO_AD_CLICK_SKIP:mt.ON_POSTROLL_NO_AD_CLICK_SKIP,ON_PREROLL_BLOCKED_ADS_START_EVENT:mt.ON_PREROLL_BLOCKED_ADS_START_EVENT,ON_PREROLL_BLOCKED_ADS_COMPLETE_EVENT:mt.ON_PREROLL_BLOCKED_ADS_COMPLETE_EVENT,ON_PREROLL_BLOCKED_ADS_CLOSE_EVENT:mt.ON_PREROLL_BLOCKED_ADS_CLOSE_EVENT,ON_PREROLL_BLOCKED_ADS_CLICK_EVENT:mt.ON_PREROLL_BLOCKED_ADS_CLICK_EVENT,ON_MIDROLL_BLOCKED_ADS_START_EVENT:mt.ON_MIDROLL_BLOCKED_ADS_START_EVENT,ON_MIDROLL_BLOCKED_ADS_COMPLETE_EVENT:mt.ON_MIDROLL_BLOCKED_ADS_COMPLETE_EVENT,ON_MIDROLL_BLOCKED_ADS_CLOSE_EVENT:mt.ON_MIDROLL_BLOCKED_ADS_CLOSE_EVENT,ON_MIDROLL_BLOCKED_ADS_CLICK_EVENT:mt.ON_MIDROLL_BLOCKED_ADS_CLICK_EVENT,ON_POSTROLL_BLOCK_AD_START_EVENT:mt.ON_POSTROLL_BLOCK_AD_START_EVENT,ON_POSTROLL_BLOCK_AD_COMPLETE_EVENT:mt.ON_POSTROLL_BLOCK_AD_COMPLETE_EVENT,ON_POSTROLL_BLOCK_AD_CLOSE_EVENT:mt.ON_POSTROLL_BLOCK_AD_CLOSE_EVENT,ON_POSTROLL_BLOCK_AD_CLICK_EVENT:mt.ON_POSTROLL_BLOCK_AD_CLICK_EVENT,ON_POSTROLL_BLOCK_AD_CLICK_SKIP:mt.ON_POSTROLL_BLOCK_AD_CLICK_SKIP,ON_PLAYER_IDLE:mt.ON_PLAYER_IDLE,ON_PLAYER_LOADED:mt.ON_PLAYER_LOADED,ON_MEDIA_CURRENT_TIME_CHANGE:mt.ON_MEDIA_CURRENT_TIME_CHANGE,ON_MEDIA_PLAYED_TIME_CHANGE:mt.ON_MEDIA_PLAYED_TIME_CHANGE,ON_MEDIA_IMPRESSION:mt.ON_MEDIA_IMPRESSION,ON_COMPLETED:mt.ON_COMPLETED,ON_PLAYER_READY:mt.ON_PLAYER_READY,ON_REPEAT_PLAY:mt.ON_REPEAT_PLAY,ON_ERROR:mt.ON_ERROR,ON_FULLSCREEN_CHANGE:mt.ON_FULLSCREEN_CHANGE,ON_USER_CLICK_PLAY:mt.ON_USER_CLICK_PLAY,ON_GO_TO_DOWNLOAD_APP:mt.ON_GO_TO_DOWNLOAD_APP,ON_PLAYED_15MINS:mt.ON_PLAYED_15MINS,ON_PLAYER_PAUSED:mt.ON_PLAYER_PAUSED,ON_PLAYER_PLAYING:mt.ON_PLAYER_PLAYING,ON_REFRESH_TOKEN:mt.ON_REFRESH_TOKEN,ON_CONTINUE_STREAM:mt.ON_CONTINUE_STREAM,ON_STOP_STREAM:mt.ON_STOP_STREAM,ON_EC_START_EVENT:mt.ON_EC_START_EVENT,ON_EC_END_EVENT:mt.ON_EC_END_EVENT,ON_EC_CLICK_EVENT:mt.ON_EC_CLICK_EVENT,ON_CONTENT_RESUME_REQUESTED:mt.ON_CONTENT_RESUME_REQUESTED}}function genFreeList(e,n,t,o,r){$(".free").append('<li onclick=freeLanding("'+o+'","'+r+'");><div class="more_link"></div><div class="list_link"><img id="fp-more-free'+e+'" src="'+t+'"><div class="title"><span id="fp-more-free'+e+'-title">'+n+"</span></div></div></li>")}function controlFreeList(e){switch(e){case"off":$(".fp-more").hide(),$(".flowplayer").addClass("menu-off");break;default:genCurrentSeries(-1,currentContent.content.title,currentContent.content.content_id);for(var n in schedule.programs)genFreeList(n,schedule.programs[n].title,config.cdnUrls+schedule.programs[n].thumbnail,schedule.programs[n].content_id,schedule.programs[n].content_type)}}function genCurrentSeries(e,n,t){$(".free").append('<li><div class="tab_btn"><p><a href="https://www.litv.tv/vod/drama/?id='+t+config.sponsor+'&em=true" target="_blank">更多戲劇</a></p><p><a href="https://www.litv.tv/vod/show/?id='+t+config.sponsor+'&em=true" target="_blank">更多綜藝</a></p><p><a href="https://www.litv.tv/vod/movie/list.do?brc_id=47'+config.sponsor+'&em=true" target="_blank">更多電影</a></p></div><div class="title" id="more_list_series"><span id="fp-more-free'+e+'-title">'+n+"</span></div></li>")}function freeLanding(e,n){debug&&console.log("freeLanding",e),window.open(config.landingUrl+config.defaultCategory+config.targetContent+e+config.sponsor,"_blank")}function onQualitySelectorMenu(){$(".fp-menu").on("click",function(e){debug&&console.log("fp-menu click"),$(".fp-quality-selector").toggleClass("on"),e.stopPropagation()}),$(".fp-menu").one("click",function(){vlog.gaTag("vod",EmPlayerEvent.QUALITY_SELECTOR)}),$.fplayer.engine&&"flash"!==$.fplayer.engine.engineName&&void 0!==$.fplayer.engine.hlsjs&&"null"!==$.fplayer.engine.hlsjs&&"undefined"!==$.fplayer.engine.hlsjs&&$.fplayer.engine.hlsjs.config&&void 0!==$.fplayer.engine.hlsjs.config&&"null"!==$.fplayer.engine.hlsjs.config&&"undefined"!==$.fplayer.engine.hlsjs.config||(debug&&console.log("fp-quality-selector hide"),$(".fp-quality-selector").hide(),$(".fp-menu").css("opacity",.4))}function onPlayerReadyCallback(){$(window).on("click",function(){$(".fp-quality-selector").removeClass("on")}),$(".flowplayer").mouseleave(function(){$(".fp-quality-selector").removeClass("on")}),$(".fp-sponsor").hide(),$(".fp-menu").hide(),$(".fp-brand").html("").attr("href",config.brandLandingUrl).attr("target","_blank").click(function(){vlog.gaTag("vod",EmPlayerEvent.BRAND_CLICK)})}function onPlayerPlaying(){$.fplayer.disable(!0)}function onPlayerIdle(){$(".player_mask").addClass("show"),$(".player_mask").on("click",function(){$(".player_mask").removeClass("show"),$(".flowplayer").show(),$(".player_mask").off("click"),litvplayer.play()}),$(".flowplayer").hide()}function onPlayerReady(){vmx.init(),$.fplayer.disable(!0)}function onMediaImpression(){vlog.comScore("vod",EmPlayerEvent.COMSCORE_IMPRESSION)}function onCompleted(){debug&&console.log("onCompleted"),vmx.init(),currentContent=limeta.findNext(),vlog.setTitle(currentContent.content.title),debug&&console.log("findNext",currentContent),onPlayNext(),litvplayer.displayPostroll()}function onPlayNext(){debug&&console.warn("onPlayNext",currentContent),refreshLayout(),litvplayer.init(),litvplayer.setAdsConfig({timeCodes:currentContent.content.time_codes}),listenEvents(),litvplayer.setAssetId(currentContent.content.asset_id),limeta.getUrl(schedule.cdn_code+"#"+currentContent.content.asset_id,function(e){var n=!(clipCount>=0)||0!=--clipCount;litvplayer.setUrl(e,n),0==n&&vlog.gaTag("vod",EmPlayerEvent.PLAYING_TERMINATION)},onGetUrlError)}function onVmxContentVod(){var e=new vmx.meta;e.station="LiTV",e.publisher="LiTV",e.program=currentContent.content.title,e.tmsId=currentContent.content.asset_id,e.assetId=currentContent.content.asset_id,e.c3=currentContent.content.content_type,e.clipLength=currentContent.content.length,vmx.onVOD(e)}function onVmxStop(){vmx.onStop()}function onVmxPreroll(){vmx.onStop(),vmx.onPrerollAd(litvplayer.getCurrentAdo().duration)}function onVmxRollEnd(){vmx.onStop()}function onVmxMidroll(){vmx.onStop(),vmx.onMidrollAd(litvplayer.getCurrentAdo().duration)}function onVmxPostroll(){vmx.onStop(),vmx.onPostrollAd(litvplayer.getCurrentAdo().duration)}function onPrerollEndSeekToCurrent(){}function listenEvents(){litvplayer.addEventListener(litvplayer.ON_PLAYER_READY,onPlayerReady),litvplayer.addEventListener(litvplayer.ON_PLAYER_IDLE,onPlayerIdle),litvplayer.addEventListener(litvplayer.ON_PLAYER_PLAYING,onPlayerPlaying),litvplayer.addEventListener(litvplayer.ON_MEDIA_IMPRESSION,onMediaImpression),litvplayer.addEventListener(litvplayer.ON_COMPLETED,onCompleted),litvplayer.addEventListener(litvplayer.ON_PLAYER_READY,onVmxContentVod),litvplayer.addEventListener(litvplayer.ON_PLAYER_PLAYING,onVmxContentVod),litvplayer.addEventListener(litvplayer.ON_PREROLL_AD_START_EVENT,onVmxPreroll),litvplayer.addEventListener(litvplayer.ON_MIDROLL_AD_START_EVENT,onVmxMidroll),litvplayer.addEventListener(litvplayer.ON_POSTROLL_AD_START_EVENT,onVmxPostroll),litvplayer.addEventListener(litvplayer.ON_CONTENT_RESUME_REQUESTED,onVmxRollEnd),litvplayer.addEventListener(litvplayer.ON_COMPLETED,onVmxStop),litvplayer.addEventListener(litvplayer.ON_PLAYER_PAUSED,onVmxStop)}function onGetUrlError(e,n){switch(debug&&console.error("url err",e,n),$(".flowplayer").hide(),$(".error").css({opacity:1,display:"block"}),$(".title").append('<p><span id="fp-title-title">'+currentContent.content.title+"</span></p>"),e){case 42000087:case 87:$(".message").html('<h2>本服務僅限台澎金馬地區觀看</h2><p>目前沒有授權您的地區使用，請見諒！<br/><a href="'+config.landingUrl+config.defaultCategory+config.targetContent+currentContent.content.content_id+config.sponsor+'" target="_blank">立即前往 LiTV線上影視</a></p>');break;default:$(".message").html("<h2>發生錯誤 錯誤碼:"+e+"</h2><p>"+n+'<br/><a href="'+config.landingUrl+config.defaultCategory+config.targetContent+currentContent.content.content_id+config.sponsor+'" target="_blank">立即前往 LiTV線上影視</a></p>')}litvplayer.onError({code:e,name:"error",message:n})}function refreshLayout(){$(".fp-more").hide(),$(".fp-list").html("<p>"+currentContent.content.title+"</p>"),$(".fp-list").on("click",function(){var e=config.landingUrl+config.defaultCategory+config.targetContent+currentContent.content.content_id+config.sponsor;window.open(e,"_blank"),vlog.gaTag("vod",EmPlayerEvent.SERIES_CLICK)}),"off"==limeta.getUrlParam("menu")?$(".fp-list").hide():$(".fp-list").show(),$(".fp-logo").hide(),$(".fp-logo").on("click",function(){vlog.gaTag("vod",EmPlayerEvent.LOGO_CLICK)}),$("#header_logo").on("click",function(){vlog.gaTag("vod",EmPlayerEvent.HEADER_LOGO_CLICK)}),$(".title_container").html(lineup.title+" "+currentContent.content.title),$(".title_container").on("click",function(){var e=config.landingUrl+config.defaultCategory+config.targetContent+currentContent.content.content_id+config.sponsor;window.open(e,"_blank"),vlog.gaTag("vod",EmPlayerEvent.FOOTER_CLICK)})}function mainInit(){document.body.classList.add("ready"),litvplayer.init(),litvplayer.setPlayerType("vchannel"),litvplayer.setProperties({clickplay:1==limeta.getUrlParam("clickplay")}),0==limeta.getUrlParam("l")?($(".embed_header").hide(),$(".embed_footer").hide()):1==limeta.getUrlParam("l")?($(".embed_footer").hide(),$(".title_on_top").addClass("title_container")):$(".embed_footer").addClass("title_container"),1==limeta.getUrlParam("closebtn")&&uiRender.closeIframeBtn.show(),0==limeta.getUrlParam("unmutebtn")&&uiRender.unmutedBtn.disable(!0),1==limeta.getUrlParam("brandresident")&&$(".flowplayer").addClass("is-resident"),1==limeta.getUrlParam("transparent")&&(document.body.style.background="transparent"),limeta.init(function(){config=limeta.getConfig(),schedule=limeta.getSchedule(),lineup=limeta.getLineup().result.data.channels[0],liad=limeta.getLineup().result.data.liads[lineup.liad_id],clipCount=liad.clip_count||-1,currentContent=limeta.findCurrent(),debug&&console.log("currentContent",currentContent);var e={title:currentContent.content.title,contentId:lineup.content_id,contentType:currentContent.content.content_type,no:lineup.no,season:"0",episode:"0",videoType:"F"};vlog.setData(e),vmx.setData(e),listenEvents(),litvplayer.setAdsConfig({logo:transferAdArray(liad.logo),prerolls:transferAdArray(liad.prerolls),prerollCount:liad.preroll_count,prerollBanners:transferAdArray(liad.preroll_banners),midrolls:transferAdArray(liad.midrolls),midrollCount:liad.midroll_count,timeCodes:currentContent.content.time_codes,midrollBanners:transferAdArray(liad.midroll_banners),noAd:transferAdArray(liad.no_ad),adBlock:transferAdArray(liad.ad_block),pauseBanners:transferAdArray(liad.pause_banners),endBanners:transferAdArray(liad.end_banners),postrolls:transferAdArray(liad.postrolls)}),litvplayer.setAssetId(currentContent.content.asset_id),limeta.getUrl(schedule.cdn_code+"#"+currentContent.content.asset_id,function(e){debug&&console.log("getUrl",e),litvplayer.setUrl(e),litvplayer.loadPlayer()},onGetUrlError),refreshLayout(),is_chrome=navigator.userAgent.indexOf("Chrome")>-1,is_explorer=navigator.userAgent.indexOf("MSIE")>-1,is_firefox=navigator.userAgent.indexOf("Firefox")>-1,is_safari=navigator.userAgent.indexOf("Safari")>-1,is_opera=navigator.userAgent.indexOf("Presto")>-1,is_mac=-1!=navigator.userAgent.indexOf("Mac OS"),is_windows=!is_mac,is_chrome&&is_safari&&(is_safari=!1),(is_safari||is_windows)&&$("body").css("-webkit-text-stroke","0.5px")},function(){debug&&console.log("something miss.")})}!function(e,n){"use strict";function t(e){this.time=e.time,this.target=e.target,this.rootBounds=e.rootBounds,this.boundingClientRect=e.boundingClientRect,this.intersectionRect=e.intersectionRect||d(),this.isIntersecting=!!e.intersectionRect;var n=this.boundingClientRect,t=n.width*n.height,o=this.intersectionRect,r=o.width*o.height;this.intersectionRatio=t?Number((r/t).toFixed(4)):this.isIntersecting?1:0}function o(e,n){var t=n||{};if("function"!=typeof e)throw new Error("callback must be a function");if(t.root&&1!=t.root.nodeType)throw new Error("root must be an Element");this._checkForIntersections=l(this._checkForIntersections.bind(this),this.THROTTLE_TIMEOUT),this._callback=e,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(t.rootMargin),this.thresholds=this._initThresholds(t.threshold),this.root=t.root||null,this.rootMargin=this._rootMarginValues.map(function(e){return e.value+e.unit}).join(" ")}function r(){return e.performance&&performance.now&&performance.now()}function l(e,n){var t=null;return function(){t||(t=setTimeout(function(){e(),t=null},n))}}function a(e,n,t,o){"function"==typeof e.addEventListener?e.addEventListener(n,t,o||!1):"function"==typeof e.attachEvent&&e.attachEvent("on"+n,t)}function i(e,n,t,o){"function"==typeof e.removeEventListener?e.removeEventListener(n,t,o||!1):"function"==typeof e.detatchEvent&&e.detatchEvent("on"+n,t)}function s(e,n){var t=Math.max(e.top,n.top),o=Math.min(e.bottom,n.bottom),r=Math.max(e.left,n.left),l=Math.min(e.right,n.right),a=l-r,i=o-t;return a>=0&&i>=0&&{top:t,bottom:o,left:r,right:l,width:a,height:i}}function c(e){var n;try{n=e.getBoundingClientRect()}catch(e){}return n?(n.width&&n.height||(n={top:n.top,right:n.right,bottom:n.bottom,left:n.left,width:n.right-n.left,height:n.bottom-n.top}),n):d()}function d(){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}function u(e,n){for(var t=n;t;){if(t==e)return!0;t=p(t)}return!1}function p(e){var n=e.parentNode;return n&&11==n.nodeType&&n.host?n.host:n&&n.assignedSlot?n.assignedSlot.parentNode:n}if("IntersectionObserver"in e&&"IntersectionObserverEntry"in e&&"intersectionRatio"in e.IntersectionObserverEntry.prototype)return void("isIntersecting"in e.IntersectionObserverEntry.prototype||Object.defineProperty(e.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}}));var f=[];o.prototype.THROTTLE_TIMEOUT=100,o.prototype.POLL_INTERVAL=null,o.prototype.USE_MUTATION_OBSERVER=!0,o.prototype.observe=function(e){if(!this._observationTargets.some(function(n){return n.element==e})){if(!e||1!=e.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:e,entry:null}),this._monitorIntersections(),this._checkForIntersections()}},o.prototype.unobserve=function(e){this._observationTargets=this._observationTargets.filter(function(n){return n.element!=e}),this._observationTargets.length||(this._unmonitorIntersections(),this._unregisterInstance())},o.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorIntersections(),this._unregisterInstance()},o.prototype.takeRecords=function(){var e=this._queuedEntries.slice();return this._queuedEntries=[],e},o.prototype._initThresholds=function(e){var n=e||[0];return Array.isArray(n)||(n=[n]),n.sort().filter(function(e,n,t){if("number"!=typeof e||isNaN(e)||e<0||e>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return e!==t[n-1]})},o.prototype._parseRootMargin=function(e){var n=e||"0px",t=n.split(/\s+/).map(function(e){var n=/^(-?\d*\.?\d+)(px|%)$/.exec(e);if(!n)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(n[1]),unit:n[2]}});return t[1]=t[1]||t[0],t[2]=t[2]||t[0],t[3]=t[3]||t[1],t},o.prototype._monitorIntersections=function(){this._monitoringIntersections||(this._monitoringIntersections=!0,this.POLL_INTERVAL?this._monitoringInterval=setInterval(this._checkForIntersections,this.POLL_INTERVAL):(a(e,"resize",this._checkForIntersections,!0),a(n,"scroll",this._checkForIntersections,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in e&&(this._domObserver=new MutationObserver(this._checkForIntersections),this._domObserver.observe(n,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))))},o.prototype._unmonitorIntersections=function(){this._monitoringIntersections&&(this._monitoringIntersections=!1,clearInterval(this._monitoringInterval),this._monitoringInterval=null,i(e,"resize",this._checkForIntersections,!0),i(n,"scroll",this._checkForIntersections,!0),this._domObserver&&(this._domObserver.disconnect(),this._domObserver=null))},o.prototype._checkForIntersections=function(){var e=this._rootIsInDom(),n=e?this._getRootRect():d();this._observationTargets.forEach(function(o){var l=o.element,a=c(l),i=this._rootContainsTarget(l),s=o.entry,d=e&&i&&this._computeTargetAndRootIntersection(l,n),u=o.entry=new t({time:r(),target:l,boundingClientRect:a,rootBounds:n,intersectionRect:d});s?e&&i?this._hasCrossedThreshold(s,u)&&this._queuedEntries.push(u):s&&s.isIntersecting&&this._queuedEntries.push(u):this._queuedEntries.push(u)},this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)},o.prototype._computeTargetAndRootIntersection=function(t,o){if("none"!=e.getComputedStyle(t).display){for(var r=c(t),l=r,a=p(t),i=!1;!i;){var d=null,u=1==a.nodeType?e.getComputedStyle(a):{};if("none"==u.display)return;if(a==this.root||a==n?(i=!0,d=o):a!=n.body&&a!=n.documentElement&&"visible"!=u.overflow&&(d=c(a)),d&&!(l=s(d,l)))break;a=p(a)}return l}},o.prototype._getRootRect=function(){var e;if(this.root)e=c(this.root);else{var t=n.documentElement,o=n.body;e={top:0,left:0,right:t.clientWidth||o.clientWidth,width:t.clientWidth||o.clientWidth,bottom:t.clientHeight||o.clientHeight,height:t.clientHeight||o.clientHeight}}return this._expandRectByRootMargin(e)},o.prototype._expandRectByRootMargin=function(e){var n=this._rootMarginValues.map(function(n,t){return"px"==n.unit?n.value:n.value*(t%2?e.width:e.height)/100}),t={top:e.top-n[0],right:e.right+n[1],bottom:e.bottom+n[2],left:e.left-n[3]};return t.width=t.right-t.left,t.height=t.bottom-t.top,t},o.prototype._hasCrossedThreshold=function(e,n){var t=e&&e.isIntersecting?e.intersectionRatio||0:-1,o=n.isIntersecting?n.intersectionRatio||0:-1;if(t!==o)for(var r=0;r<this.thresholds.length;r++){var l=this.thresholds[r];if(l==t||l==o||l<t!=l<o)return!0}},o.prototype._rootIsInDom=function(){return!this.root||u(n,this.root)},o.prototype._rootContainsTarget=function(e){return u(this.root||n,e)},o.prototype._registerInstance=function(){f.indexOf(this)<0&&f.push(this)},o.prototype._unregisterInstance=function(){var e=f.indexOf(this);-1!=e&&f.splice(e,1)},e.IntersectionObserver=o,e.IntersectionObserverEntry=t}(window,document),function(e){function n(e,n,t,o){for(var l,a=t.slice(),i=r(n,e),s=0,c=a.length;s<c&&(handler=a[s],"object"==typeof handler&&"function"==typeof handler.handleEvent?handler.handleEvent(i):handler.call(e,i),!i.stoppedImmediatePropagation);s++);return l=!i.stoppedPropagation,o&&l&&e.parentNode?e.parentNode.dispatchEvent(i):!i.defaultPrevented}function t(e,n){return{configurable:!0,get:e,set:n}}function o(e,n,o){var r=_(n||e,o);g(e,"textContent",t(function(){return r.get.call(this)},function(e){r.set.call(this,e)}))}function r(e,n){return e.currentTarget=n,e.eventPhase=e.target===e.currentTarget?2:3,e}function l(e,n){for(var t=e.length;t--&&e[t]!==n;);return t}function a(){if("BR"===this.tagName)return"\n";for(var e=this.firstChild,n=[];e;)8!==e.nodeType&&7!==e.nodeType&&n.push(e.textContent),e=e.nextSibling;return n.join("")}function i(e){!u&&b.test(document.readyState)&&(u=!u,document.detachEvent(p,i),e=document.createEvent("Event"),e.initEvent(f,!0,!0),document.dispatchEvent(e))}function s(e){for(var n;n=this.lastChild;)this.removeChild(n);null!=e&&this.appendChild(document.createTextNode(e))}function c(n,t){return t||(t=e.event),t.target||(t.target=t.srcElement||t.fromElement||document),t.timeStamp||(t.timeStamp=(new Date).getTime()),t}if(!document.createEvent){var d=!0,u=!1,p="onreadystatechange",f="DOMContentLoaded",m="__IE8__"+Math.random(),v=e.Object,g=v.defineProperty||function(e,n,t){e[n]=t.value},E=v.defineProperties||function(n,t){for(var o in t)if(h.call(t,o))try{g(n,o,t[o])}catch(t){e.console&&console.log(o+" failed on object:",n,t.message)}},_=v.getOwnPropertyDescriptor,h=v.prototype.hasOwnProperty,y=e.Element.prototype,A=e.Text.prototype,C=/^[a-z]+$/,b=/loaded|complete/,O={},T=document.createElement("div");o(e.HTMLCommentElement.prototype,y,"nodeValue"),o(e.HTMLScriptElement.prototype,null,"text"),o(A,null,"nodeValue"),o(e.HTMLTitleElement.prototype,null,"text"),g(e.HTMLStyleElement.prototype,"textContent",function(e){return t(function(){return e.get.call(this.styleSheet)},function(n){e.set.call(this.styleSheet,n)})}(_(e.CSSStyleSheet.prototype,"cssText"))),E(y,{textContent:{get:a,set:s},firstElementChild:{get:function(){for(var e=this.childNodes||[],n=0,t=e.length;n<t;n++)if(1==e[n].nodeType)return e[n]}},lastElementChild:{get:function(){for(var e=this.childNodes||[],n=e.length;n--;)if(1==e[n].nodeType)return e[n]}},previousElementSibling:{get:function(){for(var e=this.previousSibling;e&&1!=e.nodeType;)e=e.previousSibling;return e}},nextElementSibling:{get:function(){for(var e=this.nextSibling;e&&1!=e.nodeType;)e=e.nextSibling;return e}},childElementCount:{get:function(){for(var e=0,n=this.childNodes||[],t=n.length;t--;e+=1==n[t].nodeType);return e}},addEventListener:{value:function(e,t,o){var r,a=this,i="on"+e,s=a[m]||g(a,m,{value:{}})[m],d=s[i]||(s[i]={}),u=d.h||(d.h=[]);if(!h.call(d,"w")){if(d.w=function(e){return e[m]||n(a,c(a,e),u,!1)},!h.call(O,i))if(C.test(e))try{r=document.createEventObject(),r[m]=!0,9!=a.nodeType&&null==a.parentNode&&T.appendChild(a),a.fireEvent(i,r),O[i]=!0}catch(r){for(O[i]=!1;T.hasChildNodes();)T.removeChild(T.firstChild)}else O[i]=!1;(d.n=O[i])&&a.attachEvent(i,d.w)}l(u,t)<0&&u[o?"unshift":"push"](t)}},dispatchEvent:{value:function(e){var t,o=this,r="on"+e.type,l=o[m],a=l&&l[r],i=!!a;return e.target||(e.target=o),i?a.n?o.fireEvent(r,e):n(o,e,a.h,!0):!(t=o.parentNode)||t.dispatchEvent(e),!e.defaultPrevented}},removeEventListener:{value:function(e,n,t){var o=this,r="on"+e,a=o[m],i=a&&a[r],s=i&&i.h,c=s?l(s,n):-1;-1<c&&s.splice(c,1)}}}),E(A,{addEventListener:{value:y.addEventListener},dispatchEvent:{value:y.dispatchEvent},removeEventListener:{value:y.removeEventListener}}),E(e.XMLHttpRequest.prototype,{addEventListener:{value:function(e,n,t){var o=this,r="on"+e,a=o[m]||g(o,m,{value:{}})[m],i=a[r]||(a[r]={}),s=i.h||(i.h=[]);l(s,n)<0&&(o[r]||(o[r]=function(){var n=document.createEvent("Event");n.initEvent(e,!0,!0),o.dispatchEvent(n)}),s[t?"unshift":"push"](n))}},dispatchEvent:{value:function(e){var t=this,o="on"+e.type,r=t[m],l=r&&r[o];return!!l&&(l.n?t.fireEvent(o,e):n(t,e,l.h,!0))}},removeEventListener:{value:y.removeEventListener}}),E(e.Event.prototype,{bubbles:{value:!0,writable:!0},cancelable:{value:!0,writable:!0},preventDefault:{value:function(){this.cancelable&&(this.defaultPrevented=!0,this.returnValue=!1)}},stopPropagation:{value:function(){this.stoppedPropagation=!0,this.cancelBubble=!0}},stopImmediatePropagation:{value:function(){this.stoppedImmediatePropagation=!0,this.stopPropagation()}},initEvent:{value:function(e,n,t){this.type=e,this.bubbles=!!n,this.cancelable=!!t,this.bubbles||this.stopPropagation()}}}),E(e.HTMLDocument.prototype,{textContent:{get:function(){return 11===this.nodeType?a.call(this):null},set:function(e){11===this.nodeType&&s.call(this,e)}},addEventListener:{value:function(n,t,o){var r=this;y.addEventListener.call(r,n,t,o),d&&n===f&&!b.test(r.readyState)&&(d=!1,r.attachEvent(p,i),e==top&&function e(n){try{r.documentElement.doScroll("left"),i()}catch(n){setTimeout(e,50)}}())}},dispatchEvent:{value:y.dispatchEvent},removeEventListener:{value:y.removeEventListener},createEvent:{value:function(e){var n;if("Event"!==e)throw new Error("unsupported "+e);return n=document.createEventObject(),n.timeStamp=(new Date).getTime(),n}}}),E(e.Window.prototype,{getComputedStyle:{value:function(){function e(e){this._=e}function n(){}var t=/^(?:[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|))(?!px)[a-z%]+$/,o=/^(top|right|bottom|left)$/,r=/\-([a-z])/g,l=function(e,n){return n.toUpperCase()};return e.prototype.getPropertyValue=function(e){var n,a,i,s=this._,c=s.style,d=s.currentStyle,u=s.runtimeStyle;return e=("float"===e?"style-float":e).replace(r,l),n=d?d[e]:c[e],t.test(n)&&!o.test(e)&&(a=c.left,i=u&&u.left,i&&(u.left=d.left),c.left="fontSize"===e?"1em":n,n=c.pixelLeft+"px",c.left=a,i&&(u.left=i)),null==n?n:n+""||"auto"},n.prototype.getPropertyValue=function(){return null},function(t,o){return o?new n(t):new e(t)}}()},addEventListener:{value:function(t,o,r){var a,i=e,s="on"+t;i[s]||(i[s]=function(e){return n(i,c(i,e),a,!1)}),a=i[s][m]||(i[s][m]=[]),l(a,o)<0&&a[r?"unshift":"push"](o)}},dispatchEvent:{value:function(n){var t=e["on"+n.type];return!t||!1!==t.call(e,n)&&!n.defaultPrevented}},removeEventListener:{value:function(n,t,o){var r="on"+n,a=(e[r]||v)[m],i=a?l(a,t):-1;-1<i&&a.splice(i,1)}}})}}(this),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n;"undefined"!=typeof window?n=window:"undefined"!=typeof global?n=global:"undefined"!=typeof self&&(n=self),n.flowplayer=e()}}(function(){var e;return function e(n,t,o){function r(a,i){if(!t[a]){if(!n[a]){var s="function"==typeof require&&require;if(!i&&s)return s(a,!0);if(l)return l(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var d=t[a]={exports:{}};n[a][0].call(d.exports,function(e){var t=n[a][1][e];return r(t||e)},d,d.exports,e,n,t,o)}return t[a].exports}for(var l="function"==typeof require&&require,a=0;a<o.length;a++)r(o[a]);return r}({1:[function(e,n,t){"use strict";var o=n.exports={},r=e("class-list"),l=window.jQuery,a=e("punycode"),i=e("computed-style");o.noop=function(){},o.identity=function(e){return e},o.removeNode=function(e){e&&e.parentNode&&e.parentNode.removeChild(e)},o.find=function(e,n){return l?l(e,n).toArray():(n=n||document,Array.prototype.map.call(n.querySelectorAll(e),function(e){return e}))},o.text=function(e,n){e["innerText"in e?"innerText":"textContent"]=n},o.findDirect=function(e,n){return o.find(e,n).filter(function(e){return e.parentNode===n})},o.hasClass=function(e,n){return r(e).contains(n)},o.isSameDomain=function(e){var n=window.location,t=o.createElement("a",{href:e});return n.hostname===t.hostname&&n.protocol===t.protocol&&n.port===t.port},o.css=function(e,n,t){return"object"==typeof n?Object.keys(n).forEach(function(t){o.css(e,t,n[t])}):void 0!==t?""===t?e?e.style.removeProperty(n):void 0:e?e.style.setProperty(n,t):void 0:e?i(e,n):void 0},o.createElement=function(e,n,t){try{var r=document.createElement(e);for(var a in n)n.hasOwnProperty(a)&&("css"===a?o.css(r,n[a]):o.attr(r,a,n[a]));return r.innerHTML=t||"",r}catch(o){if(!l)throw o;return l("<"+e+">"+t+"</"+e+">").attr(n)[0]}},o.toggleClass=function(e,n,t){if(e){var o=r(e);void 0===t?o.toggle(n):t?o.add(n):t||o.remove(n)}},o.addClass=function(e,n){return o.toggleClass(e,n,!0)},o.removeClass=function(e,n){return o.toggleClass(e,n,!1)},o.append=function(e,n){return e.appendChild(n),e},o.appendTo=function(e,n){return o.append(n,e),e},o.prepend=function(e,n){e.insertBefore(n,e.firstChild)},o.insertAfter=function(e,n,t){n==o.lastChild(e)&&e.appendChild(t);var r=Array.prototype.indexOf.call(e.children,n);e.insertBefore(t,e.children[r+1])},o.html=function(e,n){e=e.length?e:[e],e.forEach(function(e){e.innerHTML=n})},o.attr=function(e,n,t){if("class"===n&&(n="className"),o.hasOwnOrPrototypeProperty(e,n))try{e[n]=t}catch(o){if(!l)throw o;l(e).attr(n,t)}else!1===t?e.removeAttribute(n):e.setAttribute(n,t);return e},o.prop=function(e,n,t){if(void 0===t)return e&&e[n];e[n]=t},o.offset=function(e){var n=e.getBoundingClientRect();return e.offsetWidth/e.offsetHeight>e.clientWidth/e.clientHeight&&(n={left:100*n.left,right:100*n.right,top:100*n.top,bottom:100*n.bottom,width:100*n.width,height:100*n.height}),n},o.width=function(e,n){if(n)return e.style.width=(""+n).replace(/px$/,"")+"px";var t=o.offset(e).width;return void 0===t?e.offsetWidth:t},o.height=function(e,n){if(n)return e.style.height=(""+n).replace(/px$/,"")+"px";var t=o.offset(e).height;return void 0===t?e.offsetHeight:t},o.lastChild=function(e){return e.children[e.children.length-1]},o.hasParent=function(e,n){for(var t=e.parentElement;t;){if(o.matches(t,n))return!0;t=t.parentElement}return!1},o.createAbsoluteUrl=function(e){return o.createElement("a",{href:e}).href},o.xhrGet=function(e,n,t){var o=new XMLHttpRequest;o.onreadystatechange=function(){if(4===this.readyState)return this.status>=400?t():void n(this.responseText)},o.open("get",e,!0),o.send()},o.pick=function(e,n){var t={};return n.forEach(function(n){e.hasOwnProperty(n)&&(t[n]=e[n])}),t},o.hostname=function(e){return a.toUnicode(e||window.location.hostname)},o.browser={webkit:"WebkitAppearance"in document.documentElement.style},o.getPrototype=function(e){return Object.getPrototypeOf?Object.getPrototypeOf(e):e.__proto__},o.hasOwnOrPrototypeProperty=function(e,n){for(var t=e;t;){if(Object.prototype.hasOwnProperty.call(t,n))return!0;t=o.getPrototype(t)}return!1},o.matches=function(e,n){var t=Element.prototype
;return(t.matches||t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector||function(e){for(var n=this,t=(n.document||n.ownerDocument).querySelectorAll(e),o=0;t[o]&&t[o]!==n;)o++;return!!t[o]}).call(e,n)},function(e){function n(e){return e.replace(/-[a-z]/g,function(e){return e[1].toUpperCase()})}void 0!==e.setAttribute&&(e.setProperty=function(e,t){return this.setAttribute(n(e),String(t))},e.getPropertyValue=function(e){return this.getAttribute(n(e))||null},e.removeProperty=function(e){var t=this.getPropertyValue(e);return this.removeAttribute(n(e)),t})}(window.CSSStyleDeclaration.prototype)},{"class-list":22,"computed-style":24,punycode:21}],2:[function(e,n,t){"use strict";var o=e("../common");n.exports=function(e,n,t,r){t=t||"opaque";var l="obj"+(""+Math.random()).slice(2,15),a='<object class="fp-engine" id="'+l+'" name="'+l+'" ',i=navigator.userAgent.indexOf("MSIE")>-1;a+=i?'classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000">':' data="'+e+'" type="application/x-shockwave-flash">';var s={width:"100%",height:"100%",allowscriptaccess:"always",wmode:t,quality:"high",flashvars:"",movie:e+(i?"?"+l:""),name:l};"transparent"!==t&&(s.bgcolor=r||"#333333"),Object.keys(n).forEach(function(e){s.flashvars+=e+"="+n[e]+"&"}),Object.keys(s).forEach(function(e){a+='<param name="'+e+'" value="'+s[e]+'"/>'}),a+="</object>";var c=o.createElement("div",{},a);return o.find("object",c)},window.attachEvent&&window.attachEvent("onbeforeunload",function(){window.__flash_savedUnloadHandler=window.__flash_unloadHandler=function(){}})},{"../common":1}],3:[function(e,n,t){"use strict";function o(e){return/^https?:/.test(e)}var r,l=e("../flowplayer"),a=e("../common"),i=e("./embed"),s=e("extend-object"),c=e("bean");r=function(e,n){function t(e){function n(e){return("0"+parseInt(e).toString(16)).slice(-2)}if(e=e.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/))return"#"+n(e[1])+n(e[2])+n(e[3])}function d(e){return 7===e.length?e:"#"+e.split("").slice(1).map(function(e){return e+e}).join("")}function u(e){return/application\/x-mpegurl/i.test(e.type)}var p,f,m,v=e.conf,g=(e.video,window,{engineName:r.engineName,pick:function(n){var t=s({},function(){if(l.support.flashVideo){for(var t,o,r=0;r<n.length;r++)if(o=n[r],/mp4|flv|flash/i.test(o.type)&&(t=o),e.conf.swfHls&&/mpegurl/i.test(o.type)&&(t=o),t&&!/mp4/i.test(t.type))return t;return t}}());if(t)return!t.src||o(t.src)||e.conf.rtmp||t.rtmp||(t.src=a.createAbsoluteUrl(t.src)),t},load:function(r){function E(e){return e.replace(/&amp;/g,"%26").replace(/&/g,"%26").replace(/=/g,"%3D")}p=r;var _=a.findDirect("video",n)[0]||a.find(".fp-player > video",n)[0],h=r.src,y=o(h),A=function(){a.removeNode(_)};l.support.video&&a.prop(_,"autoplay")&&function(e){return e.some(function(e){return!!_.canPlayType(e.type)})}(r.sources)?c.one(_,"timeupdate",A):A();var C=r.rtmp||v.rtmp;if(y||C||(h=a.createAbsoluteUrl(h)),m&&u(r)&&m.data!==v.swfHls&&g.unload(),m){["live","preload","loop"].forEach(function(e){r.hasOwnProperty(e)&&m.__set(e,r[e])}),Object.keys(r.flashls||{}).forEach(function(e){m.__set("hls_"+e,r.flashls[e])});var b=!1;if(!y&&C)m.__set("rtmp",C.url||C);else{b=!!m.__get("rtmp"),m.__set("rtmp",null)}m.__play(h,b||r.rtmp&&r.rtmp!==v.rtmp)}else{f="fpCallback"+(""+Math.random()).slice(3,15),h=E(h);var O={hostname:v.embedded?a.hostname(v.hostname):a.hostname(location.hostname),url:h,callback:f};n.getAttribute("data-origin")&&(O.origin=n.getAttribute("data-origin")),["proxy","key","autoplay","preload","subscribe","live","loop","debug","splash","poster","rtmpt"].forEach(function(e){v.hasOwnProperty(e)&&(O[e]=v[e]),r.hasOwnProperty(e)&&(O[e]=r[e]),(v.rtmp||{}).hasOwnProperty(e)&&(O[e]=(v.rtmp||{})[e]),(r.rtmp||{}).hasOwnProperty(e)&&(O[e]=(r.rtmp||{})[e])}),v.rtmp&&(O.rtmp=v.rtmp.url||v.rtmp),r.rtmp&&(O.rtmp=r.rtmp.url||r.rtmp),Object.keys(r.flashls||{}).forEach(function(e){var n=r.flashls[e];O["hls_"+e]=n}),void 0!==v.bufferTime&&(O.bufferTime=v.bufferTime),y&&delete O.rtmp,O.rtmp&&(O.rtmp=E(O.rtmp));var T,k=v.bgcolor||a.css(n,"background-color")||"";0===k.indexOf("rgb")?T=t(k):0===k.indexOf("#")&&(T=d(k)),O.initialVolume=e.volumeLevel;var N=u(r)?v.swfHls:v.swf;m=i(N,O,v.wmode,T)[0];var L=a.find(".fp-player",n)[0];a.prepend(L,m),setTimeout(function(){try{if(!m.PercentLoaded())return e.trigger("error",[e,{code:7,url:v.swf}])}catch(e){}},5e3),setTimeout(function(){void 0===m.PercentLoaded&&e.trigger("flashdisabled",[e])},1e3),e.off("resume.flashhack").on("resume.flashhack",function(){var n=setTimeout(function(){e.playing&&e.trigger("flashdisabled",[e])},1e3);e.one("progress",function(){clearTimeout(n)})}),m.pollInterval=setInterval(function(){if(m){var n=m.__status?m.__status():null;n&&(e.playing&&n.time&&n.time!==e.video.time&&e.trigger("progress",[e,n.time]),r.buffer=n.buffer/r.bytes*r.duration,e.trigger("buffer",[e,r.buffer]),!r.buffered&&n.time>0&&(r.buffered=!0,e.trigger("buffered",[e])))}},250),window[f]=function(t,o){var r=p;v.debug&&(0===t.indexOf("debug")&&o&&o.length?console.log.apply(console,["-- "+t].concat(o)):console.log("--",t,o));var l={type:t};switch(t){case"ready":o=s(r,o);break;case"click":l.flash=!0;break;case"keydown":l.which=o;break;case"seek":r.time=o;break;case"status":e.trigger("progress",[e,o.time]),o.buffer<r.bytes&&!r.buffered?(r.buffer=o.buffer/r.bytes*r.duration,e.trigger("buffer",r.buffer)):r.buffered||(r.buffered=!0,e.trigger("buffered"))}"click"===t||"keydown"===t?(l.target=n,c.fire(n,t,[l])):"buffered"!=t&&"unload"!==t?setTimeout(function(){e.trigger(l,[e,o])},1):"unload"===t&&e.trigger(l,[e,o])}}},speed:a.noop,unload:function(){m&&m.__unload&&m.__unload();try{f&&window[f]&&delete window[f]}catch(e){}a.find("object",n).forEach(a.removeNode),m=0,e.off(".flashengine"),clearInterval(m.pollInterval)}});return["pause","resume","seek","volume"].forEach(function(n){g[n]=function(t){try{e.ready&&(void 0===t?m["__"+n]():m["__"+n](t))}catch(t){if(void 0===m["__"+n])return e.trigger("flashdisabled",[e]);throw t}}}),g},r.engineName="flash",r.canPlay=function(e,n){return l.support.flashVideo&&/video\/(mp4|flash|flv)/i.test(e)||l.support.flashVideo&&n.swfHls&&/mpegurl/i.test(e)},l.engines.push(r)},{"../common":1,"../flowplayer":18,"./embed":2,bean:20,"extend-object":26}],4:[function(e,n,t){"use strict";function o(e,n){return n=n||100,Math.round(e*n)/n}function r(e){return/mpegurl/i.test(e)?"application/x-mpegurl":e}function l(e){return/^(video|application)/i.test(e)||(e=r(e)),!!m.canPlayType(e).replace("no","")}function a(e,n){var t=e.filter(function(e){return e.type===n});return t.length?t[0]:null}var i,s,c=e("../flowplayer"),d=e("bean"),u=e("class-list"),p=e("extend-object"),f=e("../common"),m=document.createElement("video"),v={ended:"finish",pause:"pause",play:"resume",progress:"buffer",timeupdate:"progress",volumechange:"volume",ratechange:"speed",seeked:"seek",loadeddata:"ready",error:"error",dataunavailable:"error",webkitendfullscreen:!c.support.inlineVideo&&"unload"},g=function(e,n,t,o){if(void 0===n&&(n=!0),void 0===t&&(t="none"),void 0===o&&(o=!0),o&&i)return i.type=r(e.type),i.src=e.src,f.find("track",i).forEach(f.removeNode),i.removeAttribute("crossorigin"),i;var l=document.createElement("video");return l.src=e.src,l.type=r(e.type),l.className="fp-engine",l.autoplay=!!n&&"autoplay",l.preload=t,l.setAttribute("x-webkit-airplay","allow"),o&&(i=l),l};s=function(e,n){function t(t,r,a){var i=n.getAttribute("data-flowplayer-instance-id");if(t.listeners&&t.listeners.hasOwnProperty(i))return void(t.listeners[i]=a);(t.listeners||(t.listeners={}))[i]=a,d.on(r,"error",function(n){try{l(n.target.getAttribute("type"))&&e.trigger("error",[e,{code:4,video:p(a,{src:t.src,url:t.src})}])}catch(e){}}),e.on("shutdown",function(){d.off(r)});var s={};return Object.keys(v).forEach(function(r){var l=v[r];if(l){var c=function(s){if(a=t.listeners[i],s.target&&u(s.target).contains("fp-engine")&&(y.debug&&!/progress/.test(l)&&console.log(r,"->",l,s),(e.ready||/ready|error/.test(l))&&l&&f.find("video",n).length)){var c;if("unload"===l)return void e.unload();var d=function(){e.trigger(l,[e,c])};switch(l){case"ready":c=p(a,{duration:t.duration,width:t.videoWidth,height:t.videoHeight,url:t.currentSrc,src:t.currentSrc});try{c.seekable=!e.live&&/mpegurl/i.test(a?a.type||"":"")&&t.duration||t.seekable&&t.seekable.end(null)}catch(e){}if(m=m||setInterval(function(){try{c.buffer=t.buffered.end(null)}catch(e){}c.buffer&&(o(c.buffer,1e3)<o(c.duration,1e3)&&!c.buffered?e.trigger("buffer",s):c.buffered||(c.buffered=!0,e.trigger("buffer",s).trigger("buffered",s),clearInterval(m),m=0))},250),!e.live&&!c.duration&&!h.hlsDuration&&"loadeddata"===r){var v=function(){c.duration=t.duration;try{c.seekable=t.seekable&&t.seekable.end(null)}catch(e){}d(),t.removeEventListener("durationchange",v),u(n).remove("is-live")};t.addEventListener("durationchange",v);var g=function(){e.ready||t.duration||(c.duration=0,u(n).add("is-live"),d()),t.removeEventListener("timeupdate",g)};return void t.addEventListener("timeupdate",g)}break;case"progress":case"seek":e.video.duration;if(t.currentTime>0||e.live)c=Math.max(t.currentTime,0);else if("progress"==l)return;break;case"speed":c=o(t.playbackRate);break;case"volume":c=o(t.volume);break;case"error":try{c=(s.srcElement||s.originalTarget).error,c.video=p(a,{src:t.src,url:t.src})}catch(e){return}}d()}};n.addEventListener(r,c,!0),s[r]||(s[r]=[]),s[r].push(c)}}),s}var r,m,E,_=f.findDirect("video",n)[0]||f.find(".fp-player > video",n)[0],h=c.support,y=(f.find("track",_)[0],e.conf);return r={engineName:s.engineName,pick:function(e){var n=function(){if(h.video){if(y.videoTypePreference){var n=a(e,y.videoTypePreference);if(n)return n}for(var t=0;t<e.length;t++)if(l(e[t].type))return e[t]}}();if(n)return"string"==typeof n.src&&(n.src=f.createAbsoluteUrl(n.src)),n},load:function(o){var l=!1,a=f.find(".fp-player",n)[0],i=!1;y.splash&&!_?(_=g(o),f.prepend(a,_),l=!0):_?(u(_).add("fp-engine"),f.find("source,track",_).forEach(f.removeNode),e.conf.nativesubtitles||f.attr(_,"crossorigin",!1),i=_.src===o.src):(_=g(o,!!o.autoplay||!!y.autoplay,y.clip.preload||"metadata",!1),f.prepend(a,_),l=!0),h.inlineVideo||console.warn(h.inlineVideo),d.off(_,"timeupdate",f.noop),d.on(_,"timeupdate",f.noop),f.prop(_,"loop",!(!o.loop&&!y.loop)),void 0!==E&&(_.volume=E),(e.video.src&&o.src!=e.video.src||o.index)&&f.attr(_,"autoplay","autoplay"),_.src=o.src,_.type=o.type,r._listeners=t(_,f.find("source",_).concat(_),o),("none"==y.clip.preload||"mpegurl"==o.type)&&h.zeropreload&&h.dataload||_.load(),(l||i)&&_.load(),_.paused&&(o.autoplay||y.autoplay)&&_.play()},pause:function(){_.pause()},resume:function(){_.play()},speed:function(e){_.playbackRate=e},seek:function(n){try{var t=e.paused;_.currentTime=n,t&&_.pause()}catch(e){}},volume:function(e){E=e,_&&(_.volume=e)},unload:function(){f.find("video.fp-engine",n).forEach(f.removeNode),h.cachedVideoTag||(i=null),m=clearInterval(m);var e=n.getAttribute("data-flowplayer-instance-id");delete _.listeners[e],_=0,r._listeners&&Object.keys(r._listeners).forEach(function(e){r._listeners[e].forEach(function(t){n.removeEventListener(e,t,!0)})})}}},s.canPlay=function(e){return c.support.video&&l(e)},s.engineName="html5",c.engines.push(s)},{"../common":1,"../flowplayer":18,bean:20,"class-list":22,"extend-object":26}],5:[function(e,n,t){"use strict";var o=e("../flowplayer"),r=e("./resolve").TYPE_RE,l=e("scriptjs"),a=e("bean");o(function(e,n){var t,o=e.conf.analytics,i=0,s=0;if(o){"undefined"==typeof _gat&&l("//google-analytics.com/ga.js");var c=function(){var e=_gat._getTracker(o);return e._setAllowLinker(!0),e},d=function(o,l,a){if(a=a||e.video,i&&"undefined"!=typeof _gat){c()._trackEvent("Video / Seconds played",e.engine.engineName+"/"+a.type,a.title||n.getAttribute("title")||a.src.split("/").slice(-1)[0].replace(r,""),Math.round(i/1e3)),i=0,t&&(clearTimeout(t),t=null)}};e.bind("load unload",d).bind("progress",function(){e.seeking||(i+=s?+new Date-s:0,s=+new Date),t||(t=setTimeout(function(){t=null,c()._trackEvent("Flowplayer heartbeat","Heartbeat","",0,!0)},6e5))}).bind("pause",function(){s=0}),e.bind("shutdown",function(){a.off(window,"unload",d)}),a.on(window,"unload",d)}})},{"../flowplayer":18,"./resolve":13,bean:20,scriptjs:29}],6:[function(e,n,t){"use strict";var o=e("../flowplayer"),r=e("class-list"),l=e("../common"),a=e("bean");o(function(e,n){function t(e){n.className=n.className.replace(i," "),e>=0&&r(n).add("cue"+e)}function o(n){var t=n&&!isNaN(n.time)?n.time:n;return t<0&&(t=e.video.duration+t),.125*Math.round(t/.125)}var i=/ ?cue\d+ ?/,s=!1,c={},d=-.125,u=function(n){var o=e.cuepoints.indexOf(n);isNaN(n)||(n={time:n}),n.index=o,t(o),e.trigger("cuepoint",[e,n])};e.on("progress",function(e,n,t){if(!s)for(var r=o(t);d<r;)d+=.125,c[d]&&c[d].forEach(u)}).on("unload",t).on("beforeseek",function(e){setTimeout(function(){e.defaultPrevented||(s=!0)})}).on("seek",function(e,n,r){t(),d=o(r||0)-.125,s=!1,!r&&c[0]&&c[0].forEach(u)}).on("ready",function(n,t,o){d=-.125;var r=o.cuepoints||e.conf.cuepoints||[];e.setCuepoints(r)}).on("finish",function(){d=-.125}),e.conf.generate_cuepoints&&e.bind("load",function(){l.find(".fp-cuepoint",n).forEach(l.removeNode)}),e.setCuepoints=function(n){return e.cuepoints=[],c={},n.forEach(e.addCuepoint),e},e.addCuepoint=function(t){e.cuepoints||(e.cuepoints=[]);var r=o(t);if(c[r]||(c[r]=[]),c[r].push(t),e.cuepoints.push(t),e.conf.generate_cuepoints&&!1!==t.visible){var i=e.video.duration,s=l.find(".fp-timeline",n)[0];l.css(s,"overflow","visible");var d=t.time||t;d<0&&(d=i+d);var u=l.createElement("a",{className:"fp-cuepoint fp-cuepoint"+(e.cuepoints.length-1)});l.css(u,"left",d/i*100+"%"),s.appendChild(u),a.on(u,"mousedown",function(n){n.preventDefault(),n.stopPropagation(),e.seek(d)})}return e},e.removeCuepoint=function(n){var t=e.cuepoints.indexOf(n),r=o(n);if(-1!==t){e.cuepoints=e.cuepoints.slice(0,t).concat(e.cuepoints.slice(t+1));var l=c[r].indexOf(n);if(-1!==l)return c[r]=c[r].slice(0,l).concat(c[r].slice(l+1)),e}}})},{"../common":1,"../flowplayer":18,bean:20,"class-list":22}],7:[function(e,n,t){"use strict";var o=e("../flowplayer"),r=e("bean"),l=e("../common"),a=(e("is-object"),e("extend-object")),i=e("class-list");o(function(e,n){if(!1!==e.conf.embed){var t=(e.conf,l.find(".fp-ui",n)[0]),o=l.createElement("a",{class:"fp-embed",title:"Copy to your site"}),i=l.createElement("div",{class:"fp-embed-code"},"<label>Paste this HTML code on your site to embed.</label><textarea></textarea>"),c=l.find("textarea",i)[0];t.appendChild(o),t.appendChild(i),e.embedCode=function(){var t=e.conf.embed||{},o=e.video;if(t.iframe){var r=(e.conf.embed.iframe,t.width||o.width||l.width(n)),i=t.height||o.height||l.height(n);return'<iframe src="'+e.conf.embed.iframe+'" allowfullscreen style="width:'+r+";height:"+i+';border:none;"></iframe>'}var s=["ratio","rtmp","live","bufferTime","origin","analytics","key","subscribe","swf","swfHls","embed","adaptiveRatio","logo"];t.playlist&&s.push("playlist");var c=l.pick(e.conf,s);c.logo&&(c.logo=l.createElement("img",{src:c.logo}).src),t.playlist&&e.conf.playlist.length||(c.clip=a({},e.conf.clip,l.pick(e.video,["sources"])));var d='var w=window,d=document,e;w._fpes||(w._fpes=[],w.addEventListener("load",function(){var s=d.createElement("script");s.src="//embed.flowplayer.org/6.0.5/embed.min.js",d.body.appendChild(s)})),e=[].slice.call(d.getElementsByTagName("script"),-1)[0].parentNode,w._fpes.push({e:e,l:"$library",c:$conf});\n'.replace("$conf",JSON.stringify(c)).replace("$library",t.library||"");return'<a href="$href">Watch video!\n<script>$script<\/script></a>'.replace("$href",e.conf.origin||window.location.href).replace("$script",d)},s(n,".fp-embed","is-embedding"),r.on(n,"click",".fp-embed-code textarea",function(){c.select()}),r.on(n,"click",".fp-embed",function(){c.textContent=e.embedCode().replace(/(\r\n|\n|\r)/gm,""),c.focus(),c.select()})}});var s=function(e,n,t){function o(){a.remove(t),r.off(document,".st")}var a=i(e);r.on(e,"click",n||"a",function(e){e.preventDefault(),a.toggle(t),a.contains(t)&&(r.on(document,"keydown.st",function(e){27==e.which&&o()}),r.on(document,"click.st",function(e){l.hasParent(e.target,"."+t)||o()}))})}},{"../common":1,"../flowplayer":18,bean:20,"class-list":22,"extend-object":26,"is-object":28}],8:[function(e,n,t){"use strict";n.exports=function(e,n){n||(n=document.createElement("div"));var t={},o={},r=function(e,r,l){var a=e.split(".")[0],i=function(s){l&&(n.removeEventListener(a,i),t[e].splice(t[e].indexOf(i),1));var c=[s].concat(o[s.timeStamp+s.type]||[]);r&&r.apply(void 0,c)};n.addEventListener(a,i),t[e]||(t[e]=[]),t[e].push(i)};e.on=e.bind=function(n,t){return n.split(" ").forEach(function(e){r(e,t)}),e},e.one=function(n,t){return n.split(" ").forEach(function(e){r(e,t,!0)}),e};var l=function(e,n){return 0===n.filter(function(n){return-1===e.indexOf(n)}).length};e.off=e.unbind=function(o){return o.split(" ").forEach(function(e){var o=e.split(".").slice(1),r=e.split(".")[0];Object.keys(t).filter(function(e){var n=e.split(".").slice(1);return(!r||0===e.indexOf(r))&&l(n,o)}).forEach(function(e){var o=t[e],r=e.split(".")[0];o.forEach(function(e){n.removeEventListener(r,e),o.splice(o.indexOf(e),1)})})}),e},e.trigger=function(t,r,l){if(t){r=(r||[]).length?r||[]:[r];var a,i=document.createEvent("Event");return a=t.type||t,i.initEvent(a,!1,!0),Object.defineProperty&&(i.preventDefault=function(){Object.defineProperty(this,"defaultPrevented",{get:function(){return!0}})}),o[i.timeStamp+i.type]=r,n.dispatchEvent(i),l?i:e}}},n.exports.EVENTS=["beforeseek","disable","error","finish","fullscreen","fullscreen-exit","load","mute","pause","progress","ready","resume","seek","speed","stop","unload","volume","boot","shutdown"]},{}],9:[function(e,n,t){"use strict";var o,r=e("../flowplayer"),l=e("bean"),a=e("class-list"),i=(e("extend-object"),e("../common")),s=(r.support.browser.mozilla,"fullscreen-exit"),c=r.support.fullscreen,d=(document.exitFullscreen,navigator.userAgent.toLowerCase()),u=/(safari)[ \/]([\w.]+)/.exec(d)&&!/(chrome)[ \/]([\w.]+)/.exec(d);l.on(document,"fullscreenchange.ffscr webkitfullscreenchange.ffscr mozfullscreenchange.ffscr MSFullscreenChange.ffscr",function(e){var n=document.webkitCurrentFullScreenElement||document.mozFullScreenElement||document.fullscreenElement||document.msFullscreenElement||e.target;if(o||n.parentNode&&n.parentNode.getAttribute("data-flowplayer-instance-id")){var t=o||r(n.parentNode);n&&!o?o=t.trigger("fullscreen",[n]):(o.trigger(s,[o]),o=null)}}),r(function(e,n){var t=i.createElement("div",{className:"fp-player"});if(Array.prototype.map.call(n.children,i.identity).forEach(function(e){i.matches(e,".fp-ratio,script")||t.appendChild(e)}),n.appendChild(t),e.conf.fullscreen){var r,l,d=window,p=a(n);e.isFullscreen=!1,e.fullscreen=function(n){return void 0===n&&(n=!e.isFullscreen),n&&(r=d.scrollY,l=d.scrollX),c?n?["requestFullScreen","webkitRequestFullScreen","mozRequestFullScreen","msRequestFullscreen"].forEach(function(e){if("function"==typeof t[e])return t[e](Element.ALLOW_KEYBOARD_INPUT),!u||document.webkitCurrentFullScreenElement||document.mozFullScreenElement||t[e](),!1}):["exitFullscreen","webkitCancelFullScreen","mozCancelFullScreen","msExitFullscreen"].forEach(function(e){if("function"==typeof document[e])return document[e](),!1}):e.trigger(n?"fullscreen":s,[e]),e};var f;e.on("mousedown.fs",function(){+new Date-f<150&&e.ready&&e.fullscreen(),f=+new Date}),e.on("fullscreen",function(t){p.add("is-fullscreen"),c||i.css(n,"position","fixed"),e.isFullscreen=!0}).on(s,function(t){var o;c||"html5"!==e.engine||(o=n.css("opacity")||"",i.css(n,"opacity",0)),c||i.css(n,"position",""),p.remove("is-fullscreen"),c||"html5"!==e.engine||setTimeout(function(){n.css("opacity",o)}),e.isFullscreen=!1,d.scrollTo(l,r)}).on("unload",function(){e.isFullscreen&&e.fullscreen()}),e.on("shutdown",function(){o=null})}})},{"../common":1,"../flowplayer":18,bean:20,"class-list":22,"extend-object":26}],10:[function(e,n,t){"use strict";var o,r,l=e("../flowplayer"),a=e("bean"),i=e("../common"),s=e("class-list");a.on(document,"keydown.fp",function(e){var n=o,t=e.ctrlKey||e.metaKey||e.altKey,l=e.which,a=n&&n.conf,i=r&&s(r);if(n&&a.keyboard&&!n.disabled){if(-1!=[63,187,191].indexOf(l))return i.toggle("is-help"),!1;if(27==l&&i.contains("is-help"))return i.toggle("is-help"),!1;if(!t&&n.ready){if(e.preventDefault(),e.shiftKey)return void(39==l?n.speed(!0):37==l&&n.speed(!1));if(l<58&&l>47)return n.seekTo(l-48);switch(l){case 38:case 75:n.volume(n.volumeLevel+.15);break;case 40:case 74:n.volume(n.volumeLevel-.15);break;case 39:case 76:n.seeking=!0,n.seek(!0);break;case 37:case 72:n.seeking=!0,n.seek(!1);break;case 190:n.seekTo();break;case 32:n.toggle();break;case 70:a.fullscreen&&n.fullscreen();break;case 77:n.mute();break;case 81:n.unload()}}}}),l(function(e,n){if(e.conf.keyboard){a.on(n,"mouseenter mouseleave",function(t){(o=e.disabled||"mouseover"!=t.type?0:e)&&(r=n)});var t=l.support.video&&"flash"!==e.conf.engine&&document.createElement("video").playbackRate?"<p><em>shift</em> + <em>&#8592;</em><em>&#8594;</em>slower / faster</p>":"";if(n.appendChild(i.createElement("div",{className:"fp-help"},'         <a class="fp-close"></a>         <div class="fp-help-section fp-help-basics">            <p><em>space</em>play / pause</p>            <p><em>q</em>unload | stop</p>            <p><em>f</em>fullscreen</p>'+t+'         </div>         <div class="fp-help-section">            <p><em>&#8593;</em><em>&#8595;</em>volume</p>            <p><em>m</em>mute</p>         </div>         <div class="fp-help-section">            <p><em>&#8592;</em><em>&#8594;</em>seek</p>            <p><em>&nbsp;. </em>seek to previous            </p><p><em>1</em><em>2</em>&hellip; <em>6</em> seek to 10%, 20% &hellip; 60% </p>         </div>   ')),e.conf.tooltip){var c=i.find(".fp-ui",n)[0];c.setAttribute("title","Hit ? for help"),a.one(n,"mouseout.tip",".fp-ui",function(){c.removeAttribute("title")})}a.on(n,"click",".fp-close",function(){s(n).toggle("is-help")}),e.bind("shutdown",function(){r==n&&(r=null)})}})},{"../common":1,"../flowplayer":18,bean:20,"class-list":22}],11:[function(e,n,t){"use strict";var o=e("../flowplayer"),r=/IEMobile/.test(window.navigator.userAgent),l=e("class-list"),a=e("../common"),i=e("bean"),s=e("./ui").format,c=window.navigator.userAgent;(o.support.touch||r)&&o(function(e,n){var t=/Android/.test(c)&&!/Firefox/.test(c)&&!/Opera/.test(c),d=/Silk/.test(c),u=t?parseFloat(/Android\ (\d\.\d)/.exec(c)[1],10):0,p=l(n);if(t&&!r){if(!/Chrome/.test(c)&&u<4){var f=e.load;e.load=function(n,t){var o=f.apply(e,arguments);return e.trigger("ready",[e,e.video]),o}}var m,v=0,g=function(e){m=setInterval(function(){e.video.time=++v,e.trigger("progress",[e,v])},1e3)};e.bind("ready pause unload",function(){m&&(clearInterval(m),m=null)}),e.bind("ready",function(){v=0}),e.bind("resume",function(n,t){if(t.live)return v?g(t):void e.one("progress",function(e,n,t){0===t&&g(n)})})}o.support.volume||(p.add("no-volume"),p.add("no-mute")),p.add("is-touch"),e.sliders&&e.sliders.timeline&&e.sliders.timeline.disableAnimation(),o.support.inlineVideo&&!e.conf.native_fullscreen||(e.conf.nativesubtitles=!0);var E=!1;i.on(n,"touchmove",function(){E=!0}),i.on(n,"touchend click",function(n){return E?void(E=!1):e.playing&&!p.contains("is-mouseover")?(p.add("is-mouseover"),p.remove("is-mouseout"),n.preventDefault(),void n.stopPropagation()):void(e.playing||e.splash||!p.contains("is-mouseout")||p.contains("is-mouseover")||setTimeout(function(){e.playing||e.splash||e.resume()},400))}),e.conf.native_fullscreen&&"function"==typeof document.createElement("video").webkitEnterFullScreen&&(e.fullscreen=function(){var e=a.find("video.fp-engine",n)[0];e.webkitEnterFullScreen(),i.one(e,"webkitendfullscreen",function(){a.prop(e,"controls",!0),a.prop(e,"controls",!1)})}),(t||d)&&e.bind("ready",function(){var t=a.find("video.fp-engine",n)[0];i.one(t,"canplay",function(){t.play()}),t.play(),e.bind("progress.dur",function(){var o=t.duration;1!==o&&(e.video.duration=o,a.find(".fp-duration",n)[0].innerHTML=s(o),e.unbind("progress.dur"))})})})},{"../common":1,"../flowplayer":18,"./ui":17,bean:20,"class-list":22}],12:[function(e,n,t){"use strict";var o=e("../flowplayer"),r=e("extend-object"),l=e("bean"),a=e("class-list"),i=e("../common"),s=e("./resolve"),c=new s,d=window.jQuery,u=/^#/;o(function(e,n){function t(){return i.find(v.query,o())}function o(){if(!u.test(v.query))return n}function p(){return i.find(v.query+"."+g,o())}function f(){var t=i.find(".fp-playlist",n)[0];if(!t){t=i.createElement("div",{className:"fp-playlist"});var o=i.find(".fp-next,.fp-prev",n);o.length?o[0].parentElement.insertBefore(t,o[0]):i.insertAfter(n,i.find("video",n)[0],t)}t.innerHTML="",e.conf.playlist[0].length&&(e.conf.playlist=e.conf.playlist.map(function(e){if("string"==typeof e){var n=e.split(s.TYPE_RE)[1];return{sources:[{type:"m3u8"===n.toLowerCase()?"application/x-mpegurl":"video/"+n,src:e}]}}return{sources:e.map(function(e){var n={};return Object.keys(e).forEach(function(t){n.type=/mpegurl/i.test(t)?"application/x-mpegurl":"video/"+t,n.src=e[t]}),n})}})),e.conf.playlist.forEach(function(e,n){var o=e.sources[0].src;t.appendChild(i.createElement("a",{href:o,"data-index":n}))})}function m(n){return void 0!==n.index?n.index:void 0!==e.video.index?e.video.index:e.conf.startIndex||0}var v=r({active:"is-active",advance:!0,query:".fp-playlist a"},e.conf),g=v.active,E=a(n);e.play=function(n){if(void 0===n)return e.resume();if("number"==typeof n&&!e.conf.playlist[n])return e;if("number"!=typeof n)return e.load.apply(null,arguments);var t=r({index:n},e.conf.playlist[n]);return n===e.video.index?e.load(t,function(){e.resume()}):(e.off("resume.fromfirst"),e.load(t,function(){e.video.index=n}),e)},e.next=function(n){n&&n.preventDefault();var t=e.video.index;return-1!=t&&(t=t===e.conf.playlist.length-1?0:t+1,e.play(t)),e},e.prev=function(n){n&&n.preventDefault();var t=e.video.index;return-1!=t&&(t=0===t?e.conf.playlist.length-1:t-1,e.play(t)),e},e.setPlaylist=function(n){return e.conf.playlist=n,delete e.video.index,f(),e},e.addPlaylistItem=function(n){return e.setPlaylist(e.conf.playlist.concat([n]))},e.removePlaylistItem=function(n){var t=e.conf.playlist;return e.setPlaylist(t.slice(0,n).concat(t.slice(n+1)))},l.on(n,"click",".fp-next",e.next),l.on(n,"click",".fp-prev",e.prev),v.advance&&e.off("finish.pl").on("finish.pl",function(e,n){if(n.video.loop)return n.seek(0,function(){n.resume()});var t=n.video.index>=0?n.video.index+1:void 0;t<n.conf.playlist.length||v.loop?(t=t===n.conf.playlist.length?0:t,E.remove("is-finished"),setTimeout(function(){n.play(t)})):n.conf.playlist.length>1&&n.one("resume.fromfirst",function(){return n.play(0),!1})});var _=!1;e.conf.playlist.length&&(_=!0,f(),e.conf.clip&&e.conf.clip.sources.length||(e.conf.clip=e.conf.playlist[e.conf.startIndex||0])),t().length&&!_&&(e.conf.playlist=[],delete e.conf.startIndex,t().forEach(function(n){var t=n.href;n.setAttribute("data-index",e.conf.playlist.length);var o=c.resolve(t,e.conf.clip.sources);d&&r(o,d(n).data()),e.conf.playlist.push(o)})),l.on(u.test(v.query)?document:n,"click",v.query,function(n){n.preventDefault();var t=n.currentTarget,o=Number(t.getAttribute("data-index"));-1!=o&&e.play(o)}),e.on("load",function(t,r,l){if(e.conf.playlist.length){var s=p()[0],c=s&&s.getAttribute("data-index"),d=l.index=m(l),u=i.find(v.query+'[data-index="'+d+'"]',o())[0],f=d==e.conf.playlist.length-1;s&&a(s).remove(g),u&&a(u).add(g),E.remove("video"+c),E.add("video"+d),i.toggleClass(n,"last-video",f),l.index=r.video.index=d,l.is_last=r.video.is_last=f}}).on("unload.pl",function(){e.conf.playlist.length&&(p().forEach(function(e){a(e).toggle(g)}),e.conf.playlist.forEach(function(e,n){E.remove("video"+n)}))}),e.conf.playlist.length&&(e.conf.loop=!1)})},{"../common":1,"../flowplayer":18,"./resolve":13,bean:20,"class-list":22,"extend-object":26}],13:[function(e,n,t){"use strict";function o(e){var n=e.attr("src"),t=e.attr("type")||"",o=n.split(l)[1];return t=t.toLowerCase(),a(e.data(),{src:n,suffix:o||t,type:t||o})}function r(e){return/mpegurl/i.test(e)?"application/x-mpegurl":"video/"+e}var l=/\.(\w{3,4})(\?.*)?$/i,a=e("extend-object");n.exports=function(){var e=this;e.sourcesFromVideoTag=function(e,n){var t=[];return n("source",e).each(function(){t.push(o(n(this)))}),!t.length&&e.length&&t.push(o(e)),t},e.resolve=function(e,n){return e?("string"==typeof e&&(e={src:e,sources:[]},e.sources=(n||[]).map(function(n){var t=n.src.split(l)[1];return{type:n.type,src:e.src.replace(l,"."+t+"$2")}})),e instanceof Array&&(e={sources:e.map(function(e){return e.type&&e.src?e:Object.keys(e).reduce(function(n,t){return a(n,{type:r(t),src:e[t]})},{})})}),e):{sources:n}}},n.exports.TYPE_RE=l},{"extend-object":26}],14:[function(e,n,t){"use strict";var o=e("class-list"),r=e("bean"),l=e("../common"),a=function(e,n){var t;return function(){t||(e.apply(this,arguments),t=1,setTimeout(function(){t=0},n))}},i=function(e,n){var t,i,s,c,d,u,p,f=(/iPad/.test(navigator.userAgent)&&/CriOS/.test(navigator.userAgent),l.lastChild(e)),m=o(e),v=o(f),g=!1,E=function(){i=l.offset(e),s=l.width(e),c=l.height(e),d=s,p=A(u)},_=function(n){t||n==C.value||u&&!(n<u)||(r.fire(e,"slide",[n]),C.value=n)},h=function(e){var t=e.pageX||e.clientX;!t&&e.originalEvent&&e.originalEvent.touches&&e.originalEvent.touches.length&&(t=e.originalEvent.touches[0].pageX);var o=t-i.left;o=Math.max(0,Math.min(p||d,o));var r=o/d;return n&&(r=1-r),y(r,0,!0)},y=function(e,n){void 0===n&&(n=0),e>1&&(e=1);var t=Math.round(1e3*e)/10+"%";return(!u||e<=u)&&(v.remove("animated"),g?v.remove("animated"):(v.add("animated"),l.css(f,"transition-duration",(n||0)+"ms")),l.css(f,"width",t)),e},A=function(e){return Math.max(0,Math.min(d,e*s))},C={max:function(e){u=e},disable:function(e){t=e},slide:function(e,n,t){E(),t&&_(e),y(e,n)},disableAnimation:function(n,t){g=!1!==n,l.toggleClass(e,"no-animation",!!t)}};return E(),r.on(e,"mousedown.sld touchstart",function(e){if(e.preventDefault(),!t){var n=a(_,100);E(),C.dragging=!0,m.add("is-dragging"),_(h(e)),r.on(document,"mousemove.sld touchmove.sld",function(e){e.preventDefault(),n(h(e))}),r.one(document,"mouseup touchend",function(){C.dragging=!1,m.remove("is-dragging"),r.off(document,"mousemove.sld touchmove.sld")})}}),C};n.exports=i},{"../common":1,bean:20,"class-list":22}],15:[function(e,n,t){"use strict";var o=e("../flowplayer"),r=e("../common"),l=e("bean"),a=e("class-list");o.defaults.subtitleParser=function(e){function n(e){var n=e.split(":");return 2==n.length&&n.unshift(0),60*n[0]*60+60*n[1]+parseFloat(n[2].replace(",","."))}for(var t,o,r,l=/^(([0-9]{2}:){1,2}[0-9]{2}[,.][0-9]{3}) --\> (([0-9]{2}:){1,2}[0-9]{2}[,.][0-9]{3})(.*)/,a=[],i=0,s=e.split("\n"),c=s.length,d={};i<c;i++)if(o=l.exec(s[i])){for(t=s[i-1],r="<p>"+s[++i]+"</p><br/>";"string"==typeof s[++i]&&s[i].trim()&&i<s.length;)r+="<p>"+s[i]+"</p><br/>";d={title:t,startTime:n(o[1]),endTime:n(o[3]),text:r},a.push(d)}return a},o(function(e,n){var t,i,s,c,d=a(n),u=function(){c=r.createElement("a",{className:"fp-menu"});var t=r.createElement("ul",{className:"fp-dropdown fp-dropup"});return t.appendChild(r.createElement("li",{"data-subtitle-index":-1},"No subtitles")),(e.video.subtitles||[]).forEach(function(e,n){var o=e.srclang||"en",l=e.label||"Default ("+o+")",a=r.createElement("li",{"data-subtitle-index":n},l);t.appendChild(a)}),c.appendChild(t),r.find(".fp-controls",n)[0].appendChild(c),c};l.on(n,"click",".fp-menu",function(e){a(c).toggle("dropdown-open")}),l.on(n,"click",".fp-menu li[data-subtitle-index]",function(n){var t=n.target.getAttribute("data-subtitle-index");if("-1"===t)return e.disableSubtitles();e.loadSubtitles(t)});var p=function(){var e=r.find(".fp-player",n)[0];s=r.find(".fp-subtitle",n)[0],s=s||r.appendTo(r.createElement("div",{class:"fp-subtitle"}),e),Array.prototype.forEach.call(s.children,r.removeNode),t=a(s),r.find(".fp-menu",n).forEach(r.removeNode),u()};e.on("ready",function(t,l,a){var i=l.conf
;if(o.support.subtitles&&i.nativesubtitles&&"html5"==l.engine.engineName){var s=function(e){var t=r.find("video",n)[0].textTracks;t.length&&(t[0].mode=e)};if(!a.subtitles||!a.subtitles.length)return;var c=r.find("video.fp-engine",n)[0];return a.subtitles.some(function(e){return!r.isSameDomain(e.src)})&&r.attr(c,"crossorigin","anonymous"),c.textTracks.addEventListener("addtrack",function(){s("disabled"),s("showing")}),void a.subtitles.forEach(function(e){c.appendChild(r.createElement("track",{kind:"subtitles",srclang:e.srclang||"en",label:e.label||"en",src:e.src,default:e.default}))})}if(l.subtitles=[],p(),d.remove("has-menu"),e.disableSubtitles(),a.subtitles&&a.subtitles.length){d.add("has-menu");var u=a.subtitles.filter(function(e){return e.default})[0];u&&l.loadSubtitles(a.subtitles.indexOf(u))}}),e.bind("cuepoint",function(e,n,o){o.subtitle?(i=o.index,r.html(s,o.subtitle.text),t.add("fp-active")):o.subtitleEnd&&(t.remove("fp-active"),i=o.index)}),e.bind("seek",function(n,o,r){i&&e.cuepoints[i]&&e.cuepoints[i].time>r&&(t.remove("fp-active"),i=null),(e.cuepoints||[]).forEach(function(n){var t=n.subtitle;t&&i!=n.index?r>=n.time&&(!t.endTime||r<=t.endTime)&&e.trigger("cuepoint",[e,n]):n.subtitleEnd&&r>=n.time&&n.index==i+1&&e.trigger("cuepoint",[e,n])})});var f=function(e){r.toggleClass(r.find("li.active",n)[0],"active"),r.toggleClass(r.find('li[data-subtitle-index="'+e+'"]',n)[0],"active")};e.disableSubtitles=function(){return e.subtitles=[],(e.cuepoints||[]).forEach(function(n){(n.subtitle||n.subtitleEnd)&&e.removeCuepoint(n)}),s&&Array.prototype.forEach.call(s.children,r.removeNode),f(-1),e},e.loadSubtitles=function(n){e.disableSubtitles();var t=e.video.subtitles[n],o=t.src;if(o)return f(n),r.xhrGet(o,function(n){e.conf.subtitleParser(n).forEach(function(n){var t={time:n.startTime,subtitle:n,visible:!1};e.subtitles.push(n),e.addCuepoint(t),e.addCuepoint({time:n.endTime,subtitleEnd:n.title,visible:!1}),0!==n.startTime||e.video.time||e.trigger("cuepoint",[e,t])})},function(){return e.trigger("error",{code:8,url:o}),!1}),e}})},{"../common":1,"../flowplayer":18,bean:20,"class-list":22}],16:[function(e,n,t){"use strict";var o=e("../flowplayer"),r=e("extend-object");!function(){var e={},n=navigator.userAgent.toLowerCase(),t=/(chrome)[ \/]([\w.]+)/.exec(n)||/(safari)[ \/]([\w.]+)/.exec(n)||/(webkit)[ \/]([\w.]+)/.exec(n)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(n)||/(msie) ([\w.]+)/.exec(n)||n.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(n)||[];t[1]&&(e[t[1]]=!0,e.version=t[2]||"0");var l=function(){var e=document.createElement("video");return e.loop=!0,e.autoplay=!0,e.preload=!0,e}(),a=navigator.userAgent,i=e.msie||/Trident\/7/.test(a),s=/iPad|MeeGo/.test(a)&&!/CriOS/.test(a),c=/iPad/.test(a)&&/CriOS/.test(a),d=/iP(hone|od)/i.test(a)&&!/iPad/.test(a)&&!/IEMobile/i.test(a),u=/Android/.test(a)&&!/Firefox/.test(a),p=/Android/.test(a)&&/Firefox/.test(a),f=/Silk/.test(a),m=/IEMobile/.test(a),v=m?parseFloat(/Windows\ Phone\ (\d+\.\d+)/.exec(a)[1],10):0,g=m?parseFloat(/IEMobile\/(\d+\.\d+)/.exec(a)[1],10):0,E=(s&&function(e){var n=/Version\/(\d\.\d)/.exec(e);n&&n.length>1&&parseFloat(n[1],10)}(a),u?parseFloat(/Android\ (\d\.\d)/.exec(a)[1],10):0),_=r(o.support,{browser:e,subtitles:!!l.addTextTrack,fullscreen:"function"==typeof document.webkitCancelFullScreen&&!/Mac OS X 10_5.+Version\/5\.0\.\d Safari/.test(a)||document.mozFullScreenEnabled||"function"==typeof document.exitFullscreen||"function"==typeof document.msExitFullscreen,inlineBlock:!(i&&e.version<8),touch:"ontouchstart"in window,dataload:!s&&!d&&!m,zeropreload:!i&&!u,volume:!(s||u||d||f||c),cachedVideoTag:!(s||d||c||m),firstframe:!(d||s||u||f||c||m||p),inlineVideo:!d&&(!m||v>=8.1&&g>=11)&&(!u||E>=3),hlsDuration:!u&&(!e.safari||s||d||c),seekable:!s&&!c});try{var h=navigator.plugins["Shockwave Flash"],y=i?new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version"):h.description;i||h[0].enabledPlugin?(y=y.split(/\D+/),y.length&&!y[0]&&(y=y.slice(1)),_.flashVideo=y[0]>9||9==y[0]&&y[3]>=115):_.flashVideo=!1}catch(e){}try{_.video=!!l.canPlayType,_.video&&l.canPlayType("video/mp4")}catch(e){_.video=!1}_.animation=function(){for(var e=["","Webkit","Moz","O","ms","Khtml"],n=document.createElement("p"),t=0;t<e.length;t++)if(void 0!==n.style[e[t]+"AnimationName"])return!0}()}()},{"../flowplayer":18,"extend-object":26}],17:[function(e,n,t){"use strict";function o(e){return e=parseInt(e,10),e>=10?e:"0"+e}function r(e){e=e||0;var n=Math.floor(e/3600),t=Math.floor(e/60);return e-=60*t,n>=1?(t-=60*n,n+":"+o(t)+":"+o(e)):o(t)+":"+o(e)}var l=e("../flowplayer"),a=e("../common"),i=e("class-list"),s=e("bean"),c=e("./slider");l(function(e,n){function t(e){return a.find(".fp-"+e,n)[0]}function o(e){a.css(y,"padding-top",100*e+"%"),f.inlineBlock||a.height(a.find("object",n)[0],a.height(n))}function d(e){e?(m.add("is-mouseover"),m.remove("is-mouseout")):(m.add("is-mouseout"),m.remove("is-mouseover"))}var u,p=e.conf,f=l.support,m=i(n);a.find(".fp-ratio,.fp-ui",n).forEach(a.removeNode),m.add("flowplayer"),n.appendChild(a.createElement("div",{className:"fp-ratio"}));var v=a.createElement("div",{className:"fp-ui"},'   \t\t<div class="sponsor">            <a href="#" target="_blank" id="sponsor_click"></a>         </div>         <div class="waiting"><em></em><em></em><em></em></div>         <a class="fullscreen"></a>         <a class="unload"></a>         <p class="speed"></p>         <div class="controls">            <a class="play"></a>            <div class="timeline">               <div class="buffer"></div>               <div class="progress"></div>            </div>            <div class="timeline-tooltip fp-tooltip"></div>            <div class="volume">               <a class="mute"></a>               <div class="volumeslider">                  <div class="volumelevel"></div>               </div>            </div>         </div>         <div class="time">            <em class="elapsed">00:00</em>            <em class="remaining"></em>            <em class="duration">00:00</em>         </div>         <div class="message"><h2></h2><p></p></div>'.replace(/class="/g,'class="fp-'));n.appendChild(v);var g=(t("progress"),t("buffer")),E=t("elapsed"),_=t("remaining"),h=t("waiting"),y=t("ratio"),A=t("speed"),C=i(A),b=t("duration"),O=t("controls"),T=t("timeline-tooltip"),k=a.css(y,"padding-top"),N=t("timeline"),L=c(N,e.rtl),P=(t("volume"),t("fullscreen")),R=t("volumeslider"),S=c(R,e.rtl),w=m.contains("fixed-controls")||m.contains("no-toggle");L.disableAnimation(m.contains("is-touch")),e.sliders=e.sliders||{},e.sliders.timeline=L,e.sliders.volume=S,f.animation||a.html(h,"<p>loading &hellip;</p>"),p.ratio&&o(p.ratio);try{p.fullscreen||a.removeNode(P)}catch(e){a.removeNode(P)}e.on("ready",function(e,t,l){var i=t.video.duration;L.disable(t.disabled||!i),p.adaptiveRatio&&!isNaN(l.height/l.width)&&o(l.height/l.width),a.html([b,_],r(i)),a.toggleClass(n,"is-long",i>=3600),S.slide(t.volumeLevel),"flash"===t.engine.engineName?L.disableAnimation(!0,!0):L.disableAnimation(!1),a.find(".fp-title",v).forEach(a.removeNode),l.title&&a.prepend(v,a.createElement("div",{className:"fp-title"},l.title))}).on("unload",function(){k||p.splash||a.css(y,"paddingTop",""),L.slide(0)}).on("buffer",function(){var n=e.video,t=n.buffer/n.duration;!n.seekable&&f.seekable&&L.max(t),t<1?a.css(g,"width",100*t+"%"):a.css(g,"width","100%")}).on("speed",function(e,n,t){a.text(A,t+"x"),C.add("fp-hilite"),setTimeout(function(){C.remove("fp-hilite")},1e3)}).on("buffered",function(){a.css(g,"width","100%"),L.max(1)}).on("progress",function(){var n=e.video.time,t=e.video.duration;L.dragging||L.slide(n/t,e.seeking?0:250),a.html(E,r(n)),a.html(_,"-"+r(t-n))}).on("finish resume seek",function(e){a.toggleClass(n,"is-finished","finish"==e.type)}).on("stop",function(){a.html(E,r(0)),L.slide(0,100)}).on("finish",function(){a.html(E,r(e.video.duration)),L.slide(1,100),m.remove("is-seeking")}).on("beforeseek",function(){}).on("volume",function(){S.slide(e.volumeLevel)}).on("disable",function(){var t=e.disabled;L.disable(t),a.toggleClass(n,"is-disabled",e.disabled)}).on("mute",function(e,t,o){a.toggleClass(n,"is-muted",o)}).on("error",function(e,t,o){if(a.removeClass(n,"is-loading"),a.removeClass(n,"is-seeking"),a.addClass(n,"is-error"),o){o.message=p.errors[o.code],t.error=!0;var r=a.find(".fp-message",n)[0],l=o.video||t.video;a.find("h2",r)[0].innerHTML=(t.engine&&t.engine.engineName||"html5")+": "+o.message,a.find("p",r)[0].innerHTML=o.url||l.url||l.src||p.errorUrls[o.code],t.off("mouseenter click"),m.remove("is-mouseover")}}),s.on(n,"mouseenter mouseleave",function(t){if(!w){var o,r="mouseover"==t.type;if(d(r),r){var l=function(){d(!0),o=new Date};e.on("pause.x volume.x",l),s.on(n,"mousemove.x",l),u=setInterval(function(){new Date-o>p.mouseoutTimeout&&(d(!1),o=new Date)},100)}else s.off(n,"mousemove.x"),e.off("pause.x volume.x"),clearInterval(u)}}),s.on(n,"mouseleave",function(){(L.dragging||S.dragging)&&(m.add("is-mouseover"),m.remove("is-mouseout"))}),s.on(n,"click.player",function(n){if(!e.disabled){var t=i(n.target);return t.contains("fp-ui")||t.contains("fp-engine")||n.flash?(n.preventDefault&&n.preventDefault(),e.toggle()):void 0}}),s.on(n,"mousemove",".fp-timeline",function(n){var t=n.pageX||n.clientX,o=t-a.offset(N).left,l=o/a.width(N),i=l*e.video.duration;l<0||(a.html(T,r(i)),a.css(T,"left",t-a.offset(O).left-a.width(T)/2+"px"))}),s.on(n,"contextmenu",function(e){var t=a.offset(a.find(".fp-player",n)[0]),o=window,r=e.clientX-(t.left+o.scrollX),l=e.clientY-(t.top+o.scrollY);if(!m.contains("is-flash-disabled")){var i=a.find(".fp-context-menu",n)[0];i&&(e.preventDefault(),a.css(i,{left:r+"px",top:l+"px",display:"block"}),s.on(n,"click",".fp-context-menu",function(e){e.stopPropagation()}),s.on(document,"click.outsidemenu",function(e){a.css(i,"display","none"),s.off(document,"click.outsidemenu")}))}}),e.on("flashdisabled",function(){m.add("is-flash-disabled"),e.one("ready progress",function(){m.remove("is-flash-disabled"),a.find(".fp-flash-disabled",n).forEach(a.removeNode)}),n.appendChild(a.createElement("div",{className:"fp-flash-disabled"},"Adobe Flash is disabled for this page, click player area to enable"))}),p.poster&&a.css(n,"background-image","url("+p.poster+")");var I=a.css(n,"background-color"),D="none"!=a.css(n,"background-image")||I&&"rgba(0, 0, 0, 0)"!=I&&"transparent"!=I;D&&!p.splash&&(p.poster||(p.poster=!0),e.on("ready stop",function(){m.add("is-poster"),e.poster=!0,e.one("progress",function(){m.remove("is-poster"),e.poster=!1})})),"string"==typeof p.splash&&a.css(n,"background-image","url('"+p.splash+"')"),!D&&e.forcedSplash&&a.css(n,"background-color","#555"),s.on(n,"click",".fp-toggle, .fp-play",function(){e.disabled||e.toggle()}),s.on(n,"click",".fp-mute",function(){e.mute()}),s.on(n,"click",".fp-fullscreen",function(){e.fullscreen()}),s.on(n,"click",".fp-unload",function(){e.unload()}),s.on(N,"slide",function(n){e.seeking=!0,e.seek(n*e.video.duration)}),s.on(R,"slide",function(n){e.volume(n)});var M=t("time");s.on(n,"click",".fp-time",function(){i(M).toggle("is-inverted")}),d(w),e.on("shutdown",function(){s.off(N),s.off(R)})}),n.exports.format=r},{"../common":1,"../flowplayer":18,"./slider":14,bean:20,"class-list":22}],18:[function(e,n,t){"use strict";function o(e,n,t){n&&n.embed&&(n.embed=r({},E.defaults.embed,n.embed));var o,p,m=e,v=a(m),g=r({},E.defaults,E.conf,n),y={},A=new h;v.add("is-loading");try{y=f?window.localStorage:y}catch(e){}var C=m.currentStyle&&"rtl"===m.currentStyle.direction||window.getComputedStyle&&null!==window.getComputedStyle(m,null)&&"rtl"===window.getComputedStyle(m,null).getPropertyValue("direction");C&&v.add("is-rtl");var b={conf:g,currentSpeed:1,volumeLevel:g.muted?0:void 0===g.volume?1*y.volume:g.volume,video:{},disabled:!1,finished:!1,loading:!1,muted:"true"==y.muted||g.muted,paused:!1,playing:!1,ready:!1,splash:!1,rtl:C,load:function(e,n){if(!b.error&&!b.loading){b.video={},b.finished=!1,e=e||g.clip,e=r({},A.resolve(e,g.clip.sources)),!1!==e.autoplay&&(b.playing||b.engine)&&(e.autoplay=!0);var t=O(e);if(!t)return b.trigger("error",[b,{code:E.support.flashVideo?5:10}]);if(!t.engineName)throw new Error("engineName property of factory should be exposed");if(b.engine&&t.engineName===b.engine.engineName||(b.ready=!1,b.engine&&(b.engine.unload(),b.conf.autoplay=!0),p=b.engine=t(b,m),b.one("ready",function(){p.volume(b.volumeLevel)})),r(e,p.pick(e.sources.filter(function(e){return!e.engine||e.engine===p.engineName}))),e.src){b.trigger("load",[b,e,p],!0).defaultPrevented?b.loading=!1:(p.load(e),l(e)&&(n=e),n&&b.one("ready",n))}return b}},pause:function(e){return!b.ready||b.seeking||b.loading||(p.pause(),b.one("pause",e)),b},resume:function(){return b.ready&&b.paused&&(p.resume(),b.finished&&(b.trigger("resume",[b]),b.finished=!1)),b},toggle:function(){return b.ready?b.paused?b.resume():b.pause():b.load()},seek:function(e,n){if(b.ready&&!b.live){if("boolean"==typeof e){var t=.1*b.video.duration;e=b.video.time+(e?t:-t)}e=o=Math.min(Math.max(e,0),b.video.duration-.1).toFixed(1);b.trigger("beforeseek",[b,e],!0).defaultPrevented?(b.seeking=!1,s.toggleClass(m,"is-seeking",b.seeking)):(p.seek(e),l(n)&&b.one("seek",n))}return b},seekTo:function(e,n){var t=void 0===e?o:.1*b.video.duration*e;return b.seek(t,n)},mute:function(e,n){return void 0===e&&(e=!b.muted),n||(y.muted=b.muted=e,y.volume=isNaN(y.volume)?g.volume:y.volume),b.volume(e?0:y.volume,!0),b.trigger("mute",[b,e]),b},volume:function(e,n){return b.ready&&(e=Math.min(Math.max(e,0),1),n||(y.volume=e),p.volume(e)),b},speed:function(e,n){return b.ready&&("boolean"==typeof e&&(e=g.speeds[g.speeds.indexOf(b.currentSpeed)+(e?1:-1)]||b.currentSpeed),p.speed(e),n&&m.one("speed",n)),b},stop:function(){return b.ready&&(b.pause(),b.seek(0,function(){b.trigger("stop",[b])})),b},unload:function(){return v.contains("is-embedding")||(g.splash?(b.trigger("unload",[b]),p&&(p.unload(),b.engine=p=0)):b.stop()),b},shutdown:function(){b.unload(),b.trigger("shutdown",[b]),i.off(m),delete d[m.getAttribute("data-flowplayer-instance-id")],m.removeAttribute("data-flowplayer-instance-id")},disable:function(e){return void 0===e&&(e=!b.disabled),e!=b.disabled&&(b.disabled=e,b.trigger("disable",e)),b}};b.conf=r(b.conf,g),c(b);var O=function(e){var n,t=E.engines;if(g.engine){var o=t.filter(function(e){return e.engineName===g.engine})[0];if(o&&e.sources.some(function(e){return(!e.engine||e.engine===o.engineName)&&o.canPlay(e.type,b.conf)}))return o}return g.enginePreference&&(t=E.engines.filter(function(e){return g.enginePreference.indexOf(e.engineName)>-1}).sort(function(e,n){return g.enginePreference.indexOf(e.engineName)-g.enginePreference.indexOf(n.engineName)})),e.sources.some(function(e){var o=t.filter(function(n){return(!e.engine||e.engine===n.engineName)&&n.canPlay(e.type,b.conf)}).shift();return o&&(n=o),!!o}),n};return m.getAttribute("data-flowplayer-instance-id")||(m.setAttribute("data-flowplayer-instance-id",_++),b.on("boot",function(){(g.splash||v.contains("is-splash")||!E.support.firstframe)&&(b.forcedSplash=!g.splash&&!v.contains("is-splash"),b.splash=g.autoplay=!0,g.splash||(g.splash=!0),v.add("is-splash")),g.splash&&s.find("video",m).forEach(s.removeNode),(g.live||v.contains("is-live"))&&(b.live=g.live=!0,v.add("is-live")),u.forEach(function(e){e(b,m)}),d.push(b),g.splash?b.unload():b.load(),g.disabled&&b.disable(),b.one("ready",t)}).on("load",function(e,n,t){g.splash&&s.find(".flowplayer.is-ready,.flowplayer.is-loading").forEach(function(e){var n=e.getAttribute("data-flowplayer-instance-id");if(n!==m.getAttribute("data-flowplayer-instance-id")){var t=d[Number(n)];t&&t.conf.splash&&t.unload()}}),v.add("is-loading"),n.loading=!0,void 0!==t.live&&(s.toggleClass(m,"is-live",t.live),n.live=t.live)}).on("ready",function(e,n,t){t.time=0,n.video=t,v.remove("is-loading"),n.loading=!1,n.muted?n.mute(!0,!0):n.volume(n.volumeLevel);var o=n.conf.hlsFix&&/mpegurl/i.exec(t.type);s.toggleClass(m,"hls-fix",!!o)}).on("unload",function(e){v.remove("is-loading"),b.loading=!1}).on("ready unload",function(e){var n="ready"==e.type;s.toggleClass(m,"is-splash",!n),s.toggleClass(m,"is-ready",n),b.ready=n,b.splash=!n}).on("progress",function(e,n,t){n.video.time=t}).on("speed",function(e,n,t){n.currentSpeed=t}).on("volume",function(e,n,t){n.volumeLevel=Math.round(100*t)/100,n.muted?t&&n.mute(!1):y.volume=t}).on("beforeseek seek",function(e){b.seeking="beforeseek"==e.type,s.toggleClass(m,"is-seeking",b.seeking)}).on("ready pause resume unload finish stop",function(e,n,t){b.paused=/pause|finish|unload|stop/.test(e.type),b.paused=b.paused||"ready"===e.type&&!g.autoplay&&!b.playing,b.playing=!b.paused,s.toggleClass(m,"is-paused",b.paused),s.toggleClass(m,"is-playing",b.playing),b.load.ed||b.pause()}).on("finish",function(e){b.finished=!0}).on("error",function(){})),b.trigger("boot",[b,m]),b}var r=e("extend-object"),l=e("is-function"),a=e("class-list"),i=e("bean"),s=e("./common"),c=e("./ext/events"),d=[],u=[],p=(window.navigator.userAgent,window.onbeforeunload);window.onbeforeunload=function(e){if(d.forEach(function(e){e.conf.splash?e.unload():e.bind("error",function(){s.find(".flowplayer.is-error .fp-message").forEach(s.removeNode)})}),p)return p(e)};var f=!1;try{"object"==typeof window.localStorage&&(window.localStorage.flowplayerTestStorage="test",f=!0)}catch(e){}var m=/Safari/.exec(navigator.userAgent)&&!/Chrome/.exec(navigator.userAgent),v=/(\d+\.\d+) Safari/.exec(navigator.userAgent),g=v?Number(v[1]):100,E=n.exports=function(e,n,t){if(l(e))return u.push(e);if("number"==typeof e||void 0===e)return d[e||0];if(e.nodeType){if(null!==e.getAttribute("data-flowplayer-instance-id"))return d[e.getAttribute("data-flowplayer-instance-id")];if(!n)return;return o(e,n,t)}if(e.jquery)return E(e[0],n,t);if("string"==typeof e){var r=s.find(e)[0];return r&&E(r,n,t)}};r(E,{version:"6.0.5",engines:[],conf:{},set:function(e,n){"string"==typeof e?E.conf[e]=n:r(E.conf,e)},support:{},defaults:{debug:!!f&&!!localStorage.flowplayerDebug,disabled:!1,fullscreen:window==window.top,keyboard:!0,ratio:9/16,adaptiveRatio:!1,rtmp:0,proxy:"best",splash:!1,live:!1,swf:"//releases.flowplayer.org/6.0.5/commercial/flowplayer.swf",swfHls:"//releases.flowplayer.org/6.0.5/commercial/flowplayerhls.swf",speeds:[.25,.5,1,1.5,2],tooltip:!0,mouseoutTimeout:5e3,volume:f?"true"==localStorage.muted?0:isNaN(localStorage.volume)?1:localStorage.volume||1:1,errors:["","Video loading aborted","Network error","Video not properly encoded","Video file not found","Unsupported video","Skin not found","SWF file not found","Subtitles not found","Invalid RTMP URL","Unsupported video format. Try installing Adobe Flash."],errorUrls:["","","","","","","","","","","http://get.adobe.com/flashplayer/"],playlist:[],hlsFix:m&&g<8},bean:i,common:s,extend:r});var _=0,h=e("./ext/resolve");if(void 0!==window.jQuery){var y=window.jQuery;y(function(){"function"==typeof y.fn.flowplayer&&y('.flowplayer:has(video,script[type="application/json"])').flowplayer()});var A=function(e){if(!e.length)return{};var n=e.data()||{},t={};return y.each(["autoplay","loop","preload","poster"],function(o,r){var l=e.attr(r);void 0!==l&&-1!==["autoplay","poster"].indexOf(r)?t[r]=l||!0:void 0!==l&&(n[r]=l||!0)}),n.subtitles=e.find("track").map(function(){var e=y(this);return{src:e.attr("src"),kind:e.attr("kind"),label:e.attr("label"),srclang:e.attr("srclang"),default:e.prop("default")}}).get(),n.sources=(new h).sourcesFromVideoTag(e,y),r(t,{clip:n})};y.fn.flowplayer=function(e,n){return this.each(function(){"string"==typeof e&&(e={swf:e}),l(e)&&(n=e,e={});var t=y(this),r=t.find('script[type="application/json"]'),a=r.length?JSON.parse(r.text()):A(t.find("video")),i=y.extend({},e||{},a,t.data()),s=o(this,i,n);c.EVENTS.forEach(function(e){s.on(e+".jquery",function(e){t.trigger.call(t,e.type,e.detail&&e.detail.args)})}),t.data("flowplayer",s)})}}},{"./common":1,"./ext/events":8,"./ext/resolve":13,bean:20,"class-list":22,"extend-object":26,"is-function":27}],19:[function(e,n,t){e("es5-shim");var o=n.exports=e("./flowplayer");e("./ext/support"),e("./engine/embed"),e("./engine/html5"),e("./engine/flash"),e("./ext/ui"),e("./ext/keyboard"),e("./ext/playlist"),e("./ext/cuepoint"),e("./ext/subtitle"),e("./ext/analytics"),e("./ext/embed"),e("./ext/fullscreen"),e("./ext/mobile"),o(function(e,n){function t(e){var n="ab.ca,ac.ac,ac.at,ac.be,ac.cn,ac.il,ac.in,ac.jp,ac.kr,ac.sg,ac.th,ac.uk,ad.jp,adm.br,adv.br,ah.cn,am.br,arq.br,art.br,arts.ro,asn.au,asso.fr,asso.mc,bc.ca,bio.br,biz.pl,biz.tr,bj.cn,br.com,cn.com,cng.br,cnt.br,co.ac,co.at,co.de,co.gl,co.hk,co.id,co.il,co.in,co.jp,co.kr,co.mg,co.ms,co.nz,co.th,co.uk,co.ve,co.vi,co.za,com.ag,com.ai,com.ar,com.au,com.br,com.cn,com.co,com.cy,com.de,com.do,com.ec,com.es,com.fj,com.fr,com.gl,com.gt,com.hk,com.hr,com.hu,com.kg,com.ki,com.lc,com.mg,com.mm,com.ms,com.mt,com.mu,com.mx,com.my,com.na,com.nf,com.ng,com.ni,com.pa,com.ph,com.pl,com.pt,com.qa,com.ro,com.ru,com.sb,com.sc,com.sg,com.sv,com.tr,com.tw,com.ua,com.uy,com.ve,com.vn,cp.tz,cq.cn,de.com,de.org,ecn.br,ed.jp,edu.au,edu.cn,edu.hk,edu.mm,edu.my,edu.pl,edu.pt,edu.qa,edu.sg,edu.tr,edu.tw,eng.br,ernet.in,esp.br,etc.br,eti.br,eu.com,eu.int,eu.lv,firm.in,firm.ro,fm.br,fot.br,fst.br,g12.br,gb.com,gb.net,gd.cn,gen.in,go.jp,go.kr,go.th,gov.au,gov.az,gov.br,gov.cn,gov.il,gov.in,gov.mm,gov.my,gov.qa,gov.sg,gov.tr,gov.tw,gov.uk,gr.jp,gs.cn,gv.ac,gv.at,gx.cn,gz.cn,he.cn,hi.cn,hk.cn,hl.cn,hu.com,id.au,idv.tw,in.ua,ind.br,ind.in,inf.br,info.pl,info.ro,info.tr,info.ve,iwi.nz,jl.cn,jor.br,js.cn,jus.br,k12.il,k12.tr,kr.com,lel.br,lg.jp,ln.cn,ltd.uk,maori.nz,mb.ca,me.uk,med.br,mi.th,mil.br,mil.uk,mo.cn,mod.uk,muni.il,nb.ca,ne.jp,ne.kr,net.ag,net.ai,net.au,net.br,net.cn,net.do,net.gl,net.hk,net.il,net.in,net.kg,net.ki,net.lc,net.mg,net.mm,net.mu,net.ni,net.nz,net.pl,net.ru,net.sb,net.sc,net.sg,net.th,net.tr,net.tw,net.uk,net.ve,nf.ca,nhs.uk,nm.cn,nm.kr,no.com,nom.br,nom.ni,nom.ro,ns.ca,nt.ca,nt.ro,ntr.br,nx.cn,odo.br,off.ai,on.ca,or.ac,or.at,or.jp,or.kr,or.th,org.ag,org.ai,org.au,org.br,org.cn,org.do,org.es,org.gl,org.hk,org.in,org.kg,org.ki,org.lc,org.mg,org.mm,org.ms,org.nf,org.ni,org.nz,org.pl,org.ro,org.ru,org.sb,org.sc,org.sg,org.tr,org.tw,org.uk,org.ve,pe.ca,plc.uk,police.uk,ppg.br,presse.fr,pro.br,psc.br,psi.br,qc.ca,qc.com,qh.cn,rec.br,rec.ro,res.in,sa.com,sc.cn,sch.uk,se.com,se.net,sh.cn,sk.ca,slg.br,sn.cn,store.ro,tj.cn,tm.fr,tm.mc,tm.ro,tmp.br,tur.br,tv.br,tv.tr,tw.cn,uk.com,uk.net,us.com,uy.com,vet.br,waw.pl,web.ve,www.ro,xj.cn,xz.cn,yk.ca,yn.cn,zj.cn,zlg.br".split(",");e=e.toLowerCase();var t=e.split("."),o=t.length;if(2>o||/^\d+$/.test(t[o-1]))return e;var r=t.slice(-2).join(".");return o>=3&&n.indexOf(r)>=0?t.slice(-3).join("."):r}function r(e,n){n=t(n);for(var o=0,r=n.length-1;r>=0;r--)o+=8913650137*n.charCodeAt(r);for(o=(""+o).substring(0,7),r=0;r<e.length;r++)if(o===e[r].substring(1,8))return 1}var l=function(e){return"none"!==window.getComputedStyle(e).display},a=e.conf,i=o.common,s=i.createElement,c=a.swf.indexOf("flowplayer.org")&&a.e&&n.getAttribute("data-origin"),d=c?function(e){var n=document.createElement("a");return n.href=e,i.hostname(n.hostname)}(c):i.hostname(),u=(document,a.key);"file:"==location.protocol&&(d="localhost"),e.load.ed=1,a.hostname=d,a.origin=c||location.href,c&&function(e,n){-1===e.className.split(" ").indexOf(n)&&(e.className+=" "+n)}(n,"is-embedded"),"string"==typeof u&&(u=u.split(/,\s*/));var p=function(e,t){var o=s("a",{href:t,className:"fp-brand"});o.innerHTML=e,i.find(".fp-controls",n)[0].appendChild(o)};if(u&&"function"==typeof r&&r(u,d)){if(a.logo){var f=i.find(".fp-player",n)[0],m=s("a",{className:"fp-logo"});c&&(m.href=c),a.embed&&a.embed.popup&&(m.target="_blank");var v=s("img",{src:a.logo});m.appendChild(v),(f||n).appendChild(m)}a.brand&&c||a.brand&&a.brand.showOnOrigin?p(a.brand.text||a.brand,c||location.href):i.addClass(n,"no-brand")}else{p("flowplayer","http://flowplayer.org");var m=s("a",{href:"http://flowplayer.org"});n.appendChild(m);var g=s("div",{className:"fp-context-menu"},'<ul><li class="copyright">&copy; 2015</li><li><a href="http://flowplayer.org">About Flowplayer</a></li><li><a href="http://flowplayer.org/license">GPL based license</a></li></ul>'),E=window.location.href.indexOf("localhost"),f=i.find(".fp-player",n)[0];7!==E&&(f||n).appendChild(g),e.on("pause resume finish unload ready",function(e,t){i.removeClass(n,"no-brand");var o=-1;if(t.video.src)for(var r=[["org","flowplayer","drive"],["org","flowplayer","my"],["org","flowplayer","cdn"]],a=0;a<r.length&&-1===(o=t.video.src.indexOf("://"+r[a].reverse().join(".")));a++);if((4===o||5===o)&&i.addClass(n,"no-brand"),/pause|resume/.test(e.type)&&"flash"!=t.engine.engineName&&4!=o&&5!=o){var s={display:"block",position:"absolute",left:"16px",bottom:"46px",zIndex:99999,width:"100px",height:"20px",backgroundImage:"url("+[".png","logo","/",".net",".cloudfront","d32wqyuo10o653","//"].reverse().join("")+")"};for(var c in s)s.hasOwnProperty(c)&&(m.style[c]=s[c]);t.load.ed=l(m)&&(7===E||g.parentNode==n||g.parentNode==f)&&!i.hasClass(n,"no-brand"),t.load.ed||t.pause()}else m.style.display="none"})}})},{"./engine/embed":2,"./engine/flash":3,"./engine/html5":4,"./ext/analytics":5,"./ext/cuepoint":6,"./ext/embed":7,"./ext/fullscreen":9,"./ext/keyboard":10,"./ext/mobile":11,"./ext/playlist":12,"./ext/subtitle":15,"./ext/support":16,"./ext/ui":17,"./flowplayer":18,"es5-shim":25}],20:[function(n,t,o){!function(n,o,r){void 0!==t&&t.exports?t.exports=r():"function"==typeof e&&e.amd?e(r):o.bean=r()}(0,this,function(e,n){e=e||"bean",n=n||this;var t,o=window,r=n[e],l=/[^\.]*(?=\..*)\.|.*/,a=/\..*/,i="addEventListener",s=document||{},c=s.documentElement||{},d=c[i],u=d?i:"attachEvent",p={},f=Array.prototype.slice,m=function(e,n){return e.split(n||" ")},v=function(e){return"string"==typeof e},g=function(e){return"function"==typeof e},E=function(e,n,t){for(t=0;t<n.length;t++)n[t]&&(e[n[t]]=1);return e}({},m("click dblclick mouseup mousedown contextmenu mousewheel mousemultiwheel DOMMouseScroll mouseover mouseout mousemove selectstart selectend keydown keypress keyup orientationchange focus blur change reset select submit load unload beforeunload resize move DOMContentLoaded readystatechange message error abort scroll "+(d?"show input invalid touchstart touchmove touchend touchcancel gesturestart gesturechange gestureend textinput readystatechange pageshow pagehide popstate hashchange offline online afterprint beforeprint dragstart dragenter dragover dragleave drag drop dragend loadstart progress suspend emptied stalled loadmetadata loadeddata canplay canplaythrough playing waiting seeking seeked ended durationchange timeupdate play pause ratechange volumechange cuechange checking noupdate downloading cached updateready obsolete ":""))),_=function(){var e="compareDocumentPosition"in c?function(e,n){return n.compareDocumentPosition&&16==(16&n.compareDocumentPosition(e))}:"contains"in c?function(e,n){return(n=9===n.nodeType||n===window?c:n)!==e&&n.contains(e)}:function(e,n){for(;e=e.parentNode;)if(e===n)return 1;return 0},n=function(n){var t=n.relatedTarget;return t?t!==this&&"xul"!==t.prefix&&!/document/.test(this.toString())&&!e(t,this):null==t};return{mouseenter:{base:"mouseover",condition:n},mouseleave:{base:"mouseout",condition:n},mousewheel:{base:/Firefox/.test(navigator.userAgent)?"DOMMouseScroll":"mousewheel"}}}(),h=function(){var e=m("altKey attrChange attrName bubbles cancelable ctrlKey currentTarget detail eventPhase getModifierState isTrusted metaKey relatedNode relatedTarget shiftKey srcElement target timeStamp type view which propertyName"),n=e.concat(m("button buttons clientX clientY dataTransfer fromElement offsetX offsetY pageX pageY screenX screenY toElement")),t=n.concat(m("wheelDelta wheelDeltaX wheelDeltaY wheelDeltaZ axis")),r=e.concat(m("char charCode key keyCode keyIdentifier keyLocation location")),l=e.concat(m("data")),a=e.concat(m("touches targetTouches changedTouches scale rotation")),i=e.concat(m("data origin source")),d=e.concat(m("state")),u=/over|out/,p=[{reg:/key/i,fix:function(e,n){return n.keyCode=e.keyCode||e.which,r}},{reg:/click|mouse(?!(.*wheel|scroll))|menu|drag|drop/i,fix:function(e,t,o){return t.rightClick=3===e.which||2===e.button,t.pos={x:0,y:0},e.pageX||e.pageY?(t.clientX=e.pageX,t.clientY=e.pageY):(e.clientX||e.clientY)&&(t.clientX=e.clientX+s.body.scrollLeft+c.scrollLeft,t.clientY=e.clientY+s.body.scrollTop+c.scrollTop),u.test(o)&&(t.relatedTarget=e.relatedTarget||e[("mouseover"==o?"from":"to")+"Element"]),n}},{reg:/mouse.*(wheel|scroll)/i,fix:function(){return t}},{reg:/^text/i,fix:function(){return l}},{reg:/^touch|^gesture/i,fix:function(){return a}},{reg:/^message$/i,fix:function(){return i}},{reg:/^popstate$/i,fix:function(){return d}},{reg:/.*/,fix:function(){return e}}],f={},v=function(e,n,t){if(arguments.length&&(e=e||((n.ownerDocument||n.document||n).parentWindow||o).event,this.originalEvent=e,this.isNative=t,this.isBean=!0,e)){var r,l,a,i,s,c=e.type,d=e.target||e.srcElement;if(this.target=d&&3===d.nodeType?d.parentNode:d,t){if(!(s=f[c]))for(r=0,l=p.length;r<l;r++)if(p[r].reg.test(c)){f[c]=s=p[r].fix;break}for(i=s(e,this,c),r=i.length;r--;)!((a=i[r])in this)&&a in e&&(this[a]=e[a])}}};return v.prototype.preventDefault=function(){this.originalEvent.preventDefault?this.originalEvent.preventDefault():this.originalEvent.returnValue=!1},v.prototype.stopPropagation=function(){this.originalEvent.stopPropagation?this.originalEvent.stopPropagation():this.originalEvent.cancelBubble=!0},v.prototype.stop=function(){this.preventDefault(),this.stopPropagation(),this.stopped=!0},v.prototype.stopImmediatePropagation=function(){this.originalEvent.stopImmediatePropagation&&this.originalEvent.stopImmediatePropagation(),this.isImmediatePropagationStopped=function(){return!0}},v.prototype.isImmediatePropagationStopped=function(){return this.originalEvent.isImmediatePropagationStopped&&this.originalEvent.isImmediatePropagationStopped()},v.prototype.clone=function(e){var n=new v(this,this.element,this.isNative);return n.currentTarget=e,n},v}(),y=function(e,n){return d||n||e!==s&&e!==o?e:c},A=function(){var e=function(e,n,t,o){var r=function(t,r){return n.apply(e,o?f.call(r,t?0:1).concat(o):r)},l=function(t,o){return n.__beanDel?n.__beanDel.ft(t.target,e):o},a=t?function(e){var n=l(e,this);if(t.apply(n,arguments))return e&&(e.currentTarget=n),r(e,arguments)}:function(e){return n.__beanDel&&(e=e.clone(l(e))),r(e,arguments)};return a.__beanDel=n.__beanDel,a},n=function(n,t,o,r,l,a,i){var s,c=_[t];"unload"==t&&(o=k(N,n,t,o,r)),c&&(c.condition&&(o=e(n,o,c.condition,a)),t=c.base||t),this.isNative=s=E[t]&&!!n[u],this.customType=!d&&!s&&t,this.element=n,this.type=t,this.original=r,this.namespaces=l,this.eventType=d||s?t:"propertychange",this.target=y(n,s),this[u]=!!this.target[u],this.root=i,this.handler=e(n,o,null,a)};return n.prototype.inNamespaces=function(e){var n,t,o=0;if(!e)return!0;if(!this.namespaces)return!1;for(n=e.length;n--;)for(t=this.namespaces.length;t--;)e[n]==this.namespaces[t]&&o++;return e.length===o},n.prototype.matches=function(e,n,t){return!(this.element!==e||n&&this.original!==n||t&&this.handler!==t)},n}(),C=function(){var e={},n=function(t,o,r,l,a,i){var s=a?"r":"$";if(o&&"*"!=o){var c,d=0,u=e[s+o],p="*"==t;if(!u)return;for(c=u.length;d<c;d++)if((p||u[d].matches(t,r,l))&&!i(u[d],u,d,o))return}else for(var f in e)f.charAt(0)==s&&n(t,f.substr(1),r,l,a,i)};return{has:function(n,t,o,r){var l,a=e[(r?"r":"$")+t];if(a)for(l=a.length;l--;)if(!a[l].root&&a[l].matches(n,o,null))return!0;return!1},get:function(e,t,o,r){var l=[];return n(e,t,o,null,r,function(e){return l.push(e)}),l},put:function(n){var t=!n.root&&!this.has(n.element,n.type,null,!1),o=(n.root?"r":"$")+n.type;return(e[o]||(e[o]=[])).push(n),t},del:function(t){n(t.element,t.type,null,t.handler,t.root,function(n,t,o){return t.splice(o,1),n.removed=!0,0===t.length&&delete e[(n.root?"r":"$")+n.type],!1})},entries:function(){var n,t=[]
;for(n in e)"$"==n.charAt(0)&&(t=t.concat(e[n]));return t}}}(),b=function(e){t=arguments.length?e:s.querySelectorAll?function(e,n){return n.querySelectorAll(e)}:function(){throw new Error("Bean: No selector engine installed")}},O=function(e,n){if(d||!n||!e||e.propertyName=="_on"+n){var t=C.get(this,n||e.type,null,!1),o=t.length,r=0;for(e=new h(e,this,!0),n&&(e.type=n);r<o&&!e.isImmediatePropagationStopped();r++)t[r].removed||t[r].handler.call(this,e)}},T=d?function(e,n,t){e[t?i:"removeEventListener"](n,O,!1)}:function(e,n,t,o){var r;t?(C.put(r=new A(e,o||n,function(n){O.call(e,n,o)},O,null,null,!0)),o&&null==e["_on"+o]&&(e["_on"+o]=0),r.target.attachEvent("on"+r.eventType,r.handler)):(r=C.get(e,o||n,O,!0)[0])&&(r.target.detachEvent("on"+r.eventType,r.handler),C.del(r))},k=function(e,n,t,o,r){return function(){o.apply(this,arguments),e(n,t,r)}},N=function(e,n,t,o){var r,l,i=n&&n.replace(a,""),s=C.get(e,i,null,!1),c={};for(r=0,l=s.length;r<l;r++)t&&s[r].original!==t||!s[r].inNamespaces(o)||(C.del(s[r]),!c[s[r].eventType]&&s[r][u]&&(c[s[r].eventType]={t:s[r].eventType,c:s[r].type}));for(r in c)C.has(e,c[r].t,null,!1)||T(e,c[r].t,!1,c[r].c)},L=function(e,n){var o=function(n,o){for(var r,l=v(e)?t(e,o):e;n&&n!==o;n=n.parentNode)for(r=l.length;r--;)if(l[r]===n)return n},r=function(e){var t=o(e.target,this);t&&n.apply(t,arguments)};return r.__beanDel={ft:o,selector:e},r},P=d?function(e,n,t){var r=s.createEvent(e?"HTMLEvents":"UIEvents");r[e?"initEvent":"initUIEvent"](n,!0,!0,o,1),t.dispatchEvent(r)}:function(e,n,t){t=y(t,e),e?t.fireEvent("on"+n,s.createEventObject()):t["_on"+n]++},R=function(e,n,t){var o,r,i,s,c=v(n);if(c&&n.indexOf(" ")>0){for(n=m(n),s=n.length;s--;)R(e,n[s],t);return e}if(r=c&&n.replace(a,""),r&&_[r]&&(r=_[r].base),!n||c)(i=c&&n.replace(l,""))&&(i=m(i,".")),N(e,r,t,i);else if(g(n))N(e,null,n);else for(o in n)n.hasOwnProperty(o)&&R(e,o,n[o]);return e},S=function(e,n,t,o){var r,i,s,c,d,v,E;{if(void 0!==t||"object"!=typeof n){for(g(t)?(d=f.call(arguments,3),o=r=t):(r=o,d=f.call(arguments,4),o=L(t,r)),s=m(n),this===p&&(o=k(R,e,n,o,r)),c=s.length;c--;)E=C.put(v=new A(e,s[c].replace(a,""),o,r,m(s[c].replace(l,""),"."),d,!1)),v[u]&&E&&T(e,v.eventType,!0,v.customType);return e}for(i in n)n.hasOwnProperty(i)&&S.call(this,e,i,n[i])}},w=function(e,n,t,o){return S.apply(null,v(t)?[e,t,n,o].concat(arguments.length>3?f.call(arguments,5):[]):f.call(arguments))},I=function(){return S.apply(p,arguments)},D=function(e,n,t){var o,r,i,s,c,d=m(n);for(o=d.length;o--;)if(n=d[o].replace(a,""),(s=d[o].replace(l,""))&&(s=m(s,".")),s||t||!e[u])for(c=C.get(e,n,null,!1),t=[!1].concat(t),r=0,i=c.length;r<i;r++)c[r].inNamespaces(s)&&c[r].handler.apply(e,t);else P(E[n],n,e);return e},M=function(e,n,t){for(var o,r,l=C.get(n,t,null,!1),a=l.length,i=0;i<a;i++)l[i].original&&(o=[e,l[i].type],(r=l[i].handler.__beanDel)&&o.push(r.selector),o.push(l[i].original),S.apply(null,o));return e},B={on:S,add:w,one:I,off:R,remove:R,clone:M,fire:D,Event:h,setSelectorEngine:b,noConflict:function(){return n[e]=r,this}};if(o.attachEvent){var x=function(){var e,n=C.entries();for(e in n)n[e].type&&"unload"!==n[e].type&&R(n[e].element,n[e].type);o.detachEvent("onunload",x),o.CollectGarbage&&o.CollectGarbage()};o.attachEvent("onunload",x)}return b(),B})},{}],21:[function(n,t,o){(function(n){!function(r){function l(e){throw RangeError(D[e])}function a(e,n){for(var t=e.length;t--;)e[t]=n(e[t]);return e}function i(e,n){return a(e.split(I),n).join(".")}function s(e){for(var n,t,o=[],r=0,l=e.length;r<l;)n=e.charCodeAt(r++),n>=55296&&n<=56319&&r<l?(t=e.charCodeAt(r++),56320==(64512&t)?o.push(((1023&n)<<10)+(1023&t)+65536):(o.push(n),r--)):o.push(n);return o}function c(e){return a(e,function(e){var n="";return e>65535&&(e-=65536,n+=x(e>>>10&1023|55296),e=56320|1023&e),n+=x(e)}).join("")}function d(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:b}function u(e,n){return e+22+75*(e<26)-((0!=n)<<5)}function p(e,n,t){var o=0;for(e=t?B(e/N):e>>1,e+=B(e/n);e>M*T>>1;o+=b)e=B(e/M);return B(o+(M+1)*e/(e+k))}function f(e){var n,t,o,r,a,i,s,u,f,m,v=[],g=e.length,E=0,_=P,h=L;for(t=e.lastIndexOf(R),t<0&&(t=0),o=0;o<t;++o)e.charCodeAt(o)>=128&&l("not-basic"),v.push(e.charCodeAt(o));for(r=t>0?t+1:0;r<g;){for(a=E,i=1,s=b;r>=g&&l("invalid-input"),u=d(e.charCodeAt(r++)),(u>=b||u>B((C-E)/i))&&l("overflow"),E+=u*i,f=s<=h?O:s>=h+T?T:s-h,!(u<f);s+=b)m=b-f,i>B(C/m)&&l("overflow"),i*=m;n=v.length+1,h=p(E-a,n,0==a),B(E/n)>C-_&&l("overflow"),_+=B(E/n),E%=n,v.splice(E++,0,_)}return c(v)}function m(e){var n,t,o,r,a,i,c,d,f,m,v,g,E,_,h,y=[];for(e=s(e),g=e.length,n=P,t=0,a=L,i=0;i<g;++i)(v=e[i])<128&&y.push(x(v));for(o=r=y.length,r&&y.push(R);o<g;){for(c=C,i=0;i<g;++i)(v=e[i])>=n&&v<c&&(c=v);for(E=o+1,c-n>B((C-t)/E)&&l("overflow"),t+=(c-n)*E,n=c,i=0;i<g;++i)if(v=e[i],v<n&&++t>C&&l("overflow"),v==n){for(d=t,f=b;m=f<=a?O:f>=a+T?T:f-a,!(d<m);f+=b)h=d-m,_=b-m,y.push(x(u(m+h%_,0))),d=B(h/_);y.push(x(u(d,0))),a=p(t,E,o==r),t=0,++o}++t,++n}return y.join("")}function v(e){return i(e,function(e){return S.test(e)?f(e.slice(4).toLowerCase()):e})}function g(e){return i(e,function(e){return w.test(e)?"xn--"+m(e):e})}var E="object"==typeof o&&o,_="object"==typeof t&&t&&t.exports==E&&t,h="object"==typeof n&&n;h.global!==h&&h.window!==h||(r=h);var y,A,C=2147483647,b=36,O=1,T=26,k=38,N=700,L=72,P=128,R="-",S=/^xn--/,w=/[^ -~]/,I=/\x2E|\u3002|\uFF0E|\uFF61/g,D={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},M=b-O,B=Math.floor,x=String.fromCharCode;if(y={version:"1.2.4",ucs2:{decode:s,encode:c},decode:f,encode:m,toASCII:g,toUnicode:v},"function"==typeof e&&"object"==typeof e.amd&&e.amd)e("punycode",function(){return y});else if(E&&!E.nodeType)if(_)_.exports=y;else for(A in y)y.hasOwnProperty(A)&&(E[A]=y[A]);else r.punycode=y}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],22:[function(e,n,t){function o(e){function n(e){var n=d();a(n,e)>-1||(n.push(e),u(n))}function t(e){var n=d(),t=a(n,e);-1!==t&&(n.splice(t,1),u(n))}function o(e){return a(d(),e)>-1}function i(e){return o(e)?(t(e),!1):(n(e),!0)}function s(){return e.className}function c(e){return d()[e]||null}function d(){return r(e.className.split(" "),l)}function u(n){var t=n.length;e.className=n.join(" "),f.length=t;for(var o=0;o<n.length;o++)f[o]=n[o];delete n[t]}var p=e.classList;if(p)return p;var f={add:n,remove:t,contains:o,toggle:i,toString:s,length:0,item:c};return f}function r(e,n){for(var t=[],o=0;o<e.length;o++)n(e[o])&&t.push(e[o]);return t}function l(e){return!!e}var a=e("indexof");n.exports=o},{indexof:23}],23:[function(e,n,t){var o=[].indexOf;n.exports=function(e,n){if(o)return e.indexOf(n);for(var t=0;t<e.length;++t)if(e[t]===n)return t;return-1}},{}],24:[function(e,n,t){function o(e,n,t,o){if(t=window.getComputedStyle,o=t?t(e):e.currentStyle)return o[n.replace(/-(\w)/gi,function(e,n){return n.toUpperCase()})]}n.exports=o},{}],25:[function(n,t,o){!function(n,r){"use strict";"function"==typeof e&&e.amd?e(r):"object"==typeof o?t.exports=r():n.returnExports=r()}(this,function(){var e,n=Array,t=n.prototype,o=Object,r=o.prototype,l=Function.prototype,a=String,i=a.prototype,s=Number,c=s.prototype,d=t.slice,u=t.splice,p=t.push,f=t.unshift,m=t.concat,v=l.call,g=l.apply,E=Math.max,_=Math.min,h=r.toString,y="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,A=Function.prototype.toString,C=function(e){try{return A.call(e),!0}catch(e){return!1}};e=function(e){if("function"!=typeof e)return!1;if(y)return C(e);var n=h.call(e);return"[object Function]"===n||"[object GeneratorFunction]"===n};var b,O=RegExp.prototype.exec,T=function(e){try{return O.call(e),!0}catch(e){return!1}};b=function(e){return"object"==typeof e&&(y?T(e):"[object RegExp]"===h.call(e))};var k,N=String.prototype.valueOf,L=function(e){try{return N.call(e),!0}catch(e){return!1}};k=function(e){return"string"==typeof e||"object"==typeof e&&(y?L(e):"[object String]"===h.call(e))};var P=o.defineProperty&&function(){try{var e={};o.defineProperty(e,"x",{enumerable:!1,value:e});for(var n in e)return!1;return e.x===e}catch(e){return!1}}(),R=function(e){var n;return n=P?function(e,n,t,r){!r&&n in e||o.defineProperty(e,n,{configurable:!0,enumerable:!1,writable:!0,value:t})}:function(e,n,t,o){!o&&n in e||(e[n]=t)},function(t,o,r){for(var l in o)e.call(o,l)&&n(t,l,o[l],r)}}(r.hasOwnProperty),S=function(e){var n=typeof e;return null===e||"object"!==n&&"function"!==n},w=s.isNaN||function(e){return e!==e},I={ToInteger:function(e){var n=+e;return w(n)?n=0:0!==n&&n!==1/0&&n!==-1/0&&(n=(n>0||-1)*Math.floor(Math.abs(n))),n},ToPrimitive:function(n){var t,o,r;if(S(n))return n;if(o=n.valueOf,e(o)&&(t=o.call(n),S(t)))return t;if(r=n.toString,e(r)&&(t=r.call(n),S(t)))return t;throw new TypeError},ToObject:function(e){if(null==e)throw new TypeError("can't convert "+e+" to object");return o(e)},ToUint32:function(e){return e>>>0}},D=function(){};R(l,{bind:function(n){var t=this;if(!e(t))throw new TypeError("Function.prototype.bind called on incompatible "+t);for(var r,l=d.call(arguments,1),a=function(){if(this instanceof r){var e=t.apply(this,m.call(l,d.call(arguments)));return o(e)===e?e:this}return t.apply(n,m.call(l,d.call(arguments)))},i=E(0,t.length-l.length),s=[],c=0;c<i;c++)p.call(s,"$"+c);return r=Function("binder","return function ("+s.join(",")+"){ return binder.apply(this, arguments); }")(a),t.prototype&&(D.prototype=t.prototype,r.prototype=new D,D.prototype=null),r}});var M=v.bind(r.hasOwnProperty),B=v.bind(r.toString),x=v.bind(d),V=g.bind(d),F=v.bind(i.slice),U=v.bind(i.split),$=v.bind(i.indexOf),j=v.bind(p),K=v.bind(r.propertyIsEnumerable),q=v.bind(t.sort),H=n.isArray||function(e){return"[object Array]"===B(e)},Y=1!==[].unshift(0);R(t,{unshift:function(){return f.apply(this,arguments),this.length}},Y),R(n,{isArray:H});var G=o("a"),Q="a"!==G[0]||!(0 in G),W=function(e){var n=!0,t=!0;return e&&(e.call("foo",function(e,t,o){"object"!=typeof o&&(n=!1)}),e.call([1],function(){"use strict";t="string"==typeof this},"x")),!!e&&n&&t};R(t,{forEach:function(n){var t,o=I.ToObject(this),r=Q&&k(this)?U(this,""):o,l=-1,a=I.ToUint32(r.length);if(arguments.length>1&&(t=arguments[1]),!e(n))throw new TypeError("Array.prototype.forEach callback must be a function");for(;++l<a;)l in r&&(void 0===t?n(r[l],l,o):n.call(t,r[l],l,o))}},!W(t.forEach)),R(t,{map:function(t){var o,r=I.ToObject(this),l=Q&&k(this)?U(this,""):r,a=I.ToUint32(l.length),i=n(a);if(arguments.length>1&&(o=arguments[1]),!e(t))throw new TypeError("Array.prototype.map callback must be a function");for(var s=0;s<a;s++)s in l&&(i[s]=void 0===o?t(l[s],s,r):t.call(o,l[s],s,r));return i}},!W(t.map)),R(t,{filter:function(n){var t,o,r=I.ToObject(this),l=Q&&k(this)?U(this,""):r,a=I.ToUint32(l.length),i=[];if(arguments.length>1&&(o=arguments[1]),!e(n))throw new TypeError("Array.prototype.filter callback must be a function");for(var s=0;s<a;s++)s in l&&(t=l[s],(void 0===o?n(t,s,r):n.call(o,t,s,r))&&j(i,t));return i}},!W(t.filter)),R(t,{every:function(n){var t,o=I.ToObject(this),r=Q&&k(this)?U(this,""):o,l=I.ToUint32(r.length);if(arguments.length>1&&(t=arguments[1]),!e(n))throw new TypeError("Array.prototype.every callback must be a function");for(var a=0;a<l;a++)if(a in r&&!(void 0===t?n(r[a],a,o):n.call(t,r[a],a,o)))return!1;return!0}},!W(t.every)),R(t,{some:function(n){var t,o=I.ToObject(this),r=Q&&k(this)?U(this,""):o,l=I.ToUint32(r.length);if(arguments.length>1&&(t=arguments[1]),!e(n))throw new TypeError("Array.prototype.some callback must be a function");for(var a=0;a<l;a++)if(a in r&&(void 0===t?n(r[a],a,o):n.call(t,r[a],a,o)))return!0;return!1}},!W(t.some));var z=!1;t.reduce&&(z="object"==typeof t.reduce.call("es5",function(e,n,t,o){return o})),R(t,{reduce:function(n){var t=I.ToObject(this),o=Q&&k(this)?U(this,""):t,r=I.ToUint32(o.length);if(!e(n))throw new TypeError("Array.prototype.reduce callback must be a function");if(0===r&&1===arguments.length)throw new TypeError("reduce of empty array with no initial value");var l,a=0;if(arguments.length>=2)l=arguments[1];else for(;;){if(a in o){l=o[a++];break}if(++a>=r)throw new TypeError("reduce of empty array with no initial value")}for(;a<r;a++)a in o&&(l=n(l,o[a],a,t));return l}},!z);var X=!1;t.reduceRight&&(X="object"==typeof t.reduceRight.call("es5",function(e,n,t,o){return o})),R(t,{reduceRight:function(n){var t=I.ToObject(this),o=Q&&k(this)?U(this,""):t,r=I.ToUint32(o.length);if(!e(n))throw new TypeError("Array.prototype.reduceRight callback must be a function");if(0===r&&1===arguments.length)throw new TypeError("reduceRight of empty array with no initial value");var l,a=r-1;if(arguments.length>=2)l=arguments[1];else for(;;){if(a in o){l=o[a--];break}if(--a<0)throw new TypeError("reduceRight of empty array with no initial value")}if(a<0)return l;do{a in o&&(l=n(l,o[a],a,t))}while(a--);return l}},!X);var J=t.indexOf&&-1!==[0,1].indexOf(1,2);R(t,{indexOf:function(e){var n=Q&&k(this)?U(this,""):I.ToObject(this),t=I.ToUint32(n.length);if(0===t)return-1;var o=0;for(arguments.length>1&&(o=I.ToInteger(arguments[1])),o=o>=0?o:E(0,t+o);o<t;o++)if(o in n&&n[o]===e)return o;return-1}},J);var Z=t.lastIndexOf&&-1!==[0,1].lastIndexOf(0,-3);R(t,{lastIndexOf:function(e){var n=Q&&k(this)?U(this,""):I.ToObject(this),t=I.ToUint32(n.length);if(0===t)return-1;var o=t-1;for(arguments.length>1&&(o=_(o,I.ToInteger(arguments[1]))),o=o>=0?o:t-Math.abs(o);o>=0;o--)if(o in n&&e===n[o])return o;return-1}},Z);var ee=function(){var e=[1,2],n=e.splice();return 2===e.length&&H(n)&&0===n.length}();R(t,{splice:function(e,n){return 0===arguments.length?[]:u.apply(this,arguments)}},!ee);var ne=function(){var e={};return t.splice.call(e,0,0,1),1===e.length}();R(t,{splice:function(e,n){if(0===arguments.length)return[];var t=arguments;return this.length=E(I.ToInteger(this.length),0),arguments.length>0&&"number"!=typeof n&&(t=x(arguments),t.length<2?j(t,this.length-e):t[1]=I.ToInteger(n)),u.apply(this,t)}},!ne);var te=function(){var e=new n(1e5);return e[8]="x",e.splice(1,1),7===e.indexOf("x")}(),oe=function(){var e=[];return e[256]="a",e.splice(257,0,"b"),"a"===e[256]}();R(t,{splice:function(e,n){for(var t,o=I.ToObject(this),r=[],l=I.ToUint32(o.length),i=I.ToInteger(e),s=i<0?E(l+i,0):_(i,l),c=_(E(I.ToInteger(n),0),l-s),d=0;d<c;)t=a(s+d),M(o,t)&&(r[d]=o[t]),d+=1;var u,p=x(arguments,2),f=p.length;if(f<c){for(d=s;d<l-c;)t=a(d+c),u=a(d+f),M(o,t)?o[u]=o[t]:delete o[u],d+=1;for(d=l;d>l-c+f;)delete o[d-1],d-=1}else if(f>c)for(d=l-c;d>s;)t=a(d+c-1),u=a(d+f-1),M(o,t)?o[u]=o[t]:delete o[u],d-=1;d=s;for(var m=0;m<p.length;++m)o[d]=p[m],d+=1;return o.length=l-c+f,r}},!te||!oe);var re,le=t.join;try{re="1,2,3"!==Array.prototype.join.call("123",",")}catch(e){re=!0}re&&R(t,{join:function(e){var n=void 0===e?",":e;return le.call(k(this)?U(this,""):this,n)}},re);var ae="1,2"!==[1,2].join(void 0);ae&&R(t,{join:function(e){var n=void 0===e?",":e;return le.call(this,n)}},ae);var ie=function(e){for(var n=I.ToObject(this),t=I.ToUint32(n.length),o=0;o<arguments.length;)n[t+o]=arguments[o],o+=1;return n.length=t+o,t+o},se=function(){var e={};return 1!==Array.prototype.push.call(e,void 0)||1!==e.length||void 0!==e[0]||!M(e,0)}();R(t,{push:function(e){return H(this)?p.apply(this,arguments):ie.apply(this,arguments)}},se);var ce=function(){var e=[];return 1!==e.push(void 0)||1!==e.length||void 0!==e[0]||!M(e,0)}();R(t,{push:ie},ce),R(t,{slice:function(e,n){var t=k(this)?U(this,""):this;return V(t,arguments)}},Q);var de=function(){try{return[1,2].sort(null),[1,2].sort({}),!0}catch(e){}return!1}(),ue=function(){try{return[1,2].sort(/a/),!1}catch(e){}return!0}(),pe=function(){try{return[1,2].sort(void 0),!0}catch(e){}return!1}();R(t,{sort:function(n){if(void 0===n)return q(this);if(!e(n))throw new TypeError("Array.prototype.sort callback must be a function");return q(this,n)}},de||!pe||!ue);var fe=!{toString:null}.propertyIsEnumerable("toString"),me=function(){}.propertyIsEnumerable("prototype"),ve=!M("x","0"),ge=function(e){var n=e.constructor;return n&&n.prototype===e},Ee={$window:!0,$console:!0,$parent:!0,$self:!0,$frame:!0,$frames:!0,$frameElement:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$external:!0},_e=function(){if("undefined"==typeof window)return!1;for(var e in window)try{!Ee["$"+e]&&M(window,e)&&null!==window[e]&&"object"==typeof window[e]&&ge(window[e])}catch(e){return!0}return!1}(),he=function(e){if("undefined"==typeof window||!_e)return ge(e);try{return ge(e)}catch(e){return!1}},ye=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],Ae=ye.length,Ce=function(e){return"[object Arguments]"===B(e)},be=function(n){return null!==n&&"object"==typeof n&&"number"==typeof n.length&&n.length>=0&&!H(n)&&e(n.callee)},Oe=Ce(arguments)?Ce:be;R(o,{keys:function(n){var t=e(n),o=Oe(n),r=null!==n&&"object"==typeof n,l=r&&k(n);if(!r&&!t&&!o)throw new TypeError("Object.keys called on a non-object");var i=[],s=me&&t;if(l&&ve||o)for(var c=0;c<n.length;++c)j(i,a(c));if(!o)for(var d in n)s&&"prototype"===d||!M(n,d)||j(i,a(d));if(fe)for(var u=he(n),p=0;p<Ae;p++){var f=ye[p];u&&"constructor"===f||!M(n,f)||j(i,f)}return i}});var Te=o.keys&&function(){return 2===o.keys(arguments).length}(1,2),ke=o.keys&&function(){var e=o.keys(arguments);return 1!==arguments.length||1!==e.length||1!==e[0]}(1),Ne=o.keys;R(o,{keys:function(e){return Ne(Oe(e)?x(e):e)}},!Te||ke);var Le=Date.prototype.toISOString&&-1===new Date(-621987552e5).toISOString().indexOf("-000001"),Pe=Date.prototype.toISOString&&"1969-12-31T23:59:59.999Z"!==new Date(-1).toISOString();R(Date.prototype,{toISOString:function(){var e,n,t,o,r;if(!isFinite(this))throw new RangeError("Date.prototype.toISOString called on non-finite value.");for(o=this.getUTCFullYear(),r=this.getUTCMonth(),o+=Math.floor(r/12),r=(r%12+12)%12,e=[r+1,this.getUTCDate(),this.getUTCHours(),this.getUTCMinutes(),this.getUTCSeconds()],o=(o<0?"-":o>9999?"+":"")+F("00000"+Math.abs(o),0<=o&&o<=9999?-4:-6),n=e.length;n--;)(t=e[n])<10&&(e[n]="0"+t);return o+"-"+x(e,0,2).join("-")+"T"+x(e,2).join(":")+"."+F("000"+this.getUTCMilliseconds(),-3)+"Z"}},Le||Pe),function(){try{return Date.prototype.toJSON&&null===new Date(NaN).toJSON()&&-1!==new Date(-621987552e5).toJSON().indexOf("-000001")&&Date.prototype.toJSON.call({toISOString:function(){return!0}})}catch(e){return!1}}()||(Date.prototype.toJSON=function(n){var t=o(this),r=I.ToPrimitive(t);if("number"==typeof r&&!isFinite(r))return null;var l=t.toISOString;if(!e(l))throw new TypeError("toISOString property is not callable");return l.call(t)});var Re=1e15===Date.parse("+033658-09-27T01:46:40.000Z"),Se=!isNaN(Date.parse("2012-04-04T24:00:00.500Z"))||!isNaN(Date.parse("2012-11-31T23:59:59.000Z"))||!isNaN(Date.parse("2012-12-31T23:59:60.000Z"));if(isNaN(Date.parse("2000-01-01T00:00:00.000Z"))||Se||!Re){var we=Math.pow(2,31)-1,Ie=w(new Date(1970,0,1,0,0,0,we+1).getTime());Date=function(e){var n=function(t,o,r,l,i,s,c){var d,u=arguments.length;if(this instanceof e){var p=s,f=c;if(Ie&&u>=7&&c>we){var m=Math.floor(c/we)*we,v=Math.floor(m/1e3);p+=v,f-=1e3*v}d=1===u&&a(t)===t?new e(n.parse(t)):u>=7?new e(t,o,r,l,i,p,f):u>=6?new e(t,o,r,l,i,p):u>=5?new e(t,o,r,l,i):u>=4?new e(t,o,r,l):u>=3?new e(t,o,r):u>=2?new e(t,o):u>=1?new e(t):new e}else d=e.apply(this,arguments);return S(d)||R(d,{constructor:n},!0),d},t=new RegExp("^(\\d{4}|[+-]\\d{6})(?:-(\\d{2})(?:-(\\d{2})(?:T(\\d{2}):(\\d{2})(?::(\\d{2})(?:(\\.\\d{1,}))?)?(Z|(?:([-+])(\\d{2}):(\\d{2})))?)?)?)?$"),o=[0,31,59,90,120,151,181,212,243,273,304,334,365],r=function(e,n){var t=n>1?1:0;return o[n]+Math.floor((e-1969+t)/4)-Math.floor((e-1901+t)/100)+Math.floor((e-1601+t)/400)+365*(e-1970)},l=function(n){var t=0,o=n;if(Ie&&o>we){var r=Math.floor(o/we)*we,l=Math.floor(r/1e3);t+=l,o-=1e3*l}return s(new e(1970,0,1,0,0,t,o))};for(var i in e)M(e,i)&&(n[i]=e[i]);return R(n,{now:e.now,UTC:e.UTC},!0),n.prototype=e.prototype,R(n.prototype,{constructor:n},!0),R(n,{parse:function(n){var o=t.exec(n);if(o){var a,i=s(o[1]),c=s(o[2]||1)-1,d=s(o[3]||1)-1,u=s(o[4]||0),p=s(o[5]||0),f=s(o[6]||0),m=Math.floor(1e3*s(o[7]||0)),v=Boolean(o[4]&&!o[8]),g="-"===o[9]?1:-1,E=s(o[10]||0),_=s(o[11]||0);return u<(p>0||f>0||m>0?24:25)&&p<60&&f<60&&m<1e3&&c>-1&&c<12&&E<24&&_<60&&d>-1&&d<r(i,c+1)-r(i,c)&&(a=60*(24*(r(i,c)+d)+u+E*g),a=1e3*(60*(a+p+_*g)+f)+m,v&&(a=l(a)),-864e13<=a&&a<=864e13)?a:NaN}return e.parse.apply(this,arguments)}}),n}(Date)}Date.now||(Date.now=function(){return(new Date).getTime()});var De=c.toFixed&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0)),Me={base:1e7,size:6,data:[0,0,0,0,0,0],multiply:function(e,n){for(var t=-1,o=n;++t<Me.size;)o+=e*Me.data[t],Me.data[t]=o%Me.base,o=Math.floor(o/Me.base)},divide:function(e){for(var n=Me.size,t=0;--n>=0;)t+=Me.data[n],Me.data[n]=Math.floor(t/e),t=t%e*Me.base},numToString:function(){for(var e=Me.size,n="";--e>=0;)if(""!==n||0===e||0!==Me.data[e]){var t=a(Me.data[e]);""===n?n=t:n+=F("0000000",0,7-t.length)+t}return n},pow:function e(n,t,o){return 0===t?o:t%2==1?e(n,t-1,o*n):e(n*n,t/2,o)},log:function(e){for(var n=0,t=e;t>=4096;)n+=12,t/=4096;for(;t>=2;)n+=1,t/=2;return n}};R(c,{toFixed:function(e){var n,t,o,r,l,i,c,d;if(n=s(e),(n=w(n)?0:Math.floor(n))<0||n>20)throw new RangeError("Number.toFixed called with invalid number of decimals");if(t=s(this),w(t))return"NaN";if(t<=-1e21||t>=1e21)return a(t);if(o="",t<0&&(o="-",t=-t),r="0",t>1e-21)if(l=Me.log(t*Me.pow(2,69,1))-69,i=l<0?t*Me.pow(2,-l,1):t/Me.pow(2,l,1),i*=4503599627370496,(l=52-l)>0){for(Me.multiply(0,i),c=n;c>=7;)Me.multiply(1e7,0),c-=7;for(Me.multiply(Me.pow(10,c,1),0),c=l-1;c>=23;)Me.divide(1<<23),c-=23;Me.divide(1<<c),Me.multiply(1,1),Me.divide(2),r=Me.numToString()}else Me.multiply(0,i),Me.multiply(1<<-l,0),r=Me.numToString()+F("0.00000000000000000000",2,2+n);return n>0?(d=r.length,r=d<=n?o+F("0.0000000000000000000",0,n-d+2)+r:o+F(r,0,d-n)+"."+F(r,d-n)):r=o+r,r}},De);var Be=function(){try{return"1"===1..toPrecision(void 0)}catch(e){return!0}}(),xe=c.toPrecision;R(c,{toPrecision:function(e){return void 0===e?xe.call(this):xe.call(this,e)}},Be),2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||"t"==="tesst".split(/(s)*/)[1]||4!=="test".split(/(?:)/,-1).length||"".split(/.?/).length||".".split(/()()/).length>1?function(){var e=void 0===/()??/.exec("")[1],n=Math.pow(2,32)-1;i.split=function(t,o){var r=String(this);if(void 0===t&&0===o)return[];if(!b(t))return U(this,t,o);var l,a,i,s,c=[],d=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),u=0,f=new RegExp(t.source,d+"g");e||(l=new RegExp("^"+f.source+"$(?!\\s)",d));var m=void 0===o?n:I.ToUint32(o);for(a=f.exec(r);a&&!((i=a.index+a[0].length)>u&&(j(c,F(r,u,a.index)),!e&&a.length>1&&a[0].replace(l,function(){for(var e=1;e<arguments.length-2;e++)void 0===arguments[e]&&(a[e]=void 0)}),a.length>1&&a.index<r.length&&p.apply(c,x(a,1)),s=a[0].length,u=i,c.length>=m));)f.lastIndex===a.index&&f.lastIndex++,a=f.exec(r);return u===r.length?!s&&f.test("")||j(c,""):j(c,F(r,u)),c.length>m?F(c,0,m):c}}():"0".split(void 0,0).length&&(i.split=function(e,n){return void 0===e&&0===n?[]:U(this,e,n)});var Ve=i.replace;(function(){var e=[];return"x".replace(/x(.)?/g,function(n,t){j(e,t)}),1===e.length&&void 0===e[0]})()||(i.replace=function(n,t){var o=e(t),r=b(n)&&/\)[*?]/.test(n.source);if(o&&r){var l=function(e){var o=arguments.length,r=n.lastIndex;n.lastIndex=0;var l=n.exec(e)||[];return n.lastIndex=r,j(l,arguments[o-2],arguments[o-1]),t.apply(this,l)};return Ve.call(this,n,l)}return Ve.call(this,n,t)});var Fe=i.substr,Ue="".substr&&"b"!=="0b".substr(-1);R(i,{substr:function(e,n){var t=e;return e<0&&(t=E(this.length+e,0)),Fe.call(this,t,n)}},Ue);var $e="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff",je="​",Ke="["+$e+"]",qe=new RegExp("^"+Ke+Ke+"*"),He=new RegExp(Ke+Ke+"*$"),Ye=i.trim&&($e.trim()||!je.trim());R(i,{trim:function(){if(void 0===this||null===this)throw new TypeError("can't convert "+this+" to object");return a(this).replace(qe,"").replace(He,"")}},Ye);var Ge=i.lastIndexOf&&-1!=="abcあい".lastIndexOf("あい",2);R(i,{lastIndexOf:function(e){if(void 0===this||null===this)throw new TypeError("can't convert "+this+" to object");for(var n=a(this),t=a(e),o=arguments.length>1?s(arguments[1]):NaN,r=w(o)?1/0:I.ToInteger(o),l=_(E(r,0),n.length),i=t.length,c=l+i;c>0;){c=E(0,c-i);var d=$(F(n,c,l+i),t);if(-1!==d)return c+d}return-1}},Ge);var Qe=i.lastIndexOf;if(R(i,{lastIndexOf:function(e){return Qe.apply(this,arguments)}},1!==i.lastIndexOf.length),8===parseInt($e+"08")&&22===parseInt($e+"0x16")||(parseInt=function(e){var n=/^[\-+]?0[xX]/;return function(t,o){var r=a(t).trim(),l=s(o)||(n.test(r)?16:10);return e(r,l)}}(parseInt)),"RangeError: test"!==String(new RangeError("test"))){var We=function(){if(void 0===this||null===this)throw new TypeError("can't convert "+this+" to object");var e=this.name;void 0===e?e="Error":"string"!=typeof e&&(e=a(e));var n=this.message;return void 0===n?n="":"string"!=typeof n&&(n=a(n)),e?n?e+": "+n:e:n};Error.prototype.toString=We}if(P){var ze=function(e,n){if(K(e,n)){var t=Object.getOwnPropertyDescriptor(e,n);t.enumerable=!1,Object.defineProperty(e,n,t)}};ze(Error.prototype,"message"),""!==Error.prototype.message&&(Error.prototype.message=""),ze(Error.prototype,"name")}if("/a/gim"!==String(/a/gim)){var Xe=function(){var e="/"+this.source+"/";return this.global&&(e+="g"),this.ignoreCase&&(e+="i"),this.multiline&&(e+="m"),e};RegExp.prototype.toString=Xe}})},{}],26:[function(e,n,t){var o=[],r=o.forEach,l=o.slice;n.exports=function(e){return r.call(l.call(arguments,1),function(n){if(n)for(var t in n)e[t]=n[t]}),e}},{}],27:[function(e,n,t){function o(e){var n=r.call(e);return"[object Function]"===n||"function"==typeof e&&"[object RegExp]"!==n||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)}n.exports=o;var r=Object.prototype.toString},{}],28:[function(e,n,t){"use strict";n.exports=function(e){return"object"==typeof e&&null!==e}},{}],29:[function(n,t,o){!function(n,o){void 0!==t&&t.exports?t.exports=o():"function"==typeof e&&e.amd?e(o):this.$script=o()}(0,function(){function e(e,n){for(var t=0,o=e.length;t<o;++t)if(!n(e[t]))return s;return 1}function n(n,t){e(n,function(e){return!t(e)})}function t(l,a,i){function s(e){return e.call?e():p[e]}function d(){if(!--_){p[E]=1,g&&g();for(var t in m)e(t.split("|"),s)&&!n(m[t],s)&&(m[t]=[])}}l=l[c]?l:[l];var u=a&&a.call,g=u?a:i,E=u?l.join(""):a,_=l.length;return setTimeout(function(){n(l,function e(n,t){return null===n?d():(t||/^https?:\/\//.test(n)||!r||(n=-1===n.indexOf(".js")?r+n+".js":r+n),v[n]?(E&&(f[E]=1),2==v[n]?d():setTimeout(function(){e(n,!0)},0)):(v[n]=1,E&&(f[E]=1),void o(n,d)))})},0),t}function o(e,n){var t,o=a.createElement("script");o.onload=o.onerror=o[u]=function(){o[d]&&!/^c|loade/.test(o[d])||t||(o.onload=o[u]=null,t=1,v[e]=2,n())},o.async=1,o.src=l?e+(-1===e.indexOf("?")?"?":"&")+l:e,i.insertBefore(o,i.lastChild)}var r,l,a=document,i=a.getElementsByTagName("head")[0],s=!1,c="push",d="readyState",u="onreadystatechange",p={},f={},m={},v={};return t.get=o,t.order=function(e,n,o){!function r(l){l=e.shift(),e.length?t(l,r):t(l,n,o)}()},t.path=function(e){r=e},t.urlArgs=function(e){l=e},t.ready=function(o,r,l){o=o[c]?o:[o];var a=[];return!n(o,function(e){p[e]||a[c](e)})&&e(o,function(e){return p[e]})?r():function(e){m[e]=m[e]||[],m[e][c](r),l&&l(a)}(o.join("|")),t},t.done=function(e){t([null],e)},t})},{}]},{},[19])(19)}),function(e){e(function(n,t){"use strict";function o(e){return e.sources.some(function(e){return/mpegurl/i.test(e.type)})}function r(e){return!!document.createElement("video").canPlayType(e).replace("no","")}function l(e,n){var t=/-(\d+p)(\.(mp4|webm))?$/.exec(e);if(t&&-1!==n.indexOf(t[1]))return t[1]}function a(){n.qualities&&n.qualities.length&&n.qualities.forEach(function(e){c.removeClass(t,"quality-"+e)})}function i(e,n){if("abr"===e)return"abr";var t,o=parseInt(e,0);return n.forEach(function(e,r){r!=n.length-1||t||(t=e),parseInt(e)<=o&&parseInt(n[r+1])>o&&(t=e)}),t}function s(t,o,r){var l,a=!1,i=o===n.defaultQuality,s=n.quality||Math.min(n.video.height,n.video.width)+"p";l=s===n.defaultQuality?/(.+?)((\.(mp4|webm)$|$))/:/(-\d+p)?((\.(mp4|webm)$|$))/;var c=t.sources.map(function(e){if("abr"===o||r&&i||/mpegurl/i.test(e.type))return e;var t={type:e.type,src:e.src.replace(l,s===n.defaultQuality?"$1-"+o+"$2":i?"$2":"-"+o+"$2")};return t.src!==e.src&&(a=!0),t}),d=JSON.stringify(c);c.sort(function(e,n){var t=/mpegurl/i;return"abr"===o?t.test(n.type)-t.test(e.type):t.test(e.type)-t.test(n.type)}),a=a||JSON.stringify(c)!==d;var u=e.extend({},t,{sources:c});return!!a&&u}var c=e.common,d=!1;n.pluginQualitySelectorEnabled||(n.pluginQualitySelectorEnabled=!0,e.support.inlineVideo&&(n.conf.qualities&&(n.conf.qualities="string"==typeof n.conf.qualities?n.conf.qualities.split(","):n.conf.qualities),e.bean.on(t,"click",".fp-quality-selector li",function(e){if(!/\bactive\b/.test(this.className)){var t,o=n.finished?0:n.video.time,r=e.currentTarget.getAttribute("data-quality");if(t=s(n.video,r),n.quality=r,!t)return;d=!0,n.load(t,function(){d=!1,n.finished=!1,o&&!n.live&&n.seek(o,function(){n.resume()})})}}),n.bind("load",function(e,n,t){if(n.qualities=t.qualities||n.conf.qualities||[],n.defaultQuality=t.defaultQuality||n.conf.defaultQuality,"string"==typeof n.qualities&&(n.qualities=n.qualities.split(",")),n.quality){var o=i(n.quality,n.qualities),r=s(t,o,!d);!d&&r&&(e.preventDefault(),n.loading=!1,n.load(r))}}),n.bind("ready",function(e,n,i){var s=/mpegurl/i.test(i.type)?"abr":l(i.src,n.qualities)||Math.min(i.height,i.width)+"p";a(),c.addClass(t,"quality-"+s);var d=c.find(".fp-ui",t)[0];if(c.removeNode(c.find(".fp-quality-selector",d)[0]),!(n.qualities.length<2)){n.quality=s;var u=c.createElement("ul",{class:"fp-quality-selector"});d.appendChild(u),(o(i)&&r("application/x-mpegurl")||n.conf.swfHls)&&u.appendChild(c.createElement("li",{"data-quality":"abr",class:"abr"===s?"active":""},"Auto")),n.qualities.forEach(function(e){u.appendChild(c.createElement("li",{"data-quality":e,class:e==s?"active":""},e))})}}),n.bind("unload",function(){a(),c.removeNode(c.find(".fp-quality-selector",t)[0])}),n.bind("removeRootQualities",function(){a(),$(".flowplayer").removeClass(function(e,n){var t=n.match(/\S*quality-\S*/g);return!!t&&t.join(" ")})})))})}("object"==typeof module&&module.exports?require("flowplayer"):window.flowplayer);var debug=!1,config,schedule,lineup,liad,clipCount,timeoutId,currentContent,hidden,visibilityChange;void 0!==document.hidden?(hidden="hidden",visibilityChange="visibilitychange"):void 0!==document.msHidden?(hidden="msHidden",visibilityChange="msvisibilitychange"):void 0!==document.webkitHidden&&(hidden="webkitHidden",visibilityChange="webkitvisibilitychange");var deviceType=function(){var e=navigator.userAgent.toUpperCase(),n=new RegExp("ANDROID"),t=new RegExp("IPHONE|IPAD|IPOD");return n.test(e)?"android":t.test(e)?"ios":"pc"}(),EmPlayerEvent={VOD_IMPRESSION:"vod-impression",FIRST_IMPRESSION:"first-impression",VOD_PERCENTAGE:function(e){return"vod-"+e+"%"},CHANNEL_IMPRESSION:"channel-impression",MORE_CLICK:"em-more-click",SERIES_CLICK:"em-series-click",LOGO_CLICK:"em-logo-click",BRAND_CLICK:"em-brand-click",HLS_ERROR:"em-hls-err",SPONSOR_CLICK:"em-sponsor-click",COMSCORE_IMPRESSION:"impression",FULLSCREEN:"fullscreen",VOLUME_CHANGE:"volumeChange",QUALITY_SELECTOR:"em-PlayerSetup",HEADER_LOGO_CLICK:"header-logo-click",UNMUTE:"em-unmute",FOOTER_CLICK:"em-footer",PLAYING_TERMINATION:"playing stop",CONTINUE_TO_PLAY:"player began",CLICK_PLAY:"click play",CLOSE_EM_PLAYER:"close"},adObject=function(){this.id,this.meta,this.enableCountdown,this.onRequest,this.onImpression,this.onError,this.onNoAd,this.onAdReady,this.onStart,this.onComplete,this.onClose,this.onClick,this.onCurrentTimeChange,this.onClickSkip,this.onEmpty,
this.onContentResumeRequested},adHandler=function(){function e(){if(M.debug&&console.warn("isPlaying",w),!I){M.debug&&console.log("init");try{k=$(".flowplayer .fp-engine"),N=document.getElementById("fp-adcontainer"),uiRender.hackInit(N),google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.INSECURE),google.ima.settings.setLocale("zh-TW"),T="ios"!=deviceType?new google.ima.AdDisplayContainer(N,k[0]):new google.ima.AdDisplayContainer(N),O=new google.ima.AdsLoader(T),O.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,n,!1),O.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,l,!1),I=!0}catch(e){console.error("blocked",e)}}}function n(e){M.debug&&console.log("onAdsManagerLoaded",e),k=$(".flowplayer .fp-engine");var n=new google.ima.AdsRenderingSettings;n.restoreCustomPlaybackStateOnAdBreakComplete=!0,n.bitrate=-1,n.enablePreloading=!0,n.loadVideoTimeout=15e3,b=e.getAdsManager(k[0],n),b.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,l,!1);var t=[google.ima.AdEvent.Type.LOADED,google.ima.AdEvent.Type.COMPLETE,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,google.ima.AdEvent.Type.CLICK,google.ima.AdEvent.Type.IMPRESSION,google.ima.AdEvent.Type.STARTED,google.ima.AdEvent.Type.PAUSED,google.ima.AdEvent.Type.RESUMED,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,google.ima.AdEvent.Type.SKIPPED,google.ima.AdEvent.Type.USER_CLOSE,google.ima.AdEvent.Type.DURATION_CHANGE,google.ima.AdEvent.Type.VOLUME_CHANGED,google.ima.AdEvent.Type.VOLUME_MUTED,google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED];for(var o in t)b.addEventListener(t[o],r,!1);var a,i;M.debug&&console.log("litvplayer.isFullscreen()",litvplayer.isFullscreen()),litvplayer.isFullscreen()?(a=window.screen.width,i=window.screen.height):(a=$("#LiTVPlayer").width(),i=$("#LiTVPlayer").height()),D=!1,M.debug&&console.log("litvplayer.getCurrentTime()",litvplayer.getCurrentTime()),M.debug&&console.log("adsManager init",a,i),b.init(a,i,google.ima.ViewMode.FULLSCREEN),b.start()}function t(){M.debug&&console.log("onContentPauseRequested"),litvplayer.forcePause()}function o(){M.debug&&console.log("onContentResumeRequested"),litvplayer.isCompleted()||(litvplayer.setAdPlaying(!1),litvplayer.play())}function r(e){M.debug&&console.warn("onAdEvent",e.type);var n=e.getAd();switch(e.type){case google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED:t();break;case google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED:o(),R.video.onContentResumeRequested();break;case google.ima.AdEvent.Type.LOADED:M.debug&&console.log("ad",n,n.isLinear()),M.debug&&console.warn("duration",n.getDuration()),M.debug&&console.warn("getMinSuggestedDuration",n.getMinSuggestedDuration()),M.debug&&console.warn("getAdSkippableState",b.getAdSkippableState()),w=!0,p(),window.removeEventListener("orientationchange",p),window.addEventListener("orientationchange",p),n.isLinear()||o(),P=litvplayer.getVolume(),E(P),uiRender.hackAfterAdReady(),R.video.onAdReady(n);break;case google.ima.AdEvent.Type.STARTED:n.isLinear()&&(S||(L=setInterval(function(){var e=0;b&&(e=b.getRemainingTime()),e<=0&&(clearInterval(L),uiRender.disableImaCountdown()),M.debug&&console.log("onAdEvent remainingTime",e),R.video.onCurrentTimeChange(e)},500),uiRender.enableImaCountdown(R.video),S=!0)),t(),R.video.onStart();break;case google.ima.AdEvent.Type.COMPLETE:break;case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:M.debug&&console.log("all ads completed",n,n.isLinear()),d(),o(),D||R.video.onComplete();break;case google.ima.AdEvent.Type.LOG:case google.ima.AdEvent.Type.AD_METADATA:break;case google.ima.AdEvent.Type.CLICK:R.video.onClick();break;case google.ima.AdEvent.Type.IMPRESSION:R.video.onImpression();break;case google.ima.AdEvent.Type.FIRST_QUARTILE:case google.ima.AdEvent.Type.MIDPOINT:case google.ima.AdEvent.Type.THIRD_QUARTILE:break;case google.ima.AdEvent.Type.PAUSED:b.resume();break;case google.ima.AdEvent.Type.RESUMED:case google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED:break;case google.ima.AdEvent.Type.SKIPPED:R.video.onClickSkip();break;case google.ima.AdEvent.Type.USER_CLOSE:R.video.onClose();break;case google.ima.AdEvent.Type.DURATION_CHANGE:M.debug&&console.log("duration",n.getDuration());break;case google.ima.AdEvent.Type.VOLUME_CHANGED:M.debug&&console.log("volume changed");break;case google.ima.AdEvent.Type.VOLUME_MUTED:M.debug&&console.log("volume muted");break;case google.ima.AdEvent.Type.VIEWABLE_IMPRESSION:console.log("google.ima.AdEvent.Type.VIEWABLE_IMPRESSION")}}function l(e){switch(M.debug&&console.log("onAdError",e.getError()),M.debug&&console.log("error code",e.getError().getErrorCode()),M.debug&&console.log("error message",e.getError().getMessage()),d(),e.getError().getErrorCode()){case google.ima.AdError.ErrorCode.VAST_EMPTY_RESPONSE:case google.ima.AdError.ErrorCode.VAST_ASSET_NOT_FOUND:case google.ima.AdError.ErrorCode.VAST_NO_ADS_AFTER_WRAPPER:case google.ima.AdError.ErrorCode.UNKNOWN_AD_RESPONSE:R.video.onNoAd();break;case 901:D=!0,R.video.onNoAd();break;default:D=!0,M.debug&&console.error("InnerError",e.getError().getInnerError()),R.video.onError(e.getError().getErrorCode(),e.getError().getMessage())}litvplayer.play()}function a(e){var n,t=(new Date).getTime();try{M.debug&&console.log("original url:",e);var o="";return o=window.self!==window.top?encodeURIComponent(document.referrer):encodeURIComponent(document.URL),n=e.replace(/\[urlencodedpageURL\]/g,o).replace(/\[urlencodedvideoURL\]/g,o).replace(/\[description_url\]/g,o).replace(/\[referrer_url\]/g,o).replace(/\[pageurl\]/g,o).replace(/\[EMBEDDING_PAGE_URL\]/g,o).replace(/\[timestamp\]/g,t).replace(/\[CACHEBUSTING\]/g,t).replace(/\[CACHE_BREAKER\]/g,t).replace(/\[playerwidth\]/g,$("#LiTVPlayer").width()).replace(/\[playerheight\]/g,$("#LiTVPlayer").height()).replace(/\[osversion\]/g,encodeURIComponent(navigator.appVersion)).replace(/\[cellcarrier\]/g,"litv").replace(/\[useragent\]/g,encodeURIComponent(navigator.userAgent)).replace(/\[ua\]/g,encodeURIComponent(navigator.userAgent)).replace(/\[networkconnectiontype\]/g,"u"),M.debug&&console.log("correct url:",n),n}catch(n){return M.debug&&console.log("replace err",n),e}}function i(){debug&&console.warn("clickPlay");try{I||(e(),google.ima.settings.setLocale("zh-TW"),T.initialize(),I=!0)}catch(e){console.log("error",e),litvplayer.play()}}function s(){b.pause()}function c(){b.resume()}function d(){b&&("function"==typeof b.stop&&b.stop(),"function"==typeof b.destory&&b.destory()),O&&"function"==typeof O.contentComplete&&O.contentComplete(),clearInterval(L),S=!1,window.removeEventListener("orientationchange",p),w=!1}function u(){b&&("function"==typeof b.stop&&b.stop(),"function"==typeof b.destroy&&b.destroy()),O&&"function"==typeof O.destroy&&O.destroy(),T&&"function"==typeof T.destroy&&T.destroy(),uiRender.closeIma(),clearInterval(L),S=!1,window.removeEventListener("orientationchange",p),w=!1,I=!1}function p(){var e=null,n=null;litvplayer.isFullscreen()?(e=window.screen.width,n=window.screen.height,"ios"==deviceType&&0!=orientation&&(e=window.screen.height,n=window.screen.width)):(e=$("#LiTVPlayer").width(),n=$("#LiTVPlayer").height()),f(e,n)}function f(e,n){try{b&&"function"==typeof b.resize&&b.resize(e,n,google.ima.ViewMode.FULLSCREEN)}catch(e){console.error("blocked",e)}}function m(){O.contentComplete()}function v(e){b&&(M.debug&&console.log("fullscreen",e),e?p():(uiRender.fullscreenExit(),setTimeout(function(){p()},300)))}function g(){if(b)return b.getVolume()}function E(e){b&&b.setVolume(e)}function _(e){if(M.debug&&console.log("requestAd",e),"empty"==e.meta.schema)M.debug&&console.log("empty"),e.onEmpty();else switch(e.meta.mediaType){case"image":d();break;case"video":switch(R.video=e,e.meta.schema){case"litv":d();break;default:h(e.meta.data)}}}function h(e){M.debug&&console.log("requestVast original url",e);try{var n=new google.ima.AdsRequest;n.linearAdSlotWidth=$("#LiTVPlayer").width(),n.linearAdSlotHeight=$("#LiTVPlayer").height(),n.nonLinearAdSlotWidth=685,n.nonLinearAdSlotHeight=150,n.adTagUrl=a(e),O.requestAds(n),R.video.onRequest()}catch(e){console.error("blocked",e),d(),D||R.video.onComplete()}}function y(){return b}function A(){return w}function C(e){M.debug=e}var b,O,T,k,N,L,P,R={},S=!1,w=!1,I=!1,D=!1,M={debug:!1};return{init:e,requestAd:_,requestVast:h,clickPlay:i,pause:s,resume:c,stop:d,destroy:u,resize:f,contentEnded:m,fullscreen:v,getVolume:g,setVolume:E,getAdsManager:y,isAdPlaying:A,d8guy:C}}(),uiRender=function(){function e(){$(".flowplayer").mouseleave(function(){$(".fp-quality-selector").removeClass("on")})}function n(){debug&&console.log("onQualitySelectorMenu"),"pc"!=deviceType&&(debug&&console.log("fp-quality-selector hide"),$(".fp-quality-selector").hide(),$(".fp-menu").hide())}function t(){debug&&console.log("onPlayerReadyCallback"),$(".fp-menu").click(function(e){debug&&console.log("fp-menu click"),$(".fp-quality-selector").toggleClass("on"),e.stopPropagation()}),$(".fp-brand").html("").attr("href",config.brandLandingUrl).attr("target","_blank").click(function(){debug&&console.log("fp-brand click"),vlog.gaTag("vod",EmPlayerEvent.BRAND_CLICK)})}function o(){debug&&console.log("requestIma>>"),$("#fp-adcontainer").addClass("is-adon"),0==litvplayer.getVolume()&&$(".fp-adPlayerBar").addClass("is-muted"),litvplayer.isFullscreen()&&$(".fp-adPlayerBar").addClass("is-fullscreen")}function r(){function e(){debug&&console.log("adVolumeChanged"),$(".fp-adPlayerBar").hasClass("is-muted")?(litvplayer.setMute(!1),setTimeout(function(){litvplayer.setAdVolume(litvplayer.getVolume())},300),$(".fp-adPlayerBar").removeClass("is-muted")):(litvplayer.setAdVolume(0),litvplayer.setMute(!0),$(".fp-adPlayerBar").addClass("is-muted"))}function n(){if(debug&&console.log("adFullscreenChanged"),$(".fp-adPlayerBar").hasClass("is-fullscreen"))$(".fp-adPlayerBar").removeClass("is-fullscreen");else if($(".fp-adPlayerBar").addClass("is-fullscreen"),$(".fixtureView.video").length>0){var e=window.screen.width/$(".fixtureView.video").parent().width();$(".fixtureView.video").parent().css("transform","scale("+e+","+e+")")}litvplayer.toggleFullscreen()}function t(){$(".fp-adPlayerBar").addClass("is-mouseover")}function o(){$(".fp-adPlayerBar").removeClass("is-mouseover")}debug&&console.log("playIma>>"),$(".fp-list").hide(),$(".fp-adPlayerBar").addClass("is-adon"),$(".fp-admute").on("click",e),$(".fp-adfullscreen").on("click",n),$("#fp-adcontainer").on("mouseover",t),$("#fp-adcontainer").on("mouseout",o),$(".fp-adPlayerBar").on("mouseover",t),$(".fp-adPlayerBar").on("mouseout",o)}function l(){$(".fp-adPlayerBar").removeClass("is-fullscreen")}function a(e){$(".fp-adcountdown").addClass("is-adon")}function i(){$(".fp-adcountdown").removeClass("is-adon"),$(".fp-adcountdown").off("click")}function s(e){$("#fp-adcountdown-adcounter").text(e)}function c(){debug&&console.log("closeIma"),$(".fp-adcountdown").removeClass("is-adon"),$(".fp-adPlayerBar").removeClass("is-adon"),$("#fp-adcontainer").removeClass("is-adon"),$(".fp-list").show(),$(".fp-admute").off("click"),$(".fp-adfullscreen").off("click"),$("#fp-adcontainer").off("mouseover"),$("#fp-adcontainer").off("mouseout"),$(".fp-adPlayerBar").removeClass("is-muted"),$(".fp-adPlayerBar").removeClass("is-fullscreen")}function d(){if($(".fixtureView.video").length>0){var e;e=litvplayer.isFullscreen()?window.screen.width/$(".fixtureView.video").parent().width():$("#LiTVPlayer").width()/$(".fixtureView.video").parent().width(),$(".fixtureView.video").parent().css("transform","scale("+e+","+e+")"),$(".fixtureView.video").parent().parent().css("background-color","#000")}else $(".fp-adcontainer video").css("background-color","#000")}function u(e){function n(e,n){return n+" "+e.replace(/}([A-Za-z0-9_,. #~>=\[\]]+){/g,function(e,t){return"}"+t.split(",").map(function(e){return n+" "+e}).join()+"{"})}$(e).observe("childlist subtree",function(t){var o=e.querySelectorAll("style");o.length>0&&(o=Array.prototype.slice.call(o),o.filter(function(e){return"true"!=e.dataset.litv_treat}).forEach(function(e){e.innerHTML=n(e.innerHTML,"#fp-adcontainer"),e.dataset.litv_treat="true"}))}),$(window).on("resize",function(){if(!litvplayer.isFullscreen()){debug&&console.log("litvplayer dom size",$("#LiTVPlayer").width(),$("#LiTVPlayer").height());try{adHandler.resize($("#LiTVPlayer").width(),$("#LiTVPlayer").height(),google.ima.ViewMode.FULLSCREEN)}catch(e){console.error("blocked",e)}var e=$("#LiTVPlayer").width()/$(".fixtureView.video").parent().width();$(".fixtureView.video").parent().css("transform","scale("+e+","+e+")")}})}var p=!1;return{init:e,onQualitySelectorMenu:n,onPlayerReadyCallback:t,requestIma:o,playIma:r,fullscreenExit:l,enableImaCountdown:a,disableImaCountdown:i,updateImaCounter:s,closeIma:c,hackAfterAdReady:d,hackInit:u,unmutedBtn:function(){var e=!1,n=!1,t=function(e){n=e},o=function(e){if(1!=n){var t=$(".flowplayer"),o=t.find(".fp-unumute");o.remove();var l=new Array;l.push("<buttun class='fp-unumute'>"),l.push("\t<div class='icon_section'>"),l.push("\t\t<div class='img'></div>"),l.push("\t\t<div class='text'>取消靜音</div>"),l.push("\t</div>"),l.push("</button>"),l=l.join(""),t.append(l),t=$(".flowplayer"),o=t.find(".fp-unumute"),o.off("touchmove",r),o.on("touchmove",r),o.off("touchend click",a),o.on("touchend click",{callback:e},a)}},r=function(){e=!0},l=function(){var e=$(".flowplayer"),n=e.find(".fp-unumute");n.off("touchmove",r),n.off("touchend click",a),n.remove()},a=function(n){if(1==e)return void(e=!1);n.stopPropagation(),n.preventDefault(),vlog.gaTag("vod",EmPlayerEvent.UNMUTE);var t=$(".flowplayer .fp-engine");t[0].muted=!1,t[0].volume=1,litvplayer.isPaused()&&(litvplayer.play(),litvplayer.onPlayerReady()),litvplayer.setMute(!1),litvplayer.setVolume(1),litvplayer.setAdVolume(1),0==clipCount&&vlog.gaTag("vod",EmPlayerEvent.CONTINUE_TO_PLAY),clipCount=-1,$(".fp-adPlayerBar").removeClass("is-muted"),"on"==limeta.getUrlParam("menu_after_click")&&(limeta.removeUrlParam("menu_after_click"),limeta.removeUrlParam("menu")),l();var o=n.data.callback;"function"==typeof o&&o()};return{disable:t,show:o,dismiss:l}}(),idleBreak:function(){var e=function(){var e=$(".flowplayer"),n=e.find(".fp-idlepopup");n.remove();var o=new Array;o.push("<buttun class='fp-idlepopup'>"),o.push("\t<div class='icon_section'>"),o.push("\t\t<div class='text'>休息一下，點擊後繼續播放</div>"),o.push("\t</div>"),o.push("</button>"),o=o.join(""),e.append(o),e=$(".flowplayer"),n=e.find(".fp-idlepopup"),n.off("touchend click touchmove",t),n.on("touchend click touchmove",t)},n=function(){var e=$(".flowplayer"),n=e.find(".fp-idlepopup");n.off("touchend click touchmove",t),n.remove()},t=function(e){e.stopPropagation(),e.preventDefault(),litvplayer.play(),n()};return{forceBreak:function(){p&&(litvplayer.forcePause(),e())}}}(),controlsBar:function(){return{show:function(){var e=$(".flowplayer");e.addClass("is-mouseover"),e.removeClass("is-mouseout"),setTimeout(function(){e.addClass("is-mouseout"),e.removeClass("is-mouseover")},5e3)}}}(),closeIframeBtn:function(){var e=function(){parent.postMessage('litv://{"action":"requestClose"}',"*"),vlog.gaTag("vod",EmPlayerEvent.CLOSE_EM_PLAYER)};return{show:function(){$(".flowplayer").before("<div class='close_btn_container'><div class='request_close'></div></div>"),$(".request_close").on("click",e)}}}()}}();!function(e,n,t,o,r,l,a){e.GoogleAnalyticsObject=r,e[r]=e[r]||function(){(e[r].q=e[r].q||[]).push(arguments)},e[r].l=1*new Date,l=n.createElement(t),a=n.getElementsByTagName(t)[0],l.async=1,l.src="//www.google-analytics.com/analytics.js",a.parentNode.insertBefore(l,a)}(window,document,"script",0,"ga"),ga("create","UA-59507085-1","auto"),ga("require","linkid","linkid.js"),ga("require","displayfeatures"),ga("send","pageview");var _comscore=_comscore||[];_comscore.push({c1:"2",c2:"18986219"}),_comscore.push({c1:"7",c2:"18986219",c3:"100001"}),function(){var e=document.createElement("script"),n=document.getElementsByTagName("script")[0];e.async=!0,e.src=("https:"==document.location.protocol?"https://sb":"http://b")+".scorecardresearch.com/beacon.js",n.parentNode.insertBefore(e,n)}();var vlog=function(){function e(e){r=e}function n(e){r.title=e}function t(e,n,t){var o=(r.contentType?r.contentType:"")+"|"+(r.title?r.title:"")+"|"+(r.season?r.season:"")+"|"+(r.episode?r.episode:"")+"|"+(r.videoType?r.videoType:""),l=(r.no?r.no:"")+"|"+(r.title?r.title:"")+"|"+(r.contentId?r.contentId:"");switch(e){case"vod":null!=r.contentId&&(void 0!==t?ga("send","event",o,"em",n,t):ga("send","event",o,"em",n));break;case"channel":null!=r.contentId&&(void 0!==t?ga("send","event",l,"em",n,t):ga("send","event",l,"em",n))}}function o(e,n){var t;switch(t="vod"==e?r.contentType:"channel",n){case EmPlayerEvent.COMSCORE_IMPRESSION:COMSCORE.beacon({c1:1,c2:"18986219",c3:t,c5:"03"})}}var r;return{setData:e,setTitle:n,gaTag:t,comScore:o}}(),vmx=function(){function e(e){f=e}function n(){this.station="*null",this.publisher="*null",this.program="*null",this.episodeTitle="*null",this.season="*null",this.episode="*null",this.genre="*null",this.tmsId="*null",this.adFlag="*null",this.completeEpisode="*null",this.digitalAirDate="*null",this.tvAirDate="*null",this.assetId="*null",this.clipLength=0,this.c3=f.content_type,this.c4="*null",this.c5="03",this.c6="*null"}function t(){m=new ns_.StreamingTag({customerC2:v})}function o(e){e*=1e3,m.playVideoAdvertisement({ns_st_cl:e},ns_.StreamingTag.AdType.LinearOnDemandPreRoll)}function r(e){e*=1e3,m.playVideoAdvertisement({ns_st_cl:e},ns_.StreamingTag.AdType.LinearOnDemandMidRoll)}function l(e){e*=1e3,m.playVideoAdvertisement({ns_st_cl:e},ns_.StreamingTag.AdType.LinearOnDemandPostRoll)}function a(e){e*=1e3,m.playVideoAdvertisement({ns_st_cl:e},ns_.StreamingTag.AdType.LinearLive)}function i(e){e*=1e3,m.playVideoAdvertisement({ns_st_cl:e},ns_.StreamingTag.AdType.Other)}function s(e){var n={ns_st_st:e.station,ns_st_pu:e.publisher,ns_st_pr:e.program,ns_st_ep:e.episodeTitle,ns_st_sn:e.season,ns_st_en:e.episode,ns_st_ge:e.genre,ns_st_ti:e.tmsId,ns_st_ddt:e.digitalAirDate,ns_st_tdt:e.tvAirDate,ns_st_ci:e.assetId,ns_st_cl:e.clipLength,ns_st_ia:e.adFlag,ns_st_ce:e.completeEpisode,c3:e.c3,c4:e.c4,c6:e.c6};m.playVideoContentPart(n,ns_.StreamingTag.ContentType.Live)}function c(e){var n={ns_st_st:e.station,ns_st_pu:e.publisher,ns_st_pr:e.program,ns_st_ep:e.episodeTitle,ns_st_sn:e.season,ns_st_en:e.episode,ns_st_ge:e.genre,ns_st_ti:e.tmsId,ns_st_ddt:e.digitalAirDate,ns_st_tdt:e.tvAirDate,ns_st_ci:e.assetId,ns_st_cl:e.clipLength,ns_st_ia:e.adFlag,ns_st_ce:e.completeEpisode,c3:e.c3,c4:e.c4,c6:e.c6};m&&m.playVideoContentPart(n,ns_.StreamingTag.ContentType.LongFormOnDemand)}function d(e){var n={ns_st_st:e.station,ns_st_pu:e.publisher,ns_st_pr:e.program,ns_st_ep:e.episodeTitle,ns_st_sn:e.season,ns_st_en:e.episode,ns_st_ge:e.genre,ns_st_ti:e.tmsId,ns_st_ddt:e.digitalAirDate,ns_st_tdt:e.tvAirDate,ns_st_ci:e.assetId,ns_st_cl:e.clipLength,ns_st_ia:e.adFlag,ns_st_ce:e.completeEpisode,c3:e.c3,c4:e.c4,c6:e.c6};m.playVideoContentPart(n,ns_.StreamingTag.ContentType.Bumper)}function u(e){var n={ns_st_st:e.station,ns_st_pu:e.publisher,ns_st_pr:e.program,ns_st_ep:e.episodeTitle,ns_st_sn:e.season,ns_st_en:e.episode,ns_st_ge:e.genre,ns_st_ti:e.tmsId,ns_st_ddt:e.digitalAirDate,ns_st_tdt:e.tvAirDate,ns_st_ci:e.assetId,ns_st_cl:e.clipLength,ns_st_ia:e.adFlag,ns_st_ce:e.completeEpisode,c3:e.c3,c4:e.c4,c6:e.c6};m.playVideoContentPart(n,ns_.StreamingTag.ContentType.Other)}function p(){m&&m.stop()}var f,m,v="18986219";return{init:t,setData:e,meta:n,onPrerollAd:o,onMidrollAd:r,onPostrollAd:l,onLiveAd:a,onOtherAd:i,onLive:s,onVOD:c,onBumper:d,onOther:u,onStop:p}}();!function(e){e.extend({requestVast:function(n){if(n.url){var t=n.debug;t&&console.log("requestAds",n.url);var o="https://s-api01.svc.litv.tv/cdi/v2/Yahoovast?url=",r=["https://global.adserver.yahoo.com/a?pn=litvtw&l=VID&p=NOT%20USED&at=content%3D%22v1%3Bv7%3Bv8%3Bflv_as3%3Bxml_ver_2.0vast%3Bxml_ver_3.0vast%22&f=793604445&c=x&rand=[CACHEBUSTING]"],l=(Math.floor(Math.random()*r.length),function(n){var o,r=(new Date).getTime();try{return o=n.replace(/\[urlencodedpageURL\]/g,encodeURIComponent(document.URL)).replace(/\[urlencodedvideoURL\]/g,encodeURIComponent(document.URL)).replace(/\[description_url\]/g,encodeURIComponent(document.URL)).replace(/\[referrer_url\]/g,encodeURIComponent(document.URL)).replace(/\[pageurl\]/g,encodeURIComponent(document.URL)).replace(/\[EMBEDDING_PAGE_URL\]/g,encodeURIComponent(document.URL)).replace(/\[timestamp\]/g,r).replace(/\[CACHEBUSTING\]/g,r).replace(/\[CACHE_BREAKER\]/g,r).replace(/\[playerwidth\]/g,e("#LiTVPlayer").width()).replace(/\[playerheight\]/g,e("#LiTVPlayer").height()).replace(/\[osversion\]/g,encodeURIComponent(navigator.appVersion)).replace(/\[cellcarrier\]/g,"litv").replace(/\[useragent\]/g,encodeURIComponent(navigator.userAgent)).replace(/\[ua\]/g,encodeURIComponent(navigator.userAgent)).replace(/\[networkconnectiontype\]/g,"u"),t&&console.log("correct url:",o),o}catch(e){return t&&console.log("replace err",e),n}}),a=l(n.url),i=[],s=function(){function o(){this.url,this.time}function r(){this.code,this.message,this.detail}function a(){this.isNoAd=!1,this.isWrapperException=!1,this.wrapperException=new r,this.adId,this.url,this.height,this.width,this.maintainAspectRatio,this.scalable,this.delivery,this.bitrate,this.type,this.duration,this.clickUrl,this.onClick,this.onImpression,this.onStart,this.onFirstQuartile=new o,this.onMidpoint=new o,this.onThirdQuartile=new o,this.onComplete,this.onClose,this.onMute,this.onUnmute,this.onPause,this.onFullscreen,this.onAcceptInvitation,this.onNoAd,this.onNoAdImpression,this.onCpcv}function s(o){t&&console.log("getAds",o),n.onRequest(),e.ajax({url:o,type:"GET",dataType:"xml",timeout:5e3,cache:!1,xhrFields:{withCredentials:!0}}).done(function(e,n,t){c(e)}).fail(function(e,o,r){t&&console.error("status code",e.status),"timeout"==o&&t&&console.error(o),n.onError(e.status,o)})}function c(o){t&&console.log("received",o);try{var r=e.xml2json(o);if(t&&console.log("parse to object:",r),void 0!==r.Error){if(t&&console.log("no ad"),void 0!==r.Ad)if(t&&console.log("ad pod w/ noad"),r.Ad.length>1){t&&console.log("ad > 1"),E+=r.Ad.length,_.addCallback(d);for(var l=0;l<r.Ad.length;l++)_.parse(r.Ad[l])}else t&&console.log("ad == 1"),E++,_.addCallback(d),_.parse(r.Ad);E++;var i=new a;i.isNoAd=!0,r.Error.length>1&&"string"!=typeof r.Error?i.onNoAd=r.Error:i.onNoAd=[r.Error],d(deepClone(i))}else if(void 0!==r.Ad)if(t&&console.log("ad"),r.Ad.length>1){t&&console.log("ad > 1"),E+=r.Ad.length,_.addCallback(d);for(var l=0;l<r.Ad.length;l++)_.parse(r.Ad[l])}else t&&console.log("ad == 1"),E++,_.addCallback(d),_.parse(r.Ad);else t&&console.warn("empty"),n.onError(200,"empty",!0)}catch(e){t&&console.error("parsing error",e),n.onError(200,"parser error",!0)}}function d(e){t&&console.log("done>>",e),i.push(e),0==--E&&(t&&console.log("done>>>",E),n.onComplete(i))}var u="video/mp4",p="application/vnd.apple.mpegurl",f="application/x-mpegURL",m=1e3,v=100,g=function(){var e=navigator.userAgent.toUpperCase(),n=new RegExp("ANDROID"),t=new RegExp("IPHONE|IPAD|IPOD");return n.test(e)?"android":t.test(e)?"ios":"pc"}(),E=0,_=function(){function n(e){N=e}function i(e){t&&console.log("adparser parse",e);var n;if(e.InLine){t&&console.log("inline");var o=new a;o.adId=e.id;var r=s(e.InLine);if(k(o,r),t&&console.log("adparser parse",o),L.push(o),L.length>1){t&&console.log("merge ado");for(var l=1;l<L.length;l++)k(L[0],L[l]);n=deepClone(L[0]),L=[],N(n)}else n=deepClone(L[0]),L=[],N(n)}else{t&&console.log("wrapper");var o=new a;o.adId=e.id;var r=s(e.Wrapper);if(k(o,r),t&&console.log("adparser parse",o),L.push(o),++R<=P)O(e.Wrapper.VASTAdTagURI);else{for(var l=1;l<L.length;l++)k(L[0],L[l]);n=deepClone(L[0]),L=[],N(n)}}}function s(e){var n,o=new a;if(e.Creatives.Creative.length>1)for(var r in e.Creatives.Creative)e.Creatives.Creative[r].Linear&&(n=e.Creatives.Creative[r].Linear);else n=e.Creatives.Creative.Linear;if(void 0!==n.MediaFiles){var l=y(n.MediaFiles.MediaFile);t&&console.log("after parseMediaFile",l),o.url=l.url,o.height=l.height,o.width=l.width,o.maintainAspectRatio=l.maintainAspectRatio,o.scalable=l.scalable,o.delivery=l.delivery,o.bitrate=l.bitrate,o.type=l.type,o.duration=E(n)}if(void 0!==n.VideoClicks){var i=h(n.VideoClicks);o.clickUrl=i.clickUrl,o.onClick=i.onClick}if(void 0!==n.TrackingEvents.Tracking){var s=A(n.TrackingEvents.Tracking,o.duration);o.onStart=s.onStart,o.onFirstQuartile=s.onFirstQuartile,o.onMidpoint=s.onMidpoint,o.onThirdQuartile=s.onThirdQuartile,o.onComplete=s.onComplete,o.onClose=s.onClose,o.onMute=s.onMute,o.onUnmute=s.onUnmute,o.onPause=s.onPause,o.onFullscreen=s.onFullscreen,o.onAcceptInvitation=s.onAcceptInvitation}if(o.onImpression=d(e),void 0!==e.Error&&(o.onNoAd=c(e.Error)),void 0!==e.Extensions){var u=C(e.Extensions.Extension);o.onNoAdImpression=u.onNoAdImpression,o.onCpcv=u.onCpcv}return o}function c(e){return"string"==typeof e?[e]:e}function d(e){return"string"==typeof e.Impression?[e.Impression]:e.Impression}function E(e){return b(e.Duration)}function h(e){var n=new Array;return"string"==typeof e.ClickTracking?n.push(e.ClickTracking):void 0!==e.ClickTracking&&(n=e.ClickTracking),{clickUrl:e.ClickThrough,onClick:n}}function y(e){var n={},t=new Array;switch(g){case"pc":for(var o in e){if("string"==typeof e[o]){t.push(e);break}e[o].type==u&&e[o].bitrate>=v&&e[o].bitrate<=m&&t.push(e[o])}break;case"android":for(var o in e)e[o].type==u&&e[o].bitrate>=v&&e[o].bitrate<=m&&t.push(e[o]);break;case"ios":for(var o in e)e[o].type!=p&&e[o].type!=f||t.push(e[o]);if(0==t.length)for(var o in e)e[o].type==u&&e[o].bitrate>=v&&e[o].bitrate<=m&&t.push(e[o])}return t.length>0&&(t.sort(function(e,n){return n.bitrate-e.bitrate}),n.url=t[0].text,n.height=t[0].height,n.width=t[0].width,n.maintainAspectRatio=t[0].maintainAspectRatio,n.scalable=t[0].scalable,n.delivery=t[0].delivery,n.bitrate=t[0].bitrate,n.type=t[0].type),n}function A(e,n){n||(n=0);var t=.25*n,r=.5*n,l=.75*n,a=new Array,i=new Array,s=new Array,c=new Array,d=new Array,u=new Array,p=new Array,f=new Array,m=new Array,v=new Array,g=new Array,E=new o,_=new o,h=new o;for(var y in e)switch(e[y].event){case"start":a.push(e[y].text);break;case"firstQuartile":i.push(e[y].text);break;case"midpoint":s.push(e[y].text);break;case"thirdQuartile":c.push(e[y].text);break;case"complete":d.push(e[y].text);break;case"close":u.push(e[y].text);break;case"mute":p.push(e[y].text);break;case"unmute":f.push(e[y].text);break;case"pause":m.push(e[y].text);break;case"fullscreen":v.push(e[y].text);break;case"acceptInvitation":g.push(e[y].text)}return E.url=i,E.time=t,_.url=s,_.time=r,h.url=c,h.time=l,{onStart:a,onFirstQuartile:E,onMidpoint:_,onThirdQuartile:h,onComplete:d,onClose:u,onMute:p,onUnmute:f,onPause:m,onFullscreen:v,onAcceptInvitation:g}}function C(e){var n=new Array,t=new Array,r=new o;for(var l in e)switch(e[l].type){case"CustomTracking":e[l].NoAdImpression&&n.push(e[l].NoAdImpression);break;case"CPCV":e[l].Progress30SecBeacon&&t.push(e[l].Progress30SecBeacon)}return r.url=t,r.time=30,{onNoAdImpression:n,onCpcv:r}}function b(e){var n=e.split(":");return 3600*n[0]+60*n[1]+1*n[2]}function O(n){t&&console.log("requestWrapper",n);var o=l(n);e.ajax({url:o,type:"GET",dataType:"xml",timeout:5e3,cache:!1,xhrFields:{withCredentials:!0}}).done(function(n,o,r){try{var l=e.xml2json(n);t&&console.log("receivce",l),_.parse(l.Ad)}catch(e){t&&console.error("parsing error",e);for(var a=1;a<L.length;a++)k(L[0],L[a]);var i=deepClone(L[0]);L=[],N(i)}}).fail(function(e,n,o){if(t&&console.error("status code",e.status,n,o),"timeout"==n&&t&&console.error(n),0==e.status){var l=new r,i=new a;i.isWrapperException=!0,l.code=e.status,l.message=n,l.detail=o,i.wrapperException=l,L.push(i)}for(var s=1;s<L.length;s++)k(L[0],L[s]);var c=deepClone(L[0]);L=[],N(c)})}function T(e){return"[object Array]"==Object.prototype.toString.call(e)}function k(e,n){var t,o,r,l;if(void 0===n)return n;if(void 0===e)return e;for(var a in n)if("object"==typeof(t=n[a])&&null!==t)if(T(t)&&t.length)if("object"!=typeof t[0])if(o=e[a]){r={};for(var i=0,s=o.length;i<s;i++)r[o[i]]=!0;for(var c=0,d=t.length;c<d;c++)t[c]in r||o.push(t[c])}else e[a]=t;else{l={},o=e[a];for(var u=0,p=o.length;u<p;u++)l[o[u].id]=o[u];for(var f=0,m=t.length;f<m;f++)t[f].id in l?k(l[t[f].id],t[f]):o.push(t[f])}else k(e[a],t);else e[a]=t;return e}var N,L=[],P=6,R=0;return{parse:i,addCallback:n}}();return{getAds:s}}();e("#y-report").html(""),s.getAds(a)}}})}(jQuery);var limeta=function(){function e(){$.ajax({url:C,type:"GET",contentType:"application/json",dataType:"json",cache:!1,success:function(e){E=e,n()},error:function(e,n,t){debug&&console.log(e.status,n,t),h()}})}function n(){$.ajax({url:y,type:"GET",contentType:"application/json",dataType:"json",cache:!1,success:function(e){v=e,t()},error:function(e,n,t){debug&&console.log(e.status,n,t),h()}})}function t(){$.ajax({url:A,type:"GET",contentType:"application/json",dataType:"json",cache:!1,success:function(e){g=e,_()},error:function(e,n,t){debug&&console.log(e.status,n,t),h()}})}function o(n,t){try{_=n,h=t,e()}catch(e){debug&&console.log(e)}}function r(){return v}function l(){return g}function a(){return E}function i(e){var n=new RegExp("[?&]"+e+"=([^&#]*)").exec(window.location.href);return null!==n?n[1]||0:null}function s(e,n){var t=window.location.href,o=new RegExp("[\\?&]("+e+"=[^&#]*)").exec(t);o?t=t.replace(o[1],e+"="+n):-1!=t.indexOf("?")&&-1!=t.indexOf("&")?t+="&"+e+"="+n:-1!=t.indexOf("?")?t.indexOf("?")>=t.length-1?t+=e+"="+n:t+="&"+e+"="+n:t+="?"+e+"="+n,window.history.replaceState({},document.title,t)}function c(e){var n=window.location.href,t=new RegExp("([\\?]("+e+"=[^&#]*[&]?)|([&]"+e+"=[^&#]*))").exec(n),o=null;t&&(t[2]?o=t[2]:t[3]&&(o=t[3])),o&&(n=n.replace(o,""),window.history.replaceState({},document.title,n))}function d(e,n,t){var o=E.cdiUrls[Math.floor(Math.random()*E.cdiUrls.length)];$.ajax({url:o,type:"POST",headers:{"Content-Type":"application/json"},contentType:"application/json",data:JSON.stringify({id:1234,jsonrpc:"2.0",method:N,params:{AssetId:e,DeviceType:b,MediaType:O,Site:T}}),timeout:1e4}).done(function(e,o,r){debug&&console.log("HTTP Request Succeeded: "+r.status),e.error&&void 0!==e.error?t(e.error.code,e.error.message):n(e.result.AssetURLs[0])}).fail(function(e,n,o){debug&&console.log("HTTP Request Failed",e,n,o),t(e.status,o)})}function u(e,n,t){var o=E.cdiUrls[Math.floor(Math.random()*E.cdiUrls.length)];$.ajax({url:o,type:"POST",headers:{"Content-Type":"application/json"},contentType:"application/json",data:JSON.stringify({id:1234,jsonrpc:"2.0",method:k,params:{AssetId:e,DeviceType:b,MediaType:O,Site:T}}),timeout:1e4}).done(function(e,o,r){debug&&console.log("HTTP Request Succeeded: "+r.status),e.error&&void 0!==e.error?t(e.error.code,e.error.message):n(e.result.AssetURLs[0])}).fail(function(e,n,o){debug&&console.log("HTTP Request Failed",e,n,o),t(e.status,o)})}function p(e){e=e||v;var n=(new Date).getTime()/1e3,t=(n-e.start_time)%e.total_length,o=0;for(var r in e.programs)if((o+=e.programs[r].length)>=t)break;return currentContent={index:parseInt(r),content:e.programs[parseInt(r)],seekTo:e.programs[parseInt(r)].length-(o-t)}}function f(){return currentContent=currentContent.index+1>v.programs.length-1?{index:0,content:v.programs[0],seekTo:0}:{index:currentContent.index+1,content:v.programs[currentContent.index+1],seekTo:0}}function m(){return currentContent}var v,g,E,_,h,y="meta/schedule.json",A="meta/lineup.json",C="config.json",b="ctEmbeddedPlayer",O="vod-channel",T="pc",k="LoadService.GetURLsNoAuth",N="LoadService.GetAdURLs";return{init:o,getConfig:a,getSchedule:r,getLineup:l,getUrlParam:i,replaceUrlParam:s,removeUrlParam:c,getAdUrl:d,getUrl:u,findCurrent:p,findNext:f,getCurrentContent:m}}();!function(e){function n(e,n,t,o){function r(){i&&s&&n()}function l(){t()}function a(){s=!document[hidden],s?r():l()}var i=!1,s=!1;o=o||0,n=n||function(){},t=t||function(){},new IntersectionObserver(function(e){var n=e[0].intersectionRatio,t=n>o;i!==t&&(i=t,t?r():l())},{threshold:o}).observe(e),
document.addEventListener(visibilityChange,a),a()}var t,o=0,r=new Timer(120,0),l=!0,a=!1,i=!1;e.fplayer={},e.fpCallback={onReady:function(n,o,r){try{debug&&console.log("onReady~litvplayer.isAdPlaying()",litvplayer.isAdPlaying()),e(".flowplayer").removeClass("is-finished"),"android"==deviceType?e(".flowplayer").removeClass("no-mute"):"ios"==deviceType&&e(".fp-fullscreen").remove(),e.fplayer.trigger("firstPlaySetting",[function(){return 1==t.clickplay&&"android"!=deviceType?void e.fplayer.trigger("firstPlayByClick",["ios"!=deviceType&&void 0]):"ios"==deviceType?void e.fplayer.trigger("firstPlayByClick",[!1]):void e(".fp-player .fp-engine")[0].play().then(function(){if(1==t.clickplay&&"android"==deviceType)return litvplayer.pause(),void e.fplayer.trigger("firstPlayByClick");"undefined"!=typeof IntersectionObserver?(uiRender.unmutedBtn.show(),litvplayer.getPlayer().viewableHandle()):(litvplayer.pause(),e.fplayer.trigger("firstPlayByClick",[!1]))},function(){e.fplayer.trigger("firstPlayByClick")})}])}catch(n){console.error(n),e.fplayer.play(),litvplayer.getPlayer().setStart()}},onPause:function(e,n){litvplayer.isAdPlaying()||(debug&&console.log("onPause",arguments),litvplayer.onPlayerPaused())},onResume:function(e,n){debug&&console.log("onResume",arguments,"getPlayerReadyState",litvplayer.getPlayerReadyState()),litvplayer.onPlayerPlaying()},onBeforeSeek:function(n,t,o){debug&&console.log("onBeforeSeek",arguments,e.fplayer.video.time),litvplayer.setBeginCount(o)},onSeek:function(e,n,t){debug&&console.log("onSeek",arguments,litvplayer.getCount(),litvplayer.isAdPlaying()),litvplayer.isAdPlaying()},onVolume:function(n,t,o){if(debug&&console.log("onVolume",arguments),"ios"!=deviceType){var r=e(".flowplayer .fp-engine")[0];r.muted=0==o}},onError:function(n,t,o){var l={},a=config.landingUrl+config.defaultCategory+config.targetContent+currentContent.content.content_id+config.sponsor;switch(o.code){case 2:l.title="<h2>Oops! 網路異常</h2>",l.message='<p>請確認網路連線正常或重新整理網頁<br/><a id="errLinkbtn" href="'+a+'" target="_blank">立即前往 LiTV線上影視</a></p>';break;case 3:case 5:l.title="<h2>Oops! 影片格式不支援或編碼錯誤</h2>",l.message='<p>請嘗試升級瀏覽器以支援播放之影片格式<br/><a id="errLinkbtn" href="'+a+'" target="_blank">立即前往 LiTV線上影視</a></p>';break;default:l.title="<h2>Oops! 影片載入錯誤</h2>",l.message='<p>請重新整理網頁重新載入<br/><a id="errLinkbtn" href="'+a+'" target="_blank">立即前往 LiTV線上影視</a></p>'}e(".fp-message").html(l.title+l.message),r.stop(),litvplayer.onError({code:o.code,name:"error",message:o.message})},onFinish:function(e,n){debug&&console.log("onFinish",arguments),litvplayer.isAdPlaying()||t.media.url===n.video.src&&(t.media.url="",litvplayer.onCompleted())},onFullscreen:function(n,t){e(".fp-quality-selector li")[0].click(),litvplayer.onFullscreenChange(!0)},onFullscreenReport:function(e,n){vlog.gaTag("vod",EmPlayerEvent.FULLSCREEN)},onFullscreenExit:function(e,n){litvplayer.onFullscreenChange(!1)},onCurrentTimeChange:function(e,n,t){if(!litvplayer.isAdPlaying()&&(litvplayer.onMediaCurrentTimeChange(t),litvplayer.calCount(t),litvplayer.onMediaPlayedTimeChange(),litvplayer.setBeginCount(t),litvplayer.getCount()>=litvplayer.getProp().ads.midroll.count))for(var o in litvplayer.getProp().ads.midroll.timeCodes)if(Math.floor(t)==litvplayer.getProp().ads.midroll.timeCodes[o]){litvplayer.resetCount(),litvplayer.displayMidroll();break}},onHlsLevelSwitch:function(e,n,t){var o=n.engine.hlsjs.levels[t.level];debug&&console.info("switched to hls level index:",t.level),debug&&console.info("width:",o.width,"height:",o.height)},onHlsError:function(e,n,t){"networkError"==t.type&&l&&(l=!1,vlog.gaTag("vod",EmPlayerEvent.HLS_ERROR))}},e.fn.flow=function(s){return t=s,e.extend(this,{load:function(){r.addEventListener(r.ON_TIMER_COMPLETED,function(){l=!0}),r.start(),e.fplayer=flowplayer("#LiTVPlayer",{splash:!1,autoplay:!1,embed:!0,adaptiveRatio:!0,keyboard:!1,muted:!0,tooltip:!1,hlsjs:{listeners:["hlsLevelSwitch","hlsError"]},hlsQualities:[{level:0,label:"200p"},{level:1,label:"360p"},{level:2,label:"480p"},{level:3,label:"720p"}],fullscreen:!0,native_fullscreen:!1,key:"$648022312067082",poster:config.cdnUrls+currentContent.content.thumbnail,brand:{showOnOrigin:!0,text:" "},clip:{sources:[{type:"application/x-mpegurl",src:t.media.url},{type:"application/vnd.apple.mpegurl",src:t.media.url}]},hlsjs:{maxBufferLength:3,maxMaxBufferLength:3,maxBufferSize:5,capLevelToPlayerSize:!0,fragLoadingTimeOut:1e4,fragLoadingMaxRetry:3,safari:!0}}),uiRender.controlsBar.show();!function(){e.fplayer.load({sources:[{type:"application/x-mpegurl",src:t.media.url},{type:"application/vnd.apple.mpegurl",src:t.media.url}]})}(),e.fplayer.one("firstPlaySetting",function(n,t){var o=e(".fp-player .fp-engine")[0];e(o).attr("playsinline",""),e(o).attr("webkit-playsinline",""),e(o).css("top","0px"),"ios"==deviceType?(e.fplayer.volume(1),e.fplayer.mute(!1),o.volume=1,o.muted=!1):(e.fplayer.volume(0),e.fplayer.mute(!0),o.volume=0,o.muted=!0),"off"!=limeta.getUrlParam("menu")&&limeta.replaceUrlParam("menu_after_click","on"),limeta.replaceUrlParam("menu","off"),t()}),e.fplayer.one("firstPlayByClick",function(n,t){e.fplayer.one("resume",function(){vlog.gaTag("vod",EmPlayerEvent.CLICK_PLAY)});var o=!1,r=function(n){if("touchend"!=n.type||1!=o){var r=e(".fp-player .fp-engine")[0];if(e.fplayer.volume(1),e.fplayer.mute(!1),r.volume=1,r.muted=!1,0==t){litvplayer.setViewportState(!0),litvplayer.play(),litvplayer.getPlayer().setStart();var a=r.play();a?a.then(l).catch(function(){}):l()}else"undefined"!=typeof IntersectionObserver&&(litvplayer.getPlayer().viewableHandle(),l())}},l=function(){clipCount=-1,"on"==limeta.getUrlParam("menu_after_click")&&(limeta.removeUrlParam("menu_after_click"),limeta.removeUrlParam("menu")),e(".flowplayer").removeClass("is-splash"),e(".flowplayer").off("touchend click",r)},a=function(){o=!0},i=function(){o=!1};e(".flowplayer").addClass("is-splash"),e(".flowplayer").off("touchend click",r),e(".flowplayer").off("touchmove",a),e(".flowplayer").off("touchstart",i),e(".flowplayer").on("touchmove",a),e(".flowplayer").on("touchstart",i),e(".flowplayer").on("touchend click",r)}),e.fplayer.on("ready",e.fpCallback.onReady).on("pause",e.fpCallback.onPause).on("resume",e.fpCallback.onResume).on("seek",e.fpCallback.onSeek).on("volume",e.fpCallback.onVolume).on("error",e.fpCallback.onError).on("beforeseek",e.fpCallback.onBeforeSeek).on("finish",e.fpCallback.onFinish).on("fullscreen",e.fpCallback.onFullscreen).one("fullscreen",e.fpCallback.onFullscreenReport).on("fullscreen-exit",e.fpCallback.onFullscreenExit).on("progress",e.fpCallback.onCurrentTimeChange).on("hlsLevelSwitch",e.fpCallback.onHlsLevelSwitch).on("hlsError",e.fpCallback.onHlsError),litvplayer.onPlayerLoaded()},play:function(){0==i&&(i=!0,vlog.gaTag("vod",EmPlayerEvent.VOD_IMPRESSION)),a||(a=!0,vlog.gaTag("vod",EmPlayerEvent.FIRST_IMPRESSION)),e.fplayer.play()},pause:function(){e.fplayer.pause()},pauseAfterReady:function(){e.fplayer.one("ready.adplaying",function(){e.fplayer.pause()})},resume:function(){e.fplayer.resume()},isPaused:function(){return e.fplayer.paused},stop:function(){e.fplayer.stop()},seek:function(n){e.fplayer.seek(n)},getCurrentTime:function(){return e.fplayer.video.time?e.fplayer.video.time:0},closeAd:function(e){},getDuration:function(){return e.fplayer.video.duration?e.fplayer.video.duration:0},displayAd:function(n){"image"!=n.mediaType&&(debug&&console.log("displayAd",n),litvplayer.getPlayed("keep"),o=e.fplayer.video.time,litvplayer.setAdPlaying(!0),e("#fp-ad-counter").text(n.duration),e(".flowplayer").addClass("is-ad"),""!=n.clickUrl&&"#"!=n.clickUrl&&e(".fp-videoad").on("click",function(){debug&&console.log("ads-click"),window.open(n.clickUrl,"_blank"),n.onClickFn()}),e.fplayer.disable(!0),n.onStartFn(),e.fplayer.load({sources:[{type:n.type,src:n.url}]}),e.fplayer.on("progress.ad",function(t,o,r){debug&&console.log("ad timechange",r);var l=o.video.duration||0;e("#fp-ad-counter").text(Math.floor(l-r)),void 0!==n.onCurrentTimeChangeFn&&n.onCurrentTimeChangeFn(r)}),e.fplayer.one("finish.ad",function(){debug&&console.log("ad finished"),e(".flowplayer").removeClass("is-ad"),e(".fp-videoad").off("click"),e.fplayer.off("progress.ad"),e.fplayer.disable(!1),n.onCompleteFn(),e.fplayer.load({sources:[{type:"application/x-mpegurl",src:t.media.url},{type:"application/vnd.apple.mpegurl",src:t.media.url}]}),e.fplayer.one("ready.closead",function(){debug&&console.log("ready.closead"),litvplayer.setAdPlaying(!1),e.fplayer.seek(o)})}))},setUrl:function(n,t){i=!1,e.fplayer.load({sources:[{type:"application/x-mpegurl",src:n},{type:"application/vnd.apple.mpegurl",src:n}],autoplay:t})},setMute:function(n){e.fplayer.mute(n)},setVolume:function(n){debug&&console.warn("setVolume",typeof n,n),e.fplayer.volume(n)},getVolume:function(){return debug&&console.warn("getVolume",e.fplayer.volumeLevel),e.fplayer.volumeLevel},getApi:function(){return e.fplayer},toggleFullscreen:function(){e.fplayer.fullscreen()},setStart:function(){debug&&console.log("onReady",arguments),onQualitySelectorMenu(),onPlayerReadyCallback(),adHandler.clickPlay(),litvplayer.onPlayerReady(),e.fplayer.on("ready",function(e,n){n.paused||0==litvplayer.isAdPlaying()&&litvplayer.onPlayerReady()})},viewableHandle:function(){var t=null;n(document.body,function(){if(0!=clipCount){litvplayer.setViewportState(!0),litvplayer.play();var n=litvplayer.getPlayer().getCurrentTime();t=setTimeout(function(){0==e.fplayer.paused&&Math.abs(n-litvplayer.getPlayer().getCurrentTime())<.5&&(e.fplayer.pause(),setTimeout(e.fplayer.play))},1e3),litvplayer.getPlayerReadyState()||litvplayer.getPlayer().setStart()}},function(){0!=clipCount&&(debug&&console.log("hidden"),clearTimeout(t),litvplayer.setViewportState(!1),0==litvplayer.isFullscreen()&&litvplayer.pause())},.2)}}),e.extend(this,s),this}}(jQuery);var litvplayer=new LiTVPlayer;window.onload=function(){function e(n){document[hidden]||(document.removeEventListener(visibilityChange,e),mainInit())}document[hidden]?document.addEventListener(visibilityChange,e):mainInit()};
window.jQuery&&function(e){e.extend({xml2json:function(n,t){function l(n,a){if(!n)return null;var o="",i=null,c=null;n.nodeType,r(n.localName||n.nodeName),n.text||n.nodeValue||"";n.childNodes&&n.childNodes.length>0&&e.each(n.childNodes,function(e,n){var t=n.nodeType,a=r(n.localName||n.nodeName),c=n.text||n.nodeValue||"";if(8!=t)if(3!=t&&4!=t&&a)i=i||{},i[a]?(i[a].length||(i[a]=u(i[a])),i[a]=u(i[a]),i[a][i[a].length]=l(n,!0),i[a].length=i[a].length):i[a]=l(n);else{if(c.match(/^\s+$/))return;o+=c.replace(/^\s+/,"").replace(/\s+$/,"")}}),n.attributes&&n.attributes.length>0&&(c={},i=i||{},e.each(n.attributes,function(e,n){var t=r(n.name),l=n.value;c[t]=l,i[t]?(i[cnn]=u(i[cnn]),i[t][i[t].length]=l,i[t].length=i[t].length):i[t]=l})),i&&(i=e.extend(""!=o?new String(o):{},i||{}),o=i.text?[i.text||""].concat([o]):o,o&&(i.text=o),o="");var d=i||o;return t&&(o&&(d={}),o=d.text||o||"",o&&(d.text=o),a||(d=u(d))),d}if(!n)return{};var r=function(e){return String(e||"").replace(/-/g,"_")},u=function(n){return e.isArray(n)||(n=[n]),n.length=n.length,n};if("string"==typeof n&&(n=e.text2xml(n)),n.nodeType){if(3==n.nodeType||4==n.nodeType)return n.nodeValue;var a=9==n.nodeType?n.documentElement:n,o=l(a,!0);return n=null,a=null,o}},text2xml:function(n){return e.parseXML(n)}})}(jQuery);
/* Copyright (c) 2016 comScore, Inc. packageName 0.1601.07
 * All rights reserved.
 * By using this software, you are agreeing to be bound by the
 * terms of these policies: http://www.comscore.com/About_comScore/Privacy_Policy
 */
!function(a,b){"function"==typeof define&&define.amd?define([],function(){return a.ns_=b(a.ns_)}):"object"==typeof module&&module.exports?module.exports=b():a.ns_=b(a.ns_)}(this,function(a){a=a||{},a.ns_=a;var b={uid:function(){var a=1;return function(){return+new Date+"_"+a++}}(),filter:function(a,b){var c={};for(var d in b)b.hasOwnProperty(d)&&a(b[d])&&(c[d]=b[d]);return c},extend:function(a){var b,c=arguments.length;a=a||{};for(var d=1;c>d;d++)if(b=arguments[d])for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);return a},getString:function(a,b){var c=String(a);return null==a?b||"na":c},getLong:function(a,b){var c=Number(a);return null==a||isNaN(c)?b||0:c},getInteger:function(a,b){var c=Number(parseInt(a));return null==a||isNaN(c)?b||0:c},getBoolean:function(a,b){var c="true"==String(a).toLowerCase();return null==a?b||!1:c},isNotEmpty:function(a){return!this.isEmpty(a)},isEmpty:function(a){return void 0===a||null===a||""===a||a instanceof Array&&0===a.length},indexOf:function(a,b){var c=-1;return this.forEach(b,function(b,d){b==a&&(c=d)}),c},forEach:function(a,b,c){try{if("function"==typeof b)if(c="undefined"!=typeof c?c:null,"number"!=typeof a.length||"undefined"==typeof a[0]){var d="undefined"!=typeof a.__proto__;for(var e in a)a.hasOwnProperty(e)&&(!d||d&&"undefined"==typeof a.__proto__[e])&&"function"!=typeof a[e]&&b.call(c,a[e],e)}else for(var f=0,g=a.length;g>f;f++)b.call(c,a[f],f)}catch(h){}},regionMatches:function(a,b,c,d,e){if(0>b||0>d||b+e>a.length||d+e>c.length)return!1;for(;--e>=0;){var f=a.charAt(b++),g=c.charAt(d++);if(f!=g)return!1}return!0},size:function(a){var b=0;for(var c in a)a.hasOwnProperty(c)&&b++;return b},log:function(a,b){if("undefined"!=typeof b&&b&&"undefined"!=typeof console&&console){var c=new Date,d=c.getHours()+":"+c.getMinutes()+":"+c.getSeconds();console.log(d,a)}},isTrue:function(a){return"undefined"==typeof a?!1:"string"==typeof a?(a=a.toLowerCase(),"true"===a||"1"===a||"on"===a):!!a},toString:function(a){if("undefined"==typeof a)return"undefined";if("string"==typeof a)return a;if("[object Array]"===Object.prototype.toString.call(a))return a.join(",");if(this.size(a)>0){var b="";for(var c in a)a.hasOwnProperty(c)&&(b+=c+":"+a[c]+";");return b}return a.toString()},exists:function(a){return"undefined"!=typeof a&&null!=a},firstGreaterThan0:function(){for(var a=0,b=arguments.length;b>a;a++){var c=arguments[a];if(c>0)return c}return 0},cloneObject:function(a){if(null==a||"object"!=typeof a)return a;var b=function(){function a(){}function b(b){return"object"==typeof b?(a.prototype=b,new a):b}function c(a){for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b])}function d(){this.copiedObjects=[];var a=this;this.recursiveDeepCopy=function(b){return a.deepCopy(b)},this.depth=0}function e(a,b){var c=new d;return b&&(c.maxDepth=b),c.deepCopy(a)}function f(a){return"undefined"!=typeof window&&window&&window.Node?a instanceof Node:"undefined"!=typeof document&&a===document?!0:"number"==typeof a.nodeType&&a.attributes&&a.childNodes&&a.cloneNode}var g=[];return c.prototype={constructor:c,canCopy:function(){return!1},create:function(a){},populate:function(a,b,c){}},d.prototype={constructor:d,maxDepth:256,cacheResult:function(a,b){this.copiedObjects.push([a,b])},getCachedResult:function(a){for(var b=this.copiedObjects,c=b.length,d=0;c>d;d++)if(b[d][0]===a)return b[d][1]},deepCopy:function(a){if(null===a)return null;if("object"!=typeof a)return a;var b=this.getCachedResult(a);if(b)return b;for(var c=0;c<g.length;c++){var d=g[c];if(d.canCopy(a))return this.applyDeepCopier(d,a)}throw new Error("Unable to clone the following object "+a)},applyDeepCopier:function(a,b){var c=a.create(b);if(this.cacheResult(b,c),this.depth++,this.depth>this.maxDepth)throw new Error("Maximum recursion depth exceeded.");return a.populate(this.recursiveDeepCopy,b,c),this.depth--,c}},e.DeepCopier=c,e.deepCopiers=g,e.register=function(a){a instanceof c||(a=new c(a)),g.unshift(a)},e.register({canCopy:function(){return!0},create:function(a){return a instanceof a.constructor?b(a.constructor.prototype):{}},populate:function(a,b,c){for(var d in b)b.hasOwnProperty(d)&&(c[d]=a(b[d]));return c}}),e.register({canCopy:function(a){return a instanceof Array},create:function(a){return new a.constructor},populate:function(a,b,c){for(var d=0;d<b.length;d++)c.push(a(b[d]));return c}}),e.register({canCopy:function(a){return a instanceof Date},create:function(a){return new Date(a)}}),e.register({canCopy:function(a){return f(a)},create:function(a){return"undefined"!=typeof document&&a===document?document:a.cloneNode(!1)},populate:function(a,b,c){if("undefined"!=typeof document&&b===document)return document;if(b.childNodes&&b.childNodes.length)for(var d=0;d<b.childNodes.length;d++){var e=a(b.childNodes[d]);c.appendChild(e)}}}),{deepCopy:e}}();return b.deepCopy(a)},safeGet:function(a,b){return b=this.exists(b)?b:"",this.exists(a)?a:b},getBrowserName:function(){if(!navigator)return"";var a,b,c=navigator.userAgent||"",d=navigator.appName||"";return-1!=(b=c.indexOf("Opera"))||-1!=(b=c.indexOf("OPR/"))?d="Opera":-1!=(b=c.indexOf("Android"))?d="Android":-1!=(b=c.indexOf("Chrome"))?d="Chrome":-1!=(b=c.indexOf("Safari"))?d="Safari":-1!=(b=c.indexOf("Firefox"))?d="Firefox":-1!=(b=c.indexOf("IEMobile"))?d="Internet Explorer Mobile":"Microsoft Internet Explorer"==d||"Netscape"==d?d="Internet Explorer":(a=c.lastIndexOf(" ")+1)<(b=c.lastIndexOf("/"))?(d=c.substring(a,b),d.toLowerCase()==d.toUpperCase()&&(d=navigator.appName)):d="unknown",d},getBrowserFullVersion:function(){if(!navigator)return"";var a,b,c,d,e=navigator.userAgent||"",f=navigator.appName||"",g=navigator.appVersion?""+parseFloat(navigator.appVersion):"";return-1!=(b=e.indexOf("Opera"))?(g=e.substring(b+6),-1!=(b=e.indexOf("Version"))&&(g=e.substring(b+8))):-1!=(b=e.indexOf("OPR/"))?g=e.substring(b+4):-1!=(b=e.indexOf("Android"))?g=e.substring(b+11):-1!=(b=e.indexOf("Chrome"))?g=e.substring(b+7):-1!=(b=e.indexOf("Safari"))?(g=e.substring(b+7),-1!=(b=e.indexOf("Version"))&&(g=e.substring(b+8))):-1!=(b=e.indexOf("Firefox"))?g=e.substring(b+8):"Microsoft Internet Explorer"==f?(d=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})"),null!=d.exec(e)&&(g=parseFloat(RegExp.$1))):"Netscape"==f?(d=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})"),null!=d.exec(e)&&(g=parseFloat(RegExp.$1))):g=e.lastIndexOf(" ")+1<(b=e.lastIndexOf("/"))?e.substring(b+1):"unknown",g=g.toString(),-1!=(c=g.indexOf(";"))&&(g=g.substring(0,c)),-1!=(c=g.indexOf(" "))&&(g=g.substring(0,c)),-1!=(c=g.indexOf(")"))&&(g=g.substring(0,c)),a=parseInt(""+g,10),isNaN(a)&&(g=""+parseFloat(navigator.appVersion)),g},browserAcceptsLargeURLs:function(){return"undefined"!=typeof window?(null!==window.ActiveXObject,!0):!0},getNamespace:function(){return a.ns_||a}};return a.StreamSense=a.StreamSense||function(){var c=function(){var a="cs_";return function(){var c="undefined"!=typeof localStorage?localStorage:null;b.extend(this,{get:function(b){return c&&c.getItem(a+b)},set:function(b,d){c&&c.setItem(a+b,d)},has:function(b){return c&&c.getItem(a+b)},remove:function(b){c&&c.removeItem(a+b)},clear:function(){for(var b=0;c&&b<c.length;++b){var d=c.key(b);d.substr(0,a.length)===a&&c.removeItem(d)}}})}}(),d=function(a,b){if("undefined"!=typeof Image){var c=new Image;c.onload=function(){b&&b(200),c=null},c.onerror=function(){b&&b(),c=null},c.src=a}},e=function(a,b,c){c&&"undefined"!=typeof setTimeout&&setTimeout(c,0)},f=function(){return{dir:function(){return null},append:function(a,b,c){},write:function(a,b,c){},deleteFile:function(){return!1},read:function(){return null}}}(),g=function(){return{PLATFORM:"generic",httpGet:d,httpPost:e,Storage:c,IO:f,getCrossPublisherId:function(){return null},getAppName:function(){return h.UNKNOWN_VALUE},getAppVersion:function(){return h.UNKNOWN_VALUE},getVisitorId:function(){return this.getDeviceName()+ +new Date+~~(1e3*Math.random())},getVisitorIdSuffix:function(){return"72"},getDeviceName:function(){return h.UNKNOWN_VALUE},getPlatformVersion:function(){return h.UNKNOWN_VALUE},getPlatformName:function(){return"js"},getRuntimeName:function(){return h.UNKNOWN_VALUE},getRuntimeVersion:function(){return h.UNKNOWN_VALUE},getResolution:function(){return h.UNKNOWN_VALUE},getLanguage:function(){return h.UNKNOWN_VALUE},getPackageName:function(){return null},isConnectionAvailable:function(){return!0},isCompatible:function(){return!0},autoSelect:function(){},setPlatformAPI:function(){},isCrossPublisherIdChanged:function(){return!1},setTimeout:function(a,b){return setTimeout(a,b)},clearTimeout:function(a){return clearTimeout(a)},getDeviceArchitecture:function(){return h.UNKNOWN_VALUE},getConnectionType:function(){return h.UNKNOWN_VALUE},getDeviceJailBrokenFlag:function(){return h.UNKNOWN_VALUE},isConnSecure:function(){return"s"===document.location.href.charAt(4)},processMeasurementLabels:function(){}}}(),h={UNKNOWN_VALUE:"unknown"};b.filterMap=function(a,c){for(var d in a)a.hasOwnProperty(d)&&-1==b.indexOf(d,c)&&delete a[d]},b.getKeys=function(a,b){var c,d=[];for(c in a)b&&!b.test(c)||!a.hasOwnProperty(c)||(d[d.length]=c);return d},b.getEventTime=function(a){var b=-1;return a.hasOwnProperty("ns_ts")&&(b=parseInt(a.ns_ts)),b},b.fixEventTime=function(a){var c=b.getEventTime(a);0>c&&(a.ns_ts=String(+new Date))},b.isBrowser=function(){return"undefined"!=typeof window&&"undefined"!=typeof document},b.addNewPlaybackInterval=function(a,c,d,e){var f={};if(!(d>=c))return b.cloneObject(a);if(f.start=c,f.end=d,0==a.length)return a.push(f),b.cloneObject(a);var g;for(g=0;g<a.length;g++)if(f.start>=a[g].start&&f.end<=a[g].end)return b.cloneObject(a);var h,i=!1;for(h=0;h<a.length;h++)if(h+1===a.length&&f.start>=a[h].start||f.start>=a[h].start&&f.start<a[h+1].start){a.splice(h+1,0,f),i=!0;break}i||a.splice(0,0,f);var j=[a[0]];for(g=1;g<a.length;g++)j[j.length-1].end+e<a[g].start?j.push(a[g]):j[j.length-1].end<a[g].end&&(j[j.length-1].end=a[g].end);return b.cloneObject(j)};var i=function(){var a=["play","pause","pause-on-buffering","end","buffer","buffer-stop","keep-alive","hb","custom","load","start","skstart","adskip","cta","error","trans","drmfa","drmap","drmde","bitrt","playrt","volume","window","audio","video","subs","cdn"];return{PLAY:0,PAUSE:1,PAUSE_ON_BUFFERING:2,END:3,BUFFER:4,BUFFER_STOP:5,KEEPALIVE:6,HEARTBEAT:7,CUSTOM:8,LOAD:9,START:10,SEEK_START:11,AD_SKIP:12,CTA:13,ERROR:14,TRANSFER:15,DRM_FAILED:16,DRM_APPROVED:17,DRM_DENIED:18,BIT_RATE:19,PLAYBACK_RATE:20,VOLUME:21,WINDOW_STATE:22,AUDIO:23,VIDEO:24,SUBS:25,CDN:26,toString:function(b){return a[b]}}}(),j=function(){return{IDLE:0,PLAYBACK_NOT_STARTED:1,PLAYING:2,PAUSED:3,BUFFERING_BEFORE_PLAYBACK:4,BUFFERING_DURING_PLAYBACK:5,BUFFERING_DURING_SEEKING:6,BUFFERING_DURING_PAUSE:7,SEEKING_BEFORE_PLAYBACK:8,SEEKING_DURING_PLAYBACK:9,SEEKING_DURING_BUFFERING:10,SEEKING_DURING_PAUSE:11,PAUSED_DURING_BUFFERING:12}}(),k=function(){var a=["c","s","r"];return{SINGLE_CLIP:0,SEGMENTED:1,REDUCED:2,toString:function(b){return a[b]}}}(),l={STREAMSENSE_VERSION:"5.0.2.160107",DEFAULT_PLAYERNAME:"js_api",DEFAULT_HEARTBEAT_INTERVAL:[{playingtime:6e4,interval:1e4},{playingtime:null,interval:6e4}],DEFAULT_KEEP_ALIVE_INTERVAL:12e5,DEFAULT_PAUSED_ON_BUFFERING_INTERVAL:500,C1_VALUE:"19",C10_VALUE:"js",NS_AP_C12M_VALUE:"1",NS_NC_VALUE:"1",PAGE_NAME_LABEL:"name",RESTRICTED_URL_LENGTH_LIMIT:2048,URL_LENGTH_LIMIT:4096,THROTTLING_DELAY:500,INTERVAL_MERGE_TOLERANCE:500,STANDARD_METADATA_LABELS:["ns_st_ci","ns_st_pr","ns_st_sn","ns_st_en","ns_st_ep","ns_st_ty","ns_st_ct","ns_st_li","ns_st_ad","ns_st_bn","ns_st_tb","ns_st_an","ns_st_ta","ns_st_pu","c3","c4","c6"],LABELS_ORDER:["c1","c2","ca2","cb2","cc2","cd2","ns_site","ca_ns_site","cb_ns_site","cc_ns_site","cd_ns_site","ns_vsite","ca_ns_vsite","cb_ns_vsite","cc_ns_vsite","cd_ns_vsite","ns_alias","ca_ns_alias","cb_ns_alias","cc_ns_alias","cd_ns_alias","ns_ap_an","ca_ns_ap_an","cb_ns_ap_an","cc_ns_ap_an","cd_ns_ap_an","ns_ap_pn","ns_ap_pv","c12","ca12","cb12","cc12","cd12","ns_ak","ns_ap_hw","name","ns_ap_ni","ns_ap_ec","ns_ap_ev","ns_ap_device","ns_ap_id","ns_ap_csf","ns_ap_bi","ns_ap_pfm","ns_ap_pfv","ns_ap_ver","ca_ns_ap_ver","cb_ns_ap_ver","cc_ns_ap_ver","cd_ns_ap_ver","ns_ap_sv","ns_ap_cv","ns_type","ca_ns_type","cb_ns_type","cc_ns_type","cd_ns_type","ns_radio","ns_nc","ns_ap_ui","ca_ns_ap_ui","cb_ns_ap_ui","cc_ns_ap_ui","cd_ns_ap_ui","ns_ap_gs","ns_st_sv","ns_st_pv","ns_st_smv","ns_st_it","ns_st_id","ns_st_ec","ns_st_sp","ns_st_sc","ns_st_sq","ns_st_ppc","ns_st_apc","ns_st_spc","ns_st_cn","ns_st_ev","ns_st_po","ns_st_cl","ns_st_el","ns_st_sl","ns_st_pb","ns_st_hc","ns_st_mp","ca_ns_st_mp","cb_ns_st_mp","cc_ns_st_mp","cd_ns_st_mp","ns_st_mv","ca_ns_st_mv","cb_ns_st_mv","cc_ns_st_mv","cd_ns_st_mv","ns_st_pn","ns_st_tp","ns_st_ad","ns_st_li","ns_st_ci","ns_st_si","ns_st_pt","ns_st_dpt","ns_st_ipt","ns_st_et","ns_st_det","ns_st_upc","ns_st_dupc","ns_st_iupc","ns_st_upa","ns_st_dupa","ns_st_iupa","ns_st_lpc","ns_st_dlpc","ns_st_lpa","ns_st_dlpa","ns_st_pa","ns_ap_jb","ns_ap_et","ns_ap_res","ns_ap_sd","ns_ap_po","ns_ap_ot","ns_ap_c12m","cs_c12u","ca_cs_c12u","cb_cs_c12u","cc_cs_c12u","cd_cs_c12u","ns_ap_install","ns_ap_updated","ns_ap_lastrun","ns_ap_cs","ns_ap_runs","ns_ap_usage","ns_ap_fg","ns_ap_ft","ns_ap_dft","ns_ap_bt","ns_ap_dbt","ns_ap_dit","ns_ap_as","ns_ap_das","ns_ap_it","ns_ap_uc","ns_ap_aus","ns_ap_daus","ns_ap_us","ns_ap_dus","ns_ap_ut","ns_ap_oc","ns_ap_uxc","ns_ap_uxs","ns_ap_lang","ns_ap_ar","ns_ap_miss","ns_ts","ns_st_ca","ns_st_cp","ns_st_er","ca_ns_st_er","cb_ns_st_er","cc_ns_st_er","cd_ns_st_er","ns_st_pe","ns_st_ui","ca_ns_st_ui","cb_ns_st_ui","cc_ns_st_ui","cd_ns_st_ui","ns_st_bc","ns_st_dbc","ns_st_bt","ns_st_dbt","ns_st_bp","ns_st_lt","ns_st_skc","ns_st_dskc","ns_st_ska","ns_st_dska","ns_st_skd","ns_st_skt","ns_st_dskt","ns_st_pc","ns_st_dpc","ns_st_pp","ns_st_br","ns_st_pbr","ns_st_rt","ns_st_prt","ns_st_ub","ns_st_vo","ns_st_pvo","ns_st_ws","ns_st_pws","ns_st_ki","ns_st_rp","ns_st_bn","ns_st_tb","ns_st_an","ns_st_ta","ns_st_pl","ns_st_pr","ns_st_sn","ns_st_en","ns_st_ep","ns_st_sr","ns_st_ty","ns_st_ct","ns_st_cs","ns_st_ge","ns_st_st","ns_st_dt","ns_st_ddt","ns_st_tdt","ns_st_tm","ns_st_dtm","ns_st_ttm","ns_st_de","ns_st_pu","ns_st_cu","ns_st_fee","ns_st_at","ns_st_pat","ns_st_vt","ns_st_pvt","ns_st_tt","ns_st_ptt","ns_st_cdn","ns_st_pcdn","ns_ap_i1","ns_ap_i2","ns_ap_i3","ns_ap_i4","ns_ap_i5","ns_ap_i6","ns_ap_referrer","ns_clid","ns_campaign","ns_source","ns_mchannel","ns_linkname","ns_fee","gclid","utm_campaign","utm_source","utm_medium","utm_term","utm_content","ns_ecommerce","ns_ev_sv","ns_client_id","ns_order_id","ns_ec_cur","ns_orderline_id","ns_orderlines","ns_prod_id","ns_qty","ns_prod_price","ns_prod_grp","ns_brand","ns_shop","ns_category","category","ns_c","ns_search_term","ns_search_result","ns_m_exp","ns_m_chs","c3","ca3","cb3","cc3","cd3","c4","ca4","cb4","cc4","cd4","c5","ca5","cb5","cc5","cd5","c6","ca6","cb6","cc6","cd6","c10","c11","c13","c14","c15","c16","c7","c8","c9","ns_ap_er"]},m=function(){return function(){function a(){var a,b,c=0;for(a=0;a<o.length;a++)c+=Math.abs(o[a].end-o[a].start);K.setUniquePlaybackInterval(c);var d=0;for(a=0;a<o.length;a++)b=Math.abs(o[a].end-o[a].start),b>d&&(d=b);K.setLongestPlaybackInterval(d);var e=0;for(a=0;a<p.length;a++)e+=Math.abs(p[a].end-p[a].start);K.setAssetUniquePlaybackInterval(e);var f=0;for(a=0;a<p.length;a++)b=Math.abs(p[a].end-p[a].start),b>f&&(f=b);K.setAssetLongestPlaybackInterval(f)}var c,d,e,f,g,h,i,j,k,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K=this,L=l.INTERVAL_MERGE_TOLERANCE;b.extend(this,{reset:function(a){G={},G.ns_st_pt="0",G.ns_st_bt="0",G.ns_st_bc="0",G.ns_st_pc="0",G.ns_st_sq="0",G.ns_st_cl="0",G.ns_st_pn="1",G.ns_st_tp="1",G.ns_st_skc="0",G.ns_st_et="0",G.ns_st_cn="1",G.ns_st_spc="0",G.ns_st_sc="0",G.ns_st_apc="0",G.ns_st_ska="0",G.ns_st_skd="0",G.ns_st_skt="0",G.ns_st_upc="0",G.ns_st_lpc="0",G.ns_st_upa="0",G.ns_st_lpa="0",G.ns_st_ub="0",G.ns_st_br="0",x=-1,y=0,k=-1,m=0,f=-1,h=0,g=-1,i=0,H=0,I=0,B=0,A=-1,D=!1,j=0,E=0,F=0,J=0,q=-1,e=!1,c=null,n=0,z=!1,C=0,o=[],p=[],r=0,s=0,v=0,t=0,u=0,w=0,d=!1,null!=a&&a.length>0&&K.setLabels(a)},getHash:function(){return c},setHash:function(a){c=a},setPlaybackIntervalMergeTolerance:function(a){L=a},getPlaybackIntervalMergeTolerance:function(){return L},setLabels:function(a){null!=a&&b.extend(G,a)},getLabels:function(){return G},setLabel:function(a,b){var c={};c[a]=b,K.setLabels(c)},getLabel:function(a){return G[a]},getClipNumber:function(){return parseInt(K.getLabel("ns_st_cn"))},setClipNumber:function(a){K.setLabel("ns_st_cn",String(a))},getPartNumber:function(){return parseInt(K.getLabel("ns_st_pn"))},createLabels:function(a){var c=a||{};c.ns_st_dbt=String(K.getBufferingTime()-y),y=K.getBufferingTime(),c.ns_st_det=String(K.getElapsedTime()-m),m=K.getElapsedTime(),c.ns_st_dupc=String(K.getUniquePlaybackInterval()-r),r=K.getUniquePlaybackInterval(),parseInt(c.ns_st_dupc)<0&&(c.ns_st_dupc="0");var d;d=b.exists(c.ns_st_upc)?parseInt(c.ns_st_upc):K.getUniquePlaybackInterval(),c.ns_st_iupc=String(d-s),s=d,parseInt(c.ns_st_iupc)<0&&(c.ns_st_iupc="0"),c.ns_st_dupa=String(K.getAssetUniquePlaybackInterval()-t),t=K.getAssetUniquePlaybackInterval(),parseInt(c.ns_st_dupa)<0&&(c.ns_st_dupa="0");var f;f=b.exists(c.ns_st_upa)?parseInt(c.ns_st_upa):K.getAssetUniquePlaybackInterval(),c.ns_st_iupa=String(f-u),u=f,parseInt(c.ns_st_iupa)<0&&(c.ns_st_iupa="0"),c.ns_st_dlpc=String(K.getLongestPlaybackInterval()-v),v=K.getLongestPlaybackInterval(),parseInt(c.ns_st_dlpc)<0&&(c.ns_st_dlpc="0"),c.ns_st_dlpa=String(K.getAssetLongestPlaybackInterval()-w),w=K.getAssetLongestPlaybackInterval(),parseInt(c.ns_st_dlpa)<0&&(c.ns_st_dlpa="0");var g;return g=b.exists(c.ns_st_pt)?parseInt(c.ns_st_pt):K.getPlaybackTime(),c.ns_st_ipt=String(g-i),i=g,c.ns_st_dpt=String(K.getPlaybackTime()-h),h=K.getPlaybackTime(),c.ns_st_dpc=String(K.getPauses()-H),H=K.getPauses(),c.ns_st_dskc=String(K.getSeeks()-I),I=K.getSeeks(),c.ns_st_dbc=String(K.getBuffers()-J),J=K.getBuffers(),c.ns_st_dskt=String(K.getSeekingTime()-B),B=K.getSeekingTime(),c.ns_st_dska=String(K.getSeekingAmount()-E),E=K.getSeekingAmount(),b.extend(c,K.getLabels()),K.setSeekingDirection(0),e||(delete c.ns_st_spc,delete c.ns_st_apc,0===parseInt(c.ns_st_sc)&&(c.ns_st_sc="1")),c},getVideoTrack:function(){return K.getLabel("ns_st_vt")},setVideoTrack:function(a){K.setLabel("ns_st_vt",String(a))},getAudioTrack:function(){return K.getLabel("ns_st_at")},setAudioTrack:function(a){K.setLabel("ns_st_at",String(a))},getSubtitleTrack:function(){return K.getLabel("ns_st_tt")},setSubtitleTrack:function(a){K.setLabel("ns_st_tt",String(a))},getCDN:function(){return K.getLabel("ns_st_cdn")},setCDN:function(a){K.setLabel("ns_st_cdn",String(a))},getClipPlaybackIntervals:function(){return o},setClipPlaybackIntervals:function(a){o=a},getAssetPlaybackIntervals:function(){return p},getUniquePlaybackInterval:function(){return parseInt(K.getLabel("ns_st_upc"))},getAssetUniquePlaybackInterval:function(){return parseInt(K.getLabel("ns_st_upa"))},setAssetUniquePlaybackInterval:function(a){K.setLabel("ns_st_upa",String(a))},setUniquePlaybackInterval:function(a){K.setLabel("ns_st_upc",String(a))},getLongestPlaybackInterval:function(){return parseInt(K.getLabel("ns_st_lpc"))},setLongestPlaybackInterval:function(a){K.setLabel("ns_st_lpc",String(a))},getAssetLongestPlaybackInterval:function(){return parseInt(K.getLabel("ns_st_lpa"))},setAssetLongestPlaybackInterval:function(a){K.setLabel("ns_st_lpa",String(a))},incrementPauses:function(){K.setLabel("ns_st_pc",String(K.getPauses()+1))},incrementSeeks:function(){K.setLabel("ns_st_skc",String(K.getSeeks()+1))},incrementPlayCounter:function(){K.setLabel("ns_st_sq",String(parseInt(K.getLabel("ns_st_sq"))+1))},getBufferingTime:function(){return parseInt(K.getLabel("ns_st_bt"))},setBufferingTime:function(a){K.setLabel("ns_st_bt",String(a))},addBufferingTime:function(a){if(x>=0){var b=K.getBufferingTime();b+=a-x,K.setBufferingTime(b),x=-1}},setPlaybackStartPosition:function(a){q=parseInt(a)},getPlaybackStartPosition:function(){return q},addInterval:function(c){q>=0&&parseInt(c)>=0&&(o=b.addNewPlaybackInterval(o,q,c,L),p=b.addNewPlaybackInterval(p,q,c,L),a(),q=-1)},getElapsedTime:function(){return parseInt(K.getLabel("ns_st_et"))},setElapsedTime:function(a){K.setLabel("ns_st_et",String(a))},addElapsedTime:function(a){if(k>=0){var b=K.getElapsedTime();b+=a-k,K.setElapsedTime(b),k=-1}},getElapsedTimestamp:function(){return k},setElapsedTimestamp:function(a){k=a},addPlaybackTime:function(a){if(f>0){var b=K.getPlaybackTime();b+=a-f,K.setPlaybackTime(b),f=-1}},getPlaybackTime:function(){return parseInt(K.getLabel("ns_st_pt"))},getExpectedPlaybackPosition:function(a){return f>0&&(j+=a-f),j},setPlaybackTimeOffset:function(a){j=a},getPlaybackTimeOffset:function(){return j},setPlaybackTime:function(a){K.setLabel("ns_st_pt",String(a))},getPlaybackTimestamp:function(){return f},setPlaybackTimestamp:function(a){f=a},setPreviousPlaybackTime:function(a){h=a},setPreviousPlaybackTimestamp:function(a){g=a},getBufferingTimestamp:function(){return x},setBufferingTimestamp:function(a){x=a},getPauses:function(){return parseInt(K.getLabel("ns_st_pc"))},setPauses:function(a){K.setLabel("ns_st_pc",String(a))},getSeeks:function(){return parseInt(K.getLabel("ns_st_skc"))},setSeeks:function(a){K.setLabel("ns_st_skc",String(a))},setSeeking:function(a){z=a},isSeeking:function(){return z},setCollectingSeekingTime:function(a){D=a},isCollectingSeekingTime:function(){return D},setClipStarted:function(a){d=a},isClipStarted:function(){return d},setPlaybackStarted:function(a){e=a},isPlaybackStarted:function(){return e},setSeekingTimestamp:function(a){A=a},getSeekingTimestamp:function(){return A},addSeekingTime:function(a){if(A>0){var b=K.getSeekingTime();b+=a-A,K.setSeekingTime(b),A=-1}},getSeekingTime:function(){return parseInt(K.getLabel("ns_st_skt"))},setSeekingTime:function(a){K.setLabel("ns_st_skt",String(a))},setSeekingTimeBeforeEnd:function(a){F=a},getSeekingTimeBeforeEnd:function(){return F},setSeekStartPosition:function(a){C=a},getSeekStartPosition:function(){return C},setSeekingAmount:function(a){K.setLabel("ns_st_ska",String(a))},getSeekingAmount:function(){return parseInt(K.getLabel("ns_st_ska"))},addSeekingAmount:function(a){var b=K.getSeekingAmount();b+=Math.abs(a-C),K.setSeekingAmount(b);var c;C==a?c=0:C>a?c=-1:a>C&&(c=1),K.setSeekingDirection(c),C=0},getSeekingDirection:function(){return parseInt(K.getLabel("ns_st_skd"))},setSeekingDirection:function(a){K.setLabel("ns_st_skd",String(a))},resetClipLifecycleLabels:function(){G.ns_st_pt="0",h=0,i=0,G.ns_st_bt="0",y=0,G.ns_st_bc="0",J=0,G.ns_st_pc="0",H=0,G.ns_st_sq="0",G.ns_st_upa="0",t=0,u=0,G.ns_st_et="0",m=0,G.ns_st_lpa="0",w=0,G.ns_st_skt="0",B=0,G.ns_st_ska="0",E=0,G.ns_st_skc="0",I=0},incrementSegmentPlaybackCounter:function(){K.setLabel("ns_st_spc",String(K.getSegmentPlaybackCounter()+1))},incrementClipLoadCounter:function(){K.setLabel("ns_st_sc",String(K.getClipLoadCounter()+1))},incrementAssetPlaybackCounter:function(){K.setLabel("ns_st_apc",String(K.getAssetPlaybackCounter()+1))},setPreviousUniquePlaybackInterval:function(a){r=a},setPreviousEventIndependentUniquePlaybackInterval:function(a){s=a},setPreviousLongestPlaybackInterval:function(a){v=a},resetAssetPlaybackCounters:function(){p=[],K.setAssetUniquePlaybackInterval(0),t=0,u=0,K.setAssetLongestPlaybackInterval(0),w=0},setSegmentPlaybackCounter:function(a){K.setLabel("ns_st_spc",String(a))},setClipLoadCounter:function(a){K.setLabel("ns_st_sc",String(a))},setAssetPlaybackCounter:function(a){K.setLabel("ns_st_apc",String(a))},setLowestPartNumberPlayed:function(a){n=a},getSegmentPlaybackCounter:function(){return parseInt(K.getLabel("ns_st_spc"))},getClipLoadCounter:function(){return parseInt(K.getLabel("ns_st_sc"))},getAssetPlaybackCounter:function(){return parseInt(K.getLabel("ns_st_apc"))},getLowestPartNumberPlayed:function(){return n},getBuffers:function(){return parseInt(K.getLabel("ns_st_bc"))},incrementBufferCount:function(){K.setLabel("ns_st_bc",String(K.getBuffers()+1))},getPreviousBufferingTime:function(){return y}}),K.reset()}}(),n=function(){return function(){var a,c,d,e,f,g,h,i,j=this;b.extend(this,{reset:function(j){e={},e.ns_st_bp="0",e.ns_st_pa="0",e.ns_st_pp="0",e.ns_st_sp="1",e.ns_st_id=String(+new Date),e.ns_st_ppc="0",c=-1,d=-1,g=[],h=0,f=!1,i=!1,null!=j&&j.length>0&&b.extend(e,j),a.reset(j)},hashExists:function(a){return null!=g[a]},storeHash:function(a){g[a]={}},removeHash:function(a){delete g[a]},storeClipPlaybackCounters:function(){for(var c in g)if(g.hasOwnProperty(c)&&g[c].clipNumber===a.getClipNumber()){b.extend(g[c],{segmentPlaybackCounter:a.getSegmentPlaybackCounter(),clipLoadCounter:a.getClipLoadCounter(),assetPlaybackCounter:a.getAssetPlaybackCounter(),lowestPartNumberPlayed:a.getLowestPartNumberPlayed(),seeking:a.isSeeking(),seekingTimeBeforeEnd:a.getSeekingTimeBeforeEnd(),seekingStartPosition:a.getSeekStartPosition(),clipPlaybackIntervals:a.getClipPlaybackIntervals(),uniquePlaybackInterval:a.getUniquePlaybackInterval(),longestPlaybackInterval:a.getLongestPlaybackInterval(),videoTrack:a.getVideoTrack(),audioTrack:a.getAudioTrack(),subtitleTrack:a.getSubtitleTrack(),cdn:a.getCDN()});break}},getStoredClipRegisters:function(a){return g[a]},getClipNumber:function(a){return g[a].clipNumber},getMaxClipNumber:function(){return h},storeClipNumber:function(a,b){g[a].clipNumber=b,b>h&&(h=b)},setLabels:function(a){null!=a&&b.extend(e,a)},getLabels:function(){return e},setLabel:function(a,b){var c={};c[a]=b,j.setLabels(c)},getLabel:function(a){return e[a]},getClip:function(){return a},createLabels:function(c){var d=c||{};return i||(d.ns_st_pb=null!=d.ns_st_pb?d.ns_st_pb:"1",i=!0),b.extend(d,j.getLabels()),a.isPlaybackStarted()||delete d.ns_st_ppc,d},incrementPlayCounter:function(){j.setLabel("ns_st_sp",String(parseInt(j.getLabel("ns_st_sp"))+1))},incrementPauses:function(){j.setLabel("ns_st_pp",String(j.getPauses()+1))},addPlaybackTime:function(a){if(d>=0){var b=j.getPlaybackTime();b+=a-d,j.setPlaybackTime(b),d=-1}},addBufferingTime:function(a){if(c>=0){var b=j.getBufferingTime();b+=a-c,j.setBufferingTime(b),c=-1}},getBufferingTime:function(){return parseInt(j.getLabel("ns_st_bp"))},setBufferingTime:function(a){j.setLabel("ns_st_bp",String(a))},getPlaybackTime:function(){return parseInt(j.getLabel("ns_st_pa"))},setBufferingTimestamp:function(a){c=a},getBufferingTimestamp:function(){return c},setPlaybackTime:function(a){j.setLabel("ns_st_pa",String(a))},setPlaybackTimestamp:function(a){d=a},getPlaybackTimestamp:function(){return d},getPauses:function(){return parseInt(j.getLabel("ns_st_pp"))},setPauses:function(a){j.setLabel("ns_st_pp",String(a))},isPlaylistStarted:function(){return f},setPlaylistStarted:function(a){f=a},getPlaybackCounter:function(){return parseInt(j.getLabel("ns_st_ppc"))},incrementPlaybackCounter:function(){j.setLabel("ns_st_ppc",String(j.getPlaybackCounter()+1))}}),a=new m,j.reset()}}(),o=function(){return function(a){function c(){g=1}function d(c){h=b.extend({},c);var d=a.getPixelURL();if(a.getAppCore()){if(!a.isNotProperlyInitialized()){var e=a.getExports().am,f=a.getExports().et,g=e.newApplicationMeasurement(a.getAppCore(),f.HIDDEN,c,d);a.getAppCore().getQueue().offer(g)}}else d&&a.getPlatformAPI().httpGet(a.prepareUrl(d,c))}function e(){h=null}function f(){var c,d;1==arguments.length?(c=null,d=arguments[0]):(c=arguments[0],d=arguments[1]);var e={};if("undefined"!=typeof document){var f=document;e.c7=f.URL,e.c8=f.title,e.c9=f.referrer}return null!=d&&b.extend(e,d),e.ns_ts=null!=e.ns_ts?e.ns_ts:String(+new Date),e.ns_st_ev=null!=e.ns_st_ev?e.ns_st_ev:i.toString(c),e.ns_st_mp=null!=e.ns_st_mp?e.ns_st_mp:a.getMediaPlayerName(),e.ns_st_mv=null!=e.ns_st_mv?e.ns_st_mv:a.getMediaPlayerVersion(),e.ns_st_ub=null!=e.ns_st_ub?e.ns_st_ub:"0",e.ns_st_br=null!=e.ns_st_br?e.ns_st_br:"0",e.ns_st_pn=null!=e.ns_st_pn?e.ns_st_pn:"1",e.ns_st_tp=null!=e.ns_st_tp?e.ns_st_tp:"1",e.ns_st_it=null!=e.ns_st_it?e.ns_st_it:k.toString(k.SINGLE_CLIP),e.ns_st_sv=null!=e.ns_st_sv?e.ns_st_sv:l.STREAMSENSE_VERSION,e.ns_type=null!=e.ns_type?e.ns_type:"hidden",e.ns_st_ec=null!=e.ns_st_ec?e.ns_st_ec:String(g),e.ns_st_po=null!=e.ns_st_po?e.ns_st_po:String(a.getPlaylist().getClip().getExpectedPlaybackPosition(b.getEventTime(e))),e.ns_st_ki=null!=e.ns_st_ki?e.ns_st_ki:String(a.getKeepAlive().getInterval()),a.getPlaylist().createLabels(e),a.getPlaylist().getClip().createLabels(e),b.extend(e,a.getLabels()),e}var g,h,j=this;b.extend(this,{newEvent:function(a,c){var e=f(a,c);b.extend(e,c),d(e),a!=i.HEARTBEAT&&j.incrementEventCounter()},getEventCounter:function(){return g},incrementEventCounter:function(){g++},setEventCounter:function(a){g=a},getMeasurementSnapshot:function(){return h},reset:function(){c(),e()}}),j.reset()}}(),p=function(){return function(a){function c(){h++;var c={};b.fixEventTime(c);var d=b.getEventTime(c);c.ns_st_po=String(a.getPlaylist().getClip().getPlaybackTimeOffset()+(d-a.getPlaylist().getClip().getPlaybackTimestamp())),c.ns_st_pa=String(a.getPlaylist().getPlaybackTime()+(d-a.getPlaylist().getPlaybackTimestamp())),c.ns_st_pt=String(a.getPlaylist().getClip().getPlaybackTime()+(d-a.getPlaylist().getClip().getPlaybackTimestamp())),c.ns_st_dpt=String(d-a.getPlaylist().getClip().getPlaybackTimestamp()),a.getStateMachine().getCurrentState()==j.BUFFERING_DURING_PLAYBACK?(c.ns_st_bp=String(a.getPlaylist().getBufferingTime()+(d-a.getPlaylist().getBufferingTimestamp())),c.ns_st_bt=String(a.getPlaylist().getClip().getBufferingTime()+(d-a.getPlaylist().getClip().getBufferingTimestamp())),c.ns_st_dbt=String(d-a.getPlaylist().getClip().getBufferingTimestamp())):c.ns_st_dbt=String(a.getPlaylist().getClip().getBufferingTime()-a.getPlaylist().getClip().getPreviousBufferingTime()),c.ns_st_et=String(a.getPlaylist().getClip().getElapsedTime()+(d-a.getPlaylist().getClip().getElapsedTimestamp())),c.ns_st_det=String(d-a.getPlaylist().getClip().getElapsedTimestamp());var e=b.cloneObject(a.getPlaylist().getClip().getClipPlaybackIntervals()),g=b.cloneObject(a.getPlaylist().getClip().getAssetPlaybackIntervals());e=b.addNewPlaybackInterval(e,a.getPlaylist().getClip().getPlaybackStartPosition(),parseInt(c.ns_st_po),a.getPlaylist().getClip().getPlaybackIntervalMergeTolerance()),g=b.addNewPlaybackInterval(g,a.getPlaylist().getClip().getPlaybackStartPosition(),parseInt(c.ns_st_po),a.getPlaylist().getClip().getPlaybackIntervalMergeTolerance());var l,m,n=0;for(l=0;l<e.length;l++)n+=Math.abs(e[l].end-e[l].start);c.ns_st_upc=String(n),c.ns_st_dupc=String(n-a.getPlaylist().getClip().getUniquePlaybackInterval());var o=0;for(l=0;l<e.length;l++)m=Math.abs(e[l].end-e[l].start),m>o&&(o=m);c.ns_st_lpc=String(o),c.ns_st_dlpc=String(o-a.getPlaylist().getClip().getLongestPlaybackInterval());var p=0;for(l=0;l<g.length;l++)p+=Math.abs(g[l].end-g[l].start);c.ns_st_upa=String(p),c.ns_st_dupa=String(p-a.getPlaylist().getClip().getAssetUniquePlaybackInterval());var q=0;for(l=0;l<g.length;l++)m=Math.abs(g[l].end-g[l].start),m>q&&(q=m);c.ns_st_lpa=String(q),c.ns_st_dlpa=String(q-a.getPlaylist().getClip().getAssetLongestPlaybackInterval()),c.ns_st_hc=String(a.getHeartbeat().getCount()),a.getEventManager().newEvent(i.HEARTBEAT,c),f=0,k.resume()}function d(){null!=e&&(a.getPlatformAPI().clearTimeout(e),e=null)}var e,f,g,h,k=this,m=l.DEFAULT_HEARTBEAT_INTERVAL;b.extend(this,{getCount:function(){return h},setIntervals:function(a){m=a},getInterval:function(a){var b=0;if(null!=m)for(var c=0;c<m.length;c++){var d=m[c],e=d.playingtime;if(!e||e>a){b=d.interval;break}}return b},resume:function(){d();var b=k.getInterval(a.getPlaylist().getClip().getPlaybackTime()+(+new Date-a.getPlaylist().getClip().getPlaybackTimestamp()));if(b>0){var g=f>0?f:b;e=a.getPlatformAPI().setTimeout(c,g)}f=0},pause:function(){d();var b=k.getInterval(a.getPlaylist().getClip().getPlaybackTime()+(+new Date-a.getPlaylist().getClip().getPlaybackTimestamp()));f=b-(a.getPlaylist().getClip().getPlaybackTime()+(+new Date-a.getPlaylist().getClip().getPlaybackTimestamp()))%b;
},reset:function(){d(),f=0,g=0,h=0}}),k.reset()}}(),q=function(){return function(a){function c(){var c={};b.fixEventTime(c);var d=b.getEventTime(c);c.ns_st_po=String(a.getPlaylist().getClip().getExpectedPlaybackPosition(d)),a.getPlaylist().addPlaybackTime(d),a.getPlaylist().setPlaybackTimestamp(d),a.getPlaylist().getClip().addPlaybackTime(d),a.getPlaylist().getClip().setPlaybackTimestamp(d),a.getStateMachine().getCurrentState()==j.BUFFERING_DURING_PLAYBACK&&(a.getPlaylist().addBufferingTime(d),a.getPlaylist().setBufferingTimestamp(d),a.getPlaylist().getClip().addBufferingTime(d),a.getPlaylist().getClip().setBufferingTimestamp(d)),a.getPlaylist().getClip().addElapsedTime(d),a.getPlaylist().getClip().setElapsedTimestamp(d),a.getPlaylist().getClip().addInterval(parseInt(c.ns_st_po)),a.getPlaylist().getClip().setPlaybackStartPosition(parseInt(c.ns_st_po)),a.getEventManager().newEvent(i.KEEPALIVE,c),f.resume()}function d(){null!=e&&(a.getPlatformAPI().clearTimeout(e),e=null)}var e,f=this,g=l.DEFAULT_KEEP_ALIVE_INTERVAL;b.extend(this,{resume:function(){d(),e=a.getPlatformAPI().setTimeout(c,g)},setInterval:function(a){g=a},getInterval:function(){return g},reset:function(){d()}})}}(),r=function(){return function(a){function c(a){return a==j.PLAYING||a==j.PAUSED}function d(){e(),q=a.getPlatformAPI().setTimeout(function(){var a={};b.fixEventTime(a),y.transitionTo(i.PAUSE_ON_BUFFERING,y.eventTypeToState(i.PAUSE_ON_BUFFERING),a)},z)}function e(){null!=q&&(a.getPlatformAPI().clearTimeout(q),q=null)}function f(){n&&(a.getPlatformAPI().clearTimeout(n),n=null)}function g(c,f,g,k){var l=b.getEventTime(g);c==i.AD_SKIP&&!g.hasOwnProperty("ns_st_ui")&&h(c)?g.ns_st_ui="skip":c==i.SEEK_START&&!g.hasOwnProperty("ns_st_ui")&&h(c)&&(g.ns_st_ui="seek"),(y.getCurrentState()==j.PLAYBACK_NOT_STARTED||y.getCurrentState()==j.PAUSED||y.getCurrentState()==j.SEEKING_BEFORE_PLAYBACK||y.getCurrentState()==j.SEEKING_DURING_PLAYBACK||y.getCurrentState()==j.SEEKING_DURING_BUFFERING||y.getCurrentState()==j.SEEKING_DURING_PAUSE)&&c==i.BUFFER&&(a.getPlaylist().setBufferingTimestamp(l),a.getPlaylist().getClip().setBufferingTimestamp(l)),(y.getCurrentState()==j.PAUSED||y.getCurrentState()==j.BUFFERING_DURING_PAUSE)&&c==i.SEEK_START&&(a.getPlaylist().getClip().isSeeking()?a.getPlaylist().getClip().isCollectingSeekingTime()||(a.getPlaylist().getClip().setSeekingTimestamp(l),a.getPlaylist().getClip().setCollectingSeekingTime(!0)):a.getPlaylist().getClip().incrementSeeks(),a.getPlaylist().getClip().isSeeking()||(a.getPlaylist().getClip().setSeeking(!0),a.getPlaylist().getClip().setCollectingSeekingTime(!0),a.getPlaylist().getClip().setSeekStartPosition(f),a.getPlaylist().getClip().setSeekingTimestamp(l))),(y.getCurrentState()==j.SEEKING_DURING_BUFFERING||y.getCurrentState()==j.SEEKING_DURING_PAUSE)&&c==i.PLAY&&(a.getPlaylist().getClip().isSeeking()&&(a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().addSeekingTime(l),a.getPlaylist().getClip().setCollectingSeekingTime(!1)),a.getPlaylist().getClip().addSeekingAmount(f),a.getPlaylist().getClip().setSeeking(!1)),a.getPlaylist().getClip().incrementPlayCounter(),a.getPlaylist().setPlaybackTimestamp(l),a.getPlaylist().getClip().setPlaybackTimestamp(l),a.getPlaylist().getClip().addElapsedTime(l),a.getPlaylist().getClip().setElapsedTimestamp(l),a.getPlaylist().getClip().setPlaybackStartPosition(f),a.getHeartbeat().resume(),a.getKeepAlive().resume(),a.getEventManager().newEvent(i.PLAY,g)),(y.getCurrentState()==j.BUFFERING_DURING_SEEKING||y.getCurrentState()==j.BUFFERING_DURING_PAUSE)&&c==i.BUFFER_STOP&&(a.getPlaylist().addBufferingTime(l),a.getPlaylist().getClip().addBufferingTime(l)),(y.getCurrentState()==j.SEEKING_DURING_PLAYBACK||y.getCurrentState()==j.SEEKING_DURING_PAUSE)&&c==i.PAUSE&&a.getPlaylist().getClip().isSeeking()&&a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().addSeekingTime(l),a.getPlaylist().getClip().setCollectingSeekingTime(!1)),(y.getCurrentState()==j.SEEKING_DURING_BUFFERING||y.getCurrentState()==j.SEEKING_DURING_PAUSE)&&(c==i.END||c==i.AD_SKIP)&&(a.getHeartbeat().reset(),a.getKeepAlive().reset(),a.getPlaylist().getClip().addElapsedTime(l),a.getEventManager().newEvent(i.END,g),a.getPlaylist().getClip().isSeeking()&&a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().setSeekingTimeBeforeEnd(l-a.getPlaylist().getClip().getSeekingTimestamp()),a.getPlaylist().getClip().setCollectingSeekingTime(!1)),a.getPlaylist().storeClipPlaybackCounters(),a.getPlaylist().getClip().resetClipLifecycleLabels(),a.getPlaylist().getClip().setPlaybackStarted(!1),g.hasOwnProperty("ns_st_pe")&&"0"!==String(g.hasOwnProperty("ns_st_pe"))&&a.getPlaylist().reset()),(y.getCurrentState()==j.SEEKING_DURING_BUFFERING||y.getCurrentState()==j.SEEKING_DURING_PAUSE)&&c==i.BUFFER_STOP&&a.getPlaylist().getClip().isSeeking()&&a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().addSeekingTime(l),a.getPlaylist().getClip().setCollectingSeekingTime(!1)),y.getCurrentState()==j.IDLE?c==i.BUFFER?(a.getPlaylist().getClip().setSeekingTime(a.getPlaylist().getClip().getSeekingTimeBeforeEnd()),a.getPlaylist().setBufferingTimestamp(l),a.getPlaylist().getClip().setBufferingTimestamp(l)):c==i.SEEK_START?(a.getPlaylist().getClip().setSeekingTime(a.getPlaylist().getClip().getSeekingTimeBeforeEnd()),a.getPlaylist().getClip().incrementSeeks(),a.getPlaylist().getClip().setSeeking(!0),a.getPlaylist().getClip().setCollectingSeekingTime(!0),a.getPlaylist().getClip().setSeekStartPosition(f),a.getPlaylist().getClip().setSeekingTimestamp(l)):c==i.PLAY&&(a.getPlaylist().getClip().setSeekingTime(a.getPlaylist().getClip().getSeekingTimeBeforeEnd()),a.getPlaylist().getClip().isSeeking()&&(a.getPlaylist().getClip().addSeekingAmount(f),a.getPlaylist().getClip().setSeeking(!1)),a.getPlaylist().isPlaylistStarted()||(a.getPlaylist().setPlaylistStarted(!0),a.getPlaylist().incrementPlaybackCounter()),a.getPlaylist().getClip().setClipStarted(!0),a.getPlaylist().getClip().setPlaybackStarted(!0),a.getPlaylist().getClip().incrementSegmentPlaybackCounter(),(0==a.getPlaylist().getClip().getLowestPartNumberPlayed()||parseInt(a.getPlaylist().getClip().getLabels().ns_st_pn)<=a.getPlaylist().getClip().getLowestPartNumberPlayed())&&(a.getPlaylist().getClip().setLowestPartNumberPlayed(parseInt(a.getPlaylist().getClip().getLabels().ns_st_pn)),a.getPlaylist().getClip().incrementAssetPlaybackCounter(),a.getPlaylist().getClip().resetAssetPlaybackCounters()),a.getPlaylist().getClip().incrementPlayCounter(),a.getPlaylist().setPlaybackTimestamp(l),a.getPlaylist().getClip().setPlaybackTimestamp(l),a.getPlaylist().getClip().setElapsedTimestamp(l),a.getPlaylist().getClip().setPlaybackStartPosition(f),w||(g.ns_st_lt=String(v+(+new Date-u)),w=!0),a.getHeartbeat().resume(),a.getKeepAlive().resume(),a.getEventManager().newEvent(i.PLAY,g)):y.getCurrentState()==j.PLAYBACK_NOT_STARTED?c==i.END||c==i.AD_SKIP?(a.getPlaylist().getClip().isSeeking()&&a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().setSeekingTimeBeforeEnd(l-a.getPlaylist().getClip().getSeekingTimestamp()),a.getPlaylist().getClip().setCollectingSeekingTime(!1)),a.getPlaylist().storeClipPlaybackCounters(),a.getPlaylist().getClip().resetClipLifecycleLabels(),a.getPlaylist().getClip().setPlaybackStarted(!1),g.hasOwnProperty("ns_st_pe")&&"0"!==String(g.hasOwnProperty("ns_st_pe"))&&a.getPlaylist().reset()):c==i.SEEK_START?(a.getPlaylist().getClip().isSeeking()?a.getPlaylist().getClip().setSeekingTimestamp(l):a.getPlaylist().getClip().incrementSeeks(),a.getPlaylist().getClip().isSeeking()||(a.getPlaylist().getClip().setSeeking(!0),a.getPlaylist().getClip().setCollectingSeekingTime(!0),a.getPlaylist().getClip().setSeekStartPosition(f),a.getPlaylist().getClip().setSeekingTimestamp(l))):c==i.PLAY&&(a.getPlaylist().getClip().isSeeking()&&(a.getPlaylist().getClip().addSeekingAmount(f),a.getPlaylist().getClip().setSeeking(!1)),a.getPlaylist().isPlaylistStarted()||(a.getPlaylist().setPlaylistStarted(!0),a.getPlaylist().incrementPlaybackCounter()),a.getPlaylist().getClip().setClipStarted(!0),a.getPlaylist().getClip().setPlaybackStarted(!0),a.getPlaylist().getClip().incrementSegmentPlaybackCounter(),(0==a.getPlaylist().getClip().getLowestPartNumberPlayed()||parseInt(a.getPlaylist().getClip().getLabels().ns_st_pn)<=a.getPlaylist().getClip().getLowestPartNumberPlayed())&&(a.getPlaylist().getClip().setLowestPartNumberPlayed(parseInt(a.getPlaylist().getClip().getLabels().ns_st_pn)),a.getPlaylist().getClip().incrementAssetPlaybackCounter(),a.getPlaylist().getClip().resetAssetPlaybackCounters()),a.getPlaylist().getClip().incrementPlayCounter(),a.getPlaylist().setPlaybackTimestamp(l),a.getPlaylist().getClip().setPlaybackTimestamp(l),a.getPlaylist().getClip().setElapsedTimestamp(l),a.getPlaylist().getClip().setPlaybackStartPosition(f),w||(g.ns_st_lt=String(v+(+new Date-u)),w=!0),a.getHeartbeat().resume(),a.getKeepAlive().resume(),a.getEventManager().newEvent(i.PLAY,g)):y.getCurrentState()==j.PLAYING?c==i.END||c==i.AD_SKIP?(a.getHeartbeat().reset(),a.getKeepAlive().reset(),a.getPlaylist().addPlaybackTime(l),a.getPlaylist().getClip().addPlaybackTime(l),a.getPlaylist().getClip().addElapsedTime(l),a.getPlaylist().getClip().addInterval(f),a.getEventManager().newEvent(i.END,g),a.getPlaylist().getClip().resetClipLifecycleLabels(),a.getPlaylist().getClip().setPlaybackStarted(!1),g.hasOwnProperty("ns_st_pe")&&"0"!==String(g.hasOwnProperty("ns_st_pe"))&&a.getPlaylist().reset()):c==i.BUFFER?(r&&d(),a.getPlaylist().getClip().incrementBufferCount(),a.getPlaylist().setBufferingTimestamp(l),a.getPlaylist().getClip().setBufferingTimestamp(l)):c==i.SEEK_START?(a.getHeartbeat().pause(),a.getKeepAlive().reset(),a.getPlaylist().addPlaybackTime(l),a.getPlaylist().getClip().addPlaybackTime(l),a.getPlaylist().getClip().addElapsedTime(l),a.getPlaylist().getClip().setElapsedTimestamp(l),a.getPlaylist().getClip().addInterval(f),a.getPlaylist().getClip().incrementSeeks(),a.getPlaylist().getClip().setSeeking(!0),a.getPlaylist().getClip().setCollectingSeekingTime(!0),a.getPlaylist().getClip().setSeekStartPosition(f),a.getPlaylist().getClip().setSeekingTimestamp(l),a.getPlaylist().incrementPauses(),a.getPlaylist().getClip().incrementPauses(),a.getEventManager().newEvent(i.PAUSE,g)):c==i.PAUSE&&(a.getHeartbeat().pause(),a.getKeepAlive().reset(),a.getPlaylist().addPlaybackTime(l),a.getPlaylist().getClip().addPlaybackTime(l),a.getPlaylist().getClip().addElapsedTime(l),a.getPlaylist().getClip().setElapsedTimestamp(l),a.getPlaylist().getClip().addInterval(f),a.getPlaylist().incrementPauses(),a.getPlaylist().getClip().incrementPauses(),a.getEventManager().newEvent(i.PAUSE,g)):y.getCurrentState()==j.PAUSED?c==i.END||c==i.AD_SKIP?(a.getHeartbeat().reset(),a.getKeepAlive().reset(),a.getPlaylist().getClip().addElapsedTime(l),a.getEventManager().newEvent(i.END,g),a.getPlaylist().getClip().isSeeking()&&a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().setSeekingTimeBeforeEnd(l-a.getPlaylist().getClip().getSeekingTimestamp()),a.getPlaylist().getClip().setSeeking(!1)),a.getPlaylist().storeClipPlaybackCounters(),a.getPlaylist().getClip().resetClipLifecycleLabels(),a.getPlaylist().getClip().setPlaybackStarted(!1),g.hasOwnProperty("ns_st_pe")&&"0"!==String(g.hasOwnProperty("ns_st_pe"))&&a.getPlaylist().reset()):c==i.PLAY&&(a.getPlaylist().getClip().isSeeking()&&(a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().addSeekingTime(l),a.getPlaylist().getClip().setCollectingSeekingTime(!1)),a.getPlaylist().getClip().addSeekingAmount(f),a.getPlaylist().getClip().setSeeking(!1)),a.getPlaylist().getClip().incrementPlayCounter(),a.getPlaylist().setPlaybackTimestamp(l),a.getPlaylist().getClip().setPlaybackTimestamp(l),a.getPlaylist().getClip().addElapsedTime(l),a.getPlaylist().getClip().setElapsedTimestamp(l),a.getPlaylist().getClip().setPlaybackStartPosition(f),a.getHeartbeat().resume(),a.getKeepAlive().resume(),a.getEventManager().newEvent(i.PLAY,g)):y.getCurrentState()==j.BUFFERING_BEFORE_PLAYBACK?c==i.END||c==i.AD_SKIP?(a.getPlaylist().addBufferingTime(l),a.getPlaylist().getClip().addBufferingTime(l),a.getPlaylist().getClip().isSeeking()&&a.getPlaylist().getClip().isCollectingSeekingTime()&&a.getPlaylist().getClip().setSeekingTimeBeforeEnd(l-a.getPlaylist().getClip().getSeekingTimestamp()),a.getPlaylist().getClip().resetClipLifecycleLabels(),a.getPlaylist().getClip().setPlaybackStarted(!1),g.hasOwnProperty("ns_st_pe")&&"0"!==String(g.hasOwnProperty("ns_st_pe"))&&a.getPlaylist().reset()):c==i.BUFFER_STOP?(a.getPlaylist().addBufferingTime(l),a.getPlaylist().getClip().addBufferingTime(l),a.getPlaylist().getClip().isSeeking()&&a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().addSeekingTime(l),a.getPlaylist().getClip().setCollectingSeekingTime(!1))):c==i.SEEK_START?(a.getPlaylist().addBufferingTime(l),a.getPlaylist().getClip().addBufferingTime(l),a.getPlaylist().getClip().isSeeking()?a.getPlaylist().getClip().isCollectingSeekingTime()||(a.getPlaylist().getClip().setSeekingTimestamp(l),a.getPlaylist().getClip().setCollectingSeekingTime(!0)):a.getPlaylist().getClip().incrementSeeks(),a.getPlaylist().getClip().isSeeking()||(a.getPlaylist().getClip().setSeeking(!0),a.getPlaylist().getClip().setCollectingSeekingTime(!0),a.getPlaylist().getClip().setSeekStartPosition(f),a.getPlaylist().getClip().setSeekingTimestamp(l))):c==i.PAUSE?(a.getPlaylist().addBufferingTime(l),a.getPlaylist().getClip().addBufferingTime(l),a.getPlaylist().getClip().isSeeking()&&a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().addSeekingTime(l),a.getPlaylist().getClip().setCollectingSeekingTime(!1))):c==i.PLAY&&(a.getPlaylist().addBufferingTime(l),a.getPlaylist().getClip().addBufferingTime(l),a.getPlaylist().getClip().isSeeking()&&(a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().addSeekingTime(l),a.getPlaylist().getClip().setCollectingSeekingTime(!1)),a.getPlaylist().getClip().addSeekingAmount(f),a.getPlaylist().getClip().setSeeking(!1)),a.getPlaylist().isPlaylistStarted()||(a.getPlaylist().setPlaylistStarted(!0),a.getPlaylist().incrementPlaybackCounter()),a.getPlaylist().getClip().setClipStarted(!0),a.getPlaylist().getClip().setPlaybackStarted(!0),a.getPlaylist().getClip().incrementSegmentPlaybackCounter(),(0==a.getPlaylist().getClip().getLowestPartNumberPlayed()||parseInt(a.getPlaylist().getClip().getLabels().ns_st_pn)<=a.getPlaylist().getClip().getLowestPartNumberPlayed())&&(a.getPlaylist().getClip().setLowestPartNumberPlayed(parseInt(a.getPlaylist().getClip().getLabels().ns_st_pn)),a.getPlaylist().getClip().incrementAssetPlaybackCounter(),a.getPlaylist().getClip().resetAssetPlaybackCounters()),a.getPlaylist().getClip().incrementPlayCounter(),a.getPlaylist().setPlaybackTimestamp(l),a.getPlaylist().getClip().setPlaybackTimestamp(l),a.getPlaylist().getClip().setElapsedTimestamp(l),a.getPlaylist().getClip().setPlaybackStartPosition(f),w||(g.ns_st_lt=String(v+(+new Date-u)),w=!0),a.getHeartbeat().resume(),a.getKeepAlive().resume(),a.getEventManager().newEvent(i.PLAY,g)):y.getCurrentState()==j.BUFFERING_DURING_PLAYBACK?c==i.PAUSE_ON_BUFFERING?(e(),a.getHeartbeat().pause(),a.getKeepAlive().reset(),a.getPlaylist().addPlaybackTime(l),a.getPlaylist().getClip().addPlaybackTime(l),a.getPlaylist().getClip().addElapsedTime(l),a.getPlaylist().getClip().setElapsedTimestamp(l),a.getPlaylist().getClip().addInterval(f),a.getPlaylist().addBufferingTime(l),a.getPlaylist().getClip().addBufferingTime(l),a.getPlaylist().incrementPauses(),a.getPlaylist().getClip().incrementPauses(),a.getEventManager().newEvent(i.PAUSE,g),a.getPlaylist().setBufferingTimestamp(l),a.getPlaylist().getClip().setBufferingTimestamp(l)):c==i.BUFFER_STOP?(a.getPlaylist().addBufferingTime(l),a.getPlaylist().getClip().addBufferingTime(l)):c==i.END||c==i.AD_SKIP?(a.getHeartbeat().reset(),a.getKeepAlive().reset(),e(),a.getPlaylist().addBufferingTime(l),a.getPlaylist().getClip().addBufferingTime(l),a.getPlaylist().getClip().addPlaybackTime(l),a.getPlaylist().getClip().addElapsedTime(l),a.getPlaylist().getClip().addInterval(f),a.getEventManager().newEvent(i.END,g),a.getPlaylist().getClip().resetClipLifecycleLabels(),a.getPlaylist().getClip().setPlaybackStarted(!1),g.hasOwnProperty("ns_st_pe")&&"0"!==String(g.hasOwnProperty("ns_st_pe"))&&a.getPlaylist().reset()):c==i.SEEK_START?(e(),a.getPlaylist().addPlaybackTime(l),a.getPlaylist().getClip().addPlaybackTime(l),a.getPlaylist().getClip().addElapsedTime(l),a.getPlaylist().getClip().setElapsedTimestamp(l),a.getPlaylist().getClip().addInterval(f),a.getPlaylist().addBufferingTime(l),a.getPlaylist().getClip().addBufferingTime(l),a.getPlaylist().getClip().incrementSeeks(),a.getPlaylist().getClip().setSeeking(!0),a.getPlaylist().getClip().setCollectingSeekingTime(!0),a.getPlaylist().getClip().setSeekStartPosition(f),a.getPlaylist().getClip().setSeekingTimestamp(l),a.getPlaylist().incrementPauses(),a.getPlaylist().getClip().incrementPauses(),a.getEventManager().newEvent(i.PAUSE,g)):c==i.PAUSE?(e(),a.getPlaylist().addPlaybackTime(l),a.getPlaylist().getClip().addPlaybackTime(l),a.getPlaylist().getClip().addElapsedTime(l),a.getPlaylist().getClip().setElapsedTimestamp(l),a.getPlaylist().getClip().addInterval(f),a.getPlaylist().addBufferingTime(l),a.getPlaylist().getClip().addBufferingTime(l),a.getPlaylist().incrementPauses(),a.getPlaylist().getClip().incrementPauses(),a.getEventManager().newEvent(i.PAUSE,g)):c==i.PLAY&&(e(),a.getPlaylist().addBufferingTime(l),a.getPlaylist().getClip().addBufferingTime(l)):y.getCurrentState()==j.BUFFERING_DURING_SEEKING?c==i.END||c==i.AD_SKIP?(a.getHeartbeat().reset(),a.getKeepAlive().reset(),e(),a.getPlaylist().addBufferingTime(l),a.getPlaylist().getClip().addBufferingTime(l),a.getPlaylist().getClip().addElapsedTime(l),a.getEventManager().newEvent(i.END,g),a.getPlaylist().getClip().isSeeking()&&a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().setSeekingTimeBeforeEnd(l-a.getPlaylist().getClip().getSeekingTimestamp()),a.getPlaylist().getClip().setCollectingSeekingTime(!1)),a.getPlaylist().storeClipPlaybackCounters(),a.getPlaylist().getClip().resetClipLifecycleLabels(),a.getPlaylist().getClip().setPlaybackStarted(!1),g.hasOwnProperty("ns_st_pe")&&"0"!==String(g.hasOwnProperty("ns_st_pe"))&&a.getPlaylist().reset()):c==i.PAUSE?(a.getPlaylist().addBufferingTime(l),a.getPlaylist().getClip().addBufferingTime(l),a.getPlaylist().incrementPauses(),a.getPlaylist().getClip().incrementPauses(),a.getPlaylist().getClip().isSeeking()&&a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().addSeekingTime(l),a.getPlaylist().getClip().setCollectingSeekingTime(!1))):c==i.PLAY&&(a.getPlaylist().addBufferingTime(l),a.getPlaylist().getClip().addBufferingTime(l),a.getPlaylist().getClip().isSeeking()&&(a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().addSeekingTime(l),a.getPlaylist().getClip().setCollectingSeekingTime(!1)),a.getPlaylist().getClip().addSeekingAmount(f),a.getPlaylist().getClip().setSeeking(!1)),a.getPlaylist().getClip().incrementPlayCounter(),a.getPlaylist().setPlaybackTimestamp(l),a.getPlaylist().getClip().setPlaybackTimestamp(l),a.getPlaylist().getClip().addElapsedTime(l),a.getPlaylist().getClip().setElapsedTimestamp(l),a.getPlaylist().getClip().setPlaybackStartPosition(f),a.getHeartbeat().resume(),a.getKeepAlive().resume(),a.getEventManager().newEvent(i.PLAY,g)):y.getCurrentState()==j.BUFFERING_DURING_PAUSE?c==i.END||c==i.AD_SKIP?(a.getHeartbeat().reset(),a.getKeepAlive().reset(),a.getPlaylist().addBufferingTime(l),a.getPlaylist().getClip().addBufferingTime(l),a.getPlaylist().getClip().addElapsedTime(l),a.getEventManager().newEvent(i.END,g),a.getPlaylist().getClip().isSeeking()&&a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().setSeekingTimeBeforeEnd(l-a.getPlaylist().getClip().getSeekingTimestamp()),a.getPlaylist().getClip().setCollectingSeekingTime(!1)),a.getPlaylist().storeClipPlaybackCounters(),a.getPlaylist().getClip().resetClipLifecycleLabels(),a.getPlaylist().getClip().setPlaybackStarted(!1),g.hasOwnProperty("ns_st_pe")&&"0"!==String(g.hasOwnProperty("ns_st_pe"))&&a.getPlaylist().reset()):c==i.PAUSE?(a.getPlaylist().addBufferingTime(l),a.getPlaylist().getClip().addBufferingTime(l)):c==i.PLAY&&(a.getPlaylist().addBufferingTime(l),a.getPlaylist().getClip().addBufferingTime(l),a.getPlaylist().getClip().isSeeking()&&(a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().addSeekingTime(l),a.getPlaylist().getClip().setCollectingSeekingTime(!1)),a.getPlaylist().getClip().addSeekingAmount(f),a.getPlaylist().getClip().setSeeking(!1)),a.getPlaylist().getClip().incrementPlayCounter(),a.getPlaylist().setPlaybackTimestamp(l),a.getPlaylist().getClip().setPlaybackTimestamp(l),a.getPlaylist().getClip().addElapsedTime(l),a.getPlaylist().getClip().setElapsedTimestamp(l),a.getPlaylist().getClip().setPlaybackStartPosition(f),a.getHeartbeat().resume(),a.getKeepAlive().resume(),a.getEventManager().newEvent(i.PLAY,g)):y.getCurrentState()==j.SEEKING_BEFORE_PLAYBACK?c==i.END||c==i.AD_SKIP?(a.getPlaylist().getClip().isSeeking()&&a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().setSeekingTimeBeforeEnd(l-a.getPlaylist().getClip().getSeekingTimestamp()),a.getPlaylist().getClip().setCollectingSeekingTime(!1)),a.getPlaylist().storeClipPlaybackCounters(),a.getPlaylist().getClip().resetClipLifecycleLabels(),a.getPlaylist().getClip().setPlaybackStarted(!1),g.hasOwnProperty("ns_st_pe")&&"0"!==String(g.hasOwnProperty("ns_st_pe"))&&a.getPlaylist().reset()):c==i.PAUSE?a.getPlaylist().getClip().isSeeking()&&a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().addSeekingTime(l),a.getPlaylist().getClip().setCollectingSeekingTime(!1)):c==i.PLAY&&(a.getPlaylist().getClip().isSeeking()&&(a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().addSeekingTime(l),a.getPlaylist().getClip().setCollectingSeekingTime(!1)),a.getPlaylist().getClip().addSeekingAmount(f),a.getPlaylist().getClip().setSeeking(!1)),a.getPlaylist().isPlaylistStarted()||(a.getPlaylist().setPlaylistStarted(!0),a.getPlaylist().incrementPlaybackCounter()),a.getPlaylist().getClip().setClipStarted(!0),a.getPlaylist().getClip().setPlaybackStarted(!0),a.getPlaylist().getClip().incrementSegmentPlaybackCounter(),(0==a.getPlaylist().getClip().getLowestPartNumberPlayed()||parseInt(a.getPlaylist().getClip().getLabels().ns_st_pn)<=a.getPlaylist().getClip().getLowestPartNumberPlayed())&&(a.getPlaylist().getClip().setLowestPartNumberPlayed(parseInt(a.getPlaylist().getClip().getLabels().ns_st_pn)),a.getPlaylist().getClip().incrementAssetPlaybackCounter(),a.getPlaylist().getClip().resetAssetPlaybackCounters()),a.getPlaylist().getClip().incrementPlayCounter(),a.getPlaylist().setPlaybackTimestamp(l),a.getPlaylist().getClip().setPlaybackTimestamp(l),a.getPlaylist().getClip().setElapsedTimestamp(l),a.getPlaylist().getClip().setPlaybackStartPosition(f),w||(g.ns_st_lt=String(v+(+new Date-u)),w=!0),a.getHeartbeat().resume(),a.getKeepAlive().resume(),a.getEventManager().newEvent(i.PLAY,g)):y.getCurrentState()==j.SEEKING_DURING_PLAYBACK?c==i.END||c==i.AD_SKIP?(a.getHeartbeat().reset(),a.getKeepAlive().reset(),a.getPlaylist().getClip().addElapsedTime(l),a.getEventManager().newEvent(i.END,g),a.getPlaylist().getClip().isSeeking()&&a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().setSeekingTimeBeforeEnd(l-a.getPlaylist().getClip().getSeekingTimestamp()),a.getPlaylist().getClip().setCollectingSeekingTime(!1)),a.getPlaylist().storeClipPlaybackCounters(),a.getPlaylist().getClip().resetClipLifecycleLabels(),a.getPlaylist().getClip().setPlaybackStarted(!1),g.hasOwnProperty("ns_st_pe")&&"0"!==String(g.hasOwnProperty("ns_st_pe"))&&a.getPlaylist().reset()):c==i.PLAY&&(a.getPlaylist().getClip().isSeeking()&&(a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().addSeekingTime(l),a.getPlaylist().getClip().setCollectingSeekingTime(!1)),a.getPlaylist().getClip().addSeekingAmount(f),a.getPlaylist().getClip().setSeeking(!1)),a.getPlaylist().getClip().incrementPlayCounter(),a.getPlaylist().setPlaybackTimestamp(l),a.getPlaylist().getClip().setPlaybackTimestamp(l),a.getPlaylist().getClip().addElapsedTime(l),a.getPlaylist().getClip().setElapsedTimestamp(l),a.getPlaylist().getClip().setPlaybackStartPosition(f),w||(g.ns_st_lt=String(v+(+new Date-u)),w=!0),a.getHeartbeat().resume(),a.getKeepAlive().resume(),a.getEventManager().newEvent(i.PLAY,g)):y.getCurrentState()==j.SEEKING_DURING_BUFFERING?c==i.PAUSE&&(a.getPlaylist().incrementPauses(),a.getPlaylist().getClip().incrementPauses(),a.getPlaylist().getClip().isSeeking()&&a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().addSeekingTime(l),a.getPlaylist().getClip().setCollectingSeekingTime(!1))):y.getCurrentState()==j.PAUSED_DURING_BUFFERING&&(c==i.END||c==i.AD_SKIP?(a.getHeartbeat().reset(),a.getKeepAlive().reset(),a.getPlaylist().addBufferingTime(l),a.getPlaylist().getClip().addBufferingTime(l),a.getPlaylist().getClip().addElapsedTime(l),a.getEventManager().newEvent(i.END,g),a.getPlaylist().getClip().isSeeking()&&a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().setSeekingTimeBeforeEnd(l-a.getPlaylist().getClip().getSeekingTimestamp()),a.getPlaylist().getClip().setCollectingSeekingTime(!1)),a.getPlaylist().storeClipPlaybackCounters(),a.getPlaylist().getClip().resetClipLifecycleLabels(),a.getPlaylist().getClip().setPlaybackStarted(!1),g.hasOwnProperty("ns_st_pe")&&"0"!==String(g.hasOwnProperty("ns_st_pe"))&&a.getPlaylist().reset()):c==i.BUFFER_STOP?(a.getPlaylist().addBufferingTime(l),a.getPlaylist().getClip().addBufferingTime(l),a.getPlaylist().setPlaybackTimestamp(l),a.getPlaylist().getClip().setPlaybackTimestamp(l),a.getPlaylist().getClip().addElapsedTime(l),a.getPlaylist().getClip().setElapsedTimestamp(l),a.getPlaylist().getClip().setPlaybackStartPosition(f),a.getHeartbeat().resume(),a.getKeepAlive().resume(),a.getEventManager().newEvent(i.PLAY,g)):c==i.SEEK_START?(a.getPlaylist().addBufferingTime(l),a.getPlaylist().getClip().addBufferingTime(l),a.getPlaylist().getClip().isSeeking()?a.getPlaylist().getClip().isCollectingSeekingTime()||(a.getPlaylist().getClip().setSeekingTimestamp(l),a.getPlaylist().getClip().setCollectingSeekingTime(!0)):a.getPlaylist().getClip().incrementSeeks(),a.getPlaylist().getClip().isSeeking()||(a.getPlaylist().getClip().setSeeking(!0),a.getPlaylist().getClip().setCollectingSeekingTime(!0),a.getPlaylist().getClip().setSeekStartPosition(f),a.getPlaylist().getClip().setSeekingTimestamp(l))):c==i.PAUSE?(a.getPlaylist().addBufferingTime(l),a.getPlaylist().getClip().addBufferingTime(l),a.getPlaylist().incrementPauses(),a.getPlaylist().getClip().incrementPauses()):c==i.PLAY&&(a.getPlaylist().addBufferingTime(l),a.getPlaylist().getClip().addBufferingTime(l),a.getPlaylist().getClip().incrementPlayCounter(),a.getPlaylist().setPlaybackTimestamp(l),a.getPlaylist().getClip().setPlaybackTimestamp(l),a.getPlaylist().getClip().addElapsedTime(l),a.getPlaylist().getClip().setElapsedTimestamp(l),a.getPlaylist().getClip().setPlaybackStartPosition(f),a.getHeartbeat().resume(),a.getKeepAlive().resume(),a.getEventManager().newEvent(i.PLAY,g))),y.setCurrentState(y.eventTypeToState(c));for(var m=0,n=x.length;n>m;m++)x[m](y.getPreviousState(),y.getCurrentState(),g,k)}function h(a){if(p==j.IDLE||p==j.PLAYBACK_NOT_STARTED||p==j.BUFFERING_BEFORE_PLAYBACK||p==j.SEEKING_BEFORE_PLAYBACK){if(a==i.PLAY)return!0}else if(p==j.PLAYING){if(a==i.END||a==i.AD_SKIP||a==i.SEEK_START||a==i.PAUSE)return!0}else if(p==j.PAUSED||p==j.BUFFERING_DURING_PAUSE||p==j.SEEKING_DURING_PLAYBACK||p==j.SEEKING_DURING_BUFFERING||p==j.SEEKING_DURING_PAUSE){if(a==i.END||a==i.AD_SKIP||a==i.PLAY)return!0}else if(p==j.BUFFERING_DURING_PLAYBACK){if(a==i.PAUSE_ON_BUFFERING||a==i.END||a==i.AD_SKIP||a==i.SEEK_START||a==i.PAUSE||a==i.PLAY)return!0}else if(p==j.BUFFERING_DURING_SEEKING){if(a==i.END||a==i.AD_SKIP||a==i.PAUSE||a==i.PLAY)return!0}else if(p==j.PAUSED_DURING_BUFFERING&&(a==i.END||a==i.AD_SKIP||a==i.BUFFER_STOP||a==i.PLAY))return!0;return!1}function k(a){return null!=a&&p!=a}var m,n,o,p,q,r,s,t,u,v,w,x,y=this,z=l.DEFAULT_PAUSED_ON_BUFFERING_INTERVAL,A=l.THROTTLING_DELAY;b.extend(this,{eventTypeToState:function(a){if(y.getCurrentState()==j.IDLE){if(a==i.PLAY)return j.PLAYING;if(a==i.SEEK_START)return j.SEEKING_BEFORE_PLAYBACK;if(a==i.BUFFER)return j.BUFFERING_BEFORE_PLAYBACK}else if(y.getCurrentState()==j.PLAYBACK_NOT_STARTED){if(a==i.PLAY)return j.PLAYING;if(a==i.SEEK_START)return j.SEEKING_BEFORE_PLAYBACK;if(a==i.BUFFER)return j.BUFFERING_BEFORE_PLAYBACK;if(a==i.END||a==i.AD_SKIP)return j.IDLE}else if(y.getCurrentState()==j.PLAYING){if(a==i.END||a==i.AD_SKIP)return j.IDLE;if(a==i.BUFFER)return j.BUFFERING_DURING_PLAYBACK;if(a==i.PAUSE)return j.PAUSED;if(a==i.SEEK_START)return j.SEEKING_DURING_PLAYBACK}else if(y.getCurrentState()==j.PAUSED){if(a==i.END||a==i.AD_SKIP)return j.IDLE;if(a==i.BUFFER)return j.BUFFERING_DURING_PAUSE;if(a==i.PLAY)return j.PLAYING;if(a==i.SEEK_START)return j.SEEKING_DURING_PAUSE}else if(y.getCurrentState()==j.BUFFERING_BEFORE_PLAYBACK){if(a==i.END||a==i.AD_SKIP)return j.IDLE;if(a==i.PAUSE||a==i.BUFFER_STOP)return j.PLAYBACK_NOT_STARTED;if(a==i.PLAY)return j.PLAYING;if(a==i.SEEK_START)return j.SEEKING_BEFORE_PLAYBACK}else if(y.getCurrentState()==j.BUFFERING_DURING_PLAYBACK){if(a==i.END||a==i.AD_SKIP)return j.IDLE;if(a==i.PLAY||a==i.BUFFER_STOP)return j.PLAYING;if(a==i.PAUSE_ON_BUFFERING)return j.PAUSED_DURING_BUFFERING;if(a==i.SEEK_START)return j.SEEKING_DURING_BUFFERING;if(a==i.PAUSE)return j.PAUSED}else if(y.getCurrentState()==j.BUFFERING_DURING_SEEKING){if(a==i.END||a==i.AD_SKIP)return j.IDLE;if(a==i.PLAY)return j.PLAYING;if(a==i.BUFFER_STOP)return j.SEEKING_DURING_PLAYBACK;if(a==i.PAUSE)return j.PAUSED}else if(y.getCurrentState()==j.BUFFERING_DURING_PAUSE){if(a==i.END||a==i.AD_SKIP)return j.IDLE;if(a==i.PLAY)return j.PLAYING;if(a==i.SEEK_START)return j.SEEKING_DURING_PAUSE;if(a==i.BUFFER_STOP||a==i.PAUSE)return j.PAUSED}else if(y.getCurrentState()==j.SEEKING_BEFORE_PLAYBACK){if(a==i.END||a==i.AD_SKIP)return j.IDLE;if(a==i.PAUSE)return j.PLAYBACK_NOT_STARTED;if(a==i.PLAY)return j.PLAYING;if(a==i.BUFFER)return j.BUFFERING_BEFORE_PLAYBACK}else if(y.getCurrentState()==j.SEEKING_DURING_PLAYBACK){if(a==i.END||a==i.AD_SKIP)return j.IDLE;if(a==i.PLAY)return j.PLAYING;if(a==i.PAUSE)return j.PAUSED;if(a==i.BUFFER)return j.BUFFERING_DURING_SEEKING}else if(y.getCurrentState()==j.SEEKING_DURING_BUFFERING){if(a==i.END||a==i.AD_SKIP)return j.IDLE;if(a==i.PLAY)return j.PLAYING;if(a==i.PAUSE||a==i.BUFFER_STOP)return j.PAUSED}else if(y.getCurrentState()==j.SEEKING_DURING_PAUSE){if(a==i.END||a==i.AD_SKIP)return j.IDLE;if(a==i.PLAY)return j.PLAYING;if(a==i.PAUSE||a==i.BUFFER_STOP)return j.PAUSED;if(a==i.BUFFER)return j.BUFFERING_DURING_PAUSE}else if(y.getCurrentState()==j.PAUSED_DURING_BUFFERING){if(a==i.END||a==i.AD_SKIP)return j.IDLE;if(a==i.SEEK_START)return j.SEEKING_DURING_BUFFERING;if(a==i.PAUSE)return j.PAUSED;if(a==i.PLAY||a==i.BUFFER_STOP)return j.PLAYING}return null},reset:function(){p=j.IDLE,o=null,m=-1,s=null,t=!0,v=0,r=!0,e(),f()},getCurrentState:function(){return p},setCurrentState:function(a){p!=a&&(o=p,p=a,m=+new Date)},getPreviousState:function(){return o},transitionTo:function(d,e,h,l){if(f(),k(e))if(y.isThrottlingEnabled()&&c(p)&&c(e)&&!l)n=a.getPlatformAPI().setTimeout(function(a,b,c){return function(){y.transitionTo(a,b,c,!0)}}(d,e,h),A);else{var o=b.getEventTime(h),q=m>=0?o-m:0;h.ns_st_po||(a.getStateMachine().getCurrentState()==j.PLAYING&&d==i.BUFFER||a.getStateMachine().getCurrentState()==j.BUFFERING_DURING_PLAYBACK&&d==i.BUFFER_STOP?h.ns_st_po=String(a.getPlaylist().getClip().getPlaybackTimeOffset()+(o-a.getPlaylist().getClip().getPlaybackTimestamp())):h.ns_st_po=String(a.getPlaylist().getClip().getExpectedPlaybackPosition(o))),
g(d,parseInt(h.ns_st_po),h,q)}},setPauseOnBufferingInterval:function(a){z=a},getPauseOnBufferingInterval:function(){return z},isPauseOnBufferingEnabled:function(){return r},setPauseOnBufferingEnabled:function(a){r=a},setThrottlingDelay:function(a){A=a},getThrottlingDelay:function(){return A},isThrottlingEnabled:function(){return t},setThrottlingEnabled:function(a){t=a},getLoadTimeOffset:function(){return v},setLoadTimeOffset:function(a){v=a},addListener:function(a){x.push(a)},removeListener:function(a){x.splice(b.indexOf(a,x),1)}}),w=!1,u=+new Date,x=[],y.reset()}}(),s=function(){return function(a,c){function d(a,c){var d=a||"",e="undefined",f=G.comScore||G.sitestat||function(a){var c,d,f,g,h,i="comScore=",j=H.cookie,k="",m="indexOf",n="substring",o="length",p=b.browserAcceptsLargeURLs()?l.URL_LENGTH_LIMIT:l.RESTRICTED_URL_LENGTH_LIMIT,q="&ns_",r="&",s=G.encodeURIComponent||escape;if(j[m](i)+1)for(g=0,f=j.split(";"),h=f[o];h>g;g++)d=f[g][m](i),d+1&&(k=r+unescape(f[g][n](d+i[o])));a+=q+"_t="+ +new Date+q+"c="+(H.characterSet||H.defaultCharset||"")+k,a.length>p&&a.indexOf(r)>0&&(c=a.substr(0,p-8).lastIndexOf(r),a=(a.substring(0,c)+q+"cut="+s(a.substring(c+1))).substr(0,p)),B.getPlatformAPI().httpGet(a),typeof ns_p===e&&(ns_p={src:a}),ns_p.lastMeasurement=a};if(typeof c!==e){var g=[],h=G.encodeURIComponent||escape;for(var i in c)c.hasOwnProperty(i)&&g.push(h(i)+"="+h(c[i]));/[\?\&]$/.test(d)||(d+="&"),d+=g.join("&")}return f(d)}function e(a,c){for(var d,e=G.encodeURIComponent||escape,f=[],g=l.LABELS_ORDER,h=a.split("?"),i=h[0],j=h[1],k=j.split("&"),m=0,n=k.length;n>m;m++){var o=k[m].split("="),p=unescape(o[0]),q=unescape(o[1]);p&&(c[p]=q)}for(var r={},s=0,t=g.length;t>s;s++){var u=g[s];if(c.hasOwnProperty(u)){var v=c[u];"undefined"!=typeof v&&null!=v&&(r[u]=!0,f.push(e(u)+"="+e(c[u])))}}for(var w in c)if(c.hasOwnProperty(w)){if(r[w])continue;var x=c[w];"undefined"!=typeof x&&null!=x&&f.push(e(w)+"="+e(c[w]))}d=i+"?"+f.join("&"),d=d+(d.indexOf("&c8=")<0?"&c8="+e(H.title):"")+(d.indexOf("&c7=")<0?"&c7="+e(H.URL):"")+(d.indexOf("&c9=")<0?"&c9="+e(H.referrer):"");var y=b.browserAcceptsLargeURLs()?l.URL_LENGTH_LIMIT:l.RESTRICTED_URL_LENGTH_LIMIT;if(d.length>y&&d.indexOf("&")>0){var z=d.substr(0,y-8).lastIndexOf("&");d=(d.substring(0,z)+"&ns_cut="+e(d.substring(z+1))).substr(0,y)}return d}function f(a,b){B.notify(i.CUSTOM,a,b)}function m(){A&&y.getCurrentState()!=j.IDLE&&B.end()}var s,t,u,v,w,x,y,z,A,B=this,C=l.DEFAULT_PLAYERNAME,D=l.STREAMSENSE_VERSION,E=l.STANDARD_METADATA_LABELS,F={};b.extend(this,{isNotProperlyInitialized:function(){var a=z.getAppContext(),b=z.getSalt(),c=z.getPixelURL();return null==a||null==b||0==b.length||null==c||0==c.length},reset:function(a){u=u||new n,v=v||new p(B),w=w||new o(B),x=x||new q(B),y=y||new r(B),u.reset(a),null==a||a.isEmpty()?s={}:b.filterMap(s,a),w.reset(),v.reset(),x.reset(),y.reset(),C=l.DEFAULT_PLAYERNAME,D=l.STREAMSENSE_VERSION,A=!0},getAppCore:function(){return z},getPlatformAPI:function(){return z?z.getPlatformAPI():g},getExports:function(){return F},getHeartbeat:function(){return v},getKeepAlive:function(){return x},getEventManager:function(){return w},getStateMachine:function(){return y},getMediaPlayerName:function(){return C},getMediaPlayerVersion:function(){return D},setPauseOnBufferingInterval:function(a){y.setPauseOnBufferingInterval(a)},getPauseOnBufferingInterval:function(){return y.getPauseOnBufferingInterval()},setKeepAliveInterval:function(a){x.setInterval(a)},getKeepAliveInterval:function(){return x.getInterval()},setHeartbeatIntervals:function(a){v.setIntervals(a)},play:function(a,b){B.notify(i.PLAY,a,b)},pause:function(a,b){B.notify(i.PAUSE,a,b)},end:function(a,b){B.notify(i.END,a,b)},bufferStart:function(a,b){B.notify(i.BUFFER,a,b)},bufferStop:function(a,b){B.notify(i.BUFFER_STOP,a,b)},load:function(a,b){B.notify(i.LOAD,a,b)},start:function(a,b){B.notify(i.START,a,b)},seekStart:function(a,b){B.notify(i.SEEK_START,a,b)},skipAd:function(a,b){B.notify(i.AD_SKIP,a,b)},callToAction:function(a,b){B.notify(i.CTA,a,b)},error:function(a,b){B.notify(i.ERROR,a,b)},transferPlayback:function(a,b){B.notify(i.TRANSFER,a,b)},drmFail:function(a,b){B.notify(i.DRM_FAILED,a,b)},drmApprove:function(a,b){B.notify(i.DRM_APPROVED,a,b)},drmDeny:function(a,b){B.notify(i.DRM_DENIED,a,b)},changeBitrate:function(a,b,c){if(null!=a){var d=c||{};d.ns_st_br=String(a),B.notify(i.BIT_RATE,d,b)}},changePlaybackRate:function(a,b,c){if(null!=a){var d=c||{};d.ns_st_rt=String(a),B.notify(i.PLAYBACK_RATE,d,b)}},changeVolume:function(a,b,c){if(null!=a){var d=c||{};d.ns_st_vo=String(a),B.notify(i.VOLUME,d,b)}},changeWindowState:function(a,b,c){if(null!=a){var d=c||{};d.ns_st_ws=String(a),B.notify(i.WINDOW_STATE,d,b)}},changeAudio:function(a,b,c){if(null!=a){var d=c||{};d.ns_st_at=String(a),B.notify(i.AUDIO,d,b)}},changeVideo:function(a,b,c){if(null!=a){var d=c||{};d.ns_st_vt=String(a),B.notify(i.VIDEO,d,b)}},changeSubtitle:function(a,b,c){if(null!=a){var d=c||{};d.ns_st_tt=String(a),B.notify(i.SUBS,d,b)}},changeCDN:function(a,b,c){if(null!=a){var d=c||{};d.ns_st_cdn=String(a),B.notify(i.CDN,d,b)}},notify:function(){var a,c,d,e;if(c=arguments[0],3==arguments.length?("object"==typeof arguments[1]?d=arguments[1]:("string"==typeof arguments[1]||"number"==typeof arguments[1])&&(e=arguments[1]),"object"==typeof arguments[2]?d=arguments[2]:("string"==typeof arguments[2]||"number"==typeof arguments[2])&&(e=arguments[2]),d||(d={})):2==arguments.length?"object"==typeof arguments[1]?d=arguments[1]:(d={},e=arguments[1]):1==arguments.length,i.toString(c)){a=y.eventTypeToState(c),b.fixEventTime(d);var f=b.getEventTime(d);if(!d.ns_st_po&&e&&(d.ns_st_po=b.getInteger(e,0).toString()),d.ns_st_po&&u.getClip().setPlaybackTimeOffset(parseInt(d.ns_st_po)),c==i.PLAY||c==i.PAUSE||c==i.BUFFER||c==i.END||c==i.SEEK_START||c==i.AD_SKIP||c==i.BUFFER_STOP)y.transitionTo(c,a,d);else{if((c==i.LOAD||c==i.START)&&y.getCurrentState()!=j.IDLE)return;c!=i.ERROR||d.ns_st_er||(d.ns_st_er=h.UNKNOWN_VALUE),y.getCurrentState()!=j.IDLE&&y.getCurrentState()!=j.PLAYBACK_NOT_STARTED&&y.getCurrentState()!=j.SEEKING_BEFORE_PLAYBACK&&y.getCurrentState()!=j.BUFFERING_BEFORE_PLAYBACK&&(u.getClip().addElapsedTime(f),u.getClip().setElapsedTimestamp(f));var g,k,l,m=!0,n=!1;switch(c){case i.BIT_RATE:g="ns_st_br",k="ns_st_pbr",n=!0;break;case i.PLAYBACK_RATE:g="ns_st_rt",k="ns_st_prt",n=!0;break;case i.VOLUME:g="ns_st_vo",k="ns_st_pvo",n=!0;break;case i.WINDOW_STATE:g="ns_st_ws",k="ns_st_pws",n=!0;break;case i.AUDIO:g="ns_st_at",k="ns_st_pat",n=!1;break;case i.VIDEO:g="ns_st_vt",k="ns_st_pvt",n=!1;break;case i.SUBS:g="ns_st_tt",k="ns_st_ptt",n=!1;break;case i.CDN:g="ns_st_cdn",k="ns_st_pcdn",n=!1;break;default:m=!1}if(m&&d.hasOwnProperty(g)&&(n?(B.getLabels().hasOwnProperty(g)&&(l=B.getLabels()[g],d[k]=l),B.setLabel(g,d[g])):(u.getClip().getLabels().hasOwnProperty(g)&&(l=u.getClip().getLabels()[g],d[k]=l),u.getClip().setLabel(g,d[g]))),m&&y.getCurrentState()!=j.PLAYING&&y.getCurrentState()!=j.BUFFERING_DURING_PLAYBACK)return;d.ns_st_po||(d.ns_st_po=String(u.getClip().getExpectedPlaybackPosition(f))),(y.getCurrentState()==j.PLAYING||y.getCurrentState()==j.BUFFERING_DURING_PLAYBACK)&&(u.addPlaybackTime(f),u.setPlaybackTimestamp(f),u.getClip().addPlaybackTime(f),u.getClip().setPlaybackTimestamp(f),u.getClip().addInterval(parseInt(d.ns_st_po)),u.getClip().setPlaybackStartPosition(parseInt(d.ns_st_po))),(y.getCurrentState()==j.BUFFERING_BEFORE_PLAYBACK||y.getCurrentState()==j.BUFFERING_DURING_PAUSE||y.getCurrentState()==j.BUFFERING_DURING_PLAYBACK||y.getCurrentState()==j.BUFFERING_DURING_SEEKING)&&(u.addBufferingTime(f),u.setBufferingTimestamp(f),u.getClip().addBufferingTime(f),u.getClip().setBufferingTimestamp(f)),w.newEvent(c,d)}}},getLabels:function(){return s},getState:function(){return y.getCurrentState()},setLabels:function(a){for(var b in a)a.hasOwnProperty(b)&&B.setLabel(b,a[b])},getLabel:function(a){return s[a]},setLabel:function(a,b){null==b?delete s[a]:s[a]=b},getLoadTimeOffset:function(){return y.getLoadTimeOffset()},setLoadTimeOffset:function(a){y.setLoadTimeOffset(a)},setPixelURL:function(a){if(null==a||0==a.length)return null;var b=decodeURIComponent||unescape,c=a.indexOf("?");if(c>=0){if(c<a.length-1){for(var d=a.substring(c+1).split("&"),e=0,f=d.length;f>e;e++){var g=d[e],h=g.split("=");2==h.length?B.setLabel(h[0],b(h[1])):1==h.length&&B.setLabel(l.PAGE_NAME_LABEL,b(h[0]))}a=a.substring(0,c+1)}}else a+="?";return t=a},getPixelURL:function(){return t?t:"undefined"!=typeof ns_p&&"string"==typeof ns_p.src?t=ns_p.src.replace(/&amp;/,"&").replace(/&ns__t=\d+/,""):"string"==typeof ns_pixelUrl?t=ns_pixelUrl.replace(/&amp;/,"&").replace(/&ns__t=\d+/,""):null},setImplementationType:function(a){y.getCurrentState()!=j.IDLE||a!=k.SINGLE_CLIP&&a!=k.SEGMENTED&&a!=k.REDUCED||u.setLabel("ns_st_it",k.toString(a))},isPauseOnBufferingEnabled:function(){return y.isPauseOnBufferingEnabled()},setPauseOnBufferingEnabled:function(a){y.setPauseOnBufferingEnabled(a)},isThrottlingEnabled:function(){return y.isThrottlingEnabled()},setThrottlingEnabled:function(a){y.setThrottlingEnabled(a)},setThrottlingDelay:function(a){y.setThrottlingDelay(a)},getThrottlingDelay:function(){return y.getThrottlingDelay()},setPlaybackIntervalMergeTolerance:function(a){u.getClip().setPlaybackIntervalMergeTolerance(a)},getPlaybackIntervalMergeTolerance:function(){return u.getClip().getPlaybackIntervalMergeTolerance()},setClip:function(a,c,d){if("undefined"==typeof d&&(d=!0),d&&y.getCurrentState()!==j.IDLE&&B.end(),y.getCurrentState()==j.IDLE){var e="",f=0;if(null!=a.ns_st_cn)e=String(a.ns_st_cn);else for(var g=0;g<E.length;g++)a[E[g]]&&(e+=E[g]+":"+a[E[g]]+";");u.getClip().isClipStarted()?(u.hashExists(u.getClip().getHash())||(u.storeHash(u.getClip().getHash()),u.storeClipNumber(u.getClip().getHash(),u.getClip().getClipNumber())),u.storeClipPlaybackCounters(),f=u.hashExists(e)?u.getClipNumber(e):b.exists(a.ns_st_cn)?parseInt(a.ns_st_cn):u.getMaxClipNumber()+1):f=u.hashExists(e)?u.getClipNumber(e):u.getClip().getClipNumber(),u.getClip().reset(),u.getClip().setHash(e),u.getClip().setClipNumber(f),u.getClip().setLabels(a,null);var h=u.getStoredClipRegisters(e);return h&&(u.getClip().setClipStarted(!0),u.getClip().setSegmentPlaybackCounter(h.segmentPlaybackCounter),u.getClip().setClipLoadCounter(h.clipLoadCounter),u.getClip().setAssetPlaybackCounter(h.assetPlaybackCounter),u.getClip().setLowestPartNumberPlayed(h.lowestPartNumberPlayed),u.getClip().setSeeking(h.seeking),u.getClip().setSeekingTimeBeforeEnd(h.seekingTimeBeforeEnd),u.getClip().setSeekStartPosition(h.seekingStartPosition),u.getClip().setClipPlaybackIntervals(h.clipPlaybackIntervals),u.getClip().setUniquePlaybackInterval(h.uniquePlaybackInterval),u.getClip().setLongestPlaybackInterval(h.longestPlaybackInterval),u.getClip().setVideoTrack(h.videoTrack),u.getClip().setAudioTrack(h.audioTrack),u.getClip().setSubtitleTrack(h.subtitleTrack),u.getClip().setCDN(h.cdn),u.getClip().setPreviousUniquePlaybackInterval(h.uniquePlaybackInterval),u.getClip().setPreviousEventIndependentUniquePlaybackInterval(h.uniquePlaybackInterval),u.getClip().setPreviousLongestPlaybackInterval(h.longestPlaybackInterval)),u.getClip().incrementClipLoadCounter(),u.getClip().isClipStarted()&&c&&(u.incrementPlayCounter(),u.incrementPlaybackCounter()),!0}return!1},setPlaylist:function(a,b){return"undefined"==typeof b&&(b=!0),b&&y.getCurrentState()!==j.IDLE&&B.end(),y.getCurrentState()==j.IDLE?(u.isPlaylistStarted()&&u.reset(),u.setLabels(a,null),!0):!1},importState:function(){},exportState:function(){return{}},getVersion:function(){return l.STREAMSENSE_VERSION},addListener:function(a){y.addListener(a)},removeListener:function(a){y.removeListener(a)},getClip:function(){return u.getClip()},getPlaylist:function(){return u},setHttpGet:function(a){"function"==typeof a&&(B.getPlatformAPI().httpGet=a)},setHttpPost:function(a){"function"==typeof a&&(B.getPlatformAPI().httpPost=a)},setExitEndEvent:function(a){A=a},isExitEndEventEnabled:function(){return A}});var G,H;b.isBrowser()?(G=window,H=document):(G={},H={location:{href:""},title:"",URL:"",referrer:"",cookie:""}),b.extend(this,{prepareUrl:e}),b.extend(this,{customNotify:f,viewNotify:function(a,b){a=a||B.getPixelURL(),a&&d(a,b)}}),b.isBrowser()&&(window.addEventListener?(window.addEventListener("beforeunload",m),window.addEventListener("unload",m)):window.attachEvent&&(window.attachEvent("onbeforeunload",m),window.attachEvent("onunload",m))),b.getNamespace().comScore&&(F=b.getNamespace().comScore.exports,z=F.c()),B.reset(),a&&B.setLabels(a),c&&B.setPixelURL(c)}}();return function(c){function d(a,b){return x[z]||f(a,b)}function e(){z=-1;for(var b=0;y>=b;b++)if(x.hasOwnProperty(String(b))){z=b;break}return a.StreamSense.activeIndex=z,z}function f(b,c){return b=b||null,c=c||null,b&&"object"==typeof b&&(c=b,b=null),x[++y]=new a.StreamSense(c,b),e(),x[y]}function g(){var b=!1,c=z;if("number"==typeof arguments[0]&&isFinite(arguments[0]))c=arguments[0];else if(arguments[0]instanceof a.StreamSense)for(var d in x)if(x.hasOwnProperty(d)&&x[d]===arguments[0]){c=d;break}return x.hasOwnProperty(String(c))&&(b=x[c],delete x[c],b.reset(),e()),b}function h(a){return a=a||{},d().setPlaylist(a),d().getPlaylist()}function i(a,b,c){return a=a||{},"number"==typeof b&&(a.ns_st_cn=String(b)),d().setClip(a,c),d().getClip()}function j(a,b,c){return"undefined"==typeof a?!1:(c=c||null,b=b||{},d().notify(a,b,c))}function k(a){"undefined"!=typeof a&&d().setLabels(a)}function l(){return d().getLabels()}function m(a){"undefined"!=typeof a&&d().getPlaylist().setLabels(a)}function n(){return d().getPlaylist().getLabels()}function o(a){"undefined"!=typeof a&&d().getClip().setLabels(a)}function p(){return d().getClip().getLabels()}function q(a){return d().reset(a||{})}function r(a){return d().getPlaylist().reset(a||{})}function s(a){return d().getClip().reset(a||{})}function t(a){return a=a||{},d().viewNotify(null,a)}function u(a,b){return arguments.length>2&&(a=arguments[1],b=arguments[2]),a=a||{},"number"==typeof b&&(a.ns_st_po=String(b)),d().customNotify(a,b)}function v(){return d().exportState()}function w(a){d().importState(a)}var x={},y=-1,z=-1;b.extend(c,{activeIndex:z,newInstance:f,"new":f,destroyInstance:g,destroy:g,newPlaylist:h,newClip:i,notify:j,setLabels:k,getLabels:l,setPlaylistLabels:m,getPlaylistLabels:n,setClipLabels:o,getClipLabels:p,resetInstance:q,resetPlaylist:r,resetClip:s,viewEvent:t,customEvent:u,exportState:v,importState:w})}(s),s.PlayerEvents=i,s.InternalStates=j,s.ImplementationType=k,s}(),a.StreamingTag=a.StreamingTag||function(){var c=a.StreamSense,d=(a.StreamSense.PlayerEvents,a.StreamSense.InternalStates||null),e=a.StreamSense.ImplementationType||null,f=null!=a.StreamSense.InternalStates&&null!=a.StreamSense.ImplementationType;return function(){var a={LongFormOnDemand:"11",ShortFormOnDemand:"12",Live:"13",UserGeneratedLongFormOnDemand:"21",UserGeneratedShortFormOnDemand:"22",UserGeneratedLive:"23",Bumper:"99",Other:"00"},g={LinearOnDemandPreRoll:"11",LinearOnDemandMidRoll:"12",LinearOnDemandPostRoll:"13",LinearLive:"21",Other:"00"},h=function(a){function g(){if(f)if(b.getNamespace().comScore)q=new c,q.setImplementationType(e.REDUCED);else if(b.exists(a))if(r=b.isTrue(a.debug),b.exists(a.customerC2)&&a.customerC2.length>0){var d=a.secure?"https://sb":"http"+("s"==document.location.href.charAt(4)?"s://sb":"://b");q=new c,q.setPixelURL(d+".scorecardresearch.com/p?c1=2"),q.setLabel("c2",a.customerC2),q.setImplementationType(e.REDUCED)}else r&&console&&console.log("Warning: customerC2 is not provided (or incorrect) in the StreamingTag configuration.")}function h(a){b.exists(a)||(a={});for(var c in t)t.hasOwnProperty(c)&&!b.exists(a[t[c]])&&("ns_st_ci"==t[c]?a.ns_st_ci="0":a[t[c]]="*null");return a}function i(a){for(var b in t)if(t.hasOwnProperty(b)&&!j(t[b],o,a))return!1;return!0}function j(a,c,d){if(b.exists(a)&&b.exists(c)&&b.exists(d)){var e=c[a],f=d[a];return b.exists(e)&&b.exists(f)&&e===f}return!1}function k(a){n++;var c={ns_st_cn:String(n),ns_st_pn:"1",ns_st_tp:"0"};b.extend(c,a),q.setClip(c),o=a,q.play()}function l(a){n++,a=h(a);var c={ns_st_cn:String(n),ns_st_pn:"1",ns_st_tp:"1",ns_st_ad:"1"};b.extend(c,a),q.setClip(c),q.play(),p=!1}function m(a,b){a=h(a),u==s.None&&(u=b),p&&u==b&&i(a)?(q.getClip().setLabels(a),q.getState()!=d.PLAYING&&q.play()):k(a),p=!0,u=b}var n=0,o=null,p=!1,q=null,r=!1,s={None:0,AudioContent:1,VideoContent:2},t=["ns_st_ci","c3","c4","c6","ns_st_st","ns_st_pu","ns_st_pr","ns_st_ep","ns_st_sn","ns_st_en","ns_st_ct"],u=s.None;b.extend(this,{playAdvertisement:function(){if(q){r&&console&&console.warn("Calling deprecated function 'playAdvertisement'. Please call 'playVideoAdvertisement' or 'playAudioAdvertisement' functions instead.");var a={ns_st_ct:"va"};l(a)}},playVideoAdvertisement:function(a,c){if(q){var d={ns_st_ct:"va"};c?d.ns_st_ct="va"+c:r&&console&&console.warn("Calling 'playVideoAdvertisement' without specifying the media type as a second parameter."),a&&b.extend(d,a),l(d)}},playAudioAdvertisement:function(a,c){if(q){var d={ns_st_ct:"aa"};c?d.ns_st_ct="aa"+c:r&&console&&console.warn("Calling 'playAudioAdvertisement' without specifying the media type as a second parameter."),a&&b.extend(d,a),l(d)}},playContentPart:function(a){if(q){r&&console&&console.warn("Calling deprecated function 'playContentPart'. Please call 'playVideoContentPart' or 'playAudioContentPart' functions instead.");var c={ns_st_ct:"vc"};a&&b.extend(c,a),m(c,s.VideoContent)}},playVideoContentPart:function(a,c){if(q){var d={ns_st_ct:"vc"};c?d.ns_st_ct="vc"+c:r&&console&&console.warn("Calling 'playVideoContentPart' without specifying the media type as a second parameter."),a&&b.extend(d,a),m(d,s.VideoContent)}},playAudioContentPart:function(a,c){if(q){var d={ns_st_ct:"ac"};c?d.ns_st_ct="ac"+c:r&&console&&console.warn("Calling 'playAudioContentPart' without specifying the media type as a second parameter."),a&&b.extend(d,a),m(d,s.AudioContent)}},stop:function(){q&&q.pause()}}),g()};return function(a){}(h),h.ContentType=a,h.AdType=g,h}()}(),a});
/*!

   hlsjs engine plugin for Flowplayer HTML5

   Copyright (c) 2015-2016, Flowplayer Oy

   Released under the MIT License:
   http://www.opensource.org/licenses/mit-license.php

   Includes hls.js
   Copyright (c) 2015 Dailymotion (http://www.dailymotion.com)
   https://github.com/dailymotion/hls.js/blob/master/LICENSE

   Requires Flowplayer HTML5 version 6.x
   v1.0.3-2-g7bf6f1c

*/
/*@cc_on @*/
/*@
  @if (@_jscript_version > 10)
  @*/
!function(e){function t(i){if(r[i])return r[i].exports;var a=r[i]={exports:{},id:i,loaded:!1};return e[i].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){e.exports=r(50)},function(e,t){"use strict";function r(){}function i(e,t){return t="["+e+"] > "+t}function a(e){var t=self.console[e];return t?function(){for(var r=arguments.length,a=Array(r),n=0;n<r;n++)a[n]=arguments[n];a[0]&&(a[0]=i(e,a[0])),t.apply(self.console,a)}:r}function n(e){for(var t=arguments.length,r=Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];r.forEach(function(t){u[t]=e[t]?e[t].bind(e):a(t)})}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"===s(Symbol.iterator)?function(e){return"undefined"==typeof e?"undefined":s(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":"undefined"==typeof e?"undefined":s(e)},l={trace:r,debug:r,log:r,warn:r,info:r,error:r},u=l;t.enableLogs=function(e){if(e===!0||"object"===("undefined"==typeof e?"undefined":o(e))){n(e,"debug","log","info","warn","error");try{u.log()}catch(e){u=l}}else u=l},t.logger=u},function(e,t){"use strict";e.exports={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",LEVEL_SWITCH:"hlsLevelSwitch",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCH:"hlsAudioTrackSwitch",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",STREAM_STATE_TRANSITION:"hlsStreamStateTransition"}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ErrorTypes={NETWORK_ERROR:"networkError",MEDIA_ERROR:"mediaError",OTHER_ERROR:"otherError"},t.ErrorDetails={MANIFEST_LOAD_ERROR:"manifestLoadError",MANIFEST_LOAD_TIMEOUT:"manifestLoadTimeOut",MANIFEST_PARSING_ERROR:"manifestParsingError",MANIFEST_INCOMPATIBLE_CODECS_ERROR:"manifestIncompatibleCodecsError",LEVEL_LOAD_ERROR:"levelLoadError",LEVEL_LOAD_TIMEOUT:"levelLoadTimeOut",LEVEL_SWITCH_ERROR:"levelSwitchError",AUDIO_TRACK_LOAD_ERROR:"audioTrackLoadError",AUDIO_TRACK_LOAD_TIMEOUT:"audioTrackLoadTimeOut",FRAG_LOAD_ERROR:"fragLoadError",FRAG_LOOP_LOADING_ERROR:"fragLoopLoadingError",FRAG_LOAD_TIMEOUT:"fragLoadTimeOut",FRAG_DECRYPT_ERROR:"fragDecryptError",FRAG_PARSING_ERROR:"fragParsingError",KEY_LOAD_ERROR:"keyLoadError",KEY_LOAD_TIMEOUT:"keyLoadTimeOut",BUFFER_ADD_CODEC_ERROR:"bufferAddCodecError",BUFFER_APPEND_ERROR:"bufferAppendError",BUFFER_APPENDING_ERROR:"bufferAppendingError",BUFFER_STALLED_ERROR:"bufferStalledError",BUFFER_FULL_ERROR:"bufferFullError",BUFFER_SEEK_OVER_HOLE:"bufferSeekOverHole",INTERNAL_EXCEPTION:"internalException"}},function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?function(e){return"undefined"==typeof e?"undefined":n(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":"undefined"==typeof e?"undefined":n(e)},o=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),l=r(1),u=r(3),d=r(2),f=i(d),h=function(){function e(t){a(this,e),this.hls=t,this.onEvent=this.onEvent.bind(this);for(var r=arguments.length,i=Array(r>1?r-1:0),n=1;n<r;n++)i[n-1]=arguments[n];this.handledEvents=i,this.useGenericHandler=!0,this.registerListeners()}return o(e,[{key:"destroy",value:function(){this.unregisterListeners()}},{key:"isEventHandler",value:function(){return"object"===s(this.handledEvents)&&this.handledEvents.length&&"function"==typeof this.onEvent}},{key:"registerListeners",value:function(){this.isEventHandler()&&this.handledEvents.forEach(function(e){if("hlsEventGeneric"===e)throw new Error("Forbidden event name: "+e);this.hls.on(e,this.onEvent)}.bind(this))}},{key:"unregisterListeners",value:function(){this.isEventHandler()&&this.handledEvents.forEach(function(e){this.hls.off(e,this.onEvent)}.bind(this))}},{key:"onEvent",value:function(e,t){this.onEventGeneric(e,t)}},{key:"onEventGeneric",value:function(e,t){var r=function(e,t){var r="on"+e.replace("hls","");if("function"!=typeof this[r])throw new Error("Event "+e+" has no generic handler in this "+this.constructor.name+" class (tried "+r+")");return this[r].bind(this,t)};try{r.call(this,e,t).call()}catch(t){l.logger.error("internal error happened while processing "+e+":"+t.message),this.hls.trigger(f.default.ERROR,{type:u.ErrorTypes.OTHER_ERROR,details:u.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:e,err:t})}}}]),e}();t.default=h},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),a=function(){function e(){r(this,e)}return i(e,null,[{key:"isBuffered",value:function(e,t){if(e)for(var r=e.buffered,i=0;i<r.length;i++)if(t>=r.start(i)&&t<=r.end(i))return!0;return!1}},{key:"bufferInfo",value:function(e,t,r){if(e){var i,a=e.buffered,n=[];for(i=0;i<a.length;i++)n.push({start:a.start(i),end:a.end(i)});return this.bufferedInfo(n,t,r)}return{len:0,start:0,end:0,nextStart:void 0}}},{key:"bufferedInfo",value:function(e,t,r){var i,a,n,s,o,l=[];for(e.sort(function(e,t){var r=e.start-t.start;return r?r:t.end-e.end}),o=0;o<e.length;o++){var u=l.length;if(u){var d=l[u-1].end;e[o].start-d<r?e[o].end>d&&(l[u-1].end=e[o].end):l.push(e[o])}else l.push(e[o])}for(o=0,i=0,a=n=t;o<l.length;o++){var f=l[o].start,h=l[o].end;if(t+r>=f&&t<h)a=f,n=h,i=n-t;else if(t+r<f){s=f;break}}return{len:i,start:a,end:n,nextStart:s}}}]),e}();t.default=a},function(e,t,r){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),n=r(1),s=r(3),o=function(){function e(){i(this,e)}return a(e,null,[{key:"getAudioConfig",value:function(e,t,r,i){var a,o,l,u,d,f=navigator.userAgent.toLowerCase(),h=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];return a=((192&t[r+2])>>>6)+1,o=(60&t[r+2])>>>2,o>h.length-1?void e.trigger(Event.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+o}):(u=(1&t[r+2])<<2,u|=(192&t[r+3])>>>6,n.logger.log("manifest codec:"+i+",ADTS data:type:"+a+",sampleingIndex:"+o+"["+h[o]+"Hz],channelConfig:"+u),/firefox|OPR/i.test(f)?o>=6?(a=5,d=new Array(4),l=o-3):(a=2,d=new Array(2),l=o):f.indexOf("android")!==-1?(a=2,d=new Array(2),l=o):(a=5,d=new Array(4),i&&(i.indexOf("mp4a.40.29")!==-1||i.indexOf("mp4a.40.5")!==-1)||!i&&o>=6?l=o-3:((i&&i.indexOf("mp4a.40.2")!==-1&&o>=6&&1===u||!i&&1===u)&&(a=2,d=new Array(2)),l=o)),d[0]=a<<3,d[0]|=(14&o)>>1,d[1]|=(1&o)<<7,d[1]|=u<<3,5===a&&(d[1]|=(14&l)>>1,d[2]=(1&l)<<7,d[2]|=8,d[3]=0),{config:d,samplerate:h[o],channelCount:u,codec:"mp4a.40."+a})}}]),e}();t.default=o},function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),s=r(2),o=i(s),l=r(3),u=r(28),d=i(u),f=r(32),h=i(f),c=r(40),v=i(c),p=r(41),g=i(p),y=function(){function e(t,r,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;a(this,e),this.hls=t,this.id=r,this.config=this.hls.config||n,this.typeSupported=i}return n(e,[{key:"destroy",value:function(){var e=this.demuxer;e&&e.destroy()}},{key:"push",value:function(e,t,r,i,a,n,s,u,f){var c=this.demuxer;if(!c){var p=this.hls,y=this.id,m=this.config,E=this.typeSupported;if(h.default.probe(e))c=this.typeSupported.mp2t===!0?new h.default(p,y,g.default,m,E):new h.default(p,y,v.default,m,E);else{if(!d.default.probe(e))return void p.trigger(o.default.ERROR,{type:l.ErrorTypes.MEDIA_ERROR,id:y,details:l.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});c=new d.default(p,y,v.default,m,E)}this.demuxer=c}c.push(e,t,r,i,a,n,s,u,f)}}]),e}();t.default=y},function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),s=r(2),o=i(s),l=r(7),u=i(l),d=r(29),f=i(d),h=r(1),c=r(26),v=i(c),p=r(3),g=function(){function e(t,i){a(this,e),this.hls=t,this.id=i;var n={mp4:MediaSource.isTypeSupported("video/mp4"),mp2t:t.config.enableMP2TPassThrough&&MediaSource.isTypeSupported("video/mp2t"),mpeg:MediaSource.isTypeSupported("audio/mpeg"),mp3:MediaSource.isTypeSupported('audio/mp4; codecs="mp3"')};if(t.config.enableWorker&&"undefined"!=typeof Worker){h.logger.log("demuxing in webworker");var s=void 0;try{var l=r(49);s=this.w=l(f.default),this.onwmsg=this.onWorkerMessage.bind(this),s.addEventListener("message",this.onwmsg),s.onerror=function(e){t.trigger(o.default.ERROR,{type:p.ErrorTypes.OTHER_ERROR,details:p.ErrorDetails.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",err:{message:e.message+" ("+e.filename+":"+e.lineno+")"}})},s.postMessage({cmd:"init",typeSupported:n,id:i,config:JSON.stringify(t.config)})}catch(e){h.logger.error("error while initializing DemuxerWorker, fallback on DemuxerInline"),s&&URL.revokeObjectURL(s.objectURL),this.demuxer=new u.default(t,i,n)}}else this.demuxer=new u.default(t,i,n);this.demuxInitialized=!0}return n(e,[{key:"destroy",value:function(){var e=this.w;if(e)e.removeEventListener("message",this.onwmsg),e.terminate(),this.w=null;else{var t=this.demuxer;t&&(t.destroy(),this.demuxer=null)}var r=this.decrypter;r&&(r.destroy(),this.decrypter=null)}},{key:"pushDecrypted",value:function(e,t,r,i,a,n,s,o,l){var u=this.w;if(u)u.postMessage({cmd:"demux",data:e,audioCodec:t,videoCodec:r,timeOffset:i,cc:a,level:n,sn:s,duration:o,accurateTimeOffset:l},[e]);else{var d=this.demuxer;d&&d.push(new Uint8Array(e),t,r,i,a,n,s,o,l)}}},{key:"push",value:function(e,t,r,i,a,n,s,l,u,d){if(e.byteLength>0&&null!=u&&null!=u.key&&"AES-128"===u.method){null==this.decrypter&&(this.decrypter=new v.default(this.hls));var f=this,h=performance.now();this.decrypter.decrypt(e,u.key.buffer,u.iv.buffer,function(e){f.hls.trigger(o.default.FRAG_DECRYPTED,{level:n,sn:s,stats:{tstart:h,tdecrypt:performance.now()}}),f.pushDecrypted(e,t,r,i,a,n,s,l,d)})}else this.pushDecrypted(e,t,r,i,a,n,s,l,d)}},{key:"onWorkerMessage",value:function(e){var t=e.data,r=this.hls;switch(t.event){case"init":URL.revokeObjectURL(this.w.objectURL);break;case o.default.FRAG_PARSING_DATA:t.data.data1=new Uint8Array(t.data1),t.data.data2=new Uint8Array(t.data2);default:r.trigger(t.event,t.data)}}}]),e}();t.default=g},function(e,t,r){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),n=r(1),s=function(){function e(){i(this,e)}return a(e,null,[{key:"mergeDetails",value:function(t,r){var i,a=Math.max(t.startSN,r.startSN)-r.startSN,s=Math.min(t.endSN,r.endSN)-r.startSN,o=r.startSN-t.startSN,l=t.fragments,u=r.fragments,d=0;if(s<a)return void(r.PTSKnown=!1);for(var f=a;f<=s;f++){var h=l[o+f],c=u[f];c&&h&&(d=h.cc-c.cc,isNaN(h.startPTS)||(c.start=c.startPTS=h.startPTS,c.endPTS=h.endPTS,c.duration=h.duration,i=c))}if(d)for(n.logger.log("discontinuity sliding from playlist, take drift into account"),f=0;f<u.length;f++)u[f].cc+=d;if(i)e.updateFragPTSDTS(r,i.sn,i.startPTS,i.endPTS,i.startDTS,i.endDTS);else if(o>=0&&o<l.length){var v=l[o].start;for(f=0;f<u.length;f++)u[f].start+=v}r.PTSKnown=t.PTSKnown}},{key:"updateFragPTSDTS",value:function(t,r,i,a,n,s){var o,l,u,d;if(r<t.startSN||r>t.endSN)return 0;if(o=r-t.startSN,l=t.fragments,u=l[o],!isNaN(u.startPTS)){var f=Math.abs(u.startPTS-i);isNaN(u.deltaPTS)?u.deltaPTS=f:u.deltaPTS=Math.max(f,u.deltaPTS),i=Math.min(i,u.startPTS),a=Math.max(a,u.endPTS),n=Math.min(n,u.startDTS),s=Math.max(s,u.endDTS)}var h=i-u.start;for(u.start=u.startPTS=i,u.endPTS=a,u.startDTS=n,u.endDTS=s,u.duration=a-i,d=o;d>0;d--)e.updatePTS(l,d,d-1);for(d=o;d<l.length-1;d++)e.updatePTS(l,d,d+1);return t.PTSKnown=!0,h}},{key:"updatePTS",value:function(e,t,r){var i=e[t],a=e[r],s=a.startPTS;isNaN(s)?r>t?a.start=i.start+i.duration:a.start=i.start-a.duration:r>t?(i.duration=s-i.start,i.duration<0&&n.logger.warn("negative duration computed for frag "+i.sn+",level "+i.level+", there should be some duration drift between playlist and fragment!")):(a.duration=i.start-s,a.duration<0&&n.logger.warn("negative duration computed for frag "+a.sn+",level "+a.level+", there should be some duration drift between playlist and fragment!"))}}]),e}();t.default=s},function(e,t){"use strict";var r={search:function(e,t){for(var r=0,i=e.length-1,a=null,n=null;r<=i;){a=(r+i)/2|0,n=e[a];var s=t(n);if(s>0)r=a+1;else{if(!(s<0))return n;i=a-1}}return null}};e.exports=r},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),a=function(){function e(){r(this,e)}return i(e,null,[{key:"toString",value:function(e){for(var t="",r=e.length,i=0;i<r;i++)t+="["+e.start(i).toFixed(3)+","+e.end(i).toFixed(3)+"]";return t}}]),e}();t.default=a},function(e,t){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function a(e){return"number"==typeof e}function n(e){return"object"==typeof e&&null!==e}function s(e){return void 0===e}e.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!a(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,r,a,o,l,u;if(this._events||(this._events={}),"error"===e&&(!this._events.error||n(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;var d=new Error('Uncaught, unspecified "error" event. ('+t+")");throw d.context=t,d}if(r=this._events[e],s(r))return!1;if(i(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:o=Array.prototype.slice.call(arguments,1),r.apply(this,o)}else if(n(r))for(o=Array.prototype.slice.call(arguments,1),u=r.slice(),a=u.length,l=0;l<a;l++)u[l].apply(this,o);return!0},r.prototype.addListener=function(e,t){var a;if(!i(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?n(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,n(this._events[e])&&!this._events[e].warned&&(a=s(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,a&&a>0&&this._events[e].length>a&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){function r(){this.removeListener(e,r),a||(a=!0,t.apply(this,arguments))}if(!i(t))throw TypeError("listener must be a function");var a=!1;return r.listener=t,this.on(e,r),this},r.prototype.removeListener=function(e,t){var r,a,s,o;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(r=this._events[e],s=r.length,a=-1,r===t||i(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(n(r)){for(o=s;o-- >0;)if(r[o]===t||r[o].listener&&r[o].listener===t){a=o;break}if(a<0)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(a,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[e],i(r))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(i(t))return 1;if(t)return t.length}return 0},r.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t,r){!function(){"use strict";var t=function(e,t){var r,i="hlsjs",a=t.common,n=t.extend,s=t.support,o=t.version,l=0===o.indexOf("6."),u=window,d=u.MediaSource||u.WebKitMediaSource,f=u.performance,h=function(e){return e.toLowerCase().indexOf("mpegurl")>-1},c=function(e){var t=e.clip&&e.clip.hlsQualities||e.hlsQualities;return s.inlineVideo&&(t===!0||t&&t.length)},v=function(s,v){var p,g,y,m,E,b,k,R=t.bean,_="is-seeking",S=function(e,t,r){if(e.debug&&console.log("recovery."+i,"<-",t),a.removeClass(v,"is-paused"),a.addClass(v,_),r)g.startLoad();else{var n=f.now();if(!m||n-m>3e3)m=f.now(),g.recoverMediaError();else{if(E&&!(n-E>3e3))return 3;E=f.now(),g.swapAudioCodec(),g.recoverMediaError()}}y>0&&(y-=1)},T="is-poster",A=function(){R.one(p,"timeupdate."+i,function(){a.addClass(v,T),s.poster=!0})},L=function(){l&&s.poster&&R.one(p,"timeupdate."+i,function(){a.removeClass(v,T),s.poster=!1})},w=!1,D=0,O=function(){g.startLoad(g.config.startPosition)},C="active",P=function(e){return e||(e=s.quality),e.toLowerCase().replace(/\ /g,"")},I=function(){var e=s.qualities;e&&e.length&&(a.removeClass(v,"quality-abr"),e.forEach(function(e){a.removeClass(v,"quality-"+P(e))}))},x=function(){l&&(delete s.hlsQualities,I(),a.find(".fp-quality-selector",v).forEach(a.removeNode))},M=function(){return s.hlsQualities[s.qualities.indexOf(s.quality)+1]},N=-1,F=function(e,t,r){var n,o=r.levels,u=[],f=[],h=0;if(x(),"drive"===e)switch(o.length){case 4:u=[1,2,3];break;case 5:u=[1,2,3,4];break;case 6:u=[1,3,4,5];break;case 7:u=[1,3,5,6];break;case 8:u=[1,3,6,7];break;default:if(o.length<3||o[0].height&&o[2].height&&o[0].height===o[2].height)return;u=[1,2]}else if("string"==typeof e?e.split(/\s*,\s*/).forEach(function(e){f.push(parseInt(e,10))}):"boolean"!=typeof e&&e.forEach(function(e){f.push(isNaN(Number(e))?e.level:e)}),o.forEach(function(t){(e===!0||f.indexOf(h)>-1)&&(!t.videoCodec||t.videoCodec&&d.isTypeSupported("video/mp4;codecs="+t.videoCodec))&&u.push(h),h+=1}),u.length<2)return;return l?s.qualities=[]:("drive"!==e&&e!==!0&&e[0]!==-1||u.unshift(-1),s.video.qualities=[]),u.reverse(),u.forEach(function(t){var r=o[t],i=f.length?e[f.indexOf(t)]:t,a="Level "+(t+1);t<0?a=i.label||"Auto":i.label?a=i.label:(r.width&&r.height&&(a=Math.min(r.width,r.height)+"p"),!l&&"drive"!==e&&r.bitrate&&(a+=" ("+Math.round(r.bitrate/1e3)+"k)")),l?s.qualities.push(a):s.video.qualities.push({value:t,label:a})}),l?(n=a.createElement("ul",{class:"fp-quality-selector"}),a.find(".fp-ui",v)[0].appendChild(n),u.unshift(-1),s.hlsQualities=u,!s.quality||s.qualities.indexOf(s.quality)<0?s.quality="abr":(g.startLevel=M(),g.loadLevel=g.startLevel),n.appendChild(a.createElement("li",{"data-quality":"abr"},"Auto")),s.qualities.forEach(function(e){n.appendChild(a.createElement("li",{"data-quality":P(e)},e))}),a.addClass(v,"quality-"+P()),void R.on(v,"click."+i,".fp-quality-selector li",function(e){var r,n,o,l=e.currentTarget,u=t.smoothSwitching,d=p.paused;if(!a.hasClass(l,C)){for(d||u||R.one(p,"pause."+i,function(){a.removeClass(v,"is-paused")}),r=a.find(".fp-quality-selector li",v),o=0;o<r.length;o+=1)n=r[o]===l,n&&(s.quality=o>0?s.qualities[o-1]:"abr",u&&!s.poster?g.nextLevel=M():g.currentLevel=M(),a.addClass(l,C),d&&p.play()),a.toggleClass(r[o],C,n);I(),a.addClass(v,"quality-"+P())}})):(N>-1||u.indexOf(-1)<0?(g.startLevel=u.indexOf(N)<0?u[0]:N,g.loadLevel=g.startLevel,s.video.quality=g.startLevel):s.video.quality=u.indexOf(N)<0?u[0]:N,void(N=s.video.quality))},U={engineName:i,pick:function(e){var t,r;for(t=0;t<e.length;t+=1)if(r=e[t],h(r.type))return"string"==typeof r.src&&(r.src=a.createAbsoluteUrl(r.src)),r},load:function(t){var o=s.conf,d={ended:"finish",loadeddata:"ready",pause:"pause",play:"resume",progress:"buffer",ratechange:"speed",seeked:"seek",timeupdate:"progress",volumechange:"volume",error:"error"},f=e.Events,h=!!t.autoplay||!!o.autoplay,b=t.hlsQualities||o.hlsQualities,k=n(r,o.hlsjs,o.clip.hlsjs,t.hlsjs),T=n({},k);t.hlsQualities===!1&&(b=!1),g?(g.destroy(),(s.video.src&&t.src!==s.video.src||t.index)&&a.attr(p,"autoplay","autoplay")):(a.removeNode(a.findDirect("video",v)[0]||a.find(".fp-player > video",v)[0]),p=a.createElement("video",{class:"fp-engine "+i+"-engine",autoplay:!!h&&"autoplay",volume:s.volumeLevel,"x-webkit-airplay":"allow"}),Object.keys(d).forEach(function(e){var r,u=d[e],h=e+"."+i;R.on(p,h,function(e){o.debug&&u.indexOf("progress")<0&&console.log(h,"->",u,e.originalEvent);var d,c,y,m,E=p.currentTime,b=0,_=0,T=s.video,A=T.src,O=!1,P=T.loop,I=s.quality;switch(u){case"ready":r=n(T,{duration:p.duration,seekable:p.seekable.end(null),width:p.videoWidth,height:p.videoHeight,url:A});break;case"resume":L(),k.bufferWhilePaused||g.startLoad(E);break;case"seek":L(),!k.bufferWhilePaused&&p.paused&&(g.stopLoad(),p.pause()),r=E;break;case"pause":k.bufferWhilePaused||g.stopLoad();break;case"progress":r=E;break;case"speed":r=p.playbackRate;break;case"volume":r=p.volume;break;case"buffer":try{if(d=p.buffered,b=d.end(null),E)for(c=d.length-1;c>-1;c-=1)_=d.end(c),_>=E&&(b=_)}catch(e){}t.buffer=b,r=b;break;case"finish":g.autoLevelEnabled&&(P||o.playlist.length<2||o.advance===!1)&&(O=!g.levels[D].details,O||g.levels[D].details.fragments.forEach(function(e){O=!!O||!e.loadCounter}),O&&(g.trigger(f.BUFFER_FLUSHING,{startOffset:0,endOffset:.9*T.duration}),g.currentLevel<D&&(g.nextLevel=D,w=!0),P||R.one(p,"play."+i,function(){p.currentTime>=p.duration&&(p.currentTime=0)})));break;case"error":m=p.error.code,(k.recoverMediaError&&3===m||k.recoverNetworkError&&2===m||k.recover&&(2===m||3===m))&&(m=S(o,u,2===m)),void 0!==m?(r={code:m},m>2&&(r.video=n(T,{src:A,url:A}))):r=!1}return r===!1?r:(s.trigger(u,[s,r]),void(l&&"ready"===u&&I&&(y="abr"===I?0:s.qualities.indexOf(I)+1,a.addClass(a.find(".fp-quality-selector li",v)[y],C))))})}),l&&o.poster&&(s.on("stop."+i,A),!s.live||h||s.video.autoplay||R.one(p,"seeked."+i,A)),k.bufferWhilePaused||s.on("beforeseek."+i,function(e,t,r){t.paused&&(R.one(p,"seeked."+i,function(){p.pause()}),g.startLoad(r))}),l||s.on("quality."+i,function(e,t,r){k.smoothSwitching?g.nextLevel=r:g.currentLevel=r,N=r}),s.on("error."+i,function(){g&&(g.destroy(),g=0)}),a.prepend(a.find(".fp-player",v)[0],p)),s.video=t,D=0,w=!1,Object.keys(k).forEach(function(t){e.DefaultConfig.hasOwnProperty(t)||delete T[t];var r=k[t];switch(t){case"adaptOnStartOnly":r&&(T.startLevel=-1);break;case"autoLevelCapping":r===!1&&(r=-1),T[t]=r;break;case"startLevel":switch(r){case"auto":r=-1;break;case"firstLevel":r=void 0}T[t]=r;break;case"recover":k.recoverMediaError=!1,k.recoverNetworkError=!1,y=r;break;case"strict":r&&(k.recoverMediaError=!1,k.recoverNetworkError=!1,y=0)}}),T.autoStartLoad=!1,g=new e(T),s.engine[i]=g,m=null,E=null,Object.keys(f).forEach(function(t){var r=f[t],d=k.listeners,h=d&&d.indexOf(r)>-1;g.on(r,function(r,d){var f,m={},E=e.ErrorTypes,T=e.ErrorDetails,A=s.video,L=A.src;switch(t){case"MEDIA_ATTACHED":g.loadSource(L);break;case"MANIFEST_PARSED":!c(o)||!l&&s.pluginQualitySelectorEnabled?l&&delete s.quality:b?F(b,k,d):x(),s.live?O():setTimeout(O);break;case"FRAG_LOADED":w?(g.nextLevel=-1,w=!1,D=0):!s.live&&g.autoLevelEnabled&&g.loadLevel>D&&(D=g.loadLevel);break;case"FRAG_PARSING_METADATA":if(l)return;d.samples.forEach(function(e){var t;t=function(){if(!(p.currentTime<e.dts)){R.off(p,"timeupdate."+i,t);var r,a=u.TextDecoder;r=a&&"function"==typeof a?new a("utf-8").decode(e.data):decodeURIComponent(u.escape(String.fromCharCode.apply(null,e.data))),s.trigger("metadata",[s,{key:r.substr(10,4),data:r.substr(21)}])}},R.on(p,"timeupdate."+i,t)});break;case"ERROR":if(d.fatal||k.strict){switch(d.type){case E.NETWORK_ERROR:k.recoverNetworkError||y?S(o,d.type,!0):d.frag&&d.frag.url?(m.url=d.frag.url,f=2):f=4;break;case E.MEDIA_ERROR:f=k.recoverMediaError||y?S(o,d.type):3;break;default:g.destroy(),f=5}void 0!==f&&(m.code=f,f>2&&(m.video=n(A,{src:L,url:d.url||L})),s.trigger("error",[s,m]))}else switch(d.details){case T.BUFFER_STALLED_ERROR:case T.FRAG_LOOP_LOADING_ERROR:a.addClass(v,_),R.one(p,"timeupdate."+i,function(){a.removeClass(v,_)})}}h&&s.trigger(r,[s,d])})}),k.adaptOnStartOnly&&R.one(p,"timeupdate."+i,function(){g.loadLevel=g.loadLevel}),g.attachMedia(p),p.paused&&h&&p.play()},resume:function(){p.play()},pause:function(){p.pause()},seek:function(e){p.currentTime=e},volume:function(e){p&&(p.volume=e)},speed:function(e){p.playbackRate=e,s.trigger("speed",[s,e])},unload:function(){if(g){var e="."+i;g.destroy(),g=0,x(),s.off(e),R.off(v,e),R.off(p,e),a.removeNode(p),p=0}}};return!/^6\.0\.[0-3]$/.test(o)||s.conf.splash||s.conf.poster||s.conf.autoplay||(b=a.css(v,"backgroundColor"),k="none"!==a.css(v,"backgroundImage")||b&&"rgba(0, 0, 0, 0)"!==b&&"transparent"!==b,k&&(s.conf.poster=!0)),U};e.isSupported()&&0!==o.indexOf("5.")&&(v.engineName=i,v.canPlay=function(e,a){var o=s.browser,l=u.navigator,d=l.userAgent.indexOf("Trident/7")>-1;return a[i]!==!1&&a.clip[i]!==!1&&(r=n({bufferWhilePaused:!0,smoothSwitching:!0,recoverMediaError:!0},t.conf[i],a[i],a.clip[i]),!!h(e)&&(!!r.debug||(!r.anamorphic||0!==l.platform.indexOf("Win")||!o.mozilla||0!==o.version.indexOf("44."))&&(d||!o.safari)))},t.engines.unshift(v),l&&t(function(e){e.pluginQualitySelectorEnabled=c(e.conf)&&v.canPlay("application/x-mpegurl",e.conf)}))};"object"==typeof e&&e.exports?e.exports=t.bind(void 0,r(35)):window.Hls&&window.flowplayer&&t(window.Hls,window.flowplayer)}()},function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"==typeof t?"undefined":o(t))&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof t?"undefined":o(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),u=r(2),d=i(u),f=r(4),h=i(f),c=r(5),v=i(c),p=r(3),g=r(1),y=r(19),m=i(y),E=function(e){function t(e){a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,d.default.FRAG_LOADING,d.default.FRAG_LOADED,d.default.FRAG_BUFFERED,d.default.ERROR));return r.lastLoadedFragLevel=0,r._autoLevelCapping=-1,r._nextAutoLevel=-1,r.hls=e,r.onCheck=r.abandonRulesCheck.bind(r),r}return s(t,e),l(t,[{key:"destroy",value:function(){this.clearTimer(),h.default.prototype.destroy.call(this)}},{key:"onFragLoading",value:function(e){var t=e.frag;if("main"===t.type){if(this.timer||(this.timer=setInterval(this.onCheck,100)),!this.bwEstimator){var r=this.hls,i=e.frag.level,a=r.levels[i].details.live,n=r.config,s=void 0,o=void 0;a?(s=n.abrEwmaFastLive,o=n.abrEwmaSlowLive):(s=n.abrEwmaFastVoD,o=n.abrEwmaSlowVoD),this.bwEstimator=new m.default(r,o,s,n.abrEwmaDefaultEstimate)}this.fragCurrent=t}}},{key:"abandonRulesCheck",value:function(){var e=this.hls,t=e.media,r=this.fragCurrent,i=r.loader,a=this.minAutoLevel;if(!i||i.stats&&i.stats.aborted)return g.logger.warn("frag loader destroy or aborted, disarm abandonRules"),void this.clearTimer();var n=i.stats;if(t&&(!t.paused&&0!==t.playbackRate||!t.readyState)&&r.autoLevel&&r.level){var s=performance.now()-n.trequest,o=Math.abs(t.playbackRate);if(s>500*r.duration/o){
var l=e.levels,u=Math.max(1,n.bw?n.bw/8:1e3*n.loaded/s),f=n.total?n.total:Math.max(n.loaded,Math.round(r.duration*l[r.level].bitrate/8)),h=t.currentTime,c=(f-n.loaded)/u,p=(v.default.bufferInfo(t,h,e.config.maxBufferHole).end-h)/o;if(p<2*r.duration/o&&c>p){var y=void 0,m=void 0;for(m=r.level-1;m>a&&(y=r.duration*l[m].bitrate/(6.4*u),!(y<p));m--);y<c&&(g.logger.warn("loading too slow, abort fragment loading and switch to level "+m+":fragLoadedDelay["+m+"]<fragLoadedDelay["+(r.level-1)+"];bufferStarvationDelay:"+y.toFixed(1)+"<"+c.toFixed(1)+":"+p.toFixed(1)),e.nextLoadLevel=m,this.bwEstimator.sample(s,n.loaded),i.abort(),this.clearTimer(),e.trigger(d.default.FRAG_LOAD_EMERGENCY_ABORTED,{frag:r,stats:n}))}}}}},{key:"onFragLoaded",value:function(e){var t=e.frag;if("main"===t.type&&(this.clearTimer(),this.lastLoadedFragLevel=t.level,this._nextAutoLevel=-1,e.frag.bitrateTest)){var r=e.stats;r.tparsed=r.tbuffered=r.tload,this.onFragBuffered(e)}}},{key:"onFragBuffered",value:function(e){var t=e.stats,r=e.frag;if(t.aborted!==!0&&1===r.loadCounter&&"main"===r.type&&(!r.bitrateTest||t.tload===t.tbuffered)){var i=t.tbuffered-t.trequest;g.logger.log("latency/loading/parsing/append/kbps:"+Math.round(t.tfirst-t.trequest)+"/"+Math.round(t.tload-t.tfirst)+"/"+Math.round(t.tparsed-t.tload)+"/"+Math.round(t.tbuffered-t.tparsed)+"/"+Math.round(8*t.loaded/(t.tbuffered-t.trequest))),this.bwEstimator.sample(i,t.loaded),r.bitrateTest?this.bitrateTestDelay=i/1e3:this.bitrateTestDelay=0}}},{key:"onError",value:function(e){switch(e.details){case p.ErrorDetails.FRAG_LOAD_ERROR:case p.ErrorDetails.FRAG_LOAD_TIMEOUT:this.clearTimer()}}},{key:"clearTimer",value:function(){this.timer&&(clearInterval(this.timer),this.timer=null)}},{key:"findBestLevel",value:function(e,t,r,i,a,n,s,o,l){for(var u=a;u>=i;u--){var d=l[u],f=d.details,h=f?f.totalduration/f.fragments.length:t,c=!!f&&f.live,v=void 0;v=u<=e?s*r:o*r;var p=l[u].bitrate,y=p*h/v;if(g.logger.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+u+"/"+Math.round(v)+"/"+p+"/"+h+"/"+n+"/"+y),v>p&&(!y||c||y<n))return u}return-1}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(e){this._autoLevelCapping=e}},{key:"nextAutoLevel",get:function(){var e=this._nextAutoLevel,t=this.bwEstimator,r=this.hls,i=r.levels,a=r.config.minAutoBitrate;if(!(e===-1||t&&t.canEstimate()))return Math.min(e,this.maxAutoLevel);var n=this.nextABRAutoLevel;if(e!==-1&&(n=Math.min(e,n)),void 0!==a)for(;i[n].bitrate<a;)n++;return n},set:function(e){this._nextAutoLevel=e}},{key:"minAutoLevel",get:function(){for(var e=this.hls,t=e.levels,r=e.config.minAutoBitrate,i=t?t.length:0,a=0;a<i;a++)if(t[a].bitrate>r)return a;return 0}},{key:"maxAutoLevel",get:function(){var e,t=this.hls.levels,r=this._autoLevelCapping;return e=r===-1&&t&&t.length?t.length-1:r}},{key:"nextABRAutoLevel",get:function(){var e=this.hls,t=this.maxAutoLevel,r=e.levels,i=e.config,a=this.minAutoLevel,n=e.media,s=this.lastLoadedFragLevel,o=this.fragCurrent?this.fragCurrent.duration:0,l=n?n.currentTime:0,u=n&&0!==n.playbackRate?Math.abs(n.playbackRate):1,d=this.bwEstimator?this.bwEstimator.getEstimate():i.abrEwmaDefaultEstimate,f=(v.default.bufferInfo(n,l,i.maxBufferHole).end-l)/u,h=this.findBestLevel(s,o,d,a,t,f,i.abrBandWidthFactor,i.abrBandWidthUpFactor,r);if(h>=0)return h;g.logger.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");var c=i.maxStarvationDelay,p=i.abrBandWidthFactor,y=i.abrBandWidthUpFactor;if(0===f){var m=this.bitrateTestDelay;m&&(c=i.maxLoadingDelay-m,g.logger.trace("bitrate test took "+Math.round(1e3*m)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*c)+" ms"),p=y=1)}return h=this.findBestLevel(s,o,d,a,t,f+c,p,y,r),Math.max(h,0)}}]),t}(h.default);t.default=E},function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"==typeof t?"undefined":o(t))&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof t?"undefined":o(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),u=r(10),d=i(u),f=r(5),h=i(f),c=r(8),v=i(c),p=r(2),g=i(p),y=r(4),m=i(y),E=r(9),b=i(E),k=r(11),R=i(k),_=r(3),S=r(1),T={STOPPED:"STOPPED",STARTING:"STARTING",IDLE:"IDLE",PAUSED:"PAUSED",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",ENDED:"ENDED",ERROR:"ERROR"},A=function(e){function t(e){a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,g.default.MEDIA_ATTACHED,g.default.MEDIA_DETACHING,g.default.AUDIO_TRACKS_UPDATED,g.default.AUDIO_TRACK_SWITCH,g.default.AUDIO_TRACK_LOADED,g.default.KEY_LOADED,g.default.FRAG_LOADED,g.default.FRAG_PARSING_INIT_SEGMENT,g.default.FRAG_PARSING_DATA,g.default.FRAG_PARSED,g.default.ERROR,g.default.BUFFER_CREATED,g.default.BUFFER_APPENDED,g.default.BUFFER_FLUSHED));return r.config=e.config,r.audioCodecSwap=!1,r.ticks=0,r.ontick=r.tick.bind(r),r}return s(t,e),l(t,[{key:"destroy",value:function(){this.stopLoad(),this.timer&&(clearInterval(this.timer),this.timer=null),m.default.prototype.destroy.call(this),this.state=T.STOPPED}},{key:"startLoad",value:function(e){if(this.tracks){var t=this.lastCurrentTime;this.stopLoad(),this.timer||(this.timer=setInterval(this.ontick,100)),this.fragLoadError=0,t>0?(S.logger.log("override startPosition with lastCurrentTime @"+t.toFixed(3)),this.state=T.IDLE):(this.lastCurrentTime=this.startPosition?this.startPosition:e,this.state=T.STARTING),this.nextLoadPosition=this.startPosition=this.lastCurrentTime,this.tick()}else this.startPosition=e,this.state=T.STOPPED}},{key:"stopLoad",value:function(){var e=this.fragCurrent;e&&(e.loader&&e.loader.abort(),this.fragCurrent=null),this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=T.STOPPED}},{key:"tick",value:function(){this.ticks++,1===this.ticks&&(this.doTick(),this.ticks>1&&setTimeout(this.tick,1),this.ticks=0)}},{key:"doTick",value:function(){var e,t,r,i=this.hls,a=i.config;switch(this.state){case T.ERROR:case T.PAUSED:break;case T.STARTING:this.state=T.WAITING_TRACK,this.loadedmetadata=!1;break;case T.IDLE:if(!this.media&&(this.startFragRequested||!a.startFragPrefetch))break;e=this.loadedmetadata?this.media.currentTime:this.nextLoadPosition;var n=this.mediaBuffer?this.mediaBuffer:this.media,s=h.default.bufferInfo(n,e,a.maxBufferHole),o=s.len,l=s.end,u=this.fragPrevious,f=a.maxMaxBufferLength;if(o<f&&this.trackId<this.tracks.length){if(r=this.tracks[this.trackId].details,"undefined"==typeof r){this.state=T.WAITING_TRACK;break}if(!r.live&&u&&u.sn===r.endSN&&(!this.media.seeking||this.media.duration-l<u.duration/2)){this.hls.trigger(g.default.BUFFER_EOS,{type:"audio"}),this.state=T.ENDED;break}var c=r.fragments,v=c.length,p=c[0].start,y=c[v-1].start+c[v-1].duration,m=void 0;if(l<p?m=c[0]:!function(){var e=void 0,t=a.maxFragLookUpTolerance;l<y?(l>y-t&&(t=0),e=d.default.search(c,function(e){return e.start+e.duration-t<=l?1:e.start-t>l?-1:0})):e=c[v-1],e&&(m=e,p=e.start,u&&m.level===u.level&&m.sn===u.sn&&(m.sn<r.endSN?(m=c[m.sn+1-r.startSN],S.logger.log("SN just loaded, load next one: "+m.sn)):m=null))}(),m)if(null!=m.decryptdata.uri&&null==m.decryptdata.key)S.logger.log("Loading key for "+m.sn+" of ["+r.startSN+" ,"+r.endSN+"],track "+this.trackId),this.state=T.KEY_LOADING,i.trigger(g.default.KEY_LOADING,{frag:m});else{if(S.logger.log("Loading "+m.sn+" of ["+r.startSN+" ,"+r.endSN+"],track "+this.trackId+", currentTime:"+e+",bufferEnd:"+l.toFixed(3)),void 0!==this.fragLoadIdx?this.fragLoadIdx++:this.fragLoadIdx=0,m.loadCounter){m.loadCounter++;var E=a.fragLoadingLoopThreshold;if(m.loadCounter>E&&Math.abs(this.fragLoadIdx-m.loadIdx)<E)return void i.trigger(g.default.ERROR,{type:_.ErrorTypes.MEDIA_ERROR,details:_.ErrorDetails.FRAG_LOOP_LOADING_ERROR,fatal:!1,frag:m})}else m.loadCounter=1;m.loadIdx=this.fragLoadIdx,this.fragCurrent=m,this.startFragRequested=!0,i.trigger(g.default.FRAG_LOADING,{frag:m}),this.state=T.FRAG_LOADING}}break;case T.WAITING_TRACK:t=this.tracks[this.trackId],t&&t.details&&(this.state=T.IDLE);break;case T.FRAG_LOADING_WAITING_RETRY:var b=performance.now(),k=this.retryDate;n=this.media;var R=n&&n.seeking;(!k||b>=k||R)&&(S.logger.log("audioStreamController: retryDate reached, switch back to IDLE state"),this.state=T.IDLE);break;case T.STOPPED:case T.FRAG_LOADING:case T.PARSING:case T.PARSED:case T.ENDED:}}},{key:"onMediaAttached",value:function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("ended",this.onvended);var r=this.config;this.tracks&&r.autoStartLoad&&this.startLoad(r.startPosition)}},{key:"onMediaDetaching",value:function(){var e=this.media;e&&e.ended&&(S.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var t=this.tracks;t&&t.forEach(function(e){e.details&&e.details.fragments.forEach(function(e){e.loadCounter=void 0})}),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()}},{key:"onMediaSeeking",value:function(){this.state===T.ENDED&&(this.state=T.IDLE),this.media&&(this.lastCurrentTime=this.media.currentTime),void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold),this.tick()}},{key:"onMediaEnded",value:function(){this.startPosition=this.lastCurrentTime=0}},{key:"onAudioTracksUpdated",value:function(e){S.logger.log("audio tracks updated"),this.tracks=e.audioTracks}},{key:"onAudioTrackSwitch",value:function(e){var t=!!e.url;this.trackId=e.id,this.state=T.IDLE,this.fragCurrent=null,this.state=T.PAUSED,t?this.timer||(this.timer=setInterval(this.ontick,100)):this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.hls.trigger(g.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),this.tick()}},{key:"onAudioTrackLoaded",value:function(e){var t=e.details,r=e.id,i=this.tracks[r],a=t.totalduration;if(S.logger.log("track "+r+" loaded ["+t.startSN+","+t.endSN+"],duration:"+a),t.PTSKnown=!1,i.details=t,!this.startFragRequested){if(this.startPosition===-1){var n=t.startTimeOffset;isNaN(n)?this.startPosition=0:(S.logger.log("start time offset found in playlist, adjust startPosition to "+n),this.startPosition=n)}this.nextLoadPosition=this.startPosition}this.state===T.WAITING_TRACK&&(this.state=T.IDLE),this.tick()}},{key:"onKeyLoaded",value:function(){this.state===T.KEY_LOADING&&(this.state=T.IDLE,this.tick())}},{key:"onFragLoaded",value:function(e){var t=this.fragCurrent;if(this.state===T.FRAG_LOADING&&t&&"audio"===e.frag.type&&e.frag.level===t.level&&e.frag.sn===t.sn){this.state=T.PARSING,this.stats=e.stats;var r=this.tracks[this.trackId],i=r.details,a=i.totalduration,n=t.start,s=t.level,o=t.sn,l=this.config.defaultAudioCodec||r.audioCodec;this.pendingAppending=0,this.demuxer||(this.demuxer=new v.default(this.hls,"audio")),S.logger.log("Demuxing "+o+" of ["+i.startSN+" ,"+i.endSN+"],track "+s);var u=i.PTSKnown||!i.live;this.demuxer.push(e.payload,l,null,n,t.cc,s,o,a,t.decryptdata,u)}this.fragLoadError=0}},{key:"onFragParsingInitSegment",value:function(e){var t=this.fragCurrent;if(t&&"audio"===e.id&&e.sn===t.sn&&e.level===t.level&&this.state===T.PARSING){var r=e.tracks,i=void 0;if(i=r.audio){i.levelCodec="mp4a.40.2",i.id=e.id,this.hls.trigger(g.default.BUFFER_CODECS,r),S.logger.log("audio track:audio,container:"+i.container+",codecs[level/parsed]=["+i.levelCodec+"/"+i.codec+"]");var a=i.initSegment;a&&(this.pendingAppending++,this.hls.trigger(g.default.BUFFER_APPENDING,{type:"audio",data:a,parent:"audio",content:"initSegment"})),this.tick()}}}},{key:"onFragParsingData",value:function(e){var t=this,r=this.fragCurrent;if(r&&"audio"===e.id&&e.sn===r.sn&&e.level===r.level&&this.state===T.PARSING){var i=this.tracks[this.trackId],a=this.fragCurrent;S.logger.log("parsed "+e.type+",PTS:["+e.startPTS.toFixed(3)+","+e.endPTS.toFixed(3)+"],DTS:["+e.startDTS.toFixed(3)+"/"+e.endDTS.toFixed(3)+"],nb:"+e.nb),b.default.updateFragPTSDTS(i.details,a.sn,e.startPTS,e.endPTS),[e.data1,e.data2].forEach(function(r){r&&(t.pendingAppending++,t.hls.trigger(g.default.BUFFER_APPENDING,{type:e.type,data:r,parent:"audio",content:"data"}))}),this.nextLoadPosition=e.endPTS,this.tick()}}},{key:"onFragParsed",value:function(e){var t=this.fragCurrent;t&&"audio"===e.id&&e.sn===t.sn&&e.level===t.level&&this.state===T.PARSING&&(this.stats.tparsed=performance.now(),this.state=T.PARSED,this._checkAppendedParsed())}},{key:"onBufferCreated",value:function(e){var t=e.tracks.audio;t&&(this.mediaBuffer=t.buffer,this.loadedmetadata=!0)}},{key:"onBufferAppended",value:function(e){if("audio"===e.parent)switch(this.state){case T.PARSING:case T.PARSED:this.pendingAppending--,this._checkAppendedParsed()}}},{key:"_checkAppendedParsed",value:function(){if(this.state===T.PARSED&&0===this.pendingAppending){var e=this.fragCurrent,t=this.stats;if(e){this.fragPrevious=e,t.tbuffered=performance.now(),this.hls.trigger(g.default.FRAG_BUFFERED,{stats:t,frag:e,id:"audio"});var r=this.mediaBuffer?this.mediaBuffer:this.media;S.logger.log("audio buffered : "+R.default.toString(r.buffered)),this.state=T.IDLE}this.tick()}}},{key:"onError",value:function(e){var t=e.frag;if(!t||"audio"===t.type)switch(e.details){case _.ErrorDetails.FRAG_LOAD_ERROR:case _.ErrorDetails.FRAG_LOAD_TIMEOUT:if(!e.fatal){var r=this.fragLoadError;r?r++:r=1;var i=this.config;if(r<=i.fragLoadingMaxRetry){this.fragLoadError=r,t.loadCounter=0;var a=Math.min(Math.pow(2,r-1)*i.fragLoadingRetryDelay,i.fragLoadingMaxRetryTimeout);S.logger.warn("audioStreamController: frag loading failed, retry in "+a+" ms"),this.retryDate=performance.now()+a,this.state=T.FRAG_LOADING_WAITING_RETRY}else S.logger.error("audioStreamController: "+e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.hls.trigger(g.default.ERROR,e),this.state=T.ERROR}break;case _.ErrorDetails.FRAG_LOOP_LOADING_ERROR:case _.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case _.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:case _.ErrorDetails.KEY_LOAD_ERROR:case _.ErrorDetails.KEY_LOAD_TIMEOUT:this.state!==T.ERROR&&(this.state=e.fatal?T.ERROR:T.IDLE,S.logger.warn("audioStreamController: "+e.details+" while loading frag,switch to "+this.state+" state ..."))}}},{key:"onBufferFlushed",value:function(){this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold,this.state=T.IDLE,this.fragPrevious=null,this.tick()}}]),t}(m.default);t.default=A},function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"==typeof t?"undefined":o(t))&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof t?"undefined":o(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),u=r(2),d=i(u),f=r(4),h=i(f),c=r(1),v=function(e){function t(e){return a(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,d.default.MANIFEST_LOADING,d.default.MANIFEST_LOADED,d.default.AUDIO_TRACK_LOADED))}return s(t,e),l(t,[{key:"destroy",value:function(){h.default.prototype.destroy.call(this)}},{key:"onManifestLoading",value:function(){this.tracks=[],this.trackId=-1}},{key:"onManifestLoaded",value:function(e){var t=this,r=e.audioTracks||[],i=!1;this.tracks=r,this.hls.trigger(d.default.AUDIO_TRACKS_UPDATED,{audioTracks:r});var a=0;r.forEach(function(e){return e.default?(t.audioTrack=a,void(i=!0)):void a++}),i===!1&&r.length&&(c.logger.log("no default audio track defined, use first audio track as default"),this.audioTrack=0)}},{key:"onAudioTrackLoaded",value:function(e){e.id<this.tracks.length&&(c.logger.log("audioTrack "+e.id+" loaded"),this.tracks[e.id].details=e.details,e.details.live&&!this.timer&&(this.timer=setInterval(this.ontick,1e3*e.details.targetduration)),!e.details.live&&this.timer&&(clearInterval(this.timer),this.timer=null))}},{key:"setAudioTrackInternal",value:function(e){if(e>=0&&e<this.tracks.length){this.timer&&(clearInterval(this.timer),this.timer=null),this.trackId=e,c.logger.log("switching to audioTrack "+e);var t=this.tracks[e],r=t.type,i=t.url;this.hls.trigger(d.default.AUDIO_TRACK_SWITCH,{id:e,type:r,url:i});var a=t.details;!i||void 0!==a&&a.live!==!0||(c.logger.log("(re)loading playlist for audioTrack "+e),this.hls.trigger(d.default.AUDIO_TRACK_LOADING,{url:i,id:e}))}}},{key:"audioTracks",get:function(){return this.tracks}},{key:"audioTrack",get:function(){return this.trackId},set:function(e){this.trackId===e&&void 0!==this.tracks[e].details||this.setAudioTrackInternal(e)}}]),t}(h.default);t.default=v},function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"==typeof t?"undefined":o(t))&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof t?"undefined":o(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),u=r(2),d=i(u),f=r(4),h=i(f),c=r(1),v=r(3),p=function(e){function t(e){a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,d.default.MEDIA_ATTACHING,d.default.MEDIA_DETACHING,d.default.MANIFEST_PARSED,d.default.BUFFER_RESET,d.default.BUFFER_APPENDING,d.default.BUFFER_CODECS,d.default.BUFFER_EOS,d.default.BUFFER_FLUSHING,d.default.LEVEL_PTS_UPDATED,d.default.LEVEL_UPDATED));return r._msDuration=null,r._levelDuration=null,r.onsbue=r.onSBUpdateEnd.bind(r),r.onsbe=r.onSBUpdateError.bind(r),r.pendingTracks={},r.tracks={},r}return s(t,e),l(t,[{key:"destroy",value:function(){h.default.prototype.destroy.call(this)}},{key:"onLevelPtsUpdated",value:function(e){var t=e.type,r=this.tracks.audio;if("audio"===t&&r&&"audio/mpeg"===r.container){var i=this.sourceBuffer.audio,a=Math.abs(i.timestampOffset-e.start);if(a>.1){var n=i.updating;try{i.abort()}catch(e){n=!0,c.logger.warn("can not abort audio buffer: "+e)}n?this.audioTimestampOffset=e.start:(c.logger.warn("change mpeg audio timestamp offset from "+i.timestampOffset+" to "+e.start),i.timestampOffset=e.start)}}}},{key:"onManifestParsed",value:function(e){var t=e.audio,r=e.video,i=0;e.altAudio&&(t||r)&&(i=(t?1:0)+(r?1:0),c.logger.log(i+" sourceBuffer(s) expected")),this.sourceBufferNb=i}},{key:"onMediaAttaching",value:function(e){var t=this.media=e.media;if(t){var r=this.mediaSource=new MediaSource;this.onmso=this.onMediaSourceOpen.bind(this),this.onmse=this.onMediaSourceEnded.bind(this),this.onmsc=this.onMediaSourceClose.bind(this),r.addEventListener("sourceopen",this.onmso),r.addEventListener("sourceended",this.onmse),r.addEventListener("sourceclose",this.onmsc),t.src=URL.createObjectURL(r)}}},{key:"onMediaDetaching",value:function(){c.logger.log("media source detaching");var e=this.mediaSource;if(e){if("open"===e.readyState)try{e.endOfStream()}catch(e){c.logger.warn("onMediaDetaching:"+e.message+" while calling endOfStream")}e.removeEventListener("sourceopen",this.onmso),e.removeEventListener("sourceended",this.onmse),e.removeEventListener("sourceclose",this.onmsc),this.media&&(this.media.removeAttribute("src"),this.media.load()),this.mediaSource=null,this.media=null,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.onmso=this.onmse=this.onmsc=null,this.hls.trigger(d.default.MEDIA_DETACHED)}},{key:"onMediaSourceOpen",value:function(){c.logger.log("media source opened"),this.hls.trigger(d.default.MEDIA_ATTACHED,{media:this.media});var e=this.mediaSource;e&&e.removeEventListener("sourceopen",this.onmso),this.checkPendingTracks()}},{key:"checkPendingTracks",value:function(){var e=this.pendingTracks,t=Object.keys(e).length;t&&(this.sourceBufferNb<=t||0===this.sourceBufferNb)&&(this.createSourceBuffers(e),this.pendingTracks={},this.doAppending())}},{key:"onMediaSourceClose",value:function(){c.logger.log("media source closed")}},{key:"onMediaSourceEnded",value:function(){c.logger.log("media source ended")}},{key:"onSBUpdateEnd",value:function(){if(this.audioTimestampOffset){var e=this.sourceBuffer.audio;c.logger.warn("change mpeg audio timestamp offset from "+e.timestampOffset+" to "+this.audioTimestampOffset),e.timestampOffset=this.audioTimestampOffset,delete this.audioTimestampOffset}this._needsFlush&&this.doFlush(),this._needsEos&&this.checkEos(),this.appending=!1,this.hls.trigger(d.default.BUFFER_APPENDED,{parent:this.parent}),this._needsFlush||this.doAppending(),this.updateMediaElementDuration()}},{key:"onSBUpdateError",value:function(e){c.logger.error("sourceBuffer error:"+e),this.hls.trigger(d.default.ERROR,{type:v.ErrorTypes.MEDIA_ERROR,details:v.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1})}},{key:"onBufferReset",value:function(){var e=this.sourceBuffer;for(var t in e){var r=e[t];try{this.mediaSource.removeSourceBuffer(r),r.removeEventListener("updateend",this.onsbue),r.removeEventListener("error",this.onsbe)}catch(e){}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}},{key:"onBufferCodecs",value:function(e){if(0===Object.keys(this.sourceBuffer).length){for(var t in e)this.pendingTracks[t]=e[t];var r=this.mediaSource;r&&"open"===r.readyState&&this.checkPendingTracks()}}},{key:"createSourceBuffers",value:function(e){var t=this.sourceBuffer,r=this.mediaSource;for(var i in e)if(!t[i]){var a=e[i],n=a.levelCodec||a.codec,s=a.container+";codecs="+n;c.logger.log("creating sourceBuffer("+s+")");try{var o=t[i]=r.addSourceBuffer(s);o.addEventListener("updateend",this.onsbue),o.addEventListener("error",this.onsbe),this.tracks[i]={codec:n,container:a.container},a.buffer=o}catch(e){c.logger.error("error while trying to add sourceBuffer:"+e.message),this.hls.trigger(d.default.ERROR,{type:v.ErrorTypes.MEDIA_ERROR,details:v.ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:e,mimeType:s})}}this.hls.trigger(d.default.BUFFER_CREATED,{tracks:e})}},{key:"onBufferAppending",value:function(e){this._needsFlush||(this.segments?this.segments.push(e):this.segments=[e],this.doAppending())}},{key:"onBufferAppendFail",value:function(e){c.logger.error("sourceBuffer error:"+e.event),this.hls.trigger(d.default.ERROR,{type:v.ErrorTypes.MEDIA_ERROR,details:v.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1,frag:this.fragCurrent})}},{key:"onBufferEos",value:function(e){var t=this.sourceBuffer,r=e.type;for(var i in t)r&&i!==r||t[i].ended||(t[i].ended=!0,c.logger.log(i+" sourceBuffer now EOS"));this.checkEos()}},{key:"checkEos",value:function(){var e=this.sourceBuffer,t=this.mediaSource;if(!t||"open"!==t.readyState)return void(this._needsEos=!1);for(var r in e){if(!e[r].ended)return;if(e[r].updating)return void(this._needsEos=!0)}c.logger.log("all media data available, signal endOfStream() to MediaSource and stop loading fragment"),t.endOfStream(),this._needsEos=!1}},{key:"onBufferFlushing",value:function(e){this.flushRange.push({start:e.startOffset,end:e.endOffset,type:e.type}),this.flushBufferCounter=0,this.doFlush()}},{key:"onLevelUpdated",value:function(e){var t=e.details;0!==t.fragments.length&&(this._levelDuration=t.totalduration+t.fragments[0].start,this.updateMediaElementDuration())}},{key:"updateMediaElementDuration",value:function(){var e=this.media,t=this.mediaSource,r=this.sourceBuffer,i=this._levelDuration;if(null!==i&&e&&t&&r&&0!==e.readyState&&"open"===t.readyState){for(var a in r)if(r[a].updating)return;null===this._msDuration&&(this._msDuration=t.duration),i>this._msDuration&&i>e.duration&&(c.logger.log("Updating mediasource duration to "+i.toFixed(3)),this._msDuration=t.duration=i)}}},{key:"doFlush",value:function(){for(;this.flushRange.length;){var e=this.flushRange[0];if(!this.flushBuffer(e.start,e.end,e.type))return void(this._needsFlush=!0);this.flushRange.shift(),this.flushBufferCounter=0}if(0===this.flushRange.length){this._needsFlush=!1;var t=0,r=this.sourceBuffer;for(var i in r)t+=r[i].buffered.length;this.appended=t,this.hls.trigger(d.default.BUFFER_FLUSHED)}}},{key:"doAppending",value:function(){var e=this.hls,t=this.sourceBuffer,r=this.segments;if(Object.keys(t).length){if(this.media.error)return this.segments=[],void c.logger.error("trying to append although a media error occured, flush segment and abort");if(this.appending)return;if(r&&r.length){var i=r.shift();try{var a=i.type;t[a]?(t[a].ended=!1,this.parent=i.parent,t[a].appendBuffer(i.data),this.appendError=0,this.appended++,this.appending=!0):this.onSBUpdateEnd()}catch(t){c.logger.error("error while trying to append buffer:"+t.message),r.unshift(i);var n={type:v.ErrorTypes.MEDIA_ERROR};if(22===t.code)return this.segments=[],n.details=v.ErrorDetails.BUFFER_FULL_ERROR,void e.trigger(d.default.ERROR,n);if(this.appendError?this.appendError++:this.appendError=1,n.details=v.ErrorDetails.BUFFER_APPEND_ERROR,n.frag=this.fragCurrent,this.appendError>e.config.appendErrorMaxRetry)return c.logger.log("fail "+e.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),r=[],n.fatal=!0,void e.trigger(d.default.ERROR,n);n.fatal=!1,e.trigger(d.default.ERROR,n)}}}}},{key:"flushBuffer",value:function(e,t,r){var i,a,n,s,o,l,u=this.sourceBuffer;if(Object.keys(u).length){if(c.logger.log("flushBuffer,pos/start/end: "+this.media.currentTime+"/"+e+"/"+t),this.flushBufferCounter<this.appended){for(var d in u)if(!r||d===r){if(i=u[d],i.ended=!1,i.updating)return c.logger.warn("cannot flush, sb updating in progress"),!1;for(a=0;a<i.buffered.length;a++)if(n=i.buffered.start(a),s=i.buffered.end(a),navigator.userAgent.toLowerCase().indexOf("firefox")!==-1&&t===Number.POSITIVE_INFINITY?(o=e,l=t):(o=Math.max(n,e),l=Math.min(s,t)),Math.min(l,s)-o>.5)return this.flushBufferCounter++,c.logger.log("flush "+d+" ["+o+","+l+"], of ["+n+","+s+"], pos:"+this.media.currentTime),i.remove(o,l),!1}}else c.logger.warn("abort flushing too many retries");c.logger.log("buffer flushed")}return!0}}]),t}(h.default);t.default=p},function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"==typeof t?"undefined":o(t))&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof t?"undefined":o(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),u=r(2),d=i(u),f=r(4),h=i(f),c=function(e){function t(e){return a(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,d.default.FPS_DROP_LEVEL_CAPPING,d.default.MEDIA_ATTACHING,d.default.MANIFEST_PARSED))}return s(t,e),l(t,[{key:"destroy",value:function(){this.hls.config.capLevelToPlayerSize&&(this.media=this.restrictedLevels=null,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer)))}},{key:"onFpsDropLevelCapping",value:function(e){this.restrictedLevels||(this.restrictedLevels=[]),this.isLevelRestricted(e.droppedLevel)||this.restrictedLevels.push(e.droppedLevel)}},{key:"onMediaAttaching",value:function(e){this.media=e.media instanceof HTMLVideoElement?e.media:null}},{key:"onManifestParsed",value:function(e){this.hls.config.capLevelToPlayerSize&&(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.levels=e.levels,this.hls.firstLevel=this.getMaxLevel(e.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}},{key:"detectPlayerSize",value:function(){if(this.media){var e=this.levels?this.levels.length:0;e&&(this.hls.autoLevelCapping=this.getMaxLevel(e-1),this.hls.autoLevelCapping>this.autoLevelCapping&&this.hls.streamController.nextLevelSwitch(),this.autoLevelCapping=this.hls.autoLevelCapping)}}},{key:"getMaxLevel",value:function(e){var t=0,r=void 0,i=void 0,a=this.mediaWidth,n=this.mediaHeight,s=0,o=0;for(r=0;r<=e&&(i=this.levels[r],!this.isLevelRestricted(r))&&(t=r,s=i.width,o=i.height,!(a<=s||n<=o));r++);return t}},{key:"isLevelRestricted",value:function(e){return!(!this.restrictedLevels||this.restrictedLevels.indexOf(e)===-1)}},{key:"contentScaleFactor",get:function(){var e=1;try{e=window.devicePixelRatio}catch(e){}return e}},{key:"mediaWidth",get:function(){var e=void 0;return this.media&&(e=this.media.width||this.media.clientWidth||this.media.offsetWidth,e*=this.contentScaleFactor),e}},{key:"mediaHeight",get:function(){var e=void 0;return this.media&&(e=this.media.height||this.media.clientHeight||this.media.offsetHeight,
e*=this.contentScaleFactor),e}}]),t}(h.default);t.default=c},function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),s=r(45),o=i(s),l=function(){function e(t,r,i,n){a(this,e),this.hls=t,this.defaultEstimate_=n,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new o.default(r),this.fast_=new o.default(i)}return n(e,[{key:"sample",value:function(e,t){e=Math.max(e,this.minDelayMs_);var r=8e3*t/e,i=e/1e3;this.fast_.sample(i,r),this.slow_.sample(i,r)}},{key:"canEstimate",value:function(){var e=this.fast_;return e&&e.getTotalWeight()>=this.minWeight_}},{key:"getEstimate",value:function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}},{key:"destroy",value:function(){}}]),e}();t.default=l},function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"==typeof t?"undefined":o(t))&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof t?"undefined":o(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),u=r(2),d=i(u),f=r(4),h=i(f),c=r(1),v=function(e){function t(e){return a(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,d.default.MEDIA_ATTACHING))}return s(t,e),l(t,[{key:"destroy",value:function(){this.timer&&clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1}},{key:"onMediaAttaching",value:function(e){this.hls.config.capLevelOnFPSDrop&&(this.video=e.media instanceof HTMLVideoElement?e.media:null,"function"==typeof this.video.getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),this.hls.config.fpsDroppedMonitoringPeriod))}},{key:"checkFPS",value:function(e,t,r){var i=performance.now();if(t){if(this.lastTime){var a=i-this.lastTime,n=r-this.lastDroppedFrames,s=t-this.lastDecodedFrames,o=1e3*n/a;if(this.hls.trigger(d.default.FPS_DROP,{currentDropped:n,currentDecoded:s,totalDroppedFrames:r}),o>0&&n>this.hls.config.fpsDroppedMonitoringThreshold*s){var l=this.hls.currentLevel;c.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+l),l>0&&(this.hls.autoLevelCapping===-1||this.hls.autoLevelCapping>=l)&&(l-=1,this.hls.trigger(d.default.FPS_DROP_LEVEL_CAPPING,{level:l,droppedLevel:this.hls.currentLevel}),this.hls.autoLevelCapping=l,this.hls.streamController.nextLevelSwitch())}}this.lastTime=i,this.lastDroppedFrames=r,this.lastDecodedFrames=t}}},{key:"checkFPSInterval",value:function(){if(this.video)if(this.isVideoPlaybackQualityAvailable){var e=this.video.getVideoPlaybackQuality();this.checkFPS(this.video,e.totalVideoFrames,e.droppedVideoFrames)}else this.checkFPS(this.video,this.video.webkitDecodedFrameCount,this.video.webkitDroppedFrameCount)}}]),t}(h.default);t.default=v},function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"==typeof t?"undefined":o(t))&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof t?"undefined":o(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),u=r(2),d=i(u),f=r(4),h=i(f),c=r(1),v=r(3),p=r(5),g=i(p),y=function(e){function t(e){a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,d.default.MANIFEST_LOADED,d.default.LEVEL_LOADED,d.default.ERROR));return r.ontick=r.tick.bind(r),r._manualLevel=r._autoLevelCapping=-1,r}return s(t,e),l(t,[{key:"destroy",value:function(){this.timer&&(clearTimeout(this.timer),this.timer=null),this._manualLevel=-1}},{key:"startLoad",value:function(){this.canload=!0,this.timer&&this.tick()}},{key:"stopLoad",value:function(){this.canload=!1}},{key:"onManifestLoaded",value:function(e){var t,r=[],i=[],a={},n=!1,s=!1,o=this.hls,l=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),u=function(e,t){return MediaSource.isTypeSupported(e+"/mp4;codecs="+t)};if(e.levels.forEach(function(e){e.videoCodec&&(n=!0),l&&e.audioCodec&&e.audioCodec.indexOf("mp4a.40.34")!==-1&&(e.audioCodec=void 0),(e.audioCodec||e.attrs&&e.attrs.AUDIO)&&(s=!0);var t=a[e.bitrate];void 0===t?(a[e.bitrate]=r.length,e.url=[e.url],e.urlId=0,r.push(e)):r[t].url.push(e.url)}),n&&s?r.forEach(function(e){e.videoCodec&&i.push(e)}):i=r,i=i.filter(function(e){var t=e.audioCodec,r=e.videoCodec;return(!t||u("audio",t))&&(!r||u("video",r))}),i.length){t=i[0].bitrate,i.sort(function(e,t){return e.bitrate-t.bitrate}),this._levels=i;for(var f=0;f<i.length;f++)if(i[f].bitrate===t){this._firstLevel=f,c.logger.log("manifest loaded,"+i.length+" level(s) found, first bitrate:"+t);break}o.trigger(d.default.MANIFEST_PARSED,{levels:i,firstLevel:this._firstLevel,stats:e.stats,audio:s,video:n,altAudio:e.audioTracks.length>0})}else o.trigger(d.default.ERROR,{type:v.ErrorTypes.MEDIA_ERROR,details:v.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:o.url,reason:"no level with compatible codecs found in manifest"})}},{key:"setLevelInternal",value:function(e){var t=this._levels;if(e>=0&&e<t.length){this.timer&&(clearTimeout(this.timer),this.timer=null),this._level!==e&&(c.logger.log("switching to level "+e),this._level=e,this.hls.trigger(d.default.LEVEL_SWITCH,{level:e}));var r=t[e],i=r.details;if(!i||i.live===!0){var a=r.urlId;this.hls.trigger(d.default.LEVEL_LOADING,{url:r.url[a],level:e,id:a})}}else this.hls.trigger(d.default.ERROR,{type:v.ErrorTypes.OTHER_ERROR,details:v.ErrorDetails.LEVEL_SWITCH_ERROR,level:e,fatal:!1,reason:"invalid level idx"})}},{key:"onError",value:function(e){if(!e.fatal){var t=e.details,r=this.hls,i=void 0,a=void 0,n=!1,s=r.abrController,o=s.minAutoLevel;switch(t){case v.ErrorDetails.FRAG_LOAD_ERROR:case v.ErrorDetails.FRAG_LOAD_TIMEOUT:case v.ErrorDetails.FRAG_LOOP_LOADING_ERROR:case v.ErrorDetails.KEY_LOAD_ERROR:case v.ErrorDetails.KEY_LOAD_TIMEOUT:i=e.frag.level;break;case v.ErrorDetails.LEVEL_LOAD_ERROR:case v.ErrorDetails.LEVEL_LOAD_TIMEOUT:i=e.context.level,n=!0}if(void 0!==i)if(a=this._levels[i],a.urlId<a.url.length-1)a.urlId++,a.details=void 0,c.logger.warn("level controller,"+t+" for level "+i+": switching to redundant stream id "+a.urlId);else{var l=this._manualLevel===-1&&i;if(l)c.logger.warn("level controller,"+t+": emergency switch-down for next fragment"),s.nextAutoLevel=o;else if(a&&a.details&&a.details.live)c.logger.warn("level controller,"+t+" on live stream, discard"),n&&(this._level=void 0);else if(t===v.ErrorDetails.LEVEL_LOAD_ERROR||t===v.ErrorDetails.LEVEL_LOAD_TIMEOUT){var u=r.media,f=u&&g.default.isBuffered(u,u.currentTime)&&g.default.isBuffered(u,u.currentTime+.5);if(f){var h=r.config.levelLoadingRetryDelay;c.logger.warn("level controller,"+t+", but media buffered, retry in "+h+"ms"),this.timer=setTimeout(this.ontick,h)}else c.logger.error("cannot recover "+t+" error"),this._level=void 0,this.timer&&(clearTimeout(this.timer),this.timer=null),e.fatal=!0,r.trigger(d.default.ERROR,e)}}}}},{key:"onLevelLoaded",value:function(e){if(e.level===this._level){var t=e.details;if(t.live){var r=1e3*(t.averagetargetduration?t.averagetargetduration:t.targetduration),i=this._levels[e.level],a=i.details;a&&t.endSN===a.endSN&&(r/=2,c.logger.log("same live playlist, reload twice faster")),r-=performance.now()-e.stats.trequest,r=Math.max(1e3,Math.round(r)),c.logger.log("live playlist, reload in "+r+" ms"),this.timer=setTimeout(this.ontick,r)}else this.timer=null}}},{key:"tick",value:function(){var e=this._level;if(void 0!==e&&this.canload){var t=this._levels[e],r=t.urlId;this.hls.trigger(d.default.LEVEL_LOADING,{url:t.url[r],level:e,id:r})}}},{key:"levels",get:function(){return this._levels}},{key:"level",get:function(){return this._level},set:function(e){var t=this._levels;t&&t.length>e&&(this._level===e&&void 0!==t[e].details||this.setLevelInternal(e))}},{key:"manualLevel",get:function(){return this._manualLevel},set:function(e){this._manualLevel=e,void 0===this._startLevel&&(this._startLevel=e),e!==-1&&(this.level=e)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(e){this._firstLevel=e}},{key:"startLevel",get:function(){if(void 0===this._startLevel){var e=this.hls.config.startLevel;return void 0!==e?e:this._firstLevel}return this._startLevel},set:function(e){e!==-1&&(e=Math.max(e,this.hls.abrController.minAutoLevel)),this._startLevel=e}},{key:"nextLoadLevel",get:function(){return this._manualLevel!==-1?this._manualLevel:this.hls.abrController.nextAutoLevel},set:function(e){this.level=e,this._manualLevel===-1&&(this.hls.abrController.nextAutoLevel=e)}}]),t}(h.default);t.default=y},function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"==typeof t?"undefined":o(t))&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof t?"undefined":o(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),u=r(10),d=i(u),f=r(5),h=i(f),c=r(8),v=i(c),p=r(2),g=i(p),y=r(4),m=i(y),E=r(9),b=i(E),k=r(11),R=i(k),_=r(3),S=r(1),T={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_LEVEL:"WAITING_LEVEL",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR"},A=function(e){function t(e){a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,g.default.MEDIA_ATTACHED,g.default.MEDIA_DETACHING,g.default.MANIFEST_LOADING,g.default.MANIFEST_PARSED,g.default.LEVEL_LOADED,g.default.KEY_LOADED,g.default.FRAG_LOADED,g.default.FRAG_LOAD_EMERGENCY_ABORTED,g.default.FRAG_PARSING_INIT_SEGMENT,g.default.FRAG_PARSING_DATA,g.default.FRAG_PARSED,g.default.ERROR,g.default.AUDIO_TRACK_SWITCH,g.default.BUFFER_CREATED,g.default.BUFFER_APPENDED,g.default.BUFFER_FLUSHED));return r.config=e.config,r.audioCodecSwap=!1,r.ticks=0,r.ontick=r.tick.bind(r),r}return s(t,e),l(t,[{key:"destroy",value:function(){this.stopLoad(),this.timer&&(clearInterval(this.timer),this.timer=null),m.default.prototype.destroy.call(this),this.state=T.STOPPED}},{key:"startLoad",value:function(e){if(this.levels){var t=this.lastCurrentTime,r=this.hls;if(this.stopLoad(),this.timer||(this.timer=setInterval(this.ontick,100)),this.level=-1,this.fragLoadError=0,t>0?S.logger.log("override startPosition with lastCurrentTime @"+t.toFixed(3)):this.lastCurrentTime=this.startPosition?this.startPosition:e,!this.startFragRequested){var i=r.startLevel;i===-1&&(i=0,this.bitrateTest=!0),this.level=r.nextLoadLevel=i,this.loadedmetadata=!1}this.state=T.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime,this.tick()}else S.logger.warn("cannot start loading as manifest not parsed yet"),this.state=T.STOPPED}},{key:"stopLoad",value:function(){var e=this.fragCurrent;e&&(e.loader&&e.loader.abort(),this.fragCurrent=null),this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=T.STOPPED}},{key:"tick",value:function(){this.ticks++,1===this.ticks&&(this.doTick(),this.ticks>1&&setTimeout(this.tick,1),this.ticks=0)}},{key:"doTick",value:function(){switch(this.state){case T.ERROR:break;case T.BUFFER_FLUSHING:this.fragLoadError=0;break;case T.IDLE:if(!this._doTickIdle())return;break;case T.WAITING_LEVEL:var e=this.levels[this.level];e&&e.details&&(this.state=T.IDLE);break;case T.FRAG_LOADING_WAITING_RETRY:var t=performance.now(),r=this.retryDate;(!r||t>=r||this.media&&this.media.seeking)&&(S.logger.log("mediaController: retryDate reached, switch back to IDLE state"),this.state=T.IDLE);break;case T.ERROR:case T.PAUSED:case T.STOPPED:case T.FRAG_LOADING:case T.PARSING:case T.PARSED:case T.ENDED:}this._checkBuffer(),this._checkFragmentChanged()}},{key:"_doTickIdle",value:function(){var e=this.hls,t=e.config,r=this.media;if(void 0!==this.levelLastLoaded&&!r&&(this.startFragRequested||!t.startFragPrefetch))return!0;var i=void 0;i=this.loadedmetadata?r.currentTime:this.nextLoadPosition;var a=e.nextLoadLevel,n=this.levels[a],s=n.bitrate,o=void 0;o=s?Math.max(8*t.maxBufferSize/s,t.maxBufferLength):t.maxBufferLength,o=Math.min(o,t.maxMaxBufferLength);var l=h.default.bufferInfo(this.mediaBuffer?this.mediaBuffer:r,i,t.maxBufferHole),u=l.len;if(u>=o)return!0;S.logger.trace("buffer length of "+u.toFixed(3)+" is below max of "+o.toFixed(3)+". checking for more payload ..."),this.level=e.nextLoadLevel=a;var d=n.details;if("undefined"==typeof d||d.live&&this.levelLastLoaded!==a)return this.state=T.WAITING_LEVEL,!0;var f=this.fragPrevious;if(!d.live&&f&&f.sn===d.endSN&&(!r.seeking&&l.len||r.duration-l.end<=f.duration/2)){var c={};return this.altAudio&&(c.type="video"),this.hls.trigger(g.default.BUFFER_EOS,c),this.state=T.ENDED,!0}return this._fetchPayloadOrEos({pos:i,bufferInfo:l,levelDetails:d})}},{key:"_fetchPayloadOrEos",value:function(e){var t=e.pos,r=e.bufferInfo,i=e.levelDetails,a=this.fragPrevious,n=this.level,s=i.fragments,o=s.length;if(0===o)return!1;var l=s[0].start,u=s[o-1].start+s[o-1].duration,d=r.end,f=void 0;if(i.live){var h=this.config.initialLiveManifestSize;if(o<h)return S.logger.warn("Can not start playback of a level, reason: not enough fragments "+o+" < "+h),!1;if(f=this._ensureFragmentAtLivePoint({levelDetails:i,bufferEnd:d,start:l,end:u,fragPrevious:a,fragments:s,fragLen:o}),null===f)return!1}else d<l&&(f=s[0]);return f||(f=this._findFragment({start:l,fragPrevious:a,fragLen:o,fragments:s,bufferEnd:d,end:u,levelDetails:i})),!f||this._loadFragmentOrKey({frag:f,level:n,levelDetails:i,pos:t,bufferEnd:d})}},{key:"_ensureFragmentAtLivePoint",value:function(e){var t=e.levelDetails,r=e.bufferEnd,i=e.start,a=e.end,n=e.fragPrevious,s=e.fragments,o=e.fragLen,l=this.hls.config,u=this.media,d=void 0,f=void 0!==l.liveMaxLatencyDuration?l.liveMaxLatencyDuration:l.liveMaxLatencyDurationCount*t.targetduration;if(r<Math.max(i,a-f)){var h=this.liveSyncPosition=this.computeLivePosition(i,t);S.logger.log("buffer end: "+r.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+h.toFixed(3)),r=h,u&&u.readyState&&u.duration>h&&(u.currentTime=h)}if(t.PTSKnown&&r>a&&u&&u.readyState)return null;if(this.startFragRequested&&!t.PTSKnown){if(n){var c=n.sn+1;c>=t.startSN&&c<=t.endSN&&(d=s[c-t.startSN],S.logger.log("live playlist, switching playlist, load frag with next SN: "+d.sn))}d||(d=s[Math.min(o-1,Math.round(o/2))],S.logger.log("live playlist, switching playlist, unknown, load middle frag : "+d.sn))}return d}},{key:"_findFragment",value:function(e){var t=e.start,r=e.fragPrevious,i=e.fragLen,a=e.fragments,n=e.bufferEnd,s=e.end,o=e.levelDetails,l=this.hls.config,u=void 0,f=void 0,h=l.maxFragLookUpTolerance;if(n<s?(n>s-h&&(h=0),f=d.default.search(a,function(e){return e.start+e.duration-h<=n?1:e.start-h>n&&e.start?-1:0})):f=a[i-1],f&&(u=f,t=f.start,r&&u.level===r.level&&u.sn===r.sn))if(u.sn<o.endSN){var c=r.deltaPTS,v=u.sn-o.startSN;c&&c>l.maxBufferHole&&r.dropped&&v?(u=a[v-1],S.logger.warn("SN just loaded, with large PTS gap between audio and video, maybe frag is not starting with a keyframe ? load previous one to try to overcome this"),r.loadCounter--):(u=a[v+1],S.logger.log("SN just loaded, load next one: "+u.sn))}else u=null;return u}},{key:"_loadFragmentOrKey",value:function(e){var t=e.frag,r=e.level,i=e.levelDetails,a=e.pos,n=e.bufferEnd,s=this.hls,o=s.config;if(null==t.decryptdata.uri||null!=t.decryptdata.key){if(S.logger.log("Loading "+t.sn+" of ["+i.startSN+" ,"+i.endSN+"],level "+r+", currentTime:"+a.toFixed(3)+",bufferEnd:"+n.toFixed(3)),void 0!==this.fragLoadIdx?this.fragLoadIdx++:this.fragLoadIdx=0,t.loadCounter){t.loadCounter++;var l=o.fragLoadingLoopThreshold;if(t.loadCounter>l&&Math.abs(this.fragLoadIdx-t.loadIdx)<l)return s.trigger(g.default.ERROR,{type:_.ErrorTypes.MEDIA_ERROR,details:_.ErrorDetails.FRAG_LOOP_LOADING_ERROR,fatal:!1,frag:t}),!1}else t.loadCounter=1;return t.loadIdx=this.fragLoadIdx,this.fragCurrent=t,this.startFragRequested=!0,t.autoLevel=s.autoLevelEnabled,t.bitrateTest=this.bitrateTest,s.trigger(g.default.FRAG_LOADING,{frag:t}),this.state=T.FRAG_LOADING,!0}S.logger.log("Loading key for "+t.sn+" of ["+i.startSN+" ,"+i.endSN+"],level "+r),this.state=T.KEY_LOADING,s.trigger(g.default.KEY_LOADING,{frag:t})}},{key:"getBufferRange",value:function(e){var t,r,i=this.bufferRange;if(i)for(t=i.length-1;t>=0;t--)if(r=i[t],e>=r.start&&e<=r.end)return r;return null}},{key:"followingBufferRange",value:function(e){return e?this.getBufferRange(e.end+.5):null}},{key:"_checkFragmentChanged",value:function(){var e,t,r=this.media;if(r&&r.readyState&&r.seeking===!1&&(t=r.currentTime,t>r.playbackRate*this.lastCurrentTime&&(this.lastCurrentTime=t),h.default.isBuffered(r,t)?e=this.getBufferRange(t):h.default.isBuffered(r,t+.1)&&(e=this.getBufferRange(t+.1)),e)){var i=e.frag;i!==this.fragPlaying&&(this.fragPlaying=i,this.hls.trigger(g.default.FRAG_CHANGED,{frag:i}))}}},{key:"immediateLevelSwitch",value:function(){if(S.logger.log("immediateLevelSwitch"),!this.immediateSwitch){this.immediateSwitch=!0;var e=this.media,t=void 0;e?(t=e.paused,e.pause()):t=!0,this.previouslyPaused=t}var r=this.fragCurrent;r&&r.loader&&r.loader.abort(),this.fragCurrent=null,this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold,this.state=T.BUFFER_FLUSHING,this.hls.trigger(g.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY})}},{key:"immediateLevelSwitchEnd",value:function(){var e=this.media;e&&e.buffered.length&&(this.immediateSwitch=!1,h.default.isBuffered(e,e.currentTime)&&(e.currentTime-=1e-4),this.previouslyPaused||e.play())}},{key:"nextLevelSwitch",value:function(){var e=this.media;if(e&&e.readyState){var t=void 0,r=void 0,i=void 0;if(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold,r=this.getBufferRange(e.currentTime),r&&r.start>1&&(this.state=T.BUFFER_FLUSHING,this.hls.trigger(g.default.BUFFER_FLUSHING,{startOffset:0,endOffset:r.start-1})),e.paused)t=0;else{var a=this.hls.nextLoadLevel,n=this.levels[a],s=this.fragLastKbps;t=s&&this.fragCurrent?this.fragCurrent.duration*n.bitrate/(1e3*s)+1:0}if(i=this.getBufferRange(e.currentTime+t),i&&(i=this.followingBufferRange(i))){var o=this.fragCurrent;o&&o.loader&&o.loader.abort(),this.fragCurrent=null,this.state=T.BUFFER_FLUSHING,this.hls.trigger(g.default.BUFFER_FLUSHING,{startOffset:i.start,endOffset:Number.POSITIVE_INFINITY})}}}},{key:"onMediaAttached",value:function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("seeked",this.onvseeked),t.addEventListener("ended",this.onvended);var r=this.config;this.levels&&r.autoStartLoad&&this.hls.startLoad(r.startPosition)}},{key:"onMediaDetaching",value:function(){var e=this.media;e&&e.ended&&(S.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var t=this.levels;t&&t.forEach(function(e){e.details&&e.details.fragments.forEach(function(e){e.loadCounter=void 0})}),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("seeked",this.onvseeked),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()}},{key:"onMediaSeeking",value:function(){var e=this.media,t=e?e.currentTime:void 0,r=this.config;if(S.logger.log("media seeking to "+t.toFixed(3)),this.state===T.FRAG_LOADING){var i=h.default.bufferInfo(e,t,this.config.maxBufferHole),a=this.fragCurrent;if(0===i.len&&a){var n=r.maxFragLookUpTolerance,s=a.start-n,o=a.start+a.duration+n;t<s||t>o?(a.loader&&(S.logger.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),a.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=T.IDLE):S.logger.log("seeking outside of buffer but within currently loaded fragment range")}}else this.state===T.ENDED&&(this.state=T.IDLE);e&&(this.lastCurrentTime=t),this.state!==T.FRAG_LOADING&&void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*r.fragLoadingLoopThreshold),this.tick()}},{key:"onMediaSeeked",value:function(){S.logger.log("media seeked to "+this.media.currentTime.toFixed(3)),this.tick()}},{key:"onMediaEnded",value:function(){S.logger.log("media ended"),this.startPosition=this.lastCurrentTime=0}},{key:"onManifestLoading",value:function(){S.logger.log("trigger BUFFER_RESET"),this.hls.trigger(g.default.BUFFER_RESET),this.bufferRange=[],this.stalled=!1,this.startPosition=this.lastCurrentTime=0}},{key:"onManifestParsed",value:function(e){var t,r=!1,i=!1;e.levels.forEach(function(e){t=e.audioCodec,t&&(t.indexOf("mp4a.40.2")!==-1&&(r=!0),t.indexOf("mp4a.40.5")!==-1&&(i=!0))}),this.audioCodecSwitch=r&&i,this.audioCodecSwitch&&S.logger.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=e.levels,this.startLevelLoaded=!1,this.startFragRequested=!1;var a=this.config;a.autoStartLoad&&this.hls.startLoad(a.startPosition)}},{key:"onLevelLoaded",value:function(e){var t=e.details,r=e.level,i=this.levels[r],a=t.totalduration,n=0;if(S.logger.log("level "+r+" loaded ["+t.startSN+","+t.endSN+"],duration:"+a),this.levelLastLoaded=r,t.live){var s=i.details;s&&t.fragments.length>0?(b.default.mergeDetails(s,t),n=t.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(n,s),t.PTSKnown?S.logger.log("live playlist sliding:"+n.toFixed(3)):S.logger.log("live playlist - outdated PTS, unknown sliding")):(t.PTSKnown=!1,S.logger.log("live playlist - first load, unknown sliding"))}else t.PTSKnown=!1;if(i.details=t,this.hls.trigger(g.default.LEVEL_UPDATED,{details:t,level:r}),this.startFragRequested===!1){if(this.startPosition===-1||this.lastCurrentTime===-1){var o=t.startTimeOffset;isNaN(o)?t.live?(this.startPosition=this.computeLivePosition(n,t),S.logger.log("configure startPosition to "+this.startPosition)):this.startPosition=0:(o<0&&(S.logger.log("negative start time offset "+o+", count from end of last fragment"),o=n+a+o),S.logger.log("start time offset found in playlist, adjust startPosition to "+o),this.startPosition=o)}this.nextLoadPosition=this.startPosition}this.state===T.WAITING_LEVEL&&(this.state=T.IDLE),this.tick()}},{key:"onKeyLoaded",value:function(){this.state===T.KEY_LOADING&&(this.state=T.IDLE,this.tick())}},{key:"onFragLoaded",value:function(e){var t=this.fragCurrent,r=e.frag;if(this.state===T.FRAG_LOADING&&t&&"main"===r.type&&r.level===t.level&&r.sn===t.sn){var i=e.stats,a=this.levels[t.level],n=a.details;if(S.logger.log("Loaded  "+t.sn+" of ["+n.startSN+" ,"+n.endSN+"],level "+t.level),this.bitrateTest=!1,r.bitrateTest===!0&&this.hls.nextLoadLevel)this.state=T.IDLE,this.startFragRequested=!1,i.tparsed=i.tbuffered=performance.now(),this.hls.trigger(g.default.FRAG_BUFFERED,{stats:i,frag:t,id:"main"}),this.tick();else{this.state=T.PARSING,this.stats=i;var s=n.totalduration,o=isNaN(t.startDTS)?t.start:t.startDTS,l=t.level,u=t.sn,d=this.config.defaultAudioCodec||a.audioCodec;this.audioCodecSwap&&(S.logger.log("swapping playlist audio codec"),void 0===d&&(d=this.lastAudioCodec),d&&(d=d.indexOf("mp4a.40.5")!==-1?"mp4a.40.2":"mp4a.40.5")),this.pendingAppending=0,S.logger.log("Parsing "+u+" of ["+n.startSN+" ,"+n.endSN+"],level "+l+", cc "+t.cc);var f=this.demuxer;f||(f=this.demuxer=new v.default(this.hls,"main"));var h=n.PTSKnown||!n.live;f.push(e.payload,d,a.videoCodec,o,t.cc,l,u,s,t.decryptdata,h)}}this.fragLoadError=0}},{key:"onFragParsingInitSegment",value:function(e){var t=this.fragCurrent;if(t&&"main"===e.id&&e.sn===t.sn&&e.level===t.level&&this.state===T.PARSING){var r,i,a=e.tracks;if(a.audio&&this.altAudio&&delete a.audio,i=a.audio){var n=this.levels[this.level].audioCodec,s=navigator.userAgent.toLowerCase();n&&this.audioCodecSwap&&(S.logger.log("swapping playlist audio codec"),n=n.indexOf("mp4a.40.5")!==-1?"mp4a.40.2":"mp4a.40.5"),this.audioCodecSwitch&&1!==i.metadata.channelCount&&s.indexOf("firefox")===-1&&(n="mp4a.40.5"),s.indexOf("android")!==-1&&"audio/mpeg"!==i.container&&(n="mp4a.40.2",S.logger.log("Android: force audio codec to"+n)),i.levelCodec=n,i.id=e.id}if(i=a.video,i&&(i.levelCodec=this.levels[this.level].videoCodec,i.id=e.id),e.unique){var o={codec:"",levelCodec:""};for(r in e.tracks)i=a[r],o.container=i.container,o.codec&&(o.codec+=",",o.levelCodec+=","),i.codec&&(o.codec+=i.codec),i.levelCodec&&(o.levelCodec+=i.levelCodec);a={audiovideo:o}}this.hls.trigger(g.default.BUFFER_CODECS,a);for(r in a){i=a[r],S.logger.log("main track:"+r+",container:"+i.container+",codecs[level/parsed]=["+i.levelCodec+"/"+i.codec+"]");var l=i.initSegment;l&&(this.pendingAppending++,this.hls.trigger(g.default.BUFFER_APPENDING,{type:r,data:l,parent:"main",content:"initSegment"}))}this.tick()}}},{key:"onFragParsingData",value:function(e){var t=this,r=this.fragCurrent;if(r&&"main"===e.id&&e.sn===r.sn&&e.level===r.level&&("audio"!==e.type||!this.altAudio)&&this.state===T.PARSING){var i=this.levels[this.level],a=this.fragCurrent;S.logger.log("Parsed "+e.type+",PTS:["+e.startPTS.toFixed(3)+","+e.endPTS.toFixed(3)+"],DTS:["+e.startDTS.toFixed(3)+"/"+e.endDTS.toFixed(3)+"],nb:"+e.nb+",dropped:"+(e.dropped||0));var n=b.default.updateFragPTSDTS(i.details,a.sn,e.startPTS,e.endPTS,e.startDTS,e.endDTS),s=this.hls;s.trigger(g.default.LEVEL_PTS_UPDATED,{details:i.details,level:this.level,drift:n,type:e.type,start:e.startPTS,end:e.endPTS}),"video"===e.type&&(a.dropped=e.dropped),[e.data1,e.data2].forEach(function(r){r&&(t.pendingAppending++,s.trigger(g.default.BUFFER_APPENDING,{type:e.type,data:r,parent:"main",content:"data"}))}),this.nextLoadPosition=e.endPTS,this.bufferRange.push({type:e.type,start:e.startPTS,end:e.endPTS,frag:a}),this.tick()}}},{key:"onFragParsed",value:function(e){var t=this.fragCurrent;t&&"main"===e.id&&e.sn===t.sn&&e.level===t.level&&this.state===T.PARSING&&(this.stats.tparsed=performance.now(),this.state=T.PARSED,this._checkAppendedParsed())}},{key:"onAudioTrackSwitch",value:function(e){var t=!!e.url;if(t)this.videoBuffer&&this.mediaBuffer!==this.videoBuffer&&(S.logger.log("switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=this.videoBuffer);else if(this.mediaBuffer!==this.media){S.logger.log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var r=this.fragCurrent;r.loader&&(S.logger.log("switching to main audio track, cancel main fragment load"),r.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=T.IDLE}this.altAudio=t}},{key:"onBufferCreated",value:function(e){var t=e.tracks,r=void 0,i=void 0,a=!1;for(var n in t){var s=t[n];"main"===s.id?(i=n,r=s,"video"===n&&(this.videoBuffer=t[n].buffer)):a=!0}a&&r?(S.logger.log("alternate track found, use "+i+".buffered to schedule main fragment loading"),this.mediaBuffer=r.buffer):this.mediaBuffer=this.media}},{key:"onBufferAppended",value:function(e){if("main"===e.parent)switch(this.state){case T.PARSING:case T.PARSED:this.pendingAppending--,this._checkAppendedParsed()}}},{key:"_checkAppendedParsed",value:function(){if(this.state===T.PARSED&&0===this.pendingAppending){var e=this.fragCurrent,t=this.stats;if(e){this.fragPrevious=e,t.tbuffered=performance.now(),this.fragLastKbps=Math.round(8*t.total/(t.tbuffered-t.tfirst)),this.hls.trigger(g.default.FRAG_BUFFERED,{stats:t,frag:e,id:"main"});var r=this.mediaBuffer?this.mediaBuffer:this.media;S.logger.log("main buffered : "+R.default.toString(r.buffered)),this.state=T.IDLE}this.tick()}}},{key:"onError",value:function(e){var t=e.frag||this.fragCurrent;if(!t||"main"===t.type){var r=this.media,i=r&&h.default.isBuffered(r,r.currentTime)&&h.default.isBuffered(r,r.currentTime+.5);switch(e.details){case _.ErrorDetails.FRAG_LOAD_ERROR:case _.ErrorDetails.FRAG_LOAD_TIMEOUT:case _.ErrorDetails.KEY_LOAD_ERROR:case _.ErrorDetails.KEY_LOAD_TIMEOUT:if(!e.fatal){var a=this.fragLoadError;a?a++:a=1;var n=this.config;if(a<=n.fragLoadingMaxRetry||i||t.autoLevel&&t.level){this.fragLoadError=a,t.loadCounter=0;var s=Math.min(Math.pow(2,a-1)*n.fragLoadingRetryDelay,n.fragLoadingMaxRetryTimeout);S.logger.warn("mediaController: frag loading failed, retry in "+s+" ms"),this.retryDate=performance.now()+s,this.state=T.FRAG_LOADING_WAITING_RETRY}else S.logger.error("mediaController: "+e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.hls.trigger(g.default.ERROR,e),this.state=T.ERROR}break;case _.ErrorDetails.FRAG_LOOP_LOADING_ERROR:e.fatal||(i?(this._reduceMaxBufferLength(t.duration),this.state=T.IDLE):t.autoLevel&&0!==t.level||(e.fatal=!0,this.hls.trigger(g.default.ERROR,e),this.state=T.ERROR));break;case _.ErrorDetails.LEVEL_LOAD_ERROR:case _.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.state!==T.ERROR&&(e.fatal?(this.state=T.ERROR,S.logger.warn("streamController: "+e.details+",switch to "+this.state+" state ...")):this.state===T.WAITING_LEVEL&&(this.state=T.IDLE));
break;case _.ErrorDetails.BUFFER_FULL_ERROR:this.state!==T.PARSING&&this.state!==T.PARSED||(i?(this._reduceMaxBufferLength(t.duration),this.state=T.IDLE):(S.logger.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.state=T.PAUSED,this.hls.trigger(g.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY})))}}}},{key:"_reduceMaxBufferLength",value:function(e){var t=this.config;t.maxMaxBufferLength>=e&&(t.maxMaxBufferLength/=2,S.logger.warn("reduce max buffer length to "+t.maxMaxBufferLength+"s and switch to IDLE state"),this.fragLoadIdx+=2*t.fragLoadingLoopThreshold)}},{key:"_checkBuffer",value:function(){var e=this.media;if(e&&e.readyState){var t=e.currentTime,r=e.buffered;if(!this.loadedmetadata&&r.length){this.loadedmetadata=!0;var i=this.startPosition,a=h.default.isBuffered(e,i);t===i&&a||(S.logger.log("target start position:"+i),a||(i=r.start(0),S.logger.log("target start position not buffered, seek to buffered.start(0) "+i)),S.logger.log("adjust currentTime from "+t+" to "+i),e.currentTime=i)}else if(this.immediateSwitch)this.immediateLevelSwitchEnd();else{var n=h.default.bufferInfo(e,t,0),s=!(e.paused||e.ended||0===e.buffered.length),o=.5,l=t>e.playbackRate*this.lastCurrentTime,u=this.config;if(this.stalled&&l&&(this.stalled=!1,S.logger.log("playback not stuck anymore @"+t)),s&&n.len<=o&&(l?(o=0,this.seekHoleNudgeDuration=0):this.stalled?this.seekHoleNudgeDuration+=u.seekHoleNudgeDuration:(this.seekHoleNudgeDuration=0,S.logger.log("playback seems stuck @"+t),this.hls.trigger(g.default.ERROR,{type:_.ErrorTypes.MEDIA_ERROR,details:_.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1}),this.stalled=!0),n.len<=o)){var d=n.nextStart,f=d-t;if(d&&f<u.maxSeekHole&&f>0){S.logger.log("adjust currentTime from "+e.currentTime+" to next buffered @ "+d+" + nudge "+this.seekHoleNudgeDuration);var c=d+this.seekHoleNudgeDuration-e.currentTime;e.currentTime=d+this.seekHoleNudgeDuration,this.hls.trigger(g.default.ERROR,{type:_.ErrorTypes.MEDIA_ERROR,details:_.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,hole:c})}}}}}},{key:"onFragLoadEmergencyAborted",value:function(){this.state=T.IDLE,this.loadedmetadata||(this.startFragRequested=!1),this.tick()}},{key:"onBufferFlushed",value:function(){var e=this.mediaBuffer?this.mediaBuffer:this.media,t=this.bufferRange,r=[],i=void 0,a=void 0;for(a=0;a<t.length;a++)i=t[a],h.default.isBuffered(e,(i.start+i.end)/2)&&r.push(i);this.bufferRange=r,this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold,this.state=T.IDLE,this.fragPrevious=null}},{key:"swapAudioCodec",value:function(){this.audioCodecSwap=!this.audioCodecSwap}},{key:"computeLivePosition",value:function(e,t){var r=void 0!==this.config.liveSyncDuration?this.config.liveSyncDuration:this.config.liveSyncDurationCount*t.targetduration;return e+Math.max(0,t.totalduration-r)}},{key:"state",set:function(e){if(this.state!==e){var t=this.state;this._state=e,S.logger.log("engine state transition from "+t+" to "+e),this.hls.trigger(g.default.STREAM_STATE_TRANSITION,{previousState:t,nextState:e})}},get:function(){return this._state}},{key:"currentLevel",get:function(){var e=this.media;if(e){var t=this.getBufferRange(e.currentTime);if(t)return t.frag.level}return-1}},{key:"nextBufferRange",get:function(){var e=this.media;return e?this.followingBufferRange(this.getBufferRange(e.currentTime)):null}},{key:"nextLevel",get:function(){var e=this.nextBufferRange;return e?e.frag.level:-1}},{key:"liveSyncPosition",get:function(){return this._liveSyncPosition},set:function(e){this._liveSyncPosition=e}}]),t}(m.default);t.default=A},function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"==typeof t?"undefined":o(t))&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof t?"undefined":o(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),u=r(2),d=i(u),f=r(4),h=i(f),c=r(43),v=i(c),p=function(e){function t(e){a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,d.default.MEDIA_ATTACHING,d.default.MEDIA_DETACHING,d.default.FRAG_PARSING_USERDATA,d.default.MANIFEST_LOADING,d.default.FRAG_LOADED,d.default.LEVEL_SWITCH));if(r.hls=e,r.config=e.config,r.enabled=!0,r.Cues=e.config.cueHandler,r.config.enableCEA708Captions){var i=r,s={newCue:function(e,t,r){if(!i.textTrack1){var a=i.getExistingTrack("1");if(a){i.textTrack1=a,i.clearCurrentCues(i.textTrack1);var n=new window.Event("addtrack");n.track=i.textTrack1,i.media.dispatchEvent(n)}else i.textTrack1=i.createTextTrack("captions","English","en"),i.textTrack1.textTrack1=!0}i.Cues.newCue(i.textTrack1,e,t,r)}},o={newCue:function(e,t,r){if(!i.textTrack2){var a=i.getExistingTrack("2");if(a){i.textTrack2=a,i.clearCurrentCues(i.textTrack2);var n=new window.Event("addtrack");n.track=i.textTrack2,i.media.dispatchEvent(n)}else i.textTrack2=i.createTextTrack("captions","Spanish","es"),i.textTrack2.textTrack2=!0}i.Cues.newCue(i.textTrack2,e,t,r)}};r.cea608Parser=new v.default(0,s,o)}return r}return s(t,e),l(t,[{key:"clearCurrentCues",value:function(e){if(e&&e.cues)for(;e.cues.length>0;)e.removeCue(e.cues[0])}},{key:"getExistingTrack",value:function(e){var t=this.media;if(t)for(var r=0;r<t.textTracks.length;r++){var i=t.textTracks[r],a="textTrack"+e;if(i[a]===!0)return i}return null}},{key:"createTextTrack",value:function(e,t,r){if(this.media)return this.media.addTextTrack(e,t,r)}},{key:"destroy",value:function(){h.default.prototype.destroy.call(this)}},{key:"onMediaAttaching",value:function(e){this.media=e.media}},{key:"onMediaDetaching",value:function(){}},{key:"onManifestLoading",value:function(){this.lastPts=Number.NEGATIVE_INFINITY}},{key:"onLevelSwitch",value:function(){"NONE"===this.hls.currentLevel.closedCaptions?this.enabled=!1:this.enabled=!0}},{key:"onFragLoaded",value:function(e){if("main"===e.frag.type){var t=e.frag.start;t<=this.lastPts&&(this.clearCurrentCues(this.textTrack1),this.clearCurrentCues(this.textTrack2)),this.lastPts=t}}},{key:"onFragParsingUserdata",value:function(e){if(this.enabled&&this.config.enableCEA708Captions)for(var t=0;t<e.samples.length;t++){var r=this.extractCea608Data(e.samples[t].bytes);this.cea608Parser.addData(e.samples[t].pts,r)}}},{key:"extractCea608Data",value:function(e){for(var t,r,i,a,n,s=31&e[0],o=2,l=[],u=0;u<s;u++)t=e[o++],r=127&e[o++],i=127&e[o++],a=0!==(4&t),n=3&t,0===r&&0===i||a&&0===n&&(l.push(r),l.push(i));return l}}]),t}(h.default);t.default=p},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),a=function(){function e(t){r(this,e),this.aesIV=t}return i(e,[{key:"decrypt",value:function(e,t){return window.crypto.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e)}}]),e}();t.default=a},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),a=function(){function e(){r(this,e),this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[],this.subMix[0]=new Uint32Array(256),this.subMix[1]=new Uint32Array(256),this.subMix[2]=new Uint32Array(256),this.subMix[3]=new Uint32Array(256),this.invSubMix=[],this.invSubMix[0]=new Uint32Array(256),this.invSubMix[1]=new Uint32Array(256),this.invSubMix[2]=new Uint32Array(256),this.invSubMix[3]=new Uint32Array(256),this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}return i(e,[{key:"uint8ArrayToUint32Array_",value:function(e){for(var t=new DataView(e),r=new Uint32Array(4),i=0;i<r.length;i++)r[i]=t.getUint32(4*i);return r}},{key:"initTable",value:function(){var e=this.sBox,t=this.invSBox,r=this.subMix[0],i=this.subMix[1],a=this.subMix[2],n=this.subMix[3],s=this.invSubMix[0],o=this.invSubMix[1],l=this.invSubMix[2],u=this.invSubMix[3],d=new Uint32Array(256),f=0,h=0,c=0;for(c=0;c<256;c++)c<128?d[c]=c<<1:d[c]=c<<1^283;for(c=0;c<256;c++){var v=h^h<<1^h<<2^h<<3^h<<4;v=v>>>8^255&v^99,e[f]=v,t[v]=f;var p=d[f],g=d[p],y=d[g],m=257*d[v]^16843008*v;r[f]=m<<24|m>>>8,i[f]=m<<16|m>>>16,a[f]=m<<8|m>>>24,n[f]=m,m=16843009*y^65537*g^257*p^16843008*f,s[v]=m<<24|m>>>8,o[v]=m<<16|m>>>16,l[v]=m<<8|m>>>24,u[v]=m,f?(f=p^d[d[d[y^p]]],h^=d[d[h]]):f=h=1}}},{key:"expandKey",value:function(e){for(var t=this.uint8ArrayToUint32Array_(e),r=!0,i=0;i<t.length&&r;)r=t[i]===this.key[i],i++;if(!r){this.key=t;var a=this.keySize=t.length;if(4!==a&&6!==a&&8!==a)throw new Error("Invalid aes key size="+a);var n=this.ksRows=4*(a+6+1),s=void 0,o=void 0,l=this.keySchedule=new Uint32Array(this.ksRows),u=this.invKeySchedule=new Uint32Array(this.ksRows),d=this.sBox,f=this.rcon,h=this.invSubMix[0],c=this.invSubMix[1],v=this.invSubMix[2],p=this.invSubMix[3],g=void 0,y=void 0;for(s=0;s<n;s++)s<a?g=l[s]=t[s]:(y=g,s%a===0?(y=y<<8|y>>>24,y=d[y>>>24]<<24|d[y>>>16&255]<<16|d[y>>>8&255]<<8|d[255&y],y^=f[s/a|0]<<24):a>6&&s%a===4&&(y=d[y>>>24]<<24|d[y>>>16&255]<<16|d[y>>>8&255]<<8|d[255&y]),l[s]=g=(l[s-a]^y)>>>0);for(o=0;o<n;o++)s=n-o,y=3&o?l[s]:l[s-4],o<4||s<=4?u[o]=y:u[o]=h[d[y>>>24]]^c[d[y>>>16&255]]^v[d[y>>>8&255]]^p[d[255&y]],u[o]=u[o]>>>0}}},{key:"networkToHostOrderSwap",value:function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24}},{key:"decrypt",value:function(e,t,r){for(var i,a,n=this.keySize+6,s=this.invKeySchedule,o=this.invSBox,l=this.invSubMix[0],u=this.invSubMix[1],d=this.invSubMix[2],f=this.invSubMix[3],h=this.uint8ArrayToUint32Array_(r),c=h[0],v=h[1],p=h[2],g=h[3],y=new Int32Array(e),m=new Int32Array(y.length),E=void 0,b=void 0,k=void 0,R=void 0,_=void 0,S=void 0,T=void 0,A=void 0,L=void 0,w=void 0,D=void 0,O=void 0;t<y.length;){for(L=this.networkToHostOrderSwap(y[t]),w=this.networkToHostOrderSwap(y[t+1]),D=this.networkToHostOrderSwap(y[t+2]),O=this.networkToHostOrderSwap(y[t+3]),_=L^s[0],S=O^s[1],T=D^s[2],A=w^s[3],i=4,a=1;a<n;a++)E=l[_>>>24]^u[S>>16&255]^d[T>>8&255]^f[255&A]^s[i],b=l[S>>>24]^u[T>>16&255]^d[A>>8&255]^f[255&_]^s[i+1],k=l[T>>>24]^u[A>>16&255]^d[_>>8&255]^f[255&S]^s[i+2],R=l[A>>>24]^u[_>>16&255]^d[S>>8&255]^f[255&T]^s[i+3],_=E,S=b,T=k,A=R,i+=4;E=o[_>>>24]<<24^o[S>>16&255]<<16^o[T>>8&255]<<8^o[255&A]^s[i],b=o[S>>>24]<<24^o[T>>16&255]<<16^o[A>>8&255]<<8^o[255&_]^s[i+1],k=o[T>>>24]<<24^o[A>>16&255]<<16^o[_>>8&255]<<8^o[255&S]^s[i+2],R=o[A>>>24]<<24^o[_>>16&255]<<16^o[S>>8&255]<<8^o[255&T]^s[i+3],i+=3,m[t]=this.networkToHostOrderSwap(E^c),m[t+1]=this.networkToHostOrderSwap(R^v),m[t+2]=this.networkToHostOrderSwap(k^p),m[t+3]=this.networkToHostOrderSwap(b^g),c=L,v=w,p=D,g=O,t+=4}return m.buffer}},{key:"destroy",value:function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0}}]),e}();t.default=a},function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),s=r(24),o=i(s),l=r(27),u=i(l),d=r(25),f=i(d),h=r(3),c=r(1),v=function(){function e(t){a(this,e),this.hls=t;try{var r=window?window.crypto:crypto;this.subtle=r.subtle||r.webkitSubtle}catch(e){}this.disableWebCrypto=!this.supportsWebCrypto()}return n(e,[{key:"supportsWebCrypto",value:function(){return this.subtle&&"https:"===window.location.protocol}},{key:"decrypt",value:function(e,t,r,i){var a=this;this.disableWebCrypto&&this.hls.config.enableSoftwareAES?(c.logger.log("decrypting by JavaScript Implementation"),this.decryptor||(this.decryptor=new f.default),this.decryptor.expandKey(t),i(this.decryptor.decrypt(e,0,r))):(c.logger.log("decrypting by WebCrypto API"),this.key!==t&&(this.key=t,this.fastAesKey=new u.default(t)),this.fastAesKey.expandKey().then(function(t){var a=new o.default(r);a.decrypt(e,t).then(function(e){i(e)})}).catch(function(n){a.onWebCryptoError(n,e,t,r,i)}))}},{key:"onWebCryptoError",value:function(e,t,r,i,a){this.hls.config.enableSoftwareAES?(c.logger.log("disabling to use WebCrypto API"),this.disableWebCrypto=!0,this.decrypt(t,r,i,a)):(c.logger.error("decrypting error : "+e.message),this.hls.trigger(Event.ERROR,{type:h.ErrorTypes.MEDIA_ERROR,details:h.ErrorDetails.FRAG_DECRYPT_ERROR,fatal:!0,reason:e.message}))}},{key:"destroy",value:function(){this.decryptor&&(this.decryptor.destroy(),this.decryptor=void 0)}}]),e}();t.default=v},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),a=function(){function e(t){r(this,e),this.key=t}return i(e,[{key:"expandKey",value:function(){return window.crypto.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])}}]),e}();t.default=a},function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),s=r(6),o=i(s),l=r(1),u=r(31),d=i(u),f=function(){function e(t,r,i,n,s){a(this,e),this.observer=t,this.id=r,this.remuxerClass=i,this.config=n,this.remuxer=new this.remuxerClass(t,r,n,s),this.insertDiscontinuity()}return n(e,[{key:"insertDiscontinuity",value:function(){this._aacTrack={container:"audio/adts",type:"audio",id:-1,sequenceNumber:0,isAAC:!0,samples:[],len:0}}},{key:"push",value:function(e,t,r,i,a,n,s,u,f){var h,c,v,p,g,y,m,E,b,k,R=new d.default(e),_=90*R.timeStamp,S=!1;for(a!==this.lastCC?(l.logger.log(this.id+" discontinuity detected"),this.lastCC=a,this.insertDiscontinuity(),this.remuxer.switchLevel(),this.remuxer.insertDiscontinuity()):n!==this.lastLevel?(l.logger.log("audio track switch detected"),this.lastLevel=n,this.remuxer.switchLevel(),this.insertDiscontinuity()):s===this.lastSN+1&&(S=!0),h=this._aacTrack,this.lastSN=s,this.lastLevel=n,y=R.length,b=e.length;y<b-1&&(255!==e[y]||240!==(240&e[y+1]));y++);for(h.audiosamplerate||(c=o.default.getAudioConfig(this.observer,e,y,t),h.config=c.config,h.audiosamplerate=c.samplerate,h.channelCount=c.channelCount,h.codec=c.codec,h.duration=u,l.logger.log("parsed codec:"+h.codec+",rate:"+c.samplerate+",nb channel:"+c.channelCount)),g=0,p=9216e4/h.audiosamplerate;y+5<b&&(m=1&e[y+1]?7:9,v=(3&e[y+3])<<11|e[y+4]<<3|(224&e[y+5])>>>5,v-=m,v>0&&y+m+v<=b);)for(E=_+g*p,k={unit:e.subarray(y+m,y+m+v),pts:E,dts:E},h.samples.push(k),h.len+=v,y+=v+m,g++;y<b-1&&(255!==e[y]||240!==(240&e[y+1]));y++);this.remuxer.remux(n,s,this._aacTrack,{samples:[]},{samples:[{pts:_,dts:_,unit:R.payload}]},{samples:[]},i,S,f)}},{key:"destroy",value:function(){}}],[{key:"probe",value:function(e){var t,r,i=new d.default(e);if(i.hasTimeStamp)for(t=i.length,r=e.length;t<r-1;t++)if(255===e[t]&&240===(240&e[t+1]))return!0;return!1}}]),e}();t.default=f},function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(7),n=i(a),s=r(2),o=i(s),l=r(1),u=r(12),d=i(u),f=function(e){var t=new d.default;t.trigger=function(e){for(var r=arguments.length,i=Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];t.emit.apply(t,[e,e].concat(i))},t.off=function(e){for(var r=arguments.length,i=Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];t.removeListener.apply(t,[e].concat(i))};var r=function(t,r){e.postMessage({event:t,data:r})};e.addEventListener("message",function(i){var a=i.data;switch(a.cmd){case"init":var s=JSON.parse(a.config);e.demuxer=new n.default(t,a.id,a.typeSupported,s);try{(0,l.enableLogs)(s.debug===!0)}catch(e){console.warn("demuxerWorker: unable to enable logs")}r("init",null);break;case"demux":e.demuxer.push(new Uint8Array(a.data),a.audioCodec,a.videoCodec,a.timeOffset,a.cc,a.level,a.sn,a.duration,a.accurateTimeOffset)}}),t.on(o.default.FRAG_PARSING_INIT_SEGMENT,r),t.on(o.default.FRAG_PARSED,r),t.on(o.default.ERROR,r),t.on(o.default.FRAG_PARSING_METADATA,r),t.on(o.default.FRAG_PARSING_USERDATA,r),t.on(o.default.FRAG_PARSING_DATA,function(t,r){var i=r.data1.buffer,a=r.data2.buffer;delete r.data1,delete r.data2,e.postMessage({event:t,data:r,data1:i,data2:a},[i,a])})};t.default=f},function(e,t,r){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),n=r(1),s=function(){function e(t){i(this,e),this.data=t,this.bytesAvailable=this.data.byteLength,this.word=0,this.bitsAvailable=0}return a(e,[{key:"loadWord",value:function(){var e=this.data.byteLength-this.bytesAvailable,t=new Uint8Array(4),r=Math.min(4,this.bytesAvailable);if(0===r)throw new Error("no bytes available");t.set(this.data.subarray(e,e+r)),this.word=new DataView(t.buffer).getUint32(0),this.bitsAvailable=8*r,this.bytesAvailable-=r}},{key:"skipBits",value:function(e){var t;this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,t=e>>3,e-=t>>3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)}},{key:"readBits",value:function(e){var t=Math.min(this.bitsAvailable,e),r=this.word>>>32-t;return e>32&&n.logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0?this.word<<=t:this.bytesAvailable>0&&this.loadWord(),t=e-t,t>0&&this.bitsAvailable?r<<t|this.readBits(t):r}},{key:"skipLZ",value:function(){var e;for(e=0;e<this.bitsAvailable;++e)if(0!==(this.word&2147483648>>>e))return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()}},{key:"skipUEG",value:function(){this.skipBits(1+this.skipLZ())}},{key:"skipEG",value:function(){this.skipBits(1+this.skipLZ())}},{key:"readUEG",value:function(){var e=this.skipLZ();return this.readBits(e+1)-1}},{key:"readEG",value:function(){var e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}},{key:"readBoolean",value:function(){return 1===this.readBits(1)}},{key:"readUByte",value:function(){return this.readBits(8)}},{key:"readUShort",value:function(){return this.readBits(16)}},{key:"readUInt",value:function(){return this.readBits(32)}},{key:"skipScalingList",value:function(e){var t,r,i=8,a=8;for(t=0;t<e;t++)0!==a&&(r=this.readEG(),a=(i+r+256)%256),i=0===a?i:a}},{key:"readSPS",value:function(){var e,t,r,i,a,n,s,o,l,u=0,d=0,f=0,h=0,c=1;if(this.readUByte(),e=this.readUByte(),t=this.readBits(5),this.skipBits(3),r=this.readUByte(),this.skipUEG(),100===e||110===e||122===e||244===e||44===e||83===e||86===e||118===e||128===e){var v=this.readUEG();if(3===v&&this.skipBits(1),this.skipUEG(),this.skipUEG(),this.skipBits(1),this.readBoolean())for(o=3!==v?8:12,l=0;l<o;l++)this.readBoolean()&&(l<6?this.skipScalingList(16):this.skipScalingList(64))}this.skipUEG();var p=this.readUEG();if(0===p)this.readUEG();else if(1===p)for(this.skipBits(1),this.skipEG(),this.skipEG(),i=this.readUEG(),l=0;l<i;l++)this.skipEG();if(this.skipUEG(),this.skipBits(1),a=this.readUEG(),n=this.readUEG(),s=this.readBits(1),0===s&&this.skipBits(1),this.skipBits(1),this.readBoolean()&&(u=this.readUEG(),d=this.readUEG(),f=this.readUEG(),h=this.readUEG()),this.readBoolean()&&this.readBoolean()){var g=void 0,y=this.readUByte();switch(y){case 1:g=[1,1];break;case 2:g=[12,11];break;case 3:g=[10,11];break;case 4:g=[16,11];break;case 5:g=[40,33];break;case 6:g=[24,11];break;case 7:g=[20,11];break;case 8:g=[32,11];break;case 9:g=[80,33];break;case 10:g=[18,11];break;case 11:g=[15,11];break;case 12:g=[64,33];break;case 13:g=[160,99];break;case 14:g=[4,3];break;case 15:g=[3,2];break;case 16:g=[2,1];break;case 255:g=[this.readUByte()<<8|this.readUByte(),this.readUByte()<<8|this.readUByte()]}g&&(c=g[0]/g[1])}return{width:Math.ceil((16*(a+1)-2*u-2*d)*c),height:(2-s)*(n+1)*16-(s?2:4)*(f+h)}}},{key:"readSliceType",value:function(){return this.readUByte(),this.readUEG(),this.readUEG()}}]),e}();t.default=s},function(e,t,r){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),n=r(1),s=function(){function e(t){i(this,e),this._hasTimeStamp=!1;for(var r,a,s,o,l,u,d,f,h=0;;)if(d=this.readUTF(t,h,3),h+=3,"ID3"===d)h+=3,r=127&t[h++],a=127&t[h++],s=127&t[h++],o=127&t[h++],l=(r<<21)+(a<<14)+(s<<7)+o,u=h+l,this._parseID3Frames(t,h,u),h=u;else{if("3DI"!==d)return h-=3,f=h,void(f&&(this.hasTimeStamp||n.logger.warn("ID3 tag found, but no timestamp"),this._length=f,this._payload=t.subarray(0,f)));h+=7,n.logger.log("3DI footer found, end: "+h)}}return a(e,[{key:"readUTF",value:function(e,t,r){var i="",a=t,n=t+r;do i+=String.fromCharCode(e[a++]);while(a<n);return i}},{key:"_parseID3Frames",value:function(e,t,r){for(var i,a,s,o,l;t+8<=r;)switch(i=this.readUTF(e,t,4),t+=4,a=e[t++]<<24+e[t++]<<16+e[t++]<<8+e[t++],o=e[t++]<<8+e[t++],s=t,i){case"PRIV":if("com.apple.streaming.transportStreamTimestamp"===this.readUTF(e,t,44)){t+=44,t+=4;var u=1&e[t++];this._hasTimeStamp=!0,l=((e[t++]<<23)+(e[t++]<<15)+(e[t++]<<7)+e[t++])/45,u&&(l+=47721858.84),l=Math.round(l),n.logger.trace("ID3 timestamp found: "+l),this._timeStamp=l}}}},{key:"hasTimeStamp",get:function(){return this._hasTimeStamp}},{key:"timeStamp",get:function(){return this._timeStamp}},{key:"length",get:function(){return this._length}},{key:"payload",get:function(){return this._payload}}]),e}();t.default=s},function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),s=r(6),o=i(s),l=r(2),u=i(l),d=r(30),f=i(d),h=r(1),c=r(3),v=function(){function e(t,r,i,n,s){a(this,e),this.observer=t,this.id=r,this.remuxerClass=i,this.config=n,this.typeSupported=s,this.lastCC=0,this.remuxer=new this.remuxerClass(t,r,n,s)}return n(e,[{key:"switchLevel",value:function(){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack={container:"video/mp2t",type:"video",id:-1,sequenceNumber:0,samples:[],len:0,dropped:0},this._audioTrack={container:"video/mp2t",type:"audio",id:-1,sequenceNumber:0,samples:[],len:0,isAAC:!0},this._id3Track={type:"id3",id:-1,sequenceNumber:0,samples:[],len:0},this._txtTrack={type:"text",id:-1,sequenceNumber:0,samples:[],len:0},this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.remuxer.switchLevel()}},{key:"insertDiscontinuity",value:function(){this.switchLevel(),this.remuxer.insertDiscontinuity()}},{key:"push",value:function(e,t,r,i,a,n,s,o,l){var d,f,v,p,g,y,m=e.length,E=this.remuxer.passthrough,b=!1;this.audioCodec=t,this.videoCodec=r,this._duration=o,this.contiguous=!1,this.accurateTimeOffset=l,a!==this.lastCC&&(h.logger.log("discontinuity detected"),this.insertDiscontinuity(),this.lastCC=a),n!==this.lastLevel?(h.logger.log("level switch detected"),this.switchLevel(),this.lastLevel=n):s===this.lastSN+1&&(this.contiguous=!0),this.lastSN=s;var k=this.pmtParsed,R=this._avcTrack,_=this._audioTrack,S=this._id3Track,T=R.id,A=_.id,L=S.id,w=this._pmtId,D=R.pesData,O=_.pesData,C=S.pesData,P=this._parsePAT,I=this._parsePMT,x=this._parsePES,M=this._parseAVCPES.bind(this),N=this._parseAACPES.bind(this),F=this._parseMPEGPES.bind(this),U=this._parseID3PES.bind(this);for(m-=m%188,d=0;d<m;d+=188)if(71===e[d]){if(f=!!(64&e[d+1]),v=((31&e[d+1])<<8)+e[d+2],p=(48&e[d+3])>>4,p>1){if(g=d+5+e[d+4],g===d+188)continue}else g=d+4;switch(v){case T:if(f){if(D&&(y=x(D))&&(M(y,!1),E&&R.codec&&(A===-1||_.codec)))return void this.remux(n,s,e,i);D={data:[],size:0}}D&&(D.data.push(e.subarray(g,d+188)),D.size+=d+188-g);break;case A:if(f){if(O&&(y=x(O))&&(_.isAAC?N(y):F(y),E&&_.codec&&(T===-1||R.codec)))return void this.remux(n,s,e,i);O={data:[],size:0}}O&&(O.data.push(e.subarray(g,d+188)),O.size+=d+188-g);break;case L:f&&(C&&(y=x(C))&&U(y),C={data:[],size:0}),C&&(C.data.push(e.subarray(g,d+188)),C.size+=d+188-g);break;case 0:f&&(g+=e[g]+1),w=this._pmtId=P(e,g);break;case w:f&&(g+=e[g]+1);var G=I(e,g,this.typeSupported.mpeg===!0||this.typeSupported.mp3===!0);T=G.avc,T>0&&(R.id=T),A=G.audio,A>0&&(_.id=A,_.isAAC=G.isAAC),L=G.id3,L>0&&(S.id=L),b&&!k&&(h.logger.log("reparse from beginning"),b=!1,d=-188),k=this.pmtParsed=!0;break;case 17:case 8191:break;default:b=!0}}else this.observer.trigger(u.default.ERROR,{type:c.ErrorTypes.MEDIA_ERROR,id:this.id,details:c.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});D&&(y=x(D))?(M(y,!0),R.pesData=null):R.pesData=D,O&&(y=x(O))?(_.isAAC?N(y):F(y),_.pesData=null):(O&&O.size&&h.logger.log("last AAC PES packet truncated,might overlap between fragments"),_.pesData=O),C&&(y=x(C))?(U(y),S.pesData=null):S.pesData=C,this.remux(n,s,null,i)}},{key:"remux",value:function(e,t,r,i){for(var a=this._avcTrack,n=a.samples,s=0,o=0,l=0;l<n.length;l++){for(var u=n[l],d=u.units.units,f=d.length,h=0,c=0;c<f;c++)h+=d[c].data.length;o+=h,s+=f,u.length=h}a.len=o,a.nbNalu=s,this.remuxer.remux(e,t,this._audioTrack,this._avcTrack,this._id3Track,this._txtTrack,i,this.contiguous,this.accurateTimeOffset,r)}},{key:"destroy",value:function(){this.switchLevel(),this._initPTS=this._initDTS=void 0,this._duration=0}},{key:"_parsePAT",value:function(e,t){return(31&e[t+10])<<8|e[t+11]}},{key:"_parsePMT",value:function(e,t,r){var i,a,n,s,o={audio:-1,avc:-1,id3:-1,isAAC:!0};for(i=(15&e[t+1])<<8|e[t+2],a=t+3+i-4,n=(15&e[t+10])<<8|e[t+11],t+=12+n;t<a;){switch(s=(31&e[t+1])<<8|e[t+2],e[t]){case 15:o.audio===-1&&(o.audio=s);break;case 21:o.id3===-1&&(o.id3=s);break;case 27:o.avc===-1&&(o.avc=s);break;case 3:case 4:r?o.audio===-1&&(o.audio=s,o.isAAC=!1):h.logger.log("MPEG audio found, not supported in this browser for now");break;case 36:h.logger.warn("HEVC stream type found, not supported for now");break;default:h.logger.log("unkown stream type:"+e[t])}t+=((15&e[t+3])<<8|e[t+4])+5}return o}},{key:"_parsePES",value:function(e){var t,r,i,a,n,s,o,l,u,d=0,f=e.data;if(!e||0===e.size)return null;for(;f[0].length<19&&f.length>1;){var h=new Uint8Array(f[0].length+f[1].length);h.set(f[0]),h.set(f[1],f[0].length),f[0]=h,f.splice(1,1)}if(t=f[0],i=(t[0]<<16)+(t[1]<<8)+t[2],1===i){if(a=(t[4]<<8)+t[5],a&&a>e.size-6)return null;for(r=t[7],192&r&&(o=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2,o>4294967295&&(o-=8589934592),64&r?(l=536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2,l>4294967295&&(l-=8589934592)):l=o),n=t[8],u=n+9,e.size-=u,s=new Uint8Array(e.size);f.length;){t=f.shift();var c=t.byteLength;if(u){if(u>c){u-=c;continue}t=t.subarray(u),c-=u,u=0}s.set(t,d),d+=c}return a&&(a-=n+3),{data:s,pts:o,dts:l,len:a}}return null}},{key:"pushAccesUnit",value:function(e,t){e.units.units.length&&e.frame&&(!this.config.forceKeyFrameOnDiscontinuity||e.key===!0||t.sps&&(t.samples.length||this.contiguous)?t.samples.push(e):t.dropped++),e.debug.length&&h.logger.log(e.pts+"/"+e.dts+":"+e.debug+","+e.units.length)}},{key:"_parseAVCPES",value:function(e,t){var r,i,a,n=this,s=this._avcTrack,o=this._parseAVCNALu(e.data),l=!1,u=this.avcSample;e.data=null,o.forEach(function(t){switch(t.type){case 1:i=!0,l&&u&&(u.debug+="NDR "),u.frame=!0;break;case 5:i=!0,u||(u=n.avcSample=n._createAVCSample(!0,e.pts,e.dts,"")),l&&(u.debug+="IDR "),u.key=!0,u.frame=!0;break;case 6:i=!0,l&&u&&(u.debug+="SEI "),r=new f.default(n.discardEPB(t.data)),r.readUByte();for(var o=0,d=0,h=!1,c=0;!h&&r.bytesAvailable>1;){o=0;do c=r.readUByte(),o+=c;while(255===c);d=0;do c=r.readUByte(),d+=c;while(255===c);if(4===o&&0!==r.bytesAvailable){h=!0;var v=r.readUByte();if(181===v){var p=r.readUShort();if(49===p){var g=r.readUInt();if(1195456820===g){var y=r.readUByte();if(3===y){var m=r.readUByte(),E=r.readUByte(),b=31&m,k=[m,E];for(a=0;a<b;a++)k.push(r.readUByte()),k.push(r.readUByte()),k.push(r.readUByte());n._insertSampleInOrder(n._txtTrack.samples,{type:3,pts:e.pts,bytes:k})}}}}}else if(d<r.bytesAvailable)for(a=0;a<d;a++)r.readUByte()}break;case 7:if(i=!0,l&&u&&(u.debug+="SPS "),!s.sps){r=new f.default(t.data);var R=r.readSPS();s.width=R.width,s.height=R.height,s.sps=[t.data],s.duration=n._duration;var _=t.data.subarray(1,4),S="avc1.";for(a=0;a<3;a++){var T=_[a].toString(16);T.length<2&&(T="0"+T),S+=T}s.codec=S}break;case 8:i=!0,l&&u&&(u.debug+="PPS "),s.pps||(s.pps=[t.data]);break;case 9:i=!1,u&&n.pushAccesUnit(u,s),u=n.avcSample=n._createAVCSample(!1,e.pts,e.dts,l?"AUD ":"");break;case 12:i=!1;break;default:i=!1,u&&(u.debug+="unknown NAL "+t.type+" ")}if(u&&i){var A=u.units;A.units.push(t)}}),t&&u&&(this.pushAccesUnit(u,s),this.avcSample=null)}},{key:"_createAVCSample",value:function(e,t,r,i){return{key:e,pts:t,dts:r,units:{units:[],length:0},debug:i}}},{key:"_insertSampleInOrder",value:function(e,t){var r=e.length;if(r>0){if(t.pts>=e[r-1].pts)e.push(t);else for(var i=r-1;i>=0;i--)if(t.pts<e[i].pts){e.splice(i,0,t);break}}else e.push(t)}},{key:"_getLastNalUnit",value:function(){var e=this.avcSample,t=void 0;if(!e||0===e.units.units.length){var r=this._avcTrack,i=r.samples;e=i[i.length-1]}if(e){var a=e.units.units;t=a[a.length-1]}return t}},{key:"_parseAVCNALu",value:function(e){for(var t,r,i,a,n,s=0,o=e.byteLength,l=this._avcTrack,u=l.naluState||0,d=u,f=[],h=-1;s<o;)switch(t=e[s++],u){case 0:0===t&&(u=1);
break;case 1:u=0===t?2:0;break;case 2:case 3:if(0===t)u=3;else if(1===t){if(h>=0)i={data:e.subarray(h,s-u-1),type:n},f.push(i);else{var c=this._getLastNalUnit();if(c&&(d&&s<=4-d&&c.state&&(c.data=c.data.subarray(0,c.data.byteLength-d)),r=s-u-1,r>0)){var v=new Uint8Array(c.data.byteLength+r);v.set(c.data,0),v.set(e.subarray(0,r),c.data.byteLength),c.data=v}}s<o?(a=31&e[s],h=s,n=a,u=0):u=-1}else u=0;break;case-1:h=0,n=31&t,u=0}if(h>=0&&u>=0&&(i={data:e.subarray(h,o),type:n,state:u},f.push(i)),0===f.length){var p=this._getLastNalUnit();if(p){var g=new Uint8Array(p.data.byteLength+e.byteLength);g.set(p.data,0),g.set(e,p.data.byteLength),p.data=g}}return l.naluState=u,f}},{key:"discardEPB",value:function(e){for(var t,r,i=e.byteLength,a=[],n=1;n<i-2;)0===e[n]&&0===e[n+1]&&3===e[n+2]?(a.push(n+2),n+=2):n++;if(0===a.length)return e;t=i-a.length,r=new Uint8Array(t);var s=0;for(n=0;n<t;s++,n++)s===a[0]&&(s++,a.shift()),r[n]=e[s];return r}},{key:"_parseAACPES",value:function(e){var t,r,i,a,n,s,l,d,f,v=this._audioTrack,p=e.data,g=e.pts,y=0,m=this.aacOverFlow,E=this.aacLastPTS;if(m){var b=new Uint8Array(m.byteLength+p.byteLength);b.set(m,0),b.set(p,m.byteLength),p=b}for(n=y,d=p.length;n<d-1&&(255!==p[n]||240!==(240&p[n+1]));n++);if(n){var k,R;if(n<d-1?(k="AAC PES did not start with ADTS header,offset:"+n,R=!1):(k="no ADTS header found in AAC PES",R=!0),h.logger.warn("parsing error:"+k),this.observer.trigger(u.default.ERROR,{type:c.ErrorTypes.MEDIA_ERROR,id:this.id,details:c.ErrorDetails.FRAG_PARSING_ERROR,fatal:R,reason:k}),R)return}if(v.audiosamplerate||(t=o.default.getAudioConfig(this.observer,p,n,this.audioCodec),v.config=t.config,v.audiosamplerate=t.samplerate,v.channelCount=t.channelCount,v.codec=t.codec,v.duration=this._duration,h.logger.log("parsed codec:"+v.codec+",rate:"+t.samplerate+",nb channel:"+t.channelCount)),a=0,i=9216e4/v.audiosamplerate,m&&E){var _=E+i;Math.abs(_-g)>1&&(h.logger.log("AAC: align PTS for overlapping frames by "+Math.round((_-g)/90)),g=_)}for(;n+5<d&&(s=1&p[n+1]?7:9,r=(3&p[n+3])<<11|p[n+4]<<3|(224&p[n+5])>>>5,r-=s,r>0&&n+s+r<=d);)for(l=g+a*i,f={unit:p.subarray(n+s,n+s+r),pts:l,dts:l},v.samples.push(f),v.len+=r,n+=r+s,a++;n<d-1&&(255!==p[n]||240!==(240&p[n+1]));n++);m=n<d?p.subarray(n,d):null,this.aacOverFlow=m,this.aacLastPTS=l}},{key:"_parseMPEGPES",value:function(e){for(var t,r=e.data,i=e.pts,a=r.length,n=0,s=0;s<a&&(t=this._parseMpeg(r,s,a,n++,i))>0;)s+=t}},{key:"_onMpegFrame",value:function(e,t,r,i,a,n){var s=1152/r*1e3,o=n+a*s,l=this._audioTrack;l.config=[],l.channelCount=i,l.audiosamplerate=r,l.duration=this._duration,l.samples.push({unit:e,pts:o,dts:o}),l.len+=e.length}},{key:"_onMpegNoise",value:function(e){h.logger.warn("mpeg audio has noise: "+e.length+" bytes")}},{key:"_parseMpeg",value:function(e,t,r,i,a){var n=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],s=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3];if(t+2>r)return-1;if(255===e[t]||224===(224&e[t+1])){if(t+24>r)return-1;var o=e[t+1]>>3&3,l=e[t+1]>>1&3,u=e[t+2]>>4&15,d=e[t+2]>>2&3,f=!!(2&e[t+2]);if(1!==o&&0!==u&&15!==u&&3!==d){var h=3===o?3-l:3===l?3:4,c=1e3*n[14*h+u-1],v=3===o?0:2===o?1:2,p=s[3*v+d],g=f?1:0,y=e[t+3]>>6===3?1:2,m=3===l?(3===o?12:6)*c/p+g<<2:(3===o?144:72)*c/p+g|0;return t+m>r?-1:(this._onMpegFrame&&this._onMpegFrame(e.subarray(t,t+m),c,p,y,i,a),m)}}for(var E=t+2;E<r;){if(255===e[E-1]&&224===(224&e[E]))return this._onMpegNoise&&this._onMpegNoise(e.subarray(t,E-1)),E-t-1;E++}return-1}},{key:"_parseID3PES",value:function(e){this._id3Track.samples.push(e)}}],[{key:"probe",value:function(e){return e.length>=564&&71===e[0]&&71===e[188]&&71===e[376]}}]),e}();t.default=v},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),a=function(){function e(){r(this,e)}return i(e,null,[{key:"getSilentFrame",value:function(e){return 1===e?new Uint8Array([0,200,0,128,35,128]):2===e?new Uint8Array([33,0,73,144,2,25,0,35,128]):3===e?new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]):4===e?new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]):5===e?new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]):6===e?new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]):null}}]),e}();t.default=a},function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),s=r(2),o=i(s),l=r(3),u=r(38),d=i(u),f=r(36),h=i(f),c=r(14),v=i(c),p=r(17),g=i(p),y=r(18),m=i(y),E=r(15),b=i(E),k=r(22),R=i(k),_=r(21),S=i(_),T=r(23),A=i(T),L=r(20),w=i(L),D=r(16),O=i(D),C=r(1),P=r(47),I=i(P),x=r(12),M=i(x),N=r(37),F=i(N),U=r(44),G=i(U),B=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e);var r=e.DefaultConfig;if((t.liveSyncDurationCount||t.liveMaxLatencyDurationCount)&&(t.liveSyncDuration||t.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");for(var i in r)i in t||(t[i]=r[i]);if(void 0!==t.liveMaxLatencyDurationCount&&t.liveMaxLatencyDurationCount<=t.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(void 0!==t.liveMaxLatencyDuration&&(t.liveMaxLatencyDuration<=t.liveSyncDuration||void 0===t.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');(0,C.enableLogs)(t.debug),this.config=t;var n=this.observer=new M.default;n.trigger=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];n.emit.apply(n,[e,e].concat(r))},n.off=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];n.removeListener.apply(n,[e].concat(r))},this.on=n.on.bind(n),this.off=n.off.bind(n),this.trigger=n.trigger.bind(n),this.playlistLoader=new d.default(this),this.fragmentLoader=new h.default(this),this.levelController=new S.default(this),this.abrController=new t.abrController(this),this.bufferController=new t.bufferController(this),this.capLevelController=new t.capLevelController(this),this.fpsController=new t.fpsController(this),this.streamController=new t.streamController(this),this.audioStreamController=new t.audioStreamController(this),this.timelineController=new t.timelineController(this),this.audioTrackController=new O.default(this),this.keyLoader=new F.default(this)}return n(e,null,[{key:"isSupported",value:function(){return window.MediaSource=window.MediaSource||window.WebKitMediaSource,window.MediaSource&&"function"==typeof window.MediaSource.isTypeSupported&&window.MediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"')}},{key:"version",get:function(){return"__VERSION__"}},{key:"Events",get:function(){return o.default}},{key:"ErrorTypes",get:function(){return l.ErrorTypes}},{key:"ErrorDetails",get:function(){return l.ErrorDetails}},{key:"DefaultConfig",get:function(){return e.defaultConfig||(e.defaultConfig={autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,maxSeekHole:2,seekHoleNudgeDuration:.01,stalledInBufferedNudgeThreshold:10,maxFragLookUpTolerance:.2,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,fragLoadingLoopThreshold:3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:I.default,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,fetchSetup:void 0,abrController:v.default,bufferController:g.default,capLevelController:m.default,fpsController:w.default,streamController:R.default,audioStreamController:b.default,timelineController:A.default,cueHandler:G.default,enableCEA708Captions:!0,enableMP2TPassThrough:!1,stretchShortVideoTrack:!1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0}),e.defaultConfig},set:function(t){e.defaultConfig=t}}]),n(e,[{key:"destroy",value:function(){C.logger.log("destroy"),this.trigger(o.default.DESTROYING),this.detachMedia(),this.playlistLoader.destroy(),this.fragmentLoader.destroy(),this.levelController.destroy(),this.abrController.destroy(),this.bufferController.destroy(),this.capLevelController.destroy(),this.fpsController.destroy(),this.streamController.destroy(),this.audioStreamController.destroy(),this.timelineController.destroy(),this.audioTrackController.destroy(),this.keyLoader.destroy(),this.url=null,this.observer.removeAllListeners()}},{key:"attachMedia",value:function(e){C.logger.log("attachMedia"),this.media=e,this.trigger(o.default.MEDIA_ATTACHING,{media:e})}},{key:"detachMedia",value:function(){C.logger.log("detachMedia"),this.trigger(o.default.MEDIA_DETACHING),this.media=null}},{key:"loadSource",value:function(e){C.logger.log("loadSource:"+e),this.url=e,this.trigger(o.default.MANIFEST_LOADING,{url:e})}},{key:"startLoad",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;C.logger.log("startLoad("+e+")"),this.levelController.startLoad(),this.streamController.startLoad(e),this.audioStreamController.startLoad(e)}},{key:"stopLoad",value:function(){C.logger.log("stopLoad"),this.levelController.stopLoad(),this.streamController.stopLoad(),this.audioStreamController.stopLoad()}},{key:"swapAudioCodec",value:function(){C.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()}},{key:"recoverMediaError",value:function(){C.logger.log("recoverMediaError");var e=this.media;this.detachMedia(),this.attachMedia(e)}},{key:"levels",get:function(){return this.levelController.levels}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(e){C.logger.log("set currentLevel:"+e),this.loadLevel=e,this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(e){C.logger.log("set nextLevel:"+e),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(e){C.logger.log("set loadLevel:"+e),this.levelController.manualLevel=e}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(e){this.levelController.nextLoadLevel=e}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.abrController.minAutoLevel)},set:function(e){C.logger.log("set firstLevel:"+e),this.levelController.firstLevel=e}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(e){C.logger.log("set startLevel:"+e),this.levelController.startLevel=e}},{key:"autoLevelCapping",get:function(){return this.abrController.autoLevelCapping},set:function(e){C.logger.log("set autoLevelCapping:"+e),this.abrController.autoLevelCapping=e}},{key:"autoLevelEnabled",get:function(){return this.levelController.manualLevel===-1}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"audioTracks",get:function(){return this.audioTrackController.audioTracks}},{key:"audioTrack",get:function(){return this.audioTrackController.audioTrack},set:function(e){this.audioTrackController.audioTrack=e}},{key:"liveSyncPosition",get:function(){return this.streamController.liveSyncPosition}}]),e}();t.default=B},function(e,t,r){"use strict";e.exports=r(34).default},function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"==typeof t?"undefined":o(t))&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof t?"undefined":o(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),u=r(2),d=i(u),f=r(4),h=i(f),c=r(3),v=r(1),p=function(e){function t(e){a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,d.default.FRAG_LOADING));return r.loaders={},r}return s(t,e),l(t,[{key:"destroy",value:function(){var e=this.loaders;for(var t in e){var r=e[t];r&&r.destroy()}this.loaders={},h.default.prototype.destroy.call(this)}},{key:"onFragLoading",value:function(e){var t=e.frag,r=t.type,i=this.loaders[r],a=this.hls.config;t.loaded=0,i&&(v.logger.warn("abort previous fragment loader for type:"+r),i.abort()),i=this.loaders[r]=t.loader="undefined"!=typeof a.fLoader?new a.fLoader(a):new a.loader(a);var n=void 0,s=void 0,o=void 0;n={url:t.url,frag:t,responseType:"arraybuffer",progressData:!1};var l=t.byteRangeStartOffset,u=t.byteRangeEndOffset;isNaN(l)||isNaN(u)||(n.rangeStart=l,n.rangeEnd=u),s={timeout:a.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:a.fragLoadingMaxRetryTimeout},o={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},i.load(n,s,o)}},{key:"loadsuccess",value:function(e,t,r){var i=e.data,a=r.frag;a.loader=void 0,this.loaders[a.type]=void 0,this.hls.trigger(d.default.FRAG_LOADED,{payload:i,frag:a,stats:t})}},{key:"loaderror",value:function(e,t){var r=t.loader;r&&r.abort(),this.loaders[t.type]=void 0,this.hls.trigger(d.default.ERROR,{type:c.ErrorTypes.NETWORK_ERROR,details:c.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:t.frag,response:e})}},{key:"loadtimeout",value:function(e,t){var r=t.loader;r&&r.abort(),this.loaders[t.type]=void 0,this.hls.trigger(d.default.ERROR,{type:c.ErrorTypes.NETWORK_ERROR,details:c.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t.frag})}},{key:"loadprogress",value:function(e,t,r){var i=t.frag;i.loaded=e.loaded,this.hls.trigger(d.default.FRAG_LOAD_PROGRESS,{frag:i,stats:e})}}]),t}(h.default);t.default=p},function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"==typeof t?"undefined":o(t))&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof t?"undefined":o(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),u=r(2),d=i(u),f=r(4),h=i(f),c=r(3),v=r(1),p=function(e){function t(e){a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,d.default.KEY_LOADING));return r.loaders={},r.decryptkey=null,r.decrypturl=null,r}return s(t,e),l(t,[{key:"destroy",value:function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy()}this.loaders={},h.default.prototype.destroy.call(this)}},{key:"onKeyLoading",value:function(e){var t=e.frag,r=t.type,i=this.loaders[r],a=t.decryptdata,n=a.uri;if(n!==this.decrypturl||null===this.decryptkey){var s=this.hls.config;i&&(v.logger.warn("abort previous key loader for type:"+r),i.abort()),t.loader=this.loaders[r]=new s.loader(s),this.decrypturl=n,this.decryptkey=null;var o=void 0,l=void 0,u=void 0;o={url:n,frag:t,responseType:"arraybuffer"},l={timeout:s.fragLoadingTimeOut,maxRetry:s.fragLoadingMaxRetry,retryDelay:s.fragLoadingRetryDelay,maxRetryDelay:s.fragLoadingMaxRetryTimeout},u={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},t.loader.load(o,l,u)}else this.decryptkey&&(a.key=this.decryptkey,this.hls.trigger(d.default.KEY_LOADED,{frag:t}))}},{key:"loadsuccess",value:function(e,t,r){var i=r.frag;this.decryptkey=i.decryptdata.key=new Uint8Array(e.data),i.loader=void 0,this.loaders[i.type]=void 0,this.hls.trigger(d.default.KEY_LOADED,{frag:i})}},{key:"loaderror",value:function(e,t){var r=t.frag,i=r.loader;i&&i.abort(),this.loaders[t.type]=void 0,this.hls.trigger(d.default.ERROR,{type:c.ErrorTypes.NETWORK_ERROR,details:c.ErrorDetails.KEY_LOAD_ERROR,fatal:!1,frag:r,response:e})}},{key:"loadtimeout",value:function(e,t){var r=t.frag,i=r.loader;i&&i.abort(),this.loaders[t.type]=void 0,this.hls.trigger(d.default.ERROR,{type:c.ErrorTypes.NETWORK_ERROR,details:c.ErrorDetails.KEY_LOAD_TIMEOUT,fatal:!1,frag:r})}}]),t}(h.default);t.default=p},function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"==typeof t?"undefined":o(t))&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof t?"undefined":o(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),u=r(48),d=i(u),f=r(2),h=i(f),c=r(4),v=i(c),p=r(3),g=r(42),y=i(g),m=r(1),E=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,b=/#EXT-X-MEDIA:(.*)/g,k=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT(INF): *(\d+(?:\.\d+)?)(?:,(.*))?)|(?:(?!#)()(\S.+))|(?:#EXT-X-(BYTERANGE): *(\d+(?:@\d+(?:\.\d+)?)?)|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(PROGRAM-DATE-TIME):(.+))|(?:#EXT-X-(VERSION):(\d+))|(?:(#)(.*):(.*))|(?:(#)(.*)))(?:.*)\r?\n?/g,R=function(e){function t(e){a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,h.default.MANIFEST_LOADING,h.default.LEVEL_LOADING,h.default.AUDIO_TRACK_LOADING));return r.loaders={},r}return s(t,e),l(t,[{key:"destroy",value:function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy()}this.loaders={},v.default.prototype.destroy.call(this)}},{key:"onManifestLoading",value:function(e){this.load(e.url,{type:"manifest"})}},{key:"onLevelLoading",value:function(e){this.load(e.url,{type:"level",level:e.level,id:e.id})}},{key:"onAudioTrackLoading",value:function(e){this.load(e.url,{type:"audioTrack",id:e.id})}},{key:"load",value:function(e,t){var r=this.loaders[t.type];if(r){var i=r.context;if(i&&i.url===e)return void m.logger.trace("playlist request ongoing");m.logger.warn("abort previous loader for type:"+t.type),r.abort()}var a=this.hls.config,n=void 0,s=void 0,o=void 0,l=void 0;"manifest"===t.type?(n=a.manifestLoadingMaxRetry,s=a.manifestLoadingTimeOut,o=a.manifestLoadingRetryDelay,l=a.manifestLoadingMaxRetryTimeout):(n=a.levelLoadingMaxRetry,s=a.levelLoadingTimeOut,o=a.levelLoadingRetryDelay,l=a.levelLoadingMaxRetryTimeout,m.logger.log("loading playlist for level "+t.level)),r=this.loaders[t.type]=t.loader="undefined"!=typeof a.pLoader?new a.pLoader(a):new a.loader(a),t.url=e,t.responseType="";var u=void 0,d=void 0;u={timeout:s,maxRetry:n,retryDelay:o,maxRetryDelay:l},d={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},r.load(t,u,d)}},{key:"resolve",value:function(e,t){return d.default.buildAbsoluteURL(t,e)}},{key:"parseMasterPlaylist",value:function(e,t){var r=[],i=void 0;for(E.lastIndex=0;null!=(i=E.exec(e));){var a={},n=a.attrs=new y.default(i[1]);a.url=this.resolve(i[2],t);var s=n.decimalResolution("RESOLUTION");s&&(a.width=s.width,a.height=s.height),a.bitrate=n.decimalInteger("AVERAGE-BANDWIDTH")||n.decimalInteger("BANDWIDTH"),a.name=n.NAME;var o=n.CODECS;if(o){o=o.split(/[ ,]+/);for(var l=0;l<o.length;l++){var u=o[l];u.indexOf("avc1")!==-1?a.videoCodec=this.avc1toavcoti(u):a.audioCodec=u}}r.push(a)}return r}},{key:"parseMasterPlaylistMedia",value:function(e,t,r){var i=void 0,a=[];for(b.lastIndex=0;null!=(i=b.exec(e));){var n={},s=new y.default(i[1]);s.TYPE===r&&(n.groupId=s["GROUP-ID"],n.name=s.NAME,n.type=r,n.default="YES"===s.DEFAULT,n.autoselect="YES"===s.AUTOSELECT,n.forced="YES"===s.FORCED,s.URI&&(n.url=this.resolve(s.URI,t)),n.lang=s.LANGUAGE,n.name||(n.name=n.lang),a.push(n))}return a}},{key:"createInitializationVector",value:function(e){for(var t=new Uint8Array(16),r=12;r<16;r++)t[r]=e>>8*(15-r)&255;return t}},{key:"fragmentDecryptdataFromLevelkey",value:function(e,t){var r=e;return e&&e.method&&e.uri&&!e.iv&&(r=this.cloneObj(e),r.iv=this.createInitializationVector(t)),r}},{key:"avc1toavcoti",value:function(e){var t,r=e.split(".");return r.length>2?(t=r.shift()+".",t+=parseInt(r.shift()).toString(16),t+=("000"+parseInt(r.shift()).toString(16)).substr(-4)):t=e,t}},{key:"cloneObj",value:function(e){return JSON.parse(JSON.stringify(e))}},{key:"parseLevelPlaylist",value:function(e,t,r,i){var a,n,s=0,o=0,l={type:null,version:null,url:t,fragments:[],live:!0,startSN:0},u={method:null,key:null,iv:null,uri:null},d=0,f=null,h=null,c=null,v=null,p=null,g=null,E=[];for(k.lastIndex=0;null!==(n=k.exec(e));)switch(n.shift(),n=n.filter(function(e){return void 0!==e}),n[0]){case"PLAYLIST-TYPE":l.type=n[1].toUpperCase();break;case"MEDIA-SEQUENCE":s=l.startSN=parseInt(n[1]);break;case"TARGETDURATION":l.targetduration=parseFloat(n[1]);break;case"VERSION":l.version=parseInt(n[1]);break;case"EXTM3U":break;case"ENDLIST":l.live=!1;break;case"DIS":d++,E.push(n);break;case"DISCONTINUITY-SEQ":d=parseInt(n[1]);break;case"BYTERANGE":var b=n[1].split("@");g=1===b.length?p:parseInt(b[1]),p=parseInt(b[0])+g;break;case"INF":c=parseFloat(n[1]),v=n[2]?n[2]:null,E.push(n);break;case"":if(!isNaN(c)){var R=s++;a=this.fragmentDecryptdataFromLevelkey(u,R);var _=n[1]?this.resolve(n[1],t):null;h={url:_,type:i,duration:c,title:v,start:o,sn:R,level:r,cc:d,decryptdata:a,programDateTime:f,tagList:E},null!==g&&(h.byteRangeStartOffset=g,h.byteRangeEndOffset=p),l.fragments.push(h),o+=c,c=null,v=null,g=null,f=null,E=[]}break;case"KEY":var S=n[1],T=new y.default(S),A=T.enumeratedString("METHOD"),L=T.URI,w=T.hexadecimalInteger("IV");A&&(u={method:null,key:null,iv:null,uri:null},L&&"AES-128"===A&&(u.method=A,u.uri=this.resolve(L,t),u.key=null,u.iv=w));break;case"START":var D=n[1],O=new y.default(D),C=O.decimalFloatingPoint("TIME-OFFSET");isNaN(C)||(l.startTimeOffset=C);break;case"PROGRAM-DATE-TIME":f=new Date(Date.parse(n[1])),E.push(n);break;case"#":n.shift(),E.push(n);break;default:m.logger.warn("line parsed but not handled: "+n)}return h&&!h.url&&(l.fragments.pop(),o-=h.duration),l.totalduration=o,l.averagetargetduration=o/l.fragments.length,l.endSN=s-1,l}},{key:"loadsuccess",value:function(e,t,r){var i=e.data,a=e.url,n=r.type,s=r.id,o=r.level,l=this.hls;if(this.loaders[n]=void 0,void 0!==a&&0!==a.indexOf("data:")||(a=r.url),t.tload=performance.now(),0===i.indexOf("#EXTM3U"))if(i.indexOf("#EXTINF:")>0){var u="audioTrack"!==n,d=this.parseLevelPlaylist(i,a,(u?o:s)||0,u?"main":"audio");"manifest"===n&&l.trigger(h.default.MANIFEST_LOADED,{levels:[{url:a,details:d}],audioTracks:[],url:a,stats:t}),t.tparsed=performance.now(),d.targetduration?u?l.trigger(h.default.LEVEL_LOADED,{details:d,level:o||0,id:s||0,stats:t}):l.trigger(h.default.AUDIO_TRACK_LOADED,{details:d,id:s,stats:t}):l.trigger(h.default.ERROR,{type:p.ErrorTypes.NETWORK_ERROR,details:p.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:a,reason:"invalid targetduration"})}else{var f=this.parseMasterPlaylist(i,a);if(f.length){var c=this.parseMasterPlaylistMedia(i,a,"AUDIO");if(c.length){var v=!1;c.forEach(function(e){e.url||(v=!0)}),v===!1&&f[0].audioCodec&&!f[0].attrs.AUDIO&&(m.logger.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),c.unshift({type:"main",name:"main"}))}l.trigger(h.default.MANIFEST_LOADED,{levels:f,audioTracks:c,url:a,stats:t})}else l.trigger(h.default.ERROR,{type:p.ErrorTypes.NETWORK_ERROR,details:p.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:a,reason:"no level found in manifest"})}else l.trigger(h.default.ERROR,{type:p.ErrorTypes.NETWORK_ERROR,details:p.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:a,reason:"no EXTM3U delimiter"})}},{key:"loaderror",value:function(e,t){var r,i,a=t.loader;switch(t.type){case"manifest":r=p.ErrorDetails.MANIFEST_LOAD_ERROR,i=!0;break;case"level":r=p.ErrorDetails.LEVEL_LOAD_ERROR,i=!1;break;case"audioTrack":r=p.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,i=!1}a&&(a.abort(),this.loaders[t.type]=void 0),this.hls.trigger(h.default.ERROR,{type:p.ErrorTypes.NETWORK_ERROR,details:r,fatal:i,url:a.url,loader:a,response:e,context:t})}},{key:"loadtimeout",value:function(e,t){var r,i,a=t.loader;switch(t.type){case"manifest":r=p.ErrorDetails.MANIFEST_LOAD_TIMEOUT,i=!0;break;case"level":r=p.ErrorDetails.LEVEL_LOAD_TIMEOUT,i=!1;break;case"audioTrack":r=p.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT,i=!1}a&&(a.abort(),this.loaders[t.type]=void 0),this.hls.trigger(h.default.ERROR,{type:p.ErrorTypes.NETWORK_ERROR,details:r,fatal:i,url:a.url,loader:a,context:t})}}]),t}(v.default);t.default=R},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),a=function(){function e(){r(this,e)}return i(e,null,[{key:"init",value:function(){e.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};var t;for(t in e.types)e.types.hasOwnProperty(t)&&(e.types[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);var r=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),i=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);e.HDLR_TYPES={video:r,audio:i};var a=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),n=new Uint8Array([0,0,0,0,0,0,0,0]);e.STTS=e.STSC=e.STCO=n,e.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),e.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),e.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),e.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var s=new Uint8Array([105,115,111,109]),o=new Uint8Array([97,118,99,49]),l=new Uint8Array([0,0,0,1]);e.FTYP=e.box(e.types.ftyp,s,l,s,o),e.DINF=e.box(e.types.dinf,e.box(e.types.dref,a))}},{key:"box",value:function(e){for(var t,r=Array.prototype.slice.call(arguments,1),i=8,a=r.length,n=a;a--;)i+=r[a].byteLength;for(t=new Uint8Array(i),t[0]=i>>24&255,t[1]=i>>16&255,t[2]=i>>8&255,t[3]=255&i,t.set(e,4),a=0,i=8;a<n;a++)t.set(r[a],i),i+=r[a].byteLength;return t}},{key:"hdlr",value:function(t){return e.box(e.types.hdlr,e.HDLR_TYPES[t])}},{key:"mdat",value:function(t){return e.box(e.types.mdat,t)}},{key:"mdhd",value:function(t,r){return r*=t,e.box(e.types.mdhd,new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,r>>24,r>>16&255,r>>8&255,255&r,85,196,0,0]))}},{key:"mdia",value:function(t){return e.box(e.types.mdia,e.mdhd(t.timescale,t.duration),e.hdlr(t.type),e.minf(t))}},{key:"mfhd",value:function(t){return e.box(e.types.mfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t]))}},{key:"minf",value:function(t){return"audio"===t.type?e.box(e.types.minf,e.box(e.types.smhd,e.SMHD),e.DINF,e.stbl(t)):e.box(e.types.minf,e.box(e.types.vmhd,e.VMHD),e.DINF,e.stbl(t))}},{key:"moof",value:function(t,r,i){return e.box(e.types.moof,e.mfhd(t),e.traf(i,r))}},{key:"moov",value:function(t){for(var r=t.length,i=[];r--;)i[r]=e.trak(t[r]);return e.box.apply(null,[e.types.moov,e.mvhd(t[0].timescale,t[0].duration)].concat(i).concat(e.mvex(t)))}},{key:"mvex",value:function(t){for(var r=t.length,i=[];r--;)i[r]=e.trex(t[r]);return e.box.apply(null,[e.types.mvex].concat(i))}},{key:"mvhd",value:function(t,r){r*=t;var i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,t>>24&255,t>>16&255,t>>8&255,255&t,r>>24&255,r>>16&255,r>>8&255,255&r,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return e.box(e.types.mvhd,i)}},{key:"sdtp",value:function(t){var r,i,a=t.samples||[],n=new Uint8Array(4+a.length);for(i=0;i<a.length;i++)r=a[i].flags,n[i+4]=r.dependsOn<<4|r.isDependedOn<<2|r.hasRedundancy;return e.box(e.types.sdtp,n)}},{key:"stbl",value:function(t){return e.box(e.types.stbl,e.stsd(t),e.box(e.types.stts,e.STTS),e.box(e.types.stsc,e.STSC),e.box(e.types.stsz,e.STSZ),e.box(e.types.stco,e.STCO));
}},{key:"avc1",value:function(t){var r,i,a,n=[],s=[];for(r=0;r<t.sps.length;r++)i=t.sps[r],a=i.byteLength,n.push(a>>>8&255),n.push(255&a),n=n.concat(Array.prototype.slice.call(i));for(r=0;r<t.pps.length;r++)i=t.pps[r],a=i.byteLength,s.push(a>>>8&255),s.push(255&a),s=s.concat(Array.prototype.slice.call(i));var o=e.box(e.types.avcC,new Uint8Array([1,n[3],n[4],n[5],255,224|t.sps.length].concat(n).concat([t.pps.length]).concat(s))),l=t.width,u=t.height;return e.box(e.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,255&l,u>>8&255,255&u,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o,e.box(e.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])))}},{key:"esds",value:function(e){var t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))}},{key:"mp4a",value:function(t){var r=t.audiosamplerate;return e.box(e.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]),e.box(e.types.esds,e.esds(t)))}},{key:"mp3",value:function(t){var r=t.audiosamplerate;return e.box(e.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]))}},{key:"stsd",value:function(t){return"audio"===t.type?t.isAAC||"mp3"!==t.codec?e.box(e.types.stsd,e.STSD,e.mp4a(t)):e.box(e.types.stsd,e.STSD,e.mp3(t)):e.box(e.types.stsd,e.STSD,e.avc1(t))}},{key:"tkhd",value:function(t){var r=t.id,i=t.duration*t.timescale,a=t.width,n=t.height;return e.box(e.types.tkhd,new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,r>>24&255,r>>16&255,r>>8&255,255&r,0,0,0,0,i>>24,i>>16&255,i>>8&255,255&i,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,a>>8&255,255&a,0,0,n>>8&255,255&n,0,0]))}},{key:"traf",value:function(t,r){var i=e.sdtp(t),a=t.id;return e.box(e.types.traf,e.box(e.types.tfhd,new Uint8Array([0,0,0,0,a>>24,a>>16&255,a>>8&255,255&a])),e.box(e.types.tfdt,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r])),e.trun(t,i.length+16+16+8+16+8+8),i)}},{key:"trak",value:function(t){return t.duration=t.duration||4294967295,e.box(e.types.trak,e.tkhd(t),e.mdia(t))}},{key:"trex",value:function(t){var r=t.id;return e.box(e.types.trex,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}},{key:"trun",value:function(t,r){var i,a,n,s,o,l,u=t.samples||[],d=u.length,f=12+16*d,h=new Uint8Array(f);for(r+=8+f,h.set([0,0,15,1,d>>>24&255,d>>>16&255,d>>>8&255,255&d,r>>>24&255,r>>>16&255,r>>>8&255,255&r],0),i=0;i<d;i++)a=u[i],n=a.duration,s=a.size,o=a.flags,l=a.cts,h.set([n>>>24&255,n>>>16&255,n>>>8&255,255&n,s>>>24&255,s>>>16&255,s>>>8&255,255&s,o.isLeading<<2|o.dependsOn,o.isDependedOn<<6|o.hasRedundancy<<4|o.paddingValue<<1|o.isNonSync,61440&o.degradPrio,15&o.degradPrio,l>>>24&255,l>>>16&255,l>>>8&255,255&l],12+16*i);return e.box(e.types.trun,h)}},{key:"initSegment",value:function(t){e.types||e.init();var r,i=e.moov(t);return r=new Uint8Array(e.FTYP.byteLength+i.byteLength),r.set(e.FTYP),r.set(i,e.FTYP.byteLength),r}}]),e}();t.default=a},function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),s=r(33),o=i(s),l=r(2),u=i(l),d=r(1),f=r(39),h=i(f),c=r(3);r(46);var v=function(){function e(t,r,i,n){a(this,e),this.observer=t,this.id=r,this.config=i,this.typeSupported=n,this.ISGenerated=!1,this.PES2MP4SCALEFACTOR=4,this.PES_TIMESCALE=9e4,this.MP4_TIMESCALE=this.PES_TIMESCALE/this.PES2MP4SCALEFACTOR}return n(e,[{key:"destroy",value:function(){}},{key:"insertDiscontinuity",value:function(){this._initPTS=this._initDTS=void 0}},{key:"switchLevel",value:function(){this.ISGenerated=!1}},{key:"remux",value:function(e,t,r,i,a,n,s,o,l){if(this.level=e,this.sn=t,this.ISGenerated||this.generateIS(r,i,s),this.ISGenerated)if(r.samples.length){var d=this.remuxAudio(r,s,o,l);if(i.samples.length){var f=void 0;d&&(f=d.endPTS-d.startPTS),this.remuxVideo(i,s,o,f)}}else{var h=void 0;i.samples.length&&(h=this.remuxVideo(i,s,o)),h&&r.codec&&this.remuxEmptyAudio(r,s,o,h)}a.samples.length&&this.remuxID3(a,s),n.samples.length&&this.remuxText(n,s),this.observer.trigger(u.default.FRAG_PARSED,{id:this.id,level:this.level,sn:this.sn})}},{key:"generateIS",value:function(e,t,r){var i,a,n=this.observer,s=e.samples,o=t.samples,l=this.PES_TIMESCALE,f=this.typeSupported,v="audio/mp4",p={},g={id:this.id,level:this.level,sn:this.sn,tracks:p,unique:!1},y=void 0===this._initPTS;y&&(i=a=1/0),e.config&&s.length&&(e.timescale=e.audiosamplerate,e.timescale*e.duration>Math.pow(2,32)&&!function(){var t=function e(t,r){return r?e(r,t%r):t};e.timescale=e.audiosamplerate/t(e.audiosamplerate,e.isAAC?1024:1152)}(),d.logger.log("audio mp4 timescale :"+e.timescale),e.isAAC||(f.mpeg===!0?(v="audio/mpeg",e.codec=""):f.mp3===!0&&(e.codec="mp3")),p.audio={container:v,codec:e.codec,initSegment:h.default.initSegment([e]),metadata:{channelCount:e.channelCount}},y&&(i=a=s[0].pts-l*r)),t.sps&&t.pps&&o.length&&(t.timescale=this.MP4_TIMESCALE,p.video={container:"video/mp4",codec:t.codec,initSegment:h.default.initSegment([t]),metadata:{width:t.width,height:t.height}},y&&(i=Math.min(i,o[0].pts-l*r),a=Math.min(a,o[0].dts-l*r))),Object.keys(p).length?(n.trigger(u.default.FRAG_PARSING_INIT_SEGMENT,g),this.ISGenerated=!0,y&&(this._initPTS=i,this._initDTS=a)):n.trigger(u.default.ERROR,{type:c.ErrorTypes.MEDIA_ERROR,id:this.id,details:c.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})}},{key:"remuxVideo",value:function(e,t,r,i){var a,n,s,o,l,f,c,v,p=8,g=this.PES_TIMESCALE,y=this.PES2MP4SCALEFACTOR,m=e.samples,E=[];m.sort(function(e,t){return e.dts-t.dts});var b=m.reduce(function(e,t){return Math.max(Math.min(e,t.pts-t.dts),-18e3)},0);if(b<0){d.logger.warn("PTS < DTS detected in video samples, shifting DTS by "+Math.round(b/90)+" ms to overcome this issue");for(var k=0;k<m.length;k++)m[k].dts+=b}var R=void 0;R=r?this.nextAvcDts:t*g;var _=m[0];l=Math.max(this._PTSNormalize(_.dts-this._initDTS,R),0),o=Math.max(this._PTSNormalize(_.pts-this._initDTS,R),0);var S=Math.round((l-R)/90);r&&S&&(S>1?d.logger.log("AVC:"+S+" ms hole between fragments detected,filling it"):S<-1&&d.logger.log("AVC:"+-S+" ms overlapping between fragments detected"),l=R,m[0].dts=l+this._initDTS,o=Math.max(o-S,R),m[0].pts=o+this._initDTS,d.logger.log("Video/PTS/DTS adjusted: "+Math.round(o/90)+"/"+Math.round(l/90)+",delta:"+S+" ms")),f=l,_=m[m.length-1],v=Math.max(this._PTSNormalize(_.dts-this._initDTS,R),0),c=Math.max(this._PTSNormalize(_.pts-this._initDTS,R),0),c=Math.max(c,v);var T=navigator.vendor,A=navigator.userAgent,L=T&&T.indexOf("Apple")>-1&&A&&!A.match("CriOS");L&&(a=Math.round((v-l)/(y*(m.length-1))));for(var w=0;w<m.length;w++){var D=m[w];L?D.dts=l+w*y*a:(D.dts=Math.max(this._PTSNormalize(D.dts-this._initDTS,R),l),D.dts=Math.round(D.dts/y)*y),D.pts=Math.max(this._PTSNormalize(D.pts-this._initDTS,R),D.dts),D.pts=Math.round(D.pts/y)*y}n=new Uint8Array(e.len+4*e.nbNalu+8);var O=new DataView(n.buffer);O.setUint32(0,n.byteLength),n.set(h.default.types.mdat,4);for(var C=0;C<m.length;C++){for(var P=m[C],I=0,x=void 0;P.units.units.length;){var M=P.units.units.shift();O.setUint32(p,M.data.byteLength),p+=4,n.set(M.data,p),p+=M.data.byteLength,I+=4+M.data.byteLength}if(L)x=Math.max(0,a*Math.round((P.pts-P.dts)/(y*a)));else{if(C<m.length-1)a=m[C+1].dts-P.dts;else{var N=this.config,F=P.dts-m[C>0?C-1:C].dts;if(N.stretchShortVideoTrack){var U=N.maxBufferHole,G=N.maxSeekHole,B=Math.floor(Math.min(U,G)*g),j=(i?o+i*g:this.nextAacPts)-P.pts;j>B?(a=j-F,a<0&&(a=F),d.logger.log("It is approximately "+j/90+" ms to the next segment; using duration "+a/90+" ms for the last video frame.")):a=F}else a=F}a/=y,x=Math.round((P.pts-P.dts)/y)}E.push({size:I,duration:a,cts:x,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:P.key?2:1,isNonSync:P.key?0:1}})}this.nextAvcDts=v+a*y;var H=e.dropped;if(e.len=0,e.nbNalu=0,e.dropped=0,E.length&&navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var K=E[0].flags;K.dependsOn=2,K.isNonSync=0}e.samples=E,s=h.default.moof(e.sequenceNumber++,l/y,e),e.samples=[];var W={id:this.id,level:this.level,sn:this.sn,data1:s,data2:n,startPTS:o/g,endPTS:(c+y*a)/g,startDTS:l/g,endDTS:this.nextAvcDts/g,type:"video",nb:E.length,dropped:H};return this.observer.trigger(u.default.FRAG_PARSING_DATA,W),W}},{key:"remuxAudio",value:function(e,t,r,i){var a,n,s,l,f,c,v,p,g,y,m,E,b,k,R,_,S=this.PES_TIMESCALE,T=e.timescale,A=S/T,L=e.timescale*(e.isAAC?1024:1152)/e.audiosamplerate,w=L*A,D=8,O=[],C=[];if(e.samples.sort(function(e,t){return e.pts-t.pts}),C=e.samples,_=this.nextAacPts,r|=C.length&&_&&(Math.abs(t-_/S)<.1||Math.abs(C[0].pts-_-this._initDTS)<20*w),r||(_=t*S),i&&e.isAAC)for(var P=0,I=_;P<C.length;){var x=C[P],M=this._PTSNormalize(x.pts-this._initDTS,_),N=M-I;if(N<=-w)d.logger.warn("Dropping 1 audio frame @ "+Math.round(I/90)/1e3+"s due to "+Math.round(Math.abs(N/90))+" ms overlap."),C.splice(P,1),e.len-=x.unit.length;else if(N>=w){var F=Math.round(N/w);d.logger.warn("Injecting "+F+" audio frame @ "+Math.round(I/90)/1e3+"s due to "+Math.round(N/90)+" ms gap.");for(var U=0;U<F;U++)R=I+this._initDTS,R=Math.max(R,this._initDTS),k=o.default.getSilentFrame(e.channelCount),k||(d.logger.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),k=x.unit.slice(0)),C.splice(P,0,{unit:k,pts:R,dts:R}),e.len+=k.length,I+=w,P+=1;x.pts=x.dts=I+this._initDTS,I+=w,P+=1}else Math.abs(N)>.1*w,I+=w,0===P?x.pts=x.dts=this._initDTS+_:x.pts=x.dts=C[P-1].pts+w,P+=1}for(;C.length;){if(n=C.shift(),l=n.unit,y=n.pts-this._initDTS,m=n.dts-this._initDTS,void 0!==g)E=this._PTSNormalize(y,g),b=this._PTSNormalize(m,g),s.duration=Math.round((b-g)/A);else{E=this._PTSNormalize(y,_),b=this._PTSNormalize(m,_);var G=Math.round(1e3*(E-_)/S),B=0;if(r&&G){if(G>0)B=Math.round((E-_)/w),d.logger.log(G+" ms hole between AAC samples detected,filling it"),B>0&&(k=o.default.getSilentFrame(e.channelCount),k||(k=l.slice(0)),e.len+=B*k.length);else if(G<-12){d.logger.log(-G+" ms overlapping between AAC samples detected, drop frame"),e.len-=l.byteLength;continue}E=b=_}if(v=Math.max(0,E),p=Math.max(0,b),!(e.len>0))return;f=new Uint8Array(e.len+8),a=new DataView(f.buffer),a.setUint32(0,f.byteLength),f.set(h.default.types.mdat,4);for(var j=0;j<B;j++)R=E-(B-j)*w,k=o.default.getSilentFrame(e.channelCount),k||(d.logger.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),k=l.slice(0)),f.set(k,D),D+=k.byteLength,s={size:k.byteLength,cts:0,duration:e.isAAC?1024:1152,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},O.push(s)}f.set(l,D),D+=l.byteLength,s={size:l.byteLength,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},O.push(s),g=b}var H=0,K=O.length;if(K>=2&&(H=O[K-2].duration,s.duration=H),K){this.nextAacPts=E+A*H,e.len=0,e.samples=O,c=h.default.moof(e.sequenceNumber++,p/A,e),e.samples=[];var W={id:this.id,level:this.level,sn:this.sn,data1:c,data2:f,startPTS:v/S,endPTS:this.nextAacPts/S,startDTS:p/S,endDTS:(b+A*H)/S,type:"audio",nb:K};return this.observer.trigger(u.default.FRAG_PARSING_DATA,W),W}return null}},{key:"remuxEmptyAudio",value:function(e,t,r,i){var a=this.PES_TIMESCALE,n=e.timescale?e.timescale:e.audiosamplerate,s=a/n,l=this.nextAacPts,u=(void 0!==l?l:i.startDTS*a)+this._initDTS,f=i.endDTS*a+this._initDTS,h=1024,c=s*h,v=Math.ceil((f-u)/c),p=o.default.getSilentFrame(e.channelCount);if(d.logger.warn("remux empty Audio"),!p)return void d.logger.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!");for(var g=[],y=0;y<v;y++){var m=u+y*c;g.push({unit:p.slice(0),pts:m,dts:m}),e.len+=p.length}e.samples=g,this.remuxAudio(e,t,r)}},{key:"remuxID3",value:function(e,t){var r,i=e.samples.length;if(i){for(var a=0;a<i;a++)r=e.samples[a],r.pts=(r.pts-this._initPTS)/this.PES_TIMESCALE,r.dts=(r.dts-this._initDTS)/this.PES_TIMESCALE;this.observer.trigger(u.default.FRAG_PARSING_METADATA,{id:this.id,level:this.level,sn:this.sn,samples:e.samples})}e.samples=[],t=t}},{key:"remuxText",value:function(e,t){e.samples.sort(function(e,t){return e.pts-t.pts});var r,i=e.samples.length;if(i){for(var a=0;a<i;a++)r=e.samples[a],r.pts=(r.pts-this._initPTS)/this.PES_TIMESCALE;this.observer.trigger(u.default.FRAG_PARSING_USERDATA,{id:this.id,level:this.level,sn:this.sn,samples:e.samples})}e.samples=[],t=t}},{key:"_PTSNormalize",value:function(e,t){var r;if(void 0===t)return e;for(r=t<e?-8589934592:8589934592;Math.abs(e-t)>4294967296;)e+=r;return e}},{key:"passthrough",get:function(){return!1}}]),e}();t.default=v},function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),s=r(2),o=i(s),l=function(){function e(t,r){a(this,e),this.observer=t,this.id=r,this.ISGenerated=!1}return n(e,[{key:"destroy",value:function(){}},{key:"insertDiscontinuity",value:function(){}},{key:"switchLevel",value:function(){this.ISGenerated=!1}},{key:"remux",value:function(e,t,r,i,a,n){var s=this.observer;if(!this.ISGenerated){var l={},u={id:this.id,tracks:l,unique:!0},d=t,f=d.codec;f&&(u.tracks.video={container:d.container,codec:f,metadata:{width:d.width,height:d.height}}),d=e,f=d.codec,f&&(u.tracks.audio={container:d.container,codec:f,metadata:{channelCount:d.channelCount}}),this.ISGenerated=!0,s.trigger(o.default.FRAG_PARSING_INIT_SEGMENT,u)}s.trigger(o.default.FRAG_PARSING_DATA,{id:this.id,data1:n,startPTS:a,startDTS:a,type:"audiovideo",nb:1,dropped:0})}},{key:"passthrough",get:function(){return!0}}]),e}();t.default=l},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),a=/^(\d+)x(\d+)$/,n=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,s=function(){function e(t){r(this,e),"string"==typeof t&&(t=e.parseAttrList(t));for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i])}return i(e,[{key:"decimalInteger",value:function(e){var t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t}},{key:"hexadecimalInteger",value:function(e){if(this[e]){var t=(this[e]||"0x").slice(2);t=(1&t.length?"0":"")+t;for(var r=new Uint8Array(t.length/2),i=0;i<t.length/2;i++)r[i]=parseInt(t.slice(2*i,2*i+2),16);return r}return null}},{key:"hexadecimalIntegerAsNumber",value:function(e){var t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t}},{key:"decimalFloatingPoint",value:function(e){return parseFloat(this[e])}},{key:"enumeratedString",value:function(e){return this[e]}},{key:"decimalResolution",value:function(e){var t=a.exec(this[e]);if(null!==t)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}}}],[{key:"parseAttrList",value:function(e){var t,r={};for(n.lastIndex=0;null!==(t=n.exec(e));){var i=t[2],a='"';0===i.indexOf(a)&&i.lastIndexOf(a)===i.length-1&&(i=i.slice(1,-1)),r[t[1]]=i}return r}}]),e}();t.default=s},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),a={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},n=function(e){var t=e;return a.hasOwnProperty(e)&&(t=a[e]),String.fromCharCode(t)},s=15,o=32,l={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},u={17:2,18:4,21:6,22:8,23:10,19:13,20:15},d={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},f={25:2,26:4,29:6,30:8,31:10,27:13,28:15},h=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],c={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(e){this.time=e},log:function(e,t){var r=this.verboseFilter[e];this.verboseLevel>=r&&console.log(this.time+" ["+e+"] "+t)}},v=function(e){for(var t=[],r=0;r<e.length;r++)t.push(e[r].toString(16));return t},p=function(){function e(t,i,a,n,s){r(this,e),this.foreground=t||"white",this.underline=i||!1,this.italics=a||!1,this.background=n||"black",this.flash=s||!1}return i(e,[{key:"reset",value:function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}},{key:"setStyles",value:function(e){for(var t=["foreground","underline","italics","background","flash"],r=0;r<t.length;r++){var i=t[r];e.hasOwnProperty(i)&&(this[i]=e[i])}}},{key:"isDefault",value:function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash}},{key:"equals",value:function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash}},{key:"copy",value:function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash}},{key:"toString",value:function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}]),e}(),g=function(){function e(t,i,a,n,s,o){r(this,e),this.uchar=t||" ",this.penState=new p(i,a,n,s,o)}return i(e,[{key:"reset",value:function(){this.uchar=" ",this.penState.reset()}},{key:"setChar",value:function(e,t){this.uchar=e,this.penState.copy(t)}},{key:"setPenState",value:function(e){this.penState.copy(e)}},{key:"equals",value:function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)}},{key:"copy",value:function(e){this.uchar=e.uchar,this.penState.copy(e.penState)}},{key:"isEmpty",value:function(){return" "===this.uchar&&this.penState.isDefault()}}]),e}(),y=function(){function e(){r(this,e),this.chars=[];for(var t=0;t<o;t++)this.chars.push(new g);this.pos=0,this.currPenState=new p}return i(e,[{key:"equals",value:function(e){for(var t=!0,r=0;r<o;r++)if(!this.chars[r].equals(e.chars[r])){t=!1;break}return t}},{key:"copy",value:function(e){for(var t=0;t<o;t++)this.chars[t].copy(e.chars[t])}},{key:"isEmpty",value:function(){for(var e=!0,t=0;t<o;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e}},{key:"setCursor",value:function(e){this.pos!==e&&(this.pos=e),this.pos<0?(c.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>o&&(c.log("ERROR","Too large cursor position "+this.pos),this.pos=o)}},{key:"moveCursor",value:function(e){var t=this.pos+e;if(e>1)for(var r=this.pos+1;r<t+1;r++)this.chars[r].setPenState(this.currPenState);this.setCursor(t)}},{key:"backSpace",value:function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}},{key:"insertChar",value:function(e){e>=144&&this.backSpace();var t=n(e);return this.pos>=o?void c.log("ERROR","Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(t,this.currPenState),void this.moveCursor(1))}},{key:"clearFromPos",value:function(e){var t;for(t=e;t<o;t++)this.chars[t].reset()}},{key:"clear",value:function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}},{key:"clearToEndOfRow",value:function(){this.clearFromPos(this.pos)}},{key:"getTextString",value:function(){for(var e=[],t=!0,r=0;r<o;r++){var i=this.chars[r].uchar;" "!==i&&(t=!1),e.push(i)}return t?"":e.join("")}},{key:"setPenStyles",value:function(e){this.currPenState.setStyles(e);var t=this.chars[this.pos];t.setPenState(this.currPenState)}}]),e}(),m=function(){function e(){r(this,e),this.rows=[];for(var t=0;t<s;t++)this.rows.push(new y);this.currRow=s-1,this.nrRollUpRows=null,this.reset()}return i(e,[{key:"reset",value:function(){for(var e=0;e<s;e++)this.rows[e].clear();this.currRow=s-1}},{key:"equals",value:function(e){for(var t=!0,r=0;r<s;r++)if(!this.rows[r].equals(e.rows[r])){t=!1;break}return t}},{key:"copy",value:function(e){for(var t=0;t<s;t++)this.rows[t].copy(e.rows[t])}},{key:"isEmpty",value:function(){for(var e=!0,t=0;t<s;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e}},{key:"backSpace",value:function(){var e=this.rows[this.currRow];e.backSpace()}},{key:"clearToEndOfRow",value:function(){var e=this.rows[this.currRow];e.clearToEndOfRow()}},{key:"insertChar",value:function(e){var t=this.rows[this.currRow];t.insertChar(e)}},{key:"setPen",value:function(e){var t=this.rows[this.currRow];t.setPenStyles(e)}},{key:"moveCursor",value:function(e){var t=this.rows[this.currRow];t.moveCursor(e)}},{key:"setCursor",value:function(e){c.log("INFO","setCursor: "+e);var t=this.rows[this.currRow];t.setCursor(e)}},{key:"setPAC",value:function(e,t){c.log("INFO","pacData = "+JSON.stringify(e));var r=e.row-1;if(this.nrRollUpRows&&r<this.nrRollUpRows-1&&(r=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==r){for(var i=0;i<s;i++)this.rows[i].clear();var a=this.currRow+1-this.nrRollUpRows,n=t.rows[a].cueStartTime;if(n&&n<c.time)for(i=0;i<this.nrRollUpRows;i++)this.rows[r-this.nrRollUpRows+i+1].copy(t.rows[a+i])}this.currRow=r;var o=this.rows[this.currRow];if(null!==e.indent){var l=e.indent,u=Math.max(l-1,0);o.setCursor(e.indent),e.color=o.chars[u].penState.foreground}var d={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(d)}},{key:"setBkgData",value:function(e){c.log("INFO","bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)}},{key:"setRollUpRows",value:function(e){this.nrRollUpRows=e}},{key:"rollUp",value:function(){if(null===this.nrRollUpRows)return void c.log("DEBUG","roll_up but nrRollUpRows not set yet");c.log("TEXT",this.getDisplayText());var e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),c.log("INFO","Rolling up")}},{key:"getDisplayText",value:function(e){e=e||!1;for(var t=[],r="",i=-1,a=0;a<s;a++){var n=this.rows[a].getTextString();n&&(i=a+1,e?t.push("Row "+i+": '"+n+"'"):t.push(n.trim()))}return t.length>0&&(r=e?"["+t.join(" | ")+"]":t.join("\n")),r}},{key:"getTextAndFormat",value:function(){return this.rows}}]),e}(),E=function(){function e(t,i){r(this,e),this.chNr=t,this.outputFilter=i,this.mode=null,this.verbose=0,this.displayedMemory=new m,this.nonDisplayedMemory=new m,this.lastOutputScreen=new m,this.currRollUpRow=this.displayedMemory.rows[s-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}return i(e,[{key:"reset",value:function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[s-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null}},{key:"getHandler",value:function(){return this.outputFilter}},{key:"setHandler",value:function(e){this.outputFilter=e}},{key:"setPAC",value:function(e){this.writeScreen.setPAC(e,this.lastOutputScreen)}},{key:"setBkgData",value:function(e){this.writeScreen.setBkgData(e)}},{key:"setMode",value:function(e){e!==this.mode&&(this.mode=e,c.log("INFO","MODE="+e),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset(),this.lastOutputScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)}},{key:"insertChars",value:function(e){for(var t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);var r=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";c.log("INFO",r+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(c.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())}},{key:"ccRCL",value:function(){c.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}},{key:"ccBS",value:function(){c.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}},{key:"ccAOF",value:function(){}},{key:"ccAON",value:function(){}},{key:"ccDER",value:function(){c.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}},{key:"ccRU",value:function(e){c.log("INFO","RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)}},{key:"ccFON",value:function(){c.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})}},{key:"ccRDC",value:function(){c.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}},{key:"ccTR",value:function(){c.log("INFO","TR"),this.setMode("MODE_TEXT")}},{key:"ccRTD",value:function(){c.log("INFO","RTD"),this.setMode("MODE_TEXT")}},{key:"ccEDM",value:function(){c.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate()}},{key:"ccCR",value:function(){c.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate()}},{key:"ccENM",value:function(){c.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}},{key:"ccEOC",value:function(){if(c.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,c.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate()}},{key:"ccTO",value:function(e){c.log("INFO","TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)}},{key:"ccMIDROW",value:function(e){var t={flash:!1};if(t.underline=e%2===1,t.italics=e>=46,t.italics)t.foreground="white";else{var r=Math.floor(e/2)-16,i=["white","green","blue","cyan","red","yellow","magenta"];t.foreground=i[r]}c.log("INFO","MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)}},{key:"outputDataUpdate",value:function(){var e=c.time;null!==e&&this.outputFilter&&(this.outputFilter.updateData&&this.outputFilter.updateData(e,this.displayedMemory),null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.lastOutputScreen),this.cueStartTime=this.displayedMemory.isEmpty()?null:e):this.cueStartTime=e,this.lastOutputScreen.copy(this.displayedMemory))}},{key:"cueSplitAtTime",value:function(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}}]),e}(),b=function(){function e(t,i,a){r(this,e),this.field=t||1,this.outputs=[i,a],this.channels=[new E(1,i),new E(2,a)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}}return i(e,[{key:"getHandler",value:function(e){return this.channels[e].getHandler()}},{key:"setHandler",value:function(e,t){this.channels[e].setHandler(t)}},{key:"addData",value:function(e,t){var r,i,a,n=!1;this.lastTime=e,c.setTime(e);for(var s=0;s<t.length;s+=2)if(i=127&t[s],a=127&t[s+1],0!==i||0!==a){if(c.log("DATA","["+v([t[s],t[s+1]])+"] -> ("+v([i,a])+")"),r=this.parseCmd(i,a),r||(r=this.parseMidrow(i,a)),r||(r=this.parsePAC(i,a)),r||(r=this.parseBackgroundAttributes(i,a)),!r&&(n=this.parseChars(i,a)))if(this.currChNr&&this.currChNr>=0){var o=this.channels[this.currChNr-1];o.insertChars(n)}else c.log("WARNING","No channel found yet. TEXT-MODE?");r?this.dataCounters.cmd+=2:n?this.dataCounters.char+=2:(this.dataCounters.other+=2,c.log("WARNING","Couldn't parse cleaned data "+v([i,a])+" orig: "+v([t[s],t[s+1]])))}else this.dataCounters.padding+=2}},{key:"parseCmd",value:function(e,t){var r=null,i=(20===e||28===e)&&32<=t&&t<=47,a=(23===e||31===e)&&33<=t&&t<=35;if(!i&&!a)return!1;if(e===this.lastCmdA&&t===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,c.log("DEBUG","Repeated command ("+v([e,t])+") is dropped"),!0;r=20===e||23===e?1:2;var n=this.channels[r-1];return 20===e||28===e?32===t?n.ccRCL():33===t?n.ccBS():34===t?n.ccAOF():35===t?n.ccAON():36===t?n.ccDER():37===t?n.ccRU(2):38===t?n.ccRU(3):39===t?n.ccRU(4):40===t?n.ccFON():41===t?n.ccRDC():42===t?n.ccTR():43===t?n.ccRTD():44===t?n.ccEDM():45===t?n.ccCR():46===t?n.ccENM():47===t&&n.ccEOC():n.ccTO(t-32),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=r,!0}},{key:"parseMidrow",value:function(e,t){var r=null;if((17===e||25===e)&&32<=t&&t<=47){if(r=17===e?1:2,r!==this.currChNr)return c.log("ERROR","Mismatch channel in midrow parsing"),!1;var i=this.channels[r-1];return i.ccMIDROW(t),c.log("DEBUG","MIDROW ("+v([e,t])+")"),!0}return!1}},{key:"parsePAC",value:function(e,t){var r=null,i=null,a=(17<=e&&e<=23||25<=e&&e<=31)&&64<=t&&t<=127,n=(16===e||24===e)&&64<=t&&t<=95;if(!a&&!n)return!1;if(e===this.lastCmdA&&t===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,!0;r=e<=23?1:2,i=64<=t&&t<=95?1===r?l[e]:d[e]:1===r?u[e]:f[e];var s=this.interpretPAC(i,t),o=this.channels[r-1];return o.setPAC(s),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=r,!0}},{key:"interpretPAC",value:function(e,t){var r=t,i={color:null,italics:!1,indent:null,underline:!1,row:e};return r=t>95?t-96:t-64,i.underline=1===(1&r),r<=13?i.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(r/2)]:r<=15?(i.italics=!0,i.color="white"):i.indent=4*Math.floor((r-16)/2),i}},{key:"parseChars",value:function(e,t){var r=null,i=null,a=null;if(e>=25?(r=2,a=e-8):(r=1,a=e),17<=a&&a<=19){var s=t;s=17===a?t+80:18===a?t+112:t+144,c.log("INFO","Special char '"+n(s)+"' in channel "+r),i=[s]}else 32<=e&&e<=127&&(i=0===t?[e]:[e,t]);if(i){var o=v(i);c.log("DEBUG","Char codes =  "+o.join(",")),this.lastCmdA=null,this.lastCmdB=null}return i}},{key:"parseBackgroundAttributes",value:function(e,t){var r,i,a,n,s=(16===e||24===e)&&32<=t&&t<=47,o=(23===e||31===e)&&45<=t&&t<=47;return!(!s&&!o)&&(r={},16===e||24===e?(i=Math.floor((t-32)/2),r.background=h[i],t%2===1&&(r.background=r.background+"_semi")):45===t?r.background="transparent":(r.foreground="black",47===t&&(r.underline=!0)),a=e<24?1:2,n=this.channels[a-1],n.setBkgData(r),this.lastCmdA=null,this.lastCmdB=null,!0)}},{key:"reset",value:function(){for(var e=0;e<this.channels.length;e++)this.channels[e]&&this.channels[e].reset();
this.lastCmdA=null,this.lastCmdB=null}},{key:"cueSplitAtTime",value:function(e){for(var t=0;t<this.channels.length;t++)this.channels[t]&&this.channels[t].cueSplitAtTime(e)}}]),e}();t.default=b},function(e,t){"use strict";var r={newCue:function(e,t,r,i){for(var a,n,s,o,l,u=window.VTTCue||window.TextTrackCue,d=0;d<i.rows.length;d++)if(a=i.rows[d],s=!0,o=0,l="",!a.isEmpty()){for(var f=0;f<a.chars.length;f++)a.chars[f].uchar.match(/\s/)&&s?o++:(l+=a.chars[f].uchar,s=!1);a.cueStartTime=t,n=new u(t,r,l.trim()),o>=16?o--:o++,navigator.userAgent.match(/Firefox\//)?n.line=d+1:n.line=d>7?d-2:d+1,n.align="left",n.position=Math.max(0,Math.min(100,100*(o/32)+(navigator.userAgent.match(/Firefox\//)?50:0))),e.addCue(n)}}};e.exports=r},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),a=function(){function e(t){r(this,e),this.alpha_=t?Math.exp(Math.log(.5)/t):0,this.estimate_=0,this.totalWeight_=0}return i(e,[{key:"sample",value:function(e,t){var r=Math.pow(this.alpha_,e);this.estimate_=t*(1-r)+r*this.estimate_,this.totalWeight_+=e}},{key:"getTotalWeight",value:function(){return this.totalWeight_}},{key:"getEstimate",value:function(){if(this.alpha_){var e=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/e}return this.estimate_}}]),e}();t.default=a},function(e,t){"use strict";"undefined"==typeof ArrayBuffer||ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=function(e,t){var r=new Uint8Array(this);void 0===t&&(t=r.length);for(var i=new ArrayBuffer(t-e),a=new Uint8Array(i),n=0;n<a.length;n++)a[n]=r[n+e];return i})},function(e,t,r){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),n=r(1),s=function(){function e(t){i(this,e),t&&t.xhrSetup&&(this.xhrSetup=t.xhrSetup)}return a(e,[{key:"destroy",value:function(){this.abort(),this.loader=null}},{key:"abort",value:function(){var e=this.loader;e&&4!==e.readyState&&(this.stats.aborted=!0,e.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null}},{key:"load",value:function(e,t,r){this.context=e,this.config=t,this.callbacks=r,this.stats={trequest:performance.now(),retry:0},this.retryDelay=t.retryDelay,this.loadInternal()}},{key:"loadInternal",value:function(){var e,t=this.context;e="undefined"!=typeof XDomainRequest?this.loader=new XDomainRequest:this.loader=new XMLHttpRequest,e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.open("GET",t.url,!0),t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.responseType=t.responseType;var r=this.stats;r.tfirst=0,r.loaded=0,this.xhrSetup&&this.xhrSetup(e,t.url),this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),e.send()}},{key:"readystatechange",value:function(e){var t=e.currentTarget,r=t.readyState,i=this.stats,a=this.context,s=this.config;if(!i.aborted&&(window.clearTimeout(this.requestTimeout),r>=2&&(0===i.tfirst&&(i.tfirst=Math.max(performance.now(),i.trequest),this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),s.timeout-(i.tfirst-i.trequest))),4===r))){var o=t.status;if(o>=200&&o<300){i.tload=Math.max(i.tfirst,performance.now());var l=void 0,u=void 0;"arraybuffer"===a.responseType?(l=t.response,u=l.byteLength):(l=t.responseText,u=l.length),i.loaded=i.total=u;var d={url:t.responseURL,data:l};this.callbacks.onSuccess(d,i,a)}else i.retry>=s.maxRetry||o>=400&&o<499?(n.logger.error(o+" while loading "+a.url),this.callbacks.onError({code:o,text:t.statusText},a)):(n.logger.warn(o+" while loading "+a.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,s.maxRetryDelay),i.retry++)}}},{key:"loadtimeout",value:function(){n.logger.warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context)}},{key:"loadprogress",value:function(e){var t=this.stats;t.loaded=e.loaded,e.lengthComputable&&(t.total=e.total);var r=this.callbacks.onProgress;r&&r(t,this.context,null)}}]),e}();t.default=s},function(e,t,r){!function(t){var r={buildAbsoluteURL:function(e,t){if(t=t.trim(),/^[a-z]+:/i.test(t))return t;var i=null,a=null,n=/^([^#]*)(.*)$/.exec(t);n&&(a=n[2],t=n[1]);var s=/^([^\?]*)(.*)$/.exec(t);s&&(i=s[2],t=s[1]);var o=/^([^#]*)(.*)$/.exec(e);o&&(e=o[1]);var l=/^([^\?]*)(.*)$/.exec(e);l&&(e=l[1]);var u=/^(([a-z]+:)?\/\/[a-z0-9\.\-_~]+(:[0-9]+)?)?(\/.*)$/i.exec(e);if(!u)throw new Error("Error trying to parse base URL.");var d=u[2]||"",f=u[1]||"",h=u[4],c=null;return c=/^\/\//.test(t)?d+"//"+r.buildAbsolutePath("",t.substring(2)):/^\//.test(t)?f+"/"+r.buildAbsolutePath("",t.substring(1)):r.buildAbsolutePath(f+h,t),i&&(c+=i),a&&(c+=a),c},buildAbsolutePath:function(e,t){for(var r,i,a=t,n="",s=e.replace(/[^\/]*$/,a.replace(/(\/|^)(?:\.?\/+)+/g,"$1")),o=0;i=s.indexOf("/../",o),i>-1;o=i+r)r=/^\/(?:\.\.\/)*/.exec(s.slice(i))[0].length,n=(n+s.substring(o,i)).replace(new RegExp("(?:\\/+[^\\/]*){0,"+(r-1)/3+"}$"),"/");return n+s.substr(o)}};e.exports=r}(this)},function(e,t){function r(e){return(e+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}var i=arguments[2],a=i.m,n=i.s||"0",s=arguments[0].id||arguments[0].i,o=function(e){function t(i){if(r[i])return r[i].exports;var a=r[i]={exports:{},id:i,loaded:!1};return e[i].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var r={};t.m=e,t.c=r,t.oe=function(e){throw e},t.p="";var i=t(t.s=entryModule);return i.default||i};e.exports=function(e,t){for(var l,u=[],d=[n],f=Object.keys(a),h=0,c=f.length;h<c;h++){var v=f[h];if(a[v]){var p=a[v].toString();u[v]=p;var g=p.match(/^function\s?\(\w+,\s*\w+,\s*(\w+)\)/);if(g){var y=g[1];if(p.indexOf(y+"("+s+")")>-1)for(var m,E=new RegExp(r(y)+"\\((\\d+)\\)","g");m=E.exec(p);)m[1]!=""+s&&d.push(m[1])}}}var b=e.toString().replace(/"use strict";\n\n/,""),k=b.replace(/^function\s?\((.*)\)(\s?)\{(\n"use strict";\n)?/,"function($1)$2{"),R=b.replace(/^function\s?\((.*)\)(\s?)\{(\n"use strict";\n)?/,"function ($1)$2{"),l=d.find(function(t){var r=a[t].toString();if(r.indexOf(k)>-1||r.indexOf(R)>-1){var n=i(t);return(!n||n!==e&&n.default!==e)&&(u[t]=r.substring(0,r.length-1)+"\n"+b.match(/function\s?(.+?)\s?\(.*/)[1]+"();\n}"),!0}return!1});if("undefined"==typeof l)throw new Error("webworkify-webpack: Could not locate module containing worker function! Make sure you aren't using eval sourcemaps and that you pass named functions to webworkify-webpack!");var _="window = {};\nvar fn = ("+o.toString().replace("entryModule",l)+")(["+u.join(",")+']);\n(typeof fn === "function") && fn(self);',S=new Blob([_],{type:"text/javascript"});if(t&&t.bare)return S;var T=window.URL||window.webkitURL||window.mozURL||window.msURL,A=T.createObjectURL(S),L=new Worker(A);return L.objectURL=A,L}},function(e,t,r){var i=r(13);i(flowplayer)}]);
/*@
  @end
@*/
